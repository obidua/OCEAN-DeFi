const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/features-DwHMp9cj.js","assets/charts-BK1r30At.js","assets/vendor-CpL4RcAy.js","assets/embedded-wallet-DtGpeodY.js","assets/index-COWLB7hO.js","assets/index-e4RWVN-L.css","assets/email-B-ZDtt0J.js","assets/index-LqmshAXU.js","assets/socials-Cu1hm5Qw.js","assets/swaps-BzHGhrPM.js","assets/index-3qgoCBc1.js","assets/send-B2hIX8Jw.js","assets/index-DCDxw1Gr.js","assets/receive-BdK3_01G.js","assets/onramp-BIwrk1Vk.js","assets/pay-with-exchange-DhRRsG4t.js","assets/transactions-BXItoehe.js","assets/index-DEU1iuCO.js","assets/index-CcV-jtRG.js","assets/data-capture-DYKvC3UO.js","assets/w3m-modal-BzvtsJ5F.js"])))=>i.map(i=>d[i]);
var Sv=t=>{throw TypeError(t)};var zg=(t,e,n)=>e.has(t)||Sv("Cannot "+n);var Q=(t,e,n)=>(zg(t,e,"read from private field"),n?n.call(t):e.get(t)),Ze=(t,e,n)=>e.has(t)?Sv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ue=(t,e,n,r)=>(zg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Cn=(t,e,n)=>(zg(t,e,"access private method"),n);var uh=(t,e,n,r)=>({set _(s){Ue(t,e,s,n)},get _(){return Q(t,e,r)}});import{E as mP}from"./charts-BK1r30At.js";import{r as oa,g as Oc,c as dr,b as sS}from"./vendor-CpL4RcAy.js";var iS={exports:{}},O0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yP=oa,bP=Symbol.for("react.element"),wP=Symbol.for("react.fragment"),EP=Object.prototype.hasOwnProperty,vP=yP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AP={key:!0,ref:!0,__self:!0,__source:!0};function oS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)EP.call(e,r)&&!AP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bP,type:t,key:i,ref:o,props:s,_owner:vP.current}}O0.Fragment=wP;O0.jsx=oS;O0.jsxs=oS;iS.exports=O0;var CP=iS.exports;const _P=Symbol(),Xw=Symbol(),ud="a",aS="f",Iv="p",cS="c",uS="t",Qw="h",Cd="w",e1="o",t1="k";let SP=(t,e)=>new Proxy(t,e);const Hy=Object.getPrototypeOf,qy=new WeakMap,lS=t=>t&&(qy.has(t)?qy.get(t):Hy(t)===Object.prototype||Hy(t)===Array.prototype),Ep=t=>typeof t=="object"&&t!==null,IP=t=>Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable),xP=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(Hy(t),e)},TP=(t,e)=>{const n={[aS]:e};let r=!1;const s=(a,c)=>{if(!r){let u=n[ud].get(t);if(u||(u={},n[ud].set(t,u)),a===Cd)u[Cd]=!0;else{let l=u[a];l||(l=new Set,u[a]=l),l.add(c)}}},i=()=>{r=!0,n[ud].delete(t)},o={get(a,c){return c===Xw?t:(s(t1,c),NP(Reflect.get(a,c),n[ud],n[cS],n[uS]))},has(a,c){return c===_P?(i(),!0):(s(Qw,c),Reflect.has(a,c))},getOwnPropertyDescriptor(a,c){return s(e1,c),Reflect.getOwnPropertyDescriptor(a,c)},ownKeys(a){return s(Cd),Reflect.ownKeys(a)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,n]},n1=t=>t[Xw]||t,NP=(t,e,n,r)=>{if(!lS(t))return t;let s=r&&r.get(t);if(!s){const c=n1(t);IP(c)?s=[c,xP(c)]:s=[c],r==null||r.set(t,s)}const[i,o]=s;let a=n&&n.get(i);return(!a||a[1][aS]!==!!o)&&(a=TP(i,!!o),a[1][Iv]=SP(o||i,a[0]),n&&n.set(i,a)),a[1][ud]=e,a[1][cS]=n,a[1][uS]=r,a[1][Iv]},OP=(t,e)=>{const n=Reflect.ownKeys(t),r=Reflect.ownKeys(e);return n.length!==r.length||n.some((s,i)=>s!==r[i])},PP=(t,e,n,r,s=Object.is)=>{if(s(t,e))return!1;if(!Ep(t)||!Ep(e))return!0;const i=n.get(n1(t));if(!i)return!0;if(r){if(r.get(t)===e)return!1;r.set(t,e)}let o=null;for(const a of i[Qw]||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(i[Cd]===!0){if(o=OP(t,e),o)return o}else for(const a of i[e1]||[]){const c=!!Reflect.getOwnPropertyDescriptor(t,a),u=!!Reflect.getOwnPropertyDescriptor(e,a);if(o=c!==u,o)return o}for(const a of i[t1]||[])if(o=PP(t[a],e[a],n,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},RP=t=>lS(t)&&t[Xw]||null,xv=(t,e=!0)=>{qy.set(t,e)},wue=(t,e,n)=>{const r=[],s=new WeakSet,i=(o,a)=>{var c,u,l;if(s.has(o))return;Ep(o)&&s.add(o);const d=Ep(o)&&e.get(n1(o));if(d){if((c=d[Qw])===null||c===void 0||c.forEach(f=>{const h=`:has(${String(f)})`;r.push(a?[...a,h]:[h])}),d[Cd]===!0){const f=":ownKeys";r.push(a?[...a,f]:[f])}else(u=d[e1])===null||u===void 0||u.forEach(f=>{const h=`:hasOwn(${String(f)})`;r.push(a?[...a,h]:[h])});(l=d[t1])===null||l===void 0||l.forEach(f=>{"value"in(Object.getOwnPropertyDescriptor(o,f)||{})&&i(o[f],a?[...a,f]:[f])})}else a&&r.push(a)};return i(t),r},vp={},r1=t=>typeof t=="object"&&t!==null,$P=t=>r1(t)&&!Of.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),dS=(t,e)=>{const n=zy.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return xv(r,!0),zy.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Of.has(i))xv(i,!1);else if(aa.has(i)){const[c,u]=aa.get(i);a.value=dS(c,u())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},kP=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(Tv(u,o)||Bd.has(o)&&Tv(u,Bd.get(o))))return!0;n(i),r1(o)&&(o=RP(o)||o);const l=!aa.has(o)&&UP(o)?pt(o):o;return e(i,l),Reflect.set(s,i,l,a),r(["set",[i],o,u]),!0}}),aa=new WeakMap,Of=new WeakSet,zy=new WeakMap,tp=[1],Bd=new WeakMap;let Tv=Object.is,DP=(t,e)=>new Proxy(t,e),UP=$P,BP=dS,LP=kP;function pt(t={}){if(!r1(t))throw new Error("object required");const e=Bd.get(t);if(e)return e;let n=tp[0];const r=new Set,s=(y,C=++tp[0])=>{n!==C&&(i=n=C,r.forEach(N=>N(y,C)))};let i=n;const o=(y=tp[0])=>(i!==y&&(i=y,c.forEach(([C])=>{const N=C[1](y);N>n&&(n=N)})),n),a=y=>(C,N)=>{const E=[...C];E[1]=[y,...E[1]],s(E,N)},c=new Map,u=(y,C)=>{const N=!Of.has(C)&&aa.get(C);if(N){if((vp?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const E=N[2](a(y));c.set(y,[N,E])}else c.set(y,[N])}},l=y=>{var C;const N=c.get(y);N&&(c.delete(y),(C=N[1])==null||C.call(N))},d=y=>(r.add(y),r.size===1&&c.forEach(([N,E],A)=>{if((vp?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const _=N[2](a(A));c.set(A,[N,_])}),()=>{r.delete(y),r.size===0&&c.forEach(([N,E],A)=>{E&&(E(),c.set(A,[N]))})});let f=!0;const h=LP(()=>f,u,l,s),g=DP(t,h);Bd.set(t,g);const p=[t,o,d];return aa.set(g,p),Reflect.ownKeys(t).forEach(y=>{const C=Object.getOwnPropertyDescriptor(t,y);"value"in C&&C.writable&&(g[y]=t[y])}),f=!1,g}function Mt(t,e,n){const r=aa.get(t);(vp?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Ld(t){const e=aa.get(t);(vp?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return BP(n,r())}function Md(t){return Of.add(t),t}function MP(){return{proxyStateMap:aa,refSet:Of,snapCache:zy,versionHolder:tp,proxyCache:Bd}}function Ft(t,e,n,r){let s=t[e];return Mt(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:FP,snapCache:jP}=MP(),lh=t=>FP.has(t);function HP(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const u=jP.get(a),l=u==null?void 0:u[1];if(l&&!s.has(l)){const d=new Map(r);s.set(l,d)}},o=u=>s.get(u)||r,a={data:e,index:n,epoch:0,get size(){return lh(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!lh(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(u);return d===void 0?(r.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!lh(this))throw new Error("Cannot perform mutations on a snapshot");const l=r.get(u);return l===void 0?!1:(delete this.data[l],r.delete(u),this.epoch++,!0)},clear(){if(!lh(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=pt(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var fS={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(dr,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",u="day",l="week",d="month",f="quarter",h="year",g="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var m=["th","st","nd","rd"],b=P%100;return"["+P+(m[(b-20)%10]||m[b]||m[0])+"]"}},E=function(P,m,b){var I=String(P);return!I||I.length>=m?P:""+Array(m+1-I.length).join(b)+P},A={s:E,z:function(P){var m=-P.utcOffset(),b=Math.abs(m),I=Math.floor(b/60),x=b%60;return(m<=0?"+":"-")+E(I,2,"0")+":"+E(x,2,"0")},m:function P(m,b){if(m.date()<b.date())return-P(b,m);var I=12*(b.year()-m.year())+(b.month()-m.month()),x=m.clone().add(I,d),S=b-x<0,R=m.clone().add(I+(S?-1:1),d);return+(-(I+(b-x)/(S?x-R:R-x))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:d,y:h,w:l,d:u,D:g,h:c,m:a,s:o,ms:i,Q:f}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},_="en",O={};O[_]=N;var $="$isDayjsObject",M=function(P){return P instanceof L||!(!P||!P[$])},D=function P(m,b,I){var x;if(!m)return _;if(typeof m=="string"){var S=m.toLowerCase();O[S]&&(x=S),b&&(O[S]=b,x=S);var R=m.split("-");if(!x&&R.length>1)return P(R[0])}else{var F=m.name;O[F]=m,x=F}return!I&&x&&(_=x),x||!I&&_},q=function(P,m){if(M(P))return P.clone();var b=typeof m=="object"?m:{};return b.date=P,b.args=arguments,new L(b)},j=A;j.l=D,j.i=M,j.w=function(P,m){return q(P,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var L=function(){function P(b){this.$L=D(b.locale,null,!0),this.parse(b),this.$x=this.$x||b.x||{},this[$]=!0}var m=P.prototype;return m.parse=function(b){this.$d=function(I){var x=I.date,S=I.utc;if(x===null)return new Date(NaN);if(j.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var R=x.match(y);if(R){var F=R[2]-1||0,z=(R[7]||"0").substring(0,3);return S?new Date(Date.UTC(R[1],F,R[3]||1,R[4]||0,R[5]||0,R[6]||0,z)):new Date(R[1],F,R[3]||1,R[4]||0,R[5]||0,R[6]||0,z)}}return new Date(x)}(b),this.init()},m.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},m.$utils=function(){return j},m.isValid=function(){return this.$d.toString()!==p},m.isSame=function(b,I){var x=q(b);return this.startOf(I)<=x&&x<=this.endOf(I)},m.isAfter=function(b,I){return q(b)<this.startOf(I)},m.isBefore=function(b,I){return this.endOf(I)<q(b)},m.$g=function(b,I,x){return j.u(b)?this[I]:this.set(x,b)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(b,I){var x=this,S=!!j.u(I)||I,R=j.p(b),F=function(re,fe){var De=j.w(x.$u?Date.UTC(x.$y,fe,re):new Date(x.$y,fe,re),x);return S?De:De.endOf(u)},z=function(re,fe){return j.w(x.toDate()[re].apply(x.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(fe)),x)},Y=this.$W,G=this.$M,K=this.$D,ee="set"+(this.$u?"UTC":"");switch(R){case h:return S?F(1,0):F(31,11);case d:return S?F(1,G):F(0,G+1);case l:var se=this.$locale().weekStart||0,he=(Y<se?Y+7:Y)-se;return F(S?K-he:K+(6-he),G);case u:case g:return z(ee+"Hours",0);case c:return z(ee+"Minutes",1);case a:return z(ee+"Seconds",2);case o:return z(ee+"Milliseconds",3);default:return this.clone()}},m.endOf=function(b){return this.startOf(b,!1)},m.$set=function(b,I){var x,S=j.p(b),R="set"+(this.$u?"UTC":""),F=(x={},x[u]=R+"Date",x[g]=R+"Date",x[d]=R+"Month",x[h]=R+"FullYear",x[c]=R+"Hours",x[a]=R+"Minutes",x[o]=R+"Seconds",x[i]=R+"Milliseconds",x)[S],z=S===u?this.$D+(I-this.$W):I;if(S===d||S===h){var Y=this.clone().set(g,1);Y.$d[F](z),Y.init(),this.$d=Y.set(g,Math.min(this.$D,Y.daysInMonth())).$d}else F&&this.$d[F](z);return this.init(),this},m.set=function(b,I){return this.clone().$set(b,I)},m.get=function(b){return this[j.p(b)]()},m.add=function(b,I){var x,S=this;b=Number(b);var R=j.p(I),F=function(G){var K=q(S);return j.w(K.date(K.date()+Math.round(G*b)),S)};if(R===d)return this.set(d,this.$M+b);if(R===h)return this.set(h,this.$y+b);if(R===u)return F(1);if(R===l)return F(7);var z=(x={},x[a]=r,x[c]=s,x[o]=n,x)[R]||1,Y=this.$d.getTime()+b*z;return j.w(Y,this)},m.subtract=function(b,I){return this.add(-1*b,I)},m.format=function(b){var I=this,x=this.$locale();if(!this.isValid())return x.invalidDate||p;var S=b||"YYYY-MM-DDTHH:mm:ssZ",R=j.z(this),F=this.$H,z=this.$m,Y=this.$M,G=x.weekdays,K=x.months,ee=x.meridiem,se=function(fe,De,qe,Me){return fe&&(fe[De]||fe(I,S))||qe[De].slice(0,Me)},he=function(fe){return j.s(F%12||12,fe,"0")},re=ee||function(fe,De,qe){var Me=fe<12?"AM":"PM";return qe?Me.toLowerCase():Me};return S.replace(C,function(fe,De){return De||function(qe){switch(qe){case"YY":return String(I.$y).slice(-2);case"YYYY":return j.s(I.$y,4,"0");case"M":return Y+1;case"MM":return j.s(Y+1,2,"0");case"MMM":return se(x.monthsShort,Y,K,3);case"MMMM":return se(K,Y);case"D":return I.$D;case"DD":return j.s(I.$D,2,"0");case"d":return String(I.$W);case"dd":return se(x.weekdaysMin,I.$W,G,2);case"ddd":return se(x.weekdaysShort,I.$W,G,3);case"dddd":return G[I.$W];case"H":return String(F);case"HH":return j.s(F,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return re(F,z,!0);case"A":return re(F,z,!1);case"m":return String(z);case"mm":return j.s(z,2,"0");case"s":return String(I.$s);case"ss":return j.s(I.$s,2,"0");case"SSS":return j.s(I.$ms,3,"0");case"Z":return R}return null}(fe)||R.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(b,I,x){var S,R=this,F=j.p(I),z=q(b),Y=(z.utcOffset()-this.utcOffset())*r,G=this-z,K=function(){return j.m(R,z)};switch(F){case h:S=K()/12;break;case d:S=K();break;case f:S=K()/3;break;case l:S=(G-Y)/6048e5;break;case u:S=(G-Y)/864e5;break;case c:S=G/s;break;case a:S=G/r;break;case o:S=G/n;break;default:S=G}return x?S:j.a(S)},m.daysInMonth=function(){return this.endOf(d).$D},m.$locale=function(){return O[this.$L]},m.locale=function(b,I){if(!b)return this.$L;var x=this.clone(),S=D(b,I,!0);return S&&(x.$L=S),x},m.clone=function(){return j.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},P}(),T=L.prototype;return q.prototype=T,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",u],["$M",d],["$y",h],["$D",g]].forEach(function(P){T[P[1]]=function(m){return this.$g(m,P[0],P[1])}}),q.extend=function(P,m){return P.$i||(P(m,L,q),P.$i=!0),q},q.locale=D,q.isDayjs=M,q.unix=function(P){return q(1e3*P)},q.en=O[_],q.Ls=O,q.p={},q})})(fS);var qP=fS.exports;const Au=Oc(qP);var hS={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(dr,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],s=n%100;return"["+n+(r[(s-20)%10]||r[s]||r[0])+"]"}}})})(hS);var zP=hS.exports;const WP=Oc(zP);var pS={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(dr,function(){return function(n,r,s){n=n||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,l,d,f){return i.fromToBase(u,l,d,f)}s.en.relativeTime=o,i.fromToBase=function(u,l,d,f,h){for(var g,p,y,C=d.$locale().relativeTime||o,N=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],E=N.length,A=0;A<E;A+=1){var _=N[A];_.d&&(g=f?s(u).diff(d,_.d,!0):d.diff(u,_.d,!0));var O=(n.rounding||Math.round)(Math.abs(g));if(y=g>0,O<=_.r||!_.r){O<=1&&A>0&&(_=N[A-1]);var $=C[_.l];h&&(O=h(""+O)),p=typeof $=="string"?$.replace("%d",O):$(O,l,_.l,y);break}}if(l)return p;var M=y?C.future:C.past;return typeof M=="function"?M(p):M.replace("%s",p)},i.to=function(u,l){return a(u,l,this,!0)},i.from=function(u,l){return a(u,l,this)};var c=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}})})(pS);var VP=pS.exports;const KP=Oc(VP);var gS={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(dr,function(){return function(n,r,s){s.updateLocale=function(i,o){var a=s.Ls[i];if(a)return(o?Object.keys(o):[]).forEach(function(c){a[c]=o[c]}),a}}})})(gS);var GP=gS.exports;const YP=Oc(GP);Au.extend(KP);Au.extend(YP);const ZP={...WP,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},JP=["January","February","March","April","May","June","July","August","September","October","November","December"];Au.locale("en-web3-modal",ZP);const Nv={getMonthNameByIndex(t){return JP[t]},getYear(t=new Date().toISOString()){return Au(t).year()},getRelativeDateFromNow(t){return Au(t).locale("en-web3-modal").fromNow(!0)},formatDate(t,e="DD MMM"){return Au(t).format(e)}};var Ov={};const J={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Ov<"u"?Ov.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},mS={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=J.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},yS=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var XP=20,QP=1,uc=1e6,Pv=1e6,eR=-7,tR=21,nR=!1,Pf="[big.js] ",Pc=Pf+"Invalid ",P0=Pc+"decimal places",rR=Pc+"rounding mode",bS=Pf+"Division by zero",ht={},ri=void 0,sR=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function wS(){function t(e){var n=this;if(!(n instanceof t))return e===ri?wS():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Pc+"value");e=e===0&&1/e<0?"-0":String(e)}iR(n,e)}n.constructor=t}return t.prototype=ht,t.DP=XP,t.RM=QP,t.NE=eR,t.PE=tR,t.strict=nR,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function iR(t,e){var n,r,s;if(!sR.test(e))throw Error(Pc+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Rc(t,e,n,r){var s=t.c;if(n===ri&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(rR);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==ri))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==ri||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function $c(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}ht.abs=function(){var t=new this.constructor(this);return t.s=1,t};ht.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};ht.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>uc)throw Error(P0);if(!s[0])throw Error(bS);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,f=s.slice(),h=a=s.length,g=r.length,p=r.slice(0,a),y=p.length,C=t,N=C.c=[],E=0,A=o+(C.e=e.e-t.e)+1;for(C.s=i,i=A<0?0:A,f.unshift(0);y++<a;)p.push(0);do{for(u=0;u<10;u++){if(a!=(y=p.length))l=a>y?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=p[d]){l=s[d]>p[d]?1:-1;break}if(l<0){for(c=y==a?s:f;y;){if(p[--y]<c[y]){for(d=y;d&&!p[--d];)p[d]=9;--p[d],p[y]+=10}p[y]-=c[y]}for(;!p[0];)p.shift()}else break}N[E++]=l?u:++u,p[0]&&l?p[y]=r[h]||0:p=[r[h]]}while((h++<g||p[0]!==ri)&&i--);return!N[0]&&E!=1&&(N.shift(),C.e--,A--),E>A&&Rc(C,A,n.RM,p[0]!==ri),C};ht.eq=function(t){return this.cmp(t)===0};ht.gt=function(t){return this.cmp(t)>0};ht.gte=function(t){return this.cmp(t)>-1};ht.lt=function(t){return this.cmp(t)<0};ht.lte=function(t){return this.cmp(t)<1};ht.minus=ht.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,f=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-f){for((s=a<0)?(a=-a,r=u):(f=l,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=u.length<d.length)?u:d).length,a=c=0;c<n;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(r=u,u=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>a;){if(u[--n]<d[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=d[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};ht.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(bS);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};ht.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};ht.plus=ht.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=u):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),e=u.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+u[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};ht.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Pv||t>Pv)throw Error(Pc+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};ht.prec=function(t,e){if(t!==~~t||t<1||t>uc)throw Error(Pc+"precision");return Rc(new this.constructor(this),t,e)};ht.round=function(t,e){if(t===ri)t=0;else if(t!==~~t||t<-uc||t>uc)throw Error(P0);return Rc(new this.constructor(this),t+this.e+1,e)};ht.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Pf+"No square root");i=Math.sqrt(+$c(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Rc(t,(s.DP-=4)+t.e+1,s.RM)};ht.times=ht.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};ht.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==ri){if(t!==~~t||t<0||t>uc)throw Error(P0);for(n=Rc(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return $c(n,!0,!!r)};ht.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==ri){if(t!==~~t||t<0||t>uc)throw Error(P0);for(n=Rc(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return $c(n,!1,!!r)};ht[Symbol.for("nodejs.util.inspect.custom")]=ht.toJSON=ht.toString=function(){var t=this,e=t.constructor;return $c(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};ht.toNumber=function(){var t=+$c(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Pf+"Imprecise conversion");return t};ht.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==ri){if(t!==~~t||t<1||t>uc)throw Error(Pc+"precision");for(n=Rc(new r(n),t,e);n.c.length<t;)n.c.push(0)}return $c(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};ht.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Pf+"valueOf disallowed");return $c(t,t.e<=e.NE||t.e>=e.PE,!0)};var ro=wS();const Dt={bigNumber(t){return t?new ro(t):new ro(0)},multiply(t,e){if(t===void 0||e===void 0)return new ro(0);const n=new ro(t),r=new ro(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new ro(0).toFixed(e):new ro(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new ro(e).toNumber()}},Eue={numericInputKeyDown(t,e,n){const r=["Backspace","Meta","Ctrl","a","A","c","C","x","X","v","V","ArrowLeft","ArrowRight","Tab"],s=t.metaKey||t.ctrlKey,i=t.key,o=i.toLocaleLowerCase(),a=o==="a",c=o==="c",u=o==="v",l=o==="x",d=i===",",f=i===".",h=i>="0"&&i<="9";!s&&(a||c||u||l)&&t.preventDefault(),e==="0"&&!d&&!f&&i==="0"&&t.preventDefault(),e==="0"&&h&&(n(i),t.preventDefault()),(d||f)&&(e||(n("0."),t.preventDefault()),(e!=null&&e.includes(".")||e!=null&&e.includes(","))&&t.preventDefault()),!h&&!r.includes(i)&&!f&&!d&&t.preventDefault()}},oR=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],aR=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],cR=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],uR={getERC20Abi:t=>J.USDT_CONTRACT_ADDRESSES.includes(t)?cR:oR,getSwapAbi:()=>aR},vue={URLS:{FAQ:"https://walletconnect.com/faq"}},Jt={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Li={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.message=="string",r=typeof e.code=="number";return n&&r}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(Li.isRpcProviderError(t)){const e=t.code===Li.RPC_ERROR_CODE.USER_REJECTED_REQUEST,n=t.code===Li.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||n||Li.isUserRejectedMessage(t.message)}return t instanceof Error?Li.isUserRejectedMessage(t.message):!1}};let lR=class extends Error{constructor(e,n){super(n.message,{cause:e}),this.name=Li.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=n.code}},ES=class extends lR{constructor(e){super(e,{code:Li.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=Li.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const xe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version"};function Wg(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const _e={setItem(t,e){ld()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(ld())return localStorage.getItem(t)||void 0},removeItem(t){ld()&&localStorage.removeItem(t)},clear(){ld()&&localStorage.clear()}};function ld(){return typeof window<"u"&&typeof localStorage<"u"}function Fd(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var Rv={};const Vg=(typeof process<"u"&&typeof Rv<"u"?Rv.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",vS=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],dR="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ve={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Vg,SECURE_SITE_DASHBOARD:`${Vg}/dashboard`,SECURE_SITE_FAVICON:`${Vg}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD₮0"]},BALANCE_SUPPORTED_CHAINS:[J.CHAIN.EVM,J.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[J.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[J.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[J.CHAIN.EVM,J.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[J.CHAIN.EVM,J.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[J.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[J.CHAIN.EVM,J.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ie={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ie.getActiveNamespace(),e=ie.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{_e.setItem(xe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=_e.getItem(xe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{_e.removeItem(xe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{_e.setItem(xe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{_e.setItem(xe.ACTIVE_CAIP_NETWORK_ID,t),ie.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return _e.getItem(xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{_e.removeItem(xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Wg(t);_e.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ie.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),_e.setItem(xe.RECENT_WALLETS,JSON.stringify(e)),_e.setItem(xe.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=_e.getItem(xe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=_e.getItem(xe.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{_e.removeItem(xe.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const n=Wg(t);_e.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return _e.getItem(xe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Wg(t);return _e.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{_e.setItem(xe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return _e.getItem(xe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{_e.removeItem(xe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return _e.getItem(xe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=_e.getItem(xe.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{_e.setItem(xe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return _e.getItem(xe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=_e.getItem(xe.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));_e.setItem(xe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ie.getConnectedNamespaces();e.includes(t)||(e.push(t),ie.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ie.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ie.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return _e.getItem(xe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{_e.setItem(xe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{_e.removeItem(xe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=_e.getItem(xe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ie.getBalanceCache();_e.setItem(xe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ie.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ie.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ie.getBalanceCache();e[t.caipAddress]=t,_e.setItem(xe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=_e.getItem(xe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ie.getBalanceCache();_e.setItem(xe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ie.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ie.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ie.getNativeBalanceCache();e[t.caipAddress]=t,_e.setItem(xe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=_e.getItem(xe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ie.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ie.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ie.getEnsCache();e[t.address]=t,_e.setItem(xe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ie.getEnsCache();_e.setItem(xe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=_e.getItem(xe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ie.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ie.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ie.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},_e.setItem(xe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ie.getIdentityCache();_e.setItem(xe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{_e.removeItem(xe.PORTFOLIO_CACHE),_e.removeItem(xe.NATIVE_BALANCE_CACHE),_e.removeItem(xe.ENS_CACHE),_e.removeItem(xe.IDENTITY_CACHE),_e.removeItem(xe.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{_e.setItem(xe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=_e.getItem(xe.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ie.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===J.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};_e.setItem(xe.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=_e.getItem(xe.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ie.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),_e.setItem(xe.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=_e.getItem(xe.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ie.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),_e.setItem(xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ie.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),_e.setItem(xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ie.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=_e.getItem(xe.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=ie.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;ie.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=ie.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},_e.setItem(xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=ie.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;_e.setItem(xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=_e.getItem(xe.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=ie.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;ie.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=ie.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},_e.setItem(xe.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=ie.getTokenPriceCache();_e.setItem(xe.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t==null?void 0:t.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=_e.getItem(xe.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=ie.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,_e.setItem(xe.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},ge={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ge.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ve.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ve.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ge.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ve.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ge.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r&&(r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`)),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ge.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ie.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ge.wait(2e3)])},parseBalance(t,e){let n="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const u=(Math.floor(c*1e3)/1e3).toFixed(3);u&&(n=u)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return J.W3M_API_URL},getBlockchainApiUrl(){return J.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return J.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Ve.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in J.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),u=t.substring(s),l=c+n;return a+l+u}};var fR={},R0={};R0.byteLength=gR;R0.toByteArray=yR;R0.fromByteArray=ER;var Qs=[],Kr=[],hR=typeof Uint8Array<"u"?Uint8Array:Array,Kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kc=0,pR=Kg.length;Kc<pR;++Kc)Qs[Kc]=Kg[Kc],Kr[Kg.charCodeAt(Kc)]=Kc;Kr[45]=62;Kr[95]=63;function AS(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function gR(t){var e=AS(t),n=e[0],r=e[1];return(n+r)*3/4-r}function mR(t,e,n){return(e+n)*3/4-n}function yR(t){var e,n=AS(t),r=n[0],s=n[1],i=new hR(mR(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=Kr[t.charCodeAt(c)]<<18|Kr[t.charCodeAt(c+1)]<<12|Kr[t.charCodeAt(c+2)]<<6|Kr[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Kr[t.charCodeAt(c)]<<2|Kr[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=Kr[t.charCodeAt(c)]<<10|Kr[t.charCodeAt(c+1)]<<4|Kr[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function bR(t){return Qs[t>>18&63]+Qs[t>>12&63]+Qs[t>>6&63]+Qs[t&63]}function wR(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(bR(r));return s.join("")}function ER(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(wR(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(Qs[e>>2]+Qs[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Qs[e>>10]+Qs[e>>4&63]+Qs[e<<2&63]+"=")),s.join("")}var s1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */s1.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+d],d+=f,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(h?-1:1)*o*Math.pow(2,i-r)};s1.write=function(t,e,n,r,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,g=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=g,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+h]=o&255,h+=g,o/=256,u-=8);t[n+h-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=R0,n=s1,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const U=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(U,w),U.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(U){if(U>s)throw new RangeError('The value "'+U+'" is invalid for option "size"');const w=new Uint8Array(U);return Object.setPrototypeOf(w,a.prototype),w}function a(U,w,v){if(typeof U=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(U)}return c(U,w,v)}a.poolSize=8192;function c(U,w,v){if(typeof U=="string")return f(U,w);if(ArrayBuffer.isView(U))return g(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(Cr(U,ArrayBuffer)||U&&Cr(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Cr(U,SharedArrayBuffer)||U&&Cr(U.buffer,SharedArrayBuffer)))return p(U,w,v);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=U.valueOf&&U.valueOf();if(H!=null&&H!==U)return a.from(H,w,v);const W=y(U);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return a.from(U[Symbol.toPrimitive]("string"),w,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}a.from=function(U,w,v){return c(U,w,v)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function l(U,w,v){return u(U),U<=0?o(U):w!==void 0?typeof v=="string"?o(U).fill(w,v):o(U).fill(w):o(U)}a.alloc=function(U,w,v){return l(U,w,v)};function d(U){return u(U),o(U<0?0:C(U)|0)}a.allocUnsafe=function(U){return d(U)},a.allocUnsafeSlow=function(U){return d(U)};function f(U,w){if((typeof w!="string"||w==="")&&(w="utf8"),!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const v=E(U,w)|0;let H=o(v);const W=H.write(U,w);return W!==v&&(H=H.slice(0,W)),H}function h(U){const w=U.length<0?0:C(U.length)|0,v=o(w);for(let H=0;H<w;H+=1)v[H]=U[H]&255;return v}function g(U){if(Cr(U,Uint8Array)){const w=new Uint8Array(U);return p(w.buffer,w.byteOffset,w.byteLength)}return h(U)}function p(U,w,v){if(w<0||U.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<w+(v||0))throw new RangeError('"length" is outside of buffer bounds');let H;return w===void 0&&v===void 0?H=new Uint8Array(U):v===void 0?H=new Uint8Array(U,w):H=new Uint8Array(U,w,v),Object.setPrototypeOf(H,a.prototype),H}function y(U){if(a.isBuffer(U)){const w=C(U.length)|0,v=o(w);return v.length===0||U.copy(v,0,0,w),v}if(U.length!==void 0)return typeof U.length!="number"||Vc(U.length)?o(0):h(U);if(U.type==="Buffer"&&Array.isArray(U.data))return h(U.data)}function C(U){if(U>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return U|0}function N(U){return+U!=U&&(U=0),a.alloc(+U)}a.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==a.prototype},a.compare=function(w,v){if(Cr(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),Cr(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(w)||!a.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===v)return 0;let H=w.length,W=v.length;for(let Z=0,te=Math.min(H,W);Z<te;++Z)if(w[Z]!==v[Z]){H=w[Z],W=v[Z];break}return H<W?-1:W<H?1:0},a.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(w,v){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return a.alloc(0);let H;if(v===void 0)for(v=0,H=0;H<w.length;++H)v+=w[H].length;const W=a.allocUnsafe(v);let Z=0;for(H=0;H<w.length;++H){let te=w[H];if(Cr(te,Uint8Array))Z+te.length>W.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(W,Z)):Uint8Array.prototype.set.call(W,te,Z);else if(a.isBuffer(te))te.copy(W,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=te.length}return W};function E(U,w){if(a.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||Cr(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const v=U.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&v===0)return 0;let W=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Bl(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Ll(U).length;default:if(W)return H?-1:Bl(U).length;w=(""+w).toLowerCase(),W=!0}}a.byteLength=E;function A(U,w,v){let H=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,w>>>=0,v<=w))return"";for(U||(U="utf8");;)switch(U){case"hex":return S(this,w,v);case"utf8":case"utf-8":return P(this,w,v);case"ascii":return I(this,w,v);case"latin1":case"binary":return x(this,w,v);case"base64":return T(this,w,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,w,v);default:if(H)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),H=!0}}a.prototype._isBuffer=!0;function _(U,w,v){const H=U[w];U[w]=U[v],U[v]=H}a.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<w;v+=2)_(this,v,v+1);return this},a.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<w;v+=4)_(this,v,v+3),_(this,v+1,v+2);return this},a.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<w;v+=8)_(this,v,v+7),_(this,v+1,v+6),_(this,v+2,v+5),_(this,v+3,v+4);return this},a.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?P(this,0,w):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(w){if(!a.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:a.compare(this,w)===0},a.prototype.inspect=function(){let w="";const v=t.INSPECT_MAX_BYTES;return w=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(w+=" ... "),"<Buffer "+w+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(w,v,H,W,Z){if(Cr(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(v===void 0&&(v=0),H===void 0&&(H=w?w.length:0),W===void 0&&(W=0),Z===void 0&&(Z=this.length),v<0||H>w.length||W<0||Z>this.length)throw new RangeError("out of range index");if(W>=Z&&v>=H)return 0;if(W>=Z)return-1;if(v>=H)return 1;if(v>>>=0,H>>>=0,W>>>=0,Z>>>=0,this===w)return 0;let te=Z-W,Ye=H-v;const Nt=Math.min(te,Ye),Ct=this.slice(W,Z),Ot=w.slice(v,H);for(let yt=0;yt<Nt;++yt)if(Ct[yt]!==Ot[yt]){te=Ct[yt],Ye=Ot[yt];break}return te<Ye?-1:Ye<te?1:0};function O(U,w,v,H,W){if(U.length===0)return-1;if(typeof v=="string"?(H=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Vc(v)&&(v=W?0:U.length-1),v<0&&(v=U.length+v),v>=U.length){if(W)return-1;v=U.length-1}else if(v<0)if(W)v=0;else return-1;if(typeof w=="string"&&(w=a.from(w,H)),a.isBuffer(w))return w.length===0?-1:$(U,w,v,H,W);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(U,w,v):Uint8Array.prototype.lastIndexOf.call(U,w,v):$(U,[w],v,H,W);throw new TypeError("val must be string, number or Buffer")}function $(U,w,v,H,W){let Z=1,te=U.length,Ye=w.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(U.length<2||w.length<2)return-1;Z=2,te/=2,Ye/=2,v/=2}function Nt(Ot,yt){return Z===1?Ot[yt]:Ot.readUInt16BE(yt*Z)}let Ct;if(W){let Ot=-1;for(Ct=v;Ct<te;Ct++)if(Nt(U,Ct)===Nt(w,Ot===-1?0:Ct-Ot)){if(Ot===-1&&(Ot=Ct),Ct-Ot+1===Ye)return Ot*Z}else Ot!==-1&&(Ct-=Ct-Ot),Ot=-1}else for(v+Ye>te&&(v=te-Ye),Ct=v;Ct>=0;Ct--){let Ot=!0;for(let yt=0;yt<Ye;yt++)if(Nt(U,Ct+yt)!==Nt(w,yt)){Ot=!1;break}if(Ot)return Ct}return-1}a.prototype.includes=function(w,v,H){return this.indexOf(w,v,H)!==-1},a.prototype.indexOf=function(w,v,H){return O(this,w,v,H,!0)},a.prototype.lastIndexOf=function(w,v,H){return O(this,w,v,H,!1)};function M(U,w,v,H){v=Number(v)||0;const W=U.length-v;H?(H=Number(H),H>W&&(H=W)):H=W;const Z=w.length;H>Z/2&&(H=Z/2);let te;for(te=0;te<H;++te){const Ye=parseInt(w.substr(te*2,2),16);if(Vc(Ye))return te;U[v+te]=Ye}return te}function D(U,w,v,H){return no(Bl(w,U.length-v),U,v,H)}function q(U,w,v,H){return no(qg(w),U,v,H)}function j(U,w,v,H){return no(Ll(w),U,v,H)}function L(U,w,v,H){return no(oh(w,U.length-v),U,v,H)}a.prototype.write=function(w,v,H,W){if(v===void 0)W="utf8",H=this.length,v=0;else if(H===void 0&&typeof v=="string")W=v,H=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(H)?(H=H>>>0,W===void 0&&(W="utf8")):(W=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-v;if((H===void 0||H>Z)&&(H=Z),w.length>0&&(H<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let te=!1;for(;;)switch(W){case"hex":return M(this,w,v,H);case"utf8":case"utf-8":return D(this,w,v,H);case"ascii":case"latin1":case"binary":return q(this,w,v,H);case"base64":return j(this,w,v,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,w,v,H);default:if(te)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(U,w,v){return w===0&&v===U.length?e.fromByteArray(U):e.fromByteArray(U.slice(w,v))}function P(U,w,v){v=Math.min(U.length,v);const H=[];let W=w;for(;W<v;){const Z=U[W];let te=null,Ye=Z>239?4:Z>223?3:Z>191?2:1;if(W+Ye<=v){let Nt,Ct,Ot,yt;switch(Ye){case 1:Z<128&&(te=Z);break;case 2:Nt=U[W+1],(Nt&192)===128&&(yt=(Z&31)<<6|Nt&63,yt>127&&(te=yt));break;case 3:Nt=U[W+1],Ct=U[W+2],(Nt&192)===128&&(Ct&192)===128&&(yt=(Z&15)<<12|(Nt&63)<<6|Ct&63,yt>2047&&(yt<55296||yt>57343)&&(te=yt));break;case 4:Nt=U[W+1],Ct=U[W+2],Ot=U[W+3],(Nt&192)===128&&(Ct&192)===128&&(Ot&192)===128&&(yt=(Z&15)<<18|(Nt&63)<<12|(Ct&63)<<6|Ot&63,yt>65535&&yt<1114112&&(te=yt))}}te===null?(te=65533,Ye=1):te>65535&&(te-=65536,H.push(te>>>10&1023|55296),te=56320|te&1023),H.push(te),W+=Ye}return b(H)}const m=4096;function b(U){const w=U.length;if(w<=m)return String.fromCharCode.apply(String,U);let v="",H=0;for(;H<w;)v+=String.fromCharCode.apply(String,U.slice(H,H+=m));return v}function I(U,w,v){let H="";v=Math.min(U.length,v);for(let W=w;W<v;++W)H+=String.fromCharCode(U[W]&127);return H}function x(U,w,v){let H="";v=Math.min(U.length,v);for(let W=w;W<v;++W)H+=String.fromCharCode(U[W]);return H}function S(U,w,v){const H=U.length;(!w||w<0)&&(w=0),(!v||v<0||v>H)&&(v=H);let W="";for(let Z=w;Z<v;++Z)W+=ah[U[Z]];return W}function R(U,w,v){const H=U.slice(w,v);let W="";for(let Z=0;Z<H.length-1;Z+=2)W+=String.fromCharCode(H[Z]+H[Z+1]*256);return W}a.prototype.slice=function(w,v){const H=this.length;w=~~w,v=v===void 0?H:~~v,w<0?(w+=H,w<0&&(w=0)):w>H&&(w=H),v<0?(v+=H,v<0&&(v=0)):v>H&&(v=H),v<w&&(v=w);const W=this.subarray(w,v);return Object.setPrototypeOf(W,a.prototype),W};function F(U,w,v){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+w>v)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(w,v,H){w=w>>>0,v=v>>>0,H||F(w,v,this.length);let W=this[w],Z=1,te=0;for(;++te<v&&(Z*=256);)W+=this[w+te]*Z;return W},a.prototype.readUintBE=a.prototype.readUIntBE=function(w,v,H){w=w>>>0,v=v>>>0,H||F(w,v,this.length);let W=this[w+--v],Z=1;for(;v>0&&(Z*=256);)W+=this[w+--v]*Z;return W},a.prototype.readUint8=a.prototype.readUInt8=function(w,v){return w=w>>>0,v||F(w,1,this.length),this[w]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(w,v){return w=w>>>0,v||F(w,2,this.length),this[w]|this[w+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(w,v){return w=w>>>0,v||F(w,2,this.length),this[w]<<8|this[w+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(w,v){return w=w>>>0,v||F(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(w,v){return w=w>>>0,v||F(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},a.prototype.readBigUInt64LE=ls(function(w){w=w>>>0,Me(w,"offset");const v=this[w],H=this[w+7];(v===void 0||H===void 0)&&ut(w,this.length-8);const W=v+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,Z=this[++w]+this[++w]*2**8+this[++w]*2**16+H*2**24;return BigInt(W)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=ls(function(w){w=w>>>0,Me(w,"offset");const v=this[w],H=this[w+7];(v===void 0||H===void 0)&&ut(w,this.length-8);const W=v*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],Z=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+H;return(BigInt(W)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(w,v,H){w=w>>>0,v=v>>>0,H||F(w,v,this.length);let W=this[w],Z=1,te=0;for(;++te<v&&(Z*=256);)W+=this[w+te]*Z;return Z*=128,W>=Z&&(W-=Math.pow(2,8*v)),W},a.prototype.readIntBE=function(w,v,H){w=w>>>0,v=v>>>0,H||F(w,v,this.length);let W=v,Z=1,te=this[w+--W];for(;W>0&&(Z*=256);)te+=this[w+--W]*Z;return Z*=128,te>=Z&&(te-=Math.pow(2,8*v)),te},a.prototype.readInt8=function(w,v){return w=w>>>0,v||F(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},a.prototype.readInt16LE=function(w,v){w=w>>>0,v||F(w,2,this.length);const H=this[w]|this[w+1]<<8;return H&32768?H|4294901760:H},a.prototype.readInt16BE=function(w,v){w=w>>>0,v||F(w,2,this.length);const H=this[w+1]|this[w]<<8;return H&32768?H|4294901760:H},a.prototype.readInt32LE=function(w,v){return w=w>>>0,v||F(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},a.prototype.readInt32BE=function(w,v){return w=w>>>0,v||F(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},a.prototype.readBigInt64LE=ls(function(w){w=w>>>0,Me(w,"offset");const v=this[w],H=this[w+7];(v===void 0||H===void 0)&&ut(w,this.length-8);const W=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(H<<24);return(BigInt(W)<<BigInt(32))+BigInt(v+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),a.prototype.readBigInt64BE=ls(function(w){w=w>>>0,Me(w,"offset");const v=this[w],H=this[w+7];(v===void 0||H===void 0)&&ut(w,this.length-8);const W=(v<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(W)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+H)}),a.prototype.readFloatLE=function(w,v){return w=w>>>0,v||F(w,4,this.length),n.read(this,w,!0,23,4)},a.prototype.readFloatBE=function(w,v){return w=w>>>0,v||F(w,4,this.length),n.read(this,w,!1,23,4)},a.prototype.readDoubleLE=function(w,v){return w=w>>>0,v||F(w,8,this.length),n.read(this,w,!0,52,8)},a.prototype.readDoubleBE=function(w,v){return w=w>>>0,v||F(w,8,this.length),n.read(this,w,!1,52,8)};function z(U,w,v,H,W,Z){if(!a.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>W||w<Z)throw new RangeError('"value" argument is out of bounds');if(v+H>U.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(w,v,H,W){if(w=+w,v=v>>>0,H=H>>>0,!W){const Ye=Math.pow(2,8*H)-1;z(this,w,v,H,Ye,0)}let Z=1,te=0;for(this[v]=w&255;++te<H&&(Z*=256);)this[v+te]=w/Z&255;return v+H},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(w,v,H,W){if(w=+w,v=v>>>0,H=H>>>0,!W){const Ye=Math.pow(2,8*H)-1;z(this,w,v,H,Ye,0)}let Z=H-1,te=1;for(this[v+Z]=w&255;--Z>=0&&(te*=256);)this[v+Z]=w/te&255;return v+H},a.prototype.writeUint8=a.prototype.writeUInt8=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,1,255,0),this[v]=w&255,v+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,2,65535,0),this[v]=w&255,this[v+1]=w>>>8,v+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,2,65535,0),this[v]=w>>>8,this[v+1]=w&255,v+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,4,4294967295,0),this[v+3]=w>>>24,this[v+2]=w>>>16,this[v+1]=w>>>8,this[v]=w&255,v+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,4,4294967295,0),this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=w&255,v+4};function Y(U,w,v,H,W){qe(w,H,W,U,v,7);let Z=Number(w&BigInt(4294967295));U[v++]=Z,Z=Z>>8,U[v++]=Z,Z=Z>>8,U[v++]=Z,Z=Z>>8,U[v++]=Z;let te=Number(w>>BigInt(32)&BigInt(4294967295));return U[v++]=te,te=te>>8,U[v++]=te,te=te>>8,U[v++]=te,te=te>>8,U[v++]=te,v}function G(U,w,v,H,W){qe(w,H,W,U,v,7);let Z=Number(w&BigInt(4294967295));U[v+7]=Z,Z=Z>>8,U[v+6]=Z,Z=Z>>8,U[v+5]=Z,Z=Z>>8,U[v+4]=Z;let te=Number(w>>BigInt(32)&BigInt(4294967295));return U[v+3]=te,te=te>>8,U[v+2]=te,te=te>>8,U[v+1]=te,te=te>>8,U[v]=te,v+8}a.prototype.writeBigUInt64LE=ls(function(w,v=0){return Y(this,w,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ls(function(w,v=0){return G(this,w,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(w,v,H,W){if(w=+w,v=v>>>0,!W){const Nt=Math.pow(2,8*H-1);z(this,w,v,H,Nt-1,-Nt)}let Z=0,te=1,Ye=0;for(this[v]=w&255;++Z<H&&(te*=256);)w<0&&Ye===0&&this[v+Z-1]!==0&&(Ye=1),this[v+Z]=(w/te>>0)-Ye&255;return v+H},a.prototype.writeIntBE=function(w,v,H,W){if(w=+w,v=v>>>0,!W){const Nt=Math.pow(2,8*H-1);z(this,w,v,H,Nt-1,-Nt)}let Z=H-1,te=1,Ye=0;for(this[v+Z]=w&255;--Z>=0&&(te*=256);)w<0&&Ye===0&&this[v+Z+1]!==0&&(Ye=1),this[v+Z]=(w/te>>0)-Ye&255;return v+H},a.prototype.writeInt8=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,1,127,-128),w<0&&(w=255+w+1),this[v]=w&255,v+1},a.prototype.writeInt16LE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,2,32767,-32768),this[v]=w&255,this[v+1]=w>>>8,v+2},a.prototype.writeInt16BE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,2,32767,-32768),this[v]=w>>>8,this[v+1]=w&255,v+2},a.prototype.writeInt32LE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,4,2147483647,-2147483648),this[v]=w&255,this[v+1]=w>>>8,this[v+2]=w>>>16,this[v+3]=w>>>24,v+4},a.prototype.writeInt32BE=function(w,v,H){return w=+w,v=v>>>0,H||z(this,w,v,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[v]=w>>>24,this[v+1]=w>>>16,this[v+2]=w>>>8,this[v+3]=w&255,v+4},a.prototype.writeBigInt64LE=ls(function(w,v=0){return Y(this,w,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ls(function(w,v=0){return G(this,w,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(U,w,v,H,W,Z){if(v+H>U.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function ee(U,w,v,H,W){return w=+w,v=v>>>0,W||K(U,w,v,4),n.write(U,w,v,H,23,4),v+4}a.prototype.writeFloatLE=function(w,v,H){return ee(this,w,v,!0,H)},a.prototype.writeFloatBE=function(w,v,H){return ee(this,w,v,!1,H)};function se(U,w,v,H,W){return w=+w,v=v>>>0,W||K(U,w,v,8),n.write(U,w,v,H,52,8),v+8}a.prototype.writeDoubleLE=function(w,v,H){return se(this,w,v,!0,H)},a.prototype.writeDoubleBE=function(w,v,H){return se(this,w,v,!1,H)},a.prototype.copy=function(w,v,H,W){if(!a.isBuffer(w))throw new TypeError("argument should be a Buffer");if(H||(H=0),!W&&W!==0&&(W=this.length),v>=w.length&&(v=w.length),v||(v=0),W>0&&W<H&&(W=H),W===H||w.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),w.length-v<W-H&&(W=w.length-v+H);const Z=W-H;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,H,W):Uint8Array.prototype.set.call(w,this.subarray(H,W),v),Z},a.prototype.fill=function(w,v,H,W){if(typeof w=="string"){if(typeof v=="string"?(W=v,v=0,H=this.length):typeof H=="string"&&(W=H,H=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!a.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(w.length===1){const te=w.charCodeAt(0);(W==="utf8"&&te<128||W==="latin1")&&(w=te)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(v<0||this.length<v||this.length<H)throw new RangeError("Out of range index");if(H<=v)return this;v=v>>>0,H=H===void 0?this.length:H>>>0,w||(w=0);let Z;if(typeof w=="number")for(Z=v;Z<H;++Z)this[Z]=w;else{const te=a.isBuffer(w)?w:a.from(w,W),Ye=te.length;if(Ye===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(Z=0;Z<H-v;++Z)this[Z+v]=te[Z%Ye]}return this};const he={};function re(U,w,v){he[U]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(U,w){return`The "${U}" argument must be of type number. Received type ${typeof w}`},TypeError),re("ERR_OUT_OF_RANGE",function(U,w,v){let H=`The value of "${U}" is out of range.`,W=v;return Number.isInteger(v)&&Math.abs(v)>2**32?W=fe(String(v)):typeof v=="bigint"&&(W=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(W=fe(W)),W+="n"),H+=` It must be ${w}. Received ${W}`,H},RangeError);function fe(U){let w="",v=U.length;const H=U[0]==="-"?1:0;for(;v>=H+4;v-=3)w=`_${U.slice(v-3,v)}${w}`;return`${U.slice(0,v)}${w}`}function De(U,w,v){Me(w,"offset"),(U[w]===void 0||U[w+v]===void 0)&&ut(w,U.length-(v+1))}function qe(U,w,v,H,W,Z){if(U>v||U<w){const te=typeof w=="bigint"?"n":"";let Ye;throw w===0||w===BigInt(0)?Ye=`>= 0${te} and < 2${te} ** ${(Z+1)*8}${te}`:Ye=`>= -(2${te} ** ${(Z+1)*8-1}${te}) and < 2 ** ${(Z+1)*8-1}${te}`,new he.ERR_OUT_OF_RANGE("value",Ye,U)}De(H,W,Z)}function Me(U,w){if(typeof U!="number")throw new he.ERR_INVALID_ARG_TYPE(w,"number",U)}function ut(U,w,v){throw Math.floor(U)!==U?(Me(U,v),new he.ERR_OUT_OF_RANGE("offset","an integer",U)):w<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,U)}const un=/[^+/0-9A-Za-z-_]/g;function ln(U){if(U=U.split("=")[0],U=U.trim().replace(un,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function Bl(U,w){w=w||1/0;let v;const H=U.length;let W=null;const Z=[];for(let te=0;te<H;++te){if(v=U.charCodeAt(te),v>55295&&v<57344){if(!W){if(v>56319){(w-=3)>-1&&Z.push(239,191,189);continue}else if(te+1===H){(w-=3)>-1&&Z.push(239,191,189);continue}W=v;continue}if(v<56320){(w-=3)>-1&&Z.push(239,191,189),W=v;continue}v=(W-55296<<10|v-56320)+65536}else W&&(w-=3)>-1&&Z.push(239,191,189);if(W=null,v<128){if((w-=1)<0)break;Z.push(v)}else if(v<2048){if((w-=2)<0)break;Z.push(v>>6|192,v&63|128)}else if(v<65536){if((w-=3)<0)break;Z.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((w-=4)<0)break;Z.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return Z}function qg(U){const w=[];for(let v=0;v<U.length;++v)w.push(U.charCodeAt(v)&255);return w}function oh(U,w){let v,H,W;const Z=[];for(let te=0;te<U.length&&!((w-=2)<0);++te)v=U.charCodeAt(te),H=v>>8,W=v%256,Z.push(W),Z.push(H);return Z}function Ll(U){return e.toByteArray(ln(U))}function no(U,w,v,H){let W;for(W=0;W<H&&!(W+v>=w.length||W>=U.length);++W)w[W+v]=U[W];return W}function Cr(U,w){return U instanceof w||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===w.name}function Vc(U){return U!==U}const ah=function(){const U="0123456789abcdef",w=new Array(256);for(let v=0;v<16;++v){const H=v*16;for(let W=0;W<16;++W)w[H+W]=U[v]+U[W]}return w}();function ls(U){return typeof BigInt>"u"?ch:U}function ch(){throw new Error("BigInt not supported")}})(fR);var Wu={};const vR="https://secure.walletconnect.org/sdk",AR=(typeof process<"u"&&typeof Wu<"u"?Wu.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||vR,CR=(typeof process<"u"&&typeof Wu<"u"?Wu.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",_R=(typeof process<"u"&&typeof Wu<"u"?Wu.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ce={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},It={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},$v={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},tn={set(t,e){Rr.isClient&&localStorage.setItem(`${Ce.STORAGE_KEY}${t}`,e)},get(t){return Rr.isClient?localStorage.getItem(`${Ce.STORAGE_KEY}${t}`):null},delete(t,e){Rr.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ce.STORAGE_KEY}${t}`))}},dh=30*1e3,Rr={checkIfAllowedToTriggerEmail(){const t=tn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dh){const n=Math.ceil((dh-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=tn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dh)return Math.ceil((dh-e)/1e3)}return 0},checkIfRequestExists(t){return It.NOT_SAFE_RPC_METHODS.includes(t.method)||It.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match($v.transactionHash))||(t==null?void 0:t.match($v.signedMessage)))?Ce.RPC_RESPONSE_TYPE_TX:Ce.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return It.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var ct;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ct||(ct={}));var Wy;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Wy||(Wy={}));const be=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Uo=t=>{switch(typeof t){case"undefined":return be.undefined;case"string":return be.string;case"number":return isNaN(t)?be.nan:be.number;case"boolean":return be.boolean;case"function":return be.function;case"bigint":return be.bigint;case"symbol":return be.symbol;case"object":return Array.isArray(t)?be.array:t===null?be.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?be.promise:typeof Map<"u"&&t instanceof Map?be.map:typeof Set<"u"&&t instanceof Set?be.set:typeof Date<"u"&&t instanceof Date?be.date:be.object;default:return be.unknown}},ce=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),SR=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ts extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ts.create=t=>new Ts(t);const jd=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===be.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,ct.assertNever(t)}return{message:n}};let CS=jd;function IR(t){CS=t}function Ap(){return CS}const Cp=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},xR=[];function Ae(t,e){const n=Cp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ap(),jd].filter(r=>!!r)});t.common.issues.push(n)}class Mn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Fe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Mn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Fe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Fe=Object.freeze({status:"aborted"}),_S=t=>({status:"dirty",value:t}),Yn=t=>({status:"valid",value:t}),Vy=t=>t.status==="aborted",Ky=t=>t.status==="dirty",Hd=t=>t.status==="valid",_p=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class ai{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kv=(t,e)=>{if(Hd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ts(t.common.issues);return this._error=n,this._error}}};function He(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class We{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Uo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mn,ctx:{common:e.parent.common,data:e.data,parsedType:Uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_p(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Uo(e)},i=this._parseSync({data:e,path:s.path,parent:s});return kv(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Uo(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(_p(s)?s:Promise.resolve(s));return kv(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Rs({schema:this,typeName:ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qi.create(this,this._def)}nullable(){return fc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ns.create(this,this._def)}promise(){return Ku.create(this,this._def)}or(e){return Vd.create([this,e],this._def)}and(e){return Kd.create(this,e,this._def)}transform(e){return new Rs({...He(this._def),schema:this,typeName:ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Xd({...He(this._def),innerType:this,defaultValue:n,typeName:ke.ZodDefault})}brand(){return new IS({typeName:ke.ZodBranded,type:this,...He(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Tp({...He(this._def),innerType:this,catchValue:n,typeName:ke.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Rf.create(this,e)}readonly(){return Op.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const TR=/^c[^\s-]{8,}$/i,NR=/^[a-z][a-z0-9]*$/,OR=/^[0-9A-HJKMNP-TV-Z]{26}$/,PR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RR=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$R="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gg;const kR=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,DR=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,UR=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function BR(t,e){return!!((e==="v4"||!e)&&kR.test(t)||(e==="v6"||!e)&&DR.test(t))}class Is extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==be.string){const i=this._getOrReturnCtx(e);return Ae(i,{code:ce.invalid_type,expected:be.string,received:i.parsedType}),Fe}const r=new Mn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ae(s,{code:ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ae(s,{code:ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")RR.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"email",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Gg||(Gg=new RegExp($R,"u")),Gg.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"emoji",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")PR.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"uuid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")TR.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")NR.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid2",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")OR.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ulid",code:ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ae(s,{validation:"url",code:ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"regex",code:ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?UR(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?BR(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ip",code:ce.invalid_string,message:i.message}),r.dirty()):ct.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ce.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new Is({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Re.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new Is({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Is({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Is.create=t=>{var e;return new Is({checks:[],typeName:ke.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...He(t)})};function LR(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class ca extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==be.number){const i=this._getOrReturnCtx(e);return Ae(i,{code:ce.invalid_type,expected:be.number,received:i.parsedType}),Fe}let r;const s=new Mn;for(const i of this._def.checks)i.kind==="int"?ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?LR(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.not_finite,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,s){return new ca({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(s)}]})}_addCheck(e){return new ca({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ca.create=t=>new ca({checks:[],typeName:ke.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...He(t)});class ua extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==be.bigint){const i=this._getOrReturnCtx(e);return Ae(i,{code:ce.invalid_type,expected:be.bigint,received:i.parsedType}),Fe}let r;const s=new Mn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ct.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,s){return new ua({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(s)}]})}_addCheck(e){return new ua({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ua.create=t=>{var e;return new ua({checks:[],typeName:ke.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...He(t)})};class qd extends We{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==be.boolean){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.boolean,received:r.parsedType}),Fe}return Yn(e.data)}}qd.create=t=>new qd({typeName:ke.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...He(t)});class lc extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==be.date){const i=this._getOrReturnCtx(e);return Ae(i,{code:ce.invalid_type,expected:be.date,received:i.parsedType}),Fe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ae(i,{code:ce.invalid_date}),Fe}const r=new Mn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ct.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new lc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}lc.create=t=>new lc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ke.ZodDate,...He(t)});class Sp extends We{_parse(e){if(this._getType(e)!==be.symbol){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.symbol,received:r.parsedType}),Fe}return Yn(e.data)}}Sp.create=t=>new Sp({typeName:ke.ZodSymbol,...He(t)});class zd extends We{_parse(e){if(this._getType(e)!==be.undefined){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.undefined,received:r.parsedType}),Fe}return Yn(e.data)}}zd.create=t=>new zd({typeName:ke.ZodUndefined,...He(t)});class Wd extends We{_parse(e){if(this._getType(e)!==be.null){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.null,received:r.parsedType}),Fe}return Yn(e.data)}}Wd.create=t=>new Wd({typeName:ke.ZodNull,...He(t)});class Vu extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return Yn(e.data)}}Vu.create=t=>new Vu({typeName:ke.ZodAny,...He(t)});class sc extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yn(e.data)}}sc.create=t=>new sc({typeName:ke.ZodUnknown,...He(t)});class Yi extends We{_parse(e){const n=this._getOrReturnCtx(e);return Ae(n,{code:ce.invalid_type,expected:be.never,received:n.parsedType}),Fe}}Yi.create=t=>new Yi({typeName:ke.ZodNever,...He(t)});class Ip extends We{_parse(e){if(this._getType(e)!==be.undefined){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.void,received:r.parsedType}),Fe}return Yn(e.data)}}Ip.create=t=>new Ip({typeName:ke.ZodVoid,...He(t)});class Ns extends We{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==be.array)return Ae(n,{code:ce.invalid_type,expected:be.array,received:n.parsedType}),Fe;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ae(n,{code:o?ce.too_big:ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ae(n,{code:ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ae(n,{code:ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ai(n,o,n.path,a)))).then(o=>Mn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ai(n,o,n.path,a)));return Mn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ns({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new Ns({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new Ns({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}Ns.create=(t,e)=>new Ns({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ke.ZodArray,...He(e)});function uu(t){if(t instanceof xt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=qi.create(uu(r))}return new xt({...t._def,shape:()=>e})}else return t instanceof Ns?new Ns({...t._def,type:uu(t.element)}):t instanceof qi?qi.create(uu(t.unwrap())):t instanceof fc?fc.create(uu(t.unwrap())):t instanceof ci?ci.create(t.items.map(e=>uu(e))):t}class xt extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ct.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==be.object){const u=this._getOrReturnCtx(e);return Ae(u,{code:ce.invalid_type,expected:be.object,received:u.parsedType}),Fe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Yi&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ai(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Yi){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(Ae(s,{code:ce.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ai(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Mn.mergeObjectSync(r,u)):Mn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new xt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Re.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new xt({...this._def,unknownKeys:"strip"})}passthrough(){return new xt({...this._def,unknownKeys:"passthrough"})}extend(e){return new xt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ke.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new xt({...this._def,catchall:e})}pick(e){const n={};return ct.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new xt({...this._def,shape:()=>n})}omit(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new xt({...this._def,shape:()=>n})}deepPartial(){return uu(this)}partial(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new xt({...this._def,shape:()=>n})}required(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof qi;)i=i._def.innerType;n[r]=i}}),new xt({...this._def,shape:()=>n})}keyof(){return SS(ct.objectKeys(this.shape))}}xt.create=(t,e)=>new xt({shape:()=>t,unknownKeys:"strip",catchall:Yi.create(),typeName:ke.ZodObject,...He(e)});xt.strictCreate=(t,e)=>new xt({shape:()=>t,unknownKeys:"strict",catchall:Yi.create(),typeName:ke.ZodObject,...He(e)});xt.lazycreate=(t,e)=>new xt({shape:t,unknownKeys:"strip",catchall:Yi.create(),typeName:ke.ZodObject,...He(e)});class Vd extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ts(a.ctx.common.issues));return Ae(n,{code:ce.invalid_union,unionErrors:o}),Fe}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ts(c));return Ae(n,{code:ce.invalid_union,unionErrors:a}),Fe}}get options(){return this._def.options}}Vd.create=(t,e)=>new Vd({options:t,typeName:ke.ZodUnion,...He(e)});const np=t=>t instanceof Yd?np(t.schema):t instanceof Rs?np(t.innerType()):t instanceof Zd?[t.value]:t instanceof la?t.options:t instanceof Jd?Object.keys(t.enum):t instanceof Xd?np(t._def.innerType):t instanceof zd?[void 0]:t instanceof Wd?[null]:null;class $0 extends We{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==be.object)return Ae(n,{code:ce.invalid_type,expected:be.object,received:n.parsedType}),Fe;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ae(n,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Fe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=np(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new $0({typeName:ke.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...He(r)})}}function Gy(t,e){const n=Uo(t),r=Uo(e);if(t===e)return{valid:!0,data:t};if(n===be.object&&r===be.object){const s=ct.objectKeys(e),i=ct.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Gy(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===be.array&&r===be.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Gy(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===be.date&&r===be.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Kd extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Vy(i)||Vy(o))return Fe;const a=Gy(i.value,o.value);return a.valid?((Ky(i)||Ky(o))&&n.dirty(),{status:n.value,value:a.data}):(Ae(r,{code:ce.invalid_intersection_types}),Fe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Kd.create=(t,e,n)=>new Kd({left:t,right:e,typeName:ke.ZodIntersection,...He(n)});class ci extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==be.array)return Ae(r,{code:ce.invalid_type,expected:be.array,received:r.parsedType}),Fe;if(r.data.length<this._def.items.length)return Ae(r,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fe;!this._def.rest&&r.data.length>this._def.items.length&&(Ae(r,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ai(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Mn.mergeArray(n,o)):Mn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ci({...this._def,rest:e})}}ci.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ci({items:t,typeName:ke.ZodTuple,rest:null,...He(e)})};class Gd extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==be.object)return Ae(r,{code:ce.invalid_type,expected:be.object,received:r.parsedType}),Fe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new ai(r,a,r.path,a)),value:o._parse(new ai(r,r.data[a],r.path,a))});return r.common.async?Mn.mergeObjectAsync(n,s):Mn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof We?new Gd({keyType:e,valueType:n,typeName:ke.ZodRecord,...He(r)}):new Gd({keyType:Is.create(),valueType:e,typeName:ke.ZodRecord,...He(n)})}}class xp extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==be.map)return Ae(r,{code:ce.invalid_type,expected:be.map,received:r.parsedType}),Fe;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new ai(r,a,r.path,[u,"key"])),value:i._parse(new ai(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Fe;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Fe;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}xp.create=(t,e,n)=>new xp({valueType:e,keyType:t,typeName:ke.ZodMap,...He(n)});class dc extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==be.set)return Ae(r,{code:ce.invalid_type,expected:be.set,received:r.parsedType}),Fe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ae(r,{code:ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ae(r,{code:ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return Fe;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new ai(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new dc({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new dc({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}dc.create=(t,e)=>new dc({valueType:t,minSize:null,maxSize:null,typeName:ke.ZodSet,...He(e)});class Cu extends We{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==be.function)return Ae(n,{code:ce.invalid_type,expected:be.function,received:n.parsedType}),Fe;function r(a,c){return Cp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ap(),jd].filter(u=>!!u),issueData:{code:ce.invalid_arguments,argumentsError:c}})}function s(a,c){return Cp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ap(),jd].filter(u=>!!u),issueData:{code:ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ku){const a=this;return Yn(async function(...c){const u=new Ts([]),l=await a._def.args.parseAsync(c,i).catch(h=>{throw u.addIssue(r(c,h)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(h=>{throw u.addIssue(s(d,h)),u})})}else{const a=this;return Yn(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new Ts([r(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new Ts([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Cu({...this._def,args:ci.create(e).rest(sc.create())})}returns(e){return new Cu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Cu({args:e||ci.create([]).rest(sc.create()),returns:n||sc.create(),typeName:ke.ZodFunction,...He(r)})}}class Yd extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Yd.create=(t,e)=>new Yd({getter:t,typeName:ke.ZodLazy,...He(e)});class Zd extends We{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ae(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Fe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Zd.create=(t,e)=>new Zd({value:t,typeName:ke.ZodLiteral,...He(e)});function SS(t,e){return new la({values:t,typeName:ke.ZodEnum,...He(e)})}class la extends We{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ae(n,{expected:ct.joinValues(r),received:n.parsedType,code:ce.invalid_type}),Fe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ae(n,{received:n.data,code:ce.invalid_enum_value,options:r}),Fe}return Yn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return la.create(e)}exclude(e){return la.create(this.options.filter(n=>!e.includes(n)))}}la.create=SS;class Jd extends We{_parse(e){const n=ct.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==be.string&&r.parsedType!==be.number){const s=ct.objectValues(n);return Ae(r,{expected:ct.joinValues(s),received:r.parsedType,code:ce.invalid_type}),Fe}if(n.indexOf(e.data)===-1){const s=ct.objectValues(n);return Ae(r,{received:r.data,code:ce.invalid_enum_value,options:s}),Fe}return Yn(e.data)}get enum(){return this._def.values}}Jd.create=(t,e)=>new Jd({values:t,typeName:ke.ZodNativeEnum,...He(e)});class Ku extends We{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==be.promise&&n.common.async===!1)return Ae(n,{code:ce.invalid_type,expected:be.promise,received:n.parsedType}),Fe;const r=n.parsedType===be.promise?n.data:Promise.resolve(n.data);return Yn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ku.create=(t,e)=>new Ku({type:t,typeName:ke.ZodPromise,...He(e)});class Rs extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ae(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Fe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Fe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hd(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Hd(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ct.assertNever(s)}}Rs.create=(t,e,n)=>new Rs({schema:t,typeName:ke.ZodEffects,effect:e,...He(n)});Rs.createWithPreprocess=(t,e,n)=>new Rs({schema:e,effect:{type:"preprocess",transform:t},typeName:ke.ZodEffects,...He(n)});class qi extends We{_parse(e){return this._getType(e)===be.undefined?Yn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qi.create=(t,e)=>new qi({innerType:t,typeName:ke.ZodOptional,...He(e)});class fc extends We{_parse(e){return this._getType(e)===be.null?Yn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fc.create=(t,e)=>new fc({innerType:t,typeName:ke.ZodNullable,...He(e)});class Xd extends We{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===be.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Xd.create=(t,e)=>new Xd({innerType:t,typeName:ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...He(e)});class Tp extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _p(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ts(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ts(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Tp.create=(t,e)=>new Tp({innerType:t,typeName:ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...He(e)});class Np extends We{_parse(e){if(this._getType(e)!==be.nan){const r=this._getOrReturnCtx(e);return Ae(r,{code:ce.invalid_type,expected:be.nan,received:r.parsedType}),Fe}return{status:"valid",value:e.data}}}Np.create=t=>new Np({typeName:ke.ZodNaN,...He(t)});const MR=Symbol("zod_brand");class IS extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Rf extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Fe:i.status==="dirty"?(n.dirty(),_S(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Fe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Rf({in:e,out:n,typeName:ke.ZodPipeline})}}class Op extends We{_parse(e){const n=this._def.innerType._parse(e);return Hd(n)&&(n.value=Object.freeze(n.value)),n}}Op.create=(t,e)=>new Op({innerType:t,typeName:ke.ZodReadonly,...He(e)});const xS=(t,e={},n)=>t?Vu.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Vu.create(),FR={object:xt.lazycreate};var ke;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ke||(ke={}));const jR=(t,e={message:`Input not instance of ${t.name}`})=>xS(n=>n instanceof t,e),TS=Is.create,NS=ca.create,HR=Np.create,qR=ua.create,OS=qd.create,zR=lc.create,WR=Sp.create,VR=zd.create,KR=Wd.create,GR=Vu.create,YR=sc.create,ZR=Yi.create,JR=Ip.create,XR=Ns.create,QR=xt.create,e4=xt.strictCreate,t4=Vd.create,n4=$0.create,r4=Kd.create,s4=ci.create,i4=Gd.create,o4=xp.create,a4=dc.create,c4=Cu.create,u4=Yd.create,l4=Zd.create,d4=la.create,f4=Jd.create,h4=Ku.create,Dv=Rs.create,p4=qi.create,g4=fc.create,m4=Rs.createWithPreprocess,y4=Rf.create,b4=()=>TS().optional(),w4=()=>NS().optional(),E4=()=>OS().optional(),v4={string:t=>Is.create({...t,coerce:!0}),number:t=>ca.create({...t,coerce:!0}),boolean:t=>qd.create({...t,coerce:!0}),bigint:t=>ua.create({...t,coerce:!0}),date:t=>lc.create({...t,coerce:!0})},A4=Fe;var k=Object.freeze({__proto__:null,defaultErrorMap:jd,setErrorMap:IR,getErrorMap:Ap,makeIssue:Cp,EMPTY_PATH:xR,addIssueToContext:Ae,ParseStatus:Mn,INVALID:Fe,DIRTY:_S,OK:Yn,isAborted:Vy,isDirty:Ky,isValid:Hd,isAsync:_p,get util(){return ct},get objectUtil(){return Wy},ZodParsedType:be,getParsedType:Uo,ZodType:We,ZodString:Is,ZodNumber:ca,ZodBigInt:ua,ZodBoolean:qd,ZodDate:lc,ZodSymbol:Sp,ZodUndefined:zd,ZodNull:Wd,ZodAny:Vu,ZodUnknown:sc,ZodNever:Yi,ZodVoid:Ip,ZodArray:Ns,ZodObject:xt,ZodUnion:Vd,ZodDiscriminatedUnion:$0,ZodIntersection:Kd,ZodTuple:ci,ZodRecord:Gd,ZodMap:xp,ZodSet:dc,ZodFunction:Cu,ZodLazy:Yd,ZodLiteral:Zd,ZodEnum:la,ZodNativeEnum:Jd,ZodPromise:Ku,ZodEffects:Rs,ZodTransformer:Rs,ZodOptional:qi,ZodNullable:fc,ZodDefault:Xd,ZodCatch:Tp,ZodNaN:Np,BRAND:MR,ZodBranded:IS,ZodPipeline:Rf,ZodReadonly:Op,custom:xS,Schema:We,ZodSchema:We,late:FR,get ZodFirstPartyTypeKind(){return ke},coerce:v4,any:GR,array:XR,bigint:qR,boolean:OS,date:zR,discriminatedUnion:n4,effect:Dv,enum:d4,function:c4,instanceof:jR,intersection:r4,lazy:u4,literal:l4,map:o4,nan:HR,nativeEnum:f4,never:ZR,null:KR,nullable:g4,number:NS,object:QR,oboolean:E4,onumber:w4,optional:p4,ostring:b4,pipeline:y4,preprocess:m4,promise:h4,record:i4,set:a4,strictObject:e4,string:TS,symbol:WR,transformer:Dv,tuple:s4,undefined:VR,union:t4,unknown:YR,void:JR,NEVER:A4,ZodIssueCode:ce,quotelessJson:SR,ZodError:Ts});const Pt=k.object({message:k.string()});function we(t){return k.literal(Ce[t])}const k0=k.object({serializedMessage:k.string().optional(),accountAddress:k.string(),chainId:k.string(),notBefore:k.string().optional(),domain:k.string(),uri:k.string(),version:k.string(),nonce:k.string(),statement:k.string().optional(),resources:k.array(k.string()).optional(),requestId:k.string().optional(),issuedAt:k.string().optional(),expirationTime:k.string().optional()});k.object({accessList:k.array(k.string()),blockHash:k.string().nullable(),blockNumber:k.string().nullable(),chainId:k.string().or(k.number()),from:k.string(),gas:k.string(),hash:k.string(),input:k.string().nullable(),maxFeePerGas:k.string(),maxPriorityFeePerGas:k.string(),nonce:k.string(),r:k.string(),s:k.string(),to:k.string(),transactionIndex:k.string().nullable(),type:k.string(),v:k.string(),value:k.string()});const C4=k.object({chainId:k.string().or(k.number()),rpcUrl:k.optional(k.string())}),_4=k.object({email:k.string().email()}),S4=k.object({otp:k.string()}),I4=k.object({uri:k.string(),preferredAccountType:k.optional(k.string()),chainId:k.optional(k.string().or(k.number())),siwxMessage:k.optional(k0),rpcUrl:k.optional(k.string())}),x4=k.object({chainId:k.optional(k.string().or(k.number())),preferredAccountType:k.optional(k.string()),socialUri:k.optional(k.string()),siwxMessage:k.optional(k0),rpcUrl:k.optional(k.string())}),T4=k.object({provider:k.enum(["google","github","apple","facebook","x","discord"])}),N4=k.object({email:k.string().email()}),O4=k.object({otp:k.string()}),P4=k.object({otp:k.string()}),R4=k.object({themeMode:k.optional(k.enum(["light","dark"])),themeVariables:k.optional(k.record(k.string(),k.string().or(k.number()))),w3mThemeVariables:k.optional(k.record(k.string(),k.string()))}),$4=k.object({metadata:k.object({name:k.string(),description:k.string(),url:k.string(),icons:k.array(k.string())}).optional(),sdkVersion:k.string().optional(),sdkType:k.string().optional(),projectId:k.string()}),k4=k.object({type:k.string()}),D4=k.object({action:k.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),U4=k.object({url:k.string()}),B4=k.object({userName:k.string()}),L4=k.object({email:k.string().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),accounts:k.array(k.object({address:k.string(),type:k.enum([It.ACCOUNT_TYPES.EOA,It.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:k.string().optional().nullable(),preferredAccountType:k.optional(k.string()),signature:k.string().optional(),message:k.string().optional(),siwxMessage:k.optional(k0)}),M4=k.object({action:k.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),F4=k.object({email:k.string().email().optional().nullable(),address:k.string(),chainId:k.string().or(k.number()),smartAccountDeployed:k.optional(k.boolean()),accounts:k.array(k.object({address:k.string(),type:k.enum([It.ACCOUNT_TYPES.EOA,It.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:k.optional(k.string()),signature:k.string().optional(),message:k.string().optional(),siwxMessage:k.optional(k0)}),j4=k.object({uri:k.string()}),H4=k.object({isConnected:k.boolean()}),q4=k.object({chainId:k.string().or(k.number())}),z4=k.object({chainId:k.string().or(k.number())}),W4=k.object({newEmail:k.string().email()}),V4=k.object({smartAccountEnabledNetworks:k.array(k.number())});k.object({address:k.string(),isDeployed:k.boolean()});const K4=k.object({version:k.string().optional()}),G4=k.object({type:k.string(),address:k.string()}),Y4=k.any(),Z4=k.object({method:k.literal("eth_accounts")}),J4=k.object({method:k.literal("eth_blockNumber")}),X4=k.object({method:k.literal("eth_call"),params:k.array(k.any())}),Q4=k.object({method:k.literal("eth_chainId")}),e$=k.object({method:k.literal("eth_estimateGas"),params:k.array(k.any())}),t$=k.object({method:k.literal("eth_feeHistory"),params:k.array(k.any())}),n$=k.object({method:k.literal("eth_gasPrice")}),r$=k.object({method:k.literal("eth_getAccount"),params:k.array(k.any())}),s$=k.object({method:k.literal("eth_getBalance"),params:k.array(k.any())}),i$=k.object({method:k.literal("eth_getBlockByHash"),params:k.array(k.any())}),o$=k.object({method:k.literal("eth_getBlockByNumber"),params:k.array(k.any())}),a$=k.object({method:k.literal("eth_getBlockReceipts"),params:k.array(k.any())}),c$=k.object({method:k.literal("eth_getBlockTransactionCountByHash"),params:k.array(k.any())}),u$=k.object({method:k.literal("eth_getBlockTransactionCountByNumber"),params:k.array(k.any())}),l$=k.object({method:k.literal("eth_getCode"),params:k.array(k.any())}),d$=k.object({method:k.literal("eth_getFilterChanges"),params:k.array(k.any())}),f$=k.object({method:k.literal("eth_getFilterLogs"),params:k.array(k.any())}),h$=k.object({method:k.literal("eth_getLogs"),params:k.array(k.any())}),p$=k.object({method:k.literal("eth_getProof"),params:k.array(k.any())}),g$=k.object({method:k.literal("eth_getStorageAt"),params:k.array(k.any())}),m$=k.object({method:k.literal("eth_getTransactionByBlockHashAndIndex"),params:k.array(k.any())}),y$=k.object({method:k.literal("eth_getTransactionByBlockNumberAndIndex"),params:k.array(k.any())}),b$=k.object({method:k.literal("eth_getTransactionByHash"),params:k.array(k.any())}),w$=k.object({method:k.literal("eth_getTransactionCount"),params:k.array(k.any())}),E$=k.object({method:k.literal("eth_getTransactionReceipt"),params:k.array(k.any())}),v$=k.object({method:k.literal("eth_getUncleCountByBlockHash"),params:k.array(k.any())}),A$=k.object({method:k.literal("eth_getUncleCountByBlockNumber"),params:k.array(k.any())}),C$=k.object({method:k.literal("eth_maxPriorityFeePerGas")}),_$=k.object({method:k.literal("eth_newBlockFilter")}),S$=k.object({method:k.literal("eth_newFilter"),params:k.array(k.any())}),I$=k.object({method:k.literal("eth_newPendingTransactionFilter")}),x$=k.object({method:k.literal("eth_sendRawTransaction"),params:k.array(k.any())}),T$=k.object({method:k.literal("eth_syncing"),params:k.array(k.any())}),N$=k.object({method:k.literal("eth_uninstallFilter"),params:k.array(k.any())}),Uv=k.object({method:k.literal("personal_sign"),params:k.array(k.any())}),O$=k.object({method:k.literal("eth_signTypedData_v4"),params:k.array(k.any())}),P$=k.object({method:k.literal("eth_sendTransaction"),params:k.array(k.any())}),R$=k.object({method:k.literal("solana_signMessage"),params:k.object({message:k.string(),pubkey:k.string()})}),$$=k.object({method:k.literal("solana_signTransaction"),params:k.object({transaction:k.string()})}),k$=k.object({method:k.literal("solana_signAllTransactions"),params:k.object({transactions:k.array(k.string())})}),D$=k.object({method:k.literal("solana_signAndSendTransaction"),params:k.object({transaction:k.string(),options:k.object({skipPreflight:k.boolean().optional(),preflightCommitment:k.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:k.number().optional(),minContextSlot:k.number().optional()}).optional()})}),U$=k.object({method:k.literal("wallet_sendCalls"),params:k.array(k.object({chainId:k.string().or(k.number()).optional(),from:k.string().optional(),version:k.string().optional(),capabilities:k.any().optional(),calls:k.array(k.object({to:k.string().startsWith("0x"),data:k.string().startsWith("0x").optional(),value:k.string().optional()}))}))}),B$=k.object({method:k.literal("wallet_getCallsStatus"),params:k.array(k.string())}),L$=k.object({method:k.literal("wallet_getCapabilities"),params:k.array(k.string().or(k.number()).optional()).optional()}),M$=k.object({method:k.literal("wallet_grantPermissions"),params:k.array(k.any())}),F$=k.object({method:k.literal("wallet_revokePermissions"),params:k.any()}),j$=k.object({method:k.literal("wallet_getAssets"),params:k.any()}),Bv=k.object({token:k.string()}),Ee=k.object({id:k.string().optional()}),Yg={appEvent:Ee.extend({type:we("APP_SWITCH_NETWORK"),payload:C4}).or(Ee.extend({type:we("APP_CONNECT_EMAIL"),payload:_4})).or(Ee.extend({type:we("APP_CONNECT_DEVICE")})).or(Ee.extend({type:we("APP_CONNECT_OTP"),payload:S4})).or(Ee.extend({type:we("APP_CONNECT_SOCIAL"),payload:I4})).or(Ee.extend({type:we("APP_GET_FARCASTER_URI")})).or(Ee.extend({type:we("APP_CONNECT_FARCASTER")})).or(Ee.extend({type:we("APP_GET_USER"),payload:k.optional(x4)})).or(Ee.extend({type:we("APP_GET_SOCIAL_REDIRECT_URI"),payload:T4})).or(Ee.extend({type:we("APP_SIGN_OUT")})).or(Ee.extend({type:we("APP_IS_CONNECTED"),payload:k.optional(Bv)})).or(Ee.extend({type:we("APP_GET_CHAIN_ID")})).or(Ee.extend({type:we("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ee.extend({type:we("APP_INIT_SMART_ACCOUNT")})).or(Ee.extend({type:we("APP_SET_PREFERRED_ACCOUNT"),payload:k4})).or(Ee.extend({type:we("APP_RPC_REQUEST"),payload:Uv.or(j$).or(Z4).or(J4).or(X4).or(Q4).or(e$).or(t$).or(n$).or(r$).or(s$).or(i$).or(o$).or(a$).or(c$).or(u$).or(l$).or(d$).or(f$).or(h$).or(p$).or(g$).or(m$).or(y$).or(b$).or(w$).or(E$).or(v$).or(A$).or(C$).or(_$).or(S$).or(I$).or(x$).or(T$).or(N$).or(Uv).or(O$).or(P$).or(R$).or($$).or(k$).or(D$).or(B$).or(U$).or(L$).or(M$).or(F$).and(k.object({chainId:k.string().or(k.number()).optional(),chainNamespace:k.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:k.string().optional()}))})).or(Ee.extend({type:we("APP_UPDATE_EMAIL"),payload:N4})).or(Ee.extend({type:we("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:O4})).or(Ee.extend({type:we("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:P4})).or(Ee.extend({type:we("APP_SYNC_THEME"),payload:R4})).or(Ee.extend({type:we("APP_SYNC_DAPP_DATA"),payload:$4})).or(Ee.extend({type:we("APP_RELOAD")})).or(Ee.extend({type:we("APP_RPC_ABORT")})),frameEvent:Ee.extend({type:we("FRAME_SWITCH_NETWORK_ERROR"),payload:Pt}).or(Ee.extend({type:we("FRAME_SWITCH_NETWORK_SUCCESS"),payload:z4})).or(Ee.extend({type:we("FRAME_CONNECT_EMAIL_SUCCESS"),payload:D4})).or(Ee.extend({type:we("FRAME_CONNECT_EMAIL_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:U4})).or(Ee.extend({type:we("FRAME_GET_FARCASTER_URI_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:B4})).or(Ee.extend({type:we("FRAME_CONNECT_FARCASTER_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_CONNECT_OTP_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_CONNECT_OTP_SUCCESS")})).or(Ee.extend({type:we("FRAME_CONNECT_DEVICE_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ee.extend({type:we("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:L4})).or(Ee.extend({type:we("FRAME_CONNECT_SOCIAL_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_GET_USER_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_GET_USER_SUCCESS"),payload:F4})).or(Ee.extend({type:we("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:j4})).or(Ee.extend({type:we("FRAME_SIGN_OUT_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_SIGN_OUT_SUCCESS")})).or(Ee.extend({type:we("FRAME_IS_CONNECTED_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_IS_CONNECTED_SUCCESS"),payload:H4})).or(Ee.extend({type:we("FRAME_GET_CHAIN_ID_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_GET_CHAIN_ID_SUCCESS"),payload:q4})).or(Ee.extend({type:we("FRAME_RPC_REQUEST_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_RPC_REQUEST_SUCCESS"),payload:Y4})).or(Ee.extend({type:we("FRAME_SESSION_UPDATE"),payload:Bv})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_SUCCESS"),payload:M4})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:W4})).or(Ee.extend({type:we("FRAME_SYNC_THEME_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_SYNC_THEME_SUCCESS")})).or(Ee.extend({type:we("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ee.extend({type:we("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:V4})).or(Ee.extend({type:we("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:G4})).or(Ee.extend({type:we("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_READY"),payload:K4})).or(Ee.extend({type:we("FRAME_RELOAD_ERROR"),payload:Pt})).or(Ee.extend({type:we("FRAME_RELOAD_SUCCESS")}))};function Zg(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function H$({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=J.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(AR);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",_R),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class q${constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=J.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){var h;if(!Zg(Ce.FRAME_EVENT_KEY,d))return;const f=Yg.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}((h=f.data)==null?void 0:h.id)===a&&(c(f.data),window.removeEventListener("message",l))}Rr.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{Rr.isClient&&window.addEventListener("message",({data:c})=>{if(!Zg(Ce.FRAME_EVENT_KEY,c))return;const u=Yg.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{Rr.isClient&&window.addEventListener("message",({data:c})=>{if(!Zg(Ce.APP_EVENT_KEY,c))return;const u=Yg.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{var c;if(Rr.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Rr.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Rr.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=H$({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var u;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(u=this.frameLoadPromiseResolver)==null||u.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}var D0={exports:{}};function z$(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var W$=V$;function V$(t,e,n){var r=n&&n.stringify||z$,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-s,d=-1,f=t&&t.length||0,h=0;h<f;){if(t.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,t.charCodeAt(h+1)){case 100:case 102:if(l>=c||e[l]==null)break;d<h&&(u+=t.slice(d,h)),u+=Number(e[l]),d=h+2,h++;break;case 105:if(l>=c||e[l]==null)break;d<h&&(u+=t.slice(d,h)),u+=Math.floor(Number(e[l])),d=h+2,h++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;d<h&&(u+=t.slice(d,h));var g=typeof e[l];if(g==="string"){u+="'"+e[l]+"'",d=h+2,h++;break}if(g==="function"){u+=e[l].name||"<anonymous>",d=h+2,h++;break}u+=r(e[l]),d=h+2,h++;break;case 115:if(l>=c)break;d<h&&(u+=t.slice(d,h)),u+=String(e[l]),d=h+2,h++;break;case 37:d<h&&(u+=t.slice(d,h)),u+="%",d=h+2,h++,l--;break}++l}++h}return d===-1?t:(d<f&&(u+=t.slice(d)),u)}const Lv=W$;D0.exports=Zi;const Qd=ak().console||{},K$={mapHttpRequest:fh,mapHttpResponse:fh,wrapRequestSerializer:Jg,wrapResponseSerializer:Jg,wrapErrorSerializer:Jg,req:fh,res:fh,err:Fv,errWithCause:Fv};function Yo(t,e){return t==="silent"?1/0:e.levels.values[t]}const i1=Symbol("pino.logFuncs"),Yy=Symbol("pino.hierarchy"),G$={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Mv(t,e){const n={logger:e,parent:t[Yy]};e[Yy]=n}function Y$(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:Qd[s]||Qd[G$[s]||"log"]||_u}),t[i1]=r}function Z$(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Zi(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Qd;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Z$(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(p){n[p]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",u=Object.create(n);u.log||(u.log=_u),Y$(u,a,n),Mv({},u),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:f,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:sk(t),messageKey:t.messageKey||"msg",onChild:t.onChild||_u};u.levels=J$(t),u.level=c,u.isLevelEnabled=function(p){return this.levels.values[p]?this.levels.values[p]>=this.levels.values[this.level]:!1},u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=_u,u.serializers=r,u._serialize=s,u._stdErrSerialize=i,u.child=function(...p){return g.call(this,l,...p)},e&&(u._logEvent=Zy());function d(){return Yo(this.level,this)}function f(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Sa(this,l,u,"error"),Sa(this,l,u,"fatal"),Sa(this,l,u,"warn"),Sa(this,l,u,"info"),Sa(this,l,u,"debug"),Sa(this,l,u,"trace"),o.forEach(y=>{Sa(this,l,u,y)})}function g(p,y,C){if(!y)throw new Error("missing bindings for child Pino");C=C||{},s&&y.serializers&&(C.serializers=y.serializers);const N=C.serializers;if(s&&N){var E=Object.assign({},r,N),A=t.browser.serialize===!0?Object.keys(E):s;delete y.serializers,o1([y],A,E,this._stdErrSerialize)}function _($){this._childLevel=($._childLevel|0)+1,this.bindings=y,E&&(this.serializers=E,this._serialize=A),e&&(this._logEvent=Zy([].concat($._logEvent.bindings,y)))}_.prototype=this;const O=new _(this);return Mv(this,O),O.child=function(...$){return g.call(this,p,...$)},O.level=C.level||this.level,p.onChild(O),O}return u}function J$(t){const e=t.customLevels||{},n=Object.assign({},Zi.levels.values,e),r=Object.assign({},Zi.levels.labels,X$(e));return{values:n,labels:r}}function X$(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}Zi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Zi.stdSerializers=K$;Zi.stdTimeFunctions=Object.assign({},{nullTime:PS,epochTime:RS,unixTime:ik,isoTime:ok});function Q$(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[Yy];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function Sa(t,e,n,r){if(Object.defineProperty(t,r,{value:Yo(t.level,n)>Yo(r,n)?_u:n[i1][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===_u){if(!e.transmit)return;const i=e.transmit.level||t.level,o=Yo(i,n);if(Yo(r,n)<o)return}t[r]=tk(t,e,n,r);const s=Q$(t);s.length!==0&&(t[r]=ek(s,t[r]))}function ek(t,e){return function(){return e.apply(this,[...t,...arguments])}}function tk(t,e,n,r){return function(s){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Qd?Qd:this;for(var u=0;u<a.length;u++)a[u]=arguments[u];var l=!1;if(e.serialize&&(o1(a,this._serialize,this.serializers,this._stdErrSerialize),l=!0),e.asObject||e.formatters?s.call(c,...nk(this,r,a,o,e)):s.apply(c,a),e.transmit){const d=e.transmit.level||t._level,f=Yo(d,n),h=Yo(r,n);if(h<f)return;rk(this,{ts:o,methodLevel:r,methodValue:h,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Yo(t._level,n)},a,l)}}}(t[i1][r])}function nk(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const u={};let l=(t._childLevel|0)+1;if(l<1&&(l=1),r&&(u.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(u,d)}else u.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());return[o(u),...a]}else{if(c!==null&&typeof c=="object"){for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());c=a.length?Lv(a.shift(),a):void 0}else typeof c=="string"&&(c=Lv(a.shift(),a));return c!==void 0&&(u[s.messageKey]=c),[o(u)]}}function o1(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Zi.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function rk(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,u=t._logEvent.bindings;r||o1(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=Zy(u)}function Zy(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Fv(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function sk(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?PS:RS}function fh(){return{}}function Jg(t){return t}function _u(){}function PS(){return!1}function RS(){return Date.now()}function ik(){return Math.round(Date.now()/1e3)}function ok(){return new Date(Date.now()).toISOString()}function ak(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}D0.exports.default=Zi;D0.exports.pino=Zi;var lu=D0.exports;const $S=Oc(lu),ck=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),uk=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function hc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return uk(t)}catch{return t}}function Ji(t){return typeof t=="string"?t:ck(t)||""}const lk={level:"info"},U0="custom_context",a1=1e3*1024;var dk=Object.defineProperty,fk=(t,e,n)=>e in t?dk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bo=(t,e,n)=>fk(t,typeof e!="symbol"?e+"":e,n);let hk=class{constructor(e){Bo(this,"nodeValue"),Bo(this,"sizeInBytes"),Bo(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},jv=class{constructor(e){Bo(this,"lengthInNodes"),Bo(this,"sizeInBytes"),Bo(this,"head"),Bo(this,"tail"),Bo(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new hk(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var pk=Object.defineProperty,gk=(t,e,n)=>e in t?pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hh=(t,e,n)=>gk(t,typeof e!="symbol"?e+"":e,n);let kS=class{constructor(e,n=a1){hh(this,"logs"),hh(this,"level"),hh(this,"levelValue"),hh(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=lu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new jv(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===lu.levels.values.error?console.error(e):n===lu.levels.values.warn?console.warn(e):n===lu.levels.values.debug?console.debug(e):n===lu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ji({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new jv(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ji({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var mk=Object.defineProperty,yk=(t,e,n)=>e in t?mk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bk=(t,e,n)=>yk(t,e+"",n);let wk=class{constructor(e,n=a1){bk(this,"baseChunkLogger"),this.baseChunkLogger=new kS(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var Ek=Object.defineProperty,vk=(t,e,n)=>e in t?Ek(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ak=(t,e,n)=>vk(t,e+"",n);let Ck=class{constructor(e,n=a1){Ak(this,"baseChunkLogger"),this.baseChunkLogger=new kS(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var _k=Object.defineProperty,Sk=Object.defineProperties,Ik=Object.getOwnPropertyDescriptors,Hv=Object.getOwnPropertySymbols,xk=Object.prototype.hasOwnProperty,Tk=Object.prototype.propertyIsEnumerable,qv=(t,e,n)=>e in t?_k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pp=(t,e)=>{for(var n in e||(e={}))xk.call(e,n)&&qv(t,n,e[n]);if(Hv)for(var n of Hv(e))Tk.call(e,n)&&qv(t,n,e[n]);return t},Rp=(t,e)=>Sk(t,Ik(e));function c1(t){return Rp(Pp({},t),{level:(t==null?void 0:t.level)||lk.level})}function Nk(t,e,n=U0){return t[n]=e,t}function br(t,e=U0){return t[e]||""}function Ok(t,e,n=U0){const r=br(t,n);return r.trim()?`${r}/${e}`:e}function wr(t,e,n=U0){const r=Ok(t,e,n),s=t.child({context:r});return Nk(s,r,n)}function Pk(t){var e,n;const r=new wk((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:$S(Rp(Pp({},t.opts),{level:"trace",browser:Rp(Pp({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Rk(t){var e;const n=new Ck((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:$S(Rp(Pp({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function $f(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Pk(t):Rk(t)}class $k{constructor(e){var i;const n=c1({level:CR}),{logger:r,chunkLoggerController:s}=$f({opts:n});this.logger=wr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class kk{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:u,sdkVersion:l,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new $k(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(n);this.projectId=e,this.sdkVersion=l,this.sdkType=d,this.metadata=u,this.w3mFrame=new q$({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!tn.get(Ce.EMAIL_LOGIN_USED_KEY)}getEmail(){return tn.get(Ce.EMAIL)}getUsername(){return tn.get(Ce.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ce.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Rr.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ce.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ce.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ce.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ce.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ce.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ce.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ce.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ce.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ce.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ce.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ce.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ce.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(It.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",u=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=u,n.rpcUrl=this.getRpcUrl(u),(s=this.rpcRequestHandler)==null||s.call(this,e);const l=await this.appEvent({type:Ce.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,l,n),l}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:It.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:n,method:r})=>{It.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ce.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ce.APP_SYNC_DAPP_DATA,Ce.APP_SYNC_THEME,Ce.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ce.APP_CONNECT_EMAIL,Ce.APP_CONNECT_DEVICE,Ce.APP_CONNECT_OTP,Ce.APP_CONNECT_SOCIAL,Ce.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{var h,g,p;const l=Math.random().toString(36).substring(7);(p=(h=this.w3mLogger)==null?void 0:(g=h.logger).info)==null||p.call(g,{event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests.set(l,{...y.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});const f=(y,C)=>{var N,E,A;y.id===l&&((E=C==null?void 0:(N=C.logger).info)==null||E.call(N,{framEvent:y,id:l},"Received frame response"),this.openRpcRequests.delete(y.id),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&u(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),u(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(l,y=>f(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){tn.set(Ce.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){tn.set(Ce.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&tn.set(Ce.EMAIL,e),tn.set(Ce.EMAIL_LOGIN_USED_KEY,"true"),tn.delete(Ce.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){tn.delete(Ce.EMAIL_LOGIN_USED_KEY),tn.delete(Ce.EMAIL),tn.delete(Ce.LAST_USED_CHAIN_KEY),tn.delete(Ce.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&tn.set(Ce.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=tn.get(Ce.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){tn.set(Ce.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=Jt.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}const Dk="1.1.0";let Er=class Jy extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Jy?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Jy&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Dk}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function to(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const DS=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,US=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,BS=/^\(.+?\).*?$/,zv=/^tuple(?<array>(\[(\d*)\])*)$/;function Xy(t){let e=t.type;if(zv.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Xy(i),s<n-1&&(e+=", ")}const r=to(zv,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Xy({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function du(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Xy(s),r!==n-1&&(e+=", ")}return e}function $p(t){var e;return t.type==="function"?`function ${t.name}(${du(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${du(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${du(t.inputs)})`:t.type==="error"?`error ${t.name}(${du(t.inputs)})`:t.type==="constructor"?`constructor(${du(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const LS=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Uk(t){return LS.test(t)}function Bk(t){return to(LS,t)}const MS=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Lk(t){return MS.test(t)}function Mk(t){return to(MS,t)}const FS=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Fk(t){return FS.test(t)}function jk(t){return to(FS,t)}const jS=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function B0(t){return jS.test(t)}function Hk(t){return to(jS,t)}const HS=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function qk(t){return HS.test(t)}function zk(t){return to(HS,t)}const qS=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Wk(t){return qS.test(t)}function Vk(t){return to(qS,t)}const Kk=/^receive\(\) external payable$/;function Gk(t){return Kk.test(t)}const Wv=new Set(["memory","indexed","storage","calldata"]),Yk=new Set(["indexed"]),Qy=new Set(["calldata","memory","storage"]);class zS extends Er{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class WS extends Er{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Zk extends Er{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class VS extends Er{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class KS extends Er{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class GS extends Er{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class YS extends Er{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class ZS extends Er{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class JS extends Er{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class kc extends Er{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class XS extends Er{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class QS extends Er{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class e5 extends Er{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class t5 extends Er{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Jk(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Xg=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function eb(t,e={}){if(Fk(t))return Xk(t,e);if(Lk(t))return Qk(t,e);if(Uk(t))return eD(t,e);if(qk(t))return tD(t,e);if(Wk(t))return nD(t);if(Gk(t))return{type:"receive",stateMutability:"payable"};throw new XS({signature:t})}function Xk(t,e={}){const n=jk(t);if(!n)throw new kc({signature:t,type:"function"});const r=$r(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Xi(r[a],{modifiers:Qy,structs:e,type:"function"}));const o=[];if(n.returns){const a=$r(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(Xi(a[u],{modifiers:Qy,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Qk(t,e={}){const n=Mk(t);if(!n)throw new kc({signature:t,type:"event"});const r=$r(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xi(r[o],{modifiers:Yk,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function eD(t,e={}){const n=Bk(t);if(!n)throw new kc({signature:t,type:"error"});const r=$r(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xi(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function tD(t,e={}){const n=zk(t);if(!n)throw new kc({signature:t,type:"constructor"});const r=$r(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xi(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function nD(t){const e=Vk(t);if(!e)throw new kc({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const rD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,sD=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,iD=/^u?int$/;function Xi(t,e){var d,f;const n=Jk(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Xg.has(n))return Xg.get(n);const r=BS.test(t),s=to(r?sD:rD,t);if(!s)throw new KS({param:t});if(s.name&&aD(s.name))throw new GS({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(r){c="tuple";const h=$r(s.type),g=[],p=h.length;for(let y=0;y<p;y++)g.push(Xi(h[y],{structs:a}));u={components:g}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(iD.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!n5(c))throw new Zk({type:c});if(s.modifier){if(!((f=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&f.call(d,s.modifier)))throw new YS({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Qy.has(s.modifier)&&!cD(c,!!s.array))throw new ZS({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return Xg.set(n,l),l}function $r(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?$r(a,[...e,n.trim()]):$r(a,e,`${n}${o}`,r);case"(":return $r(a,e,`${n}${o}`,r+1);case")":return $r(a,e,`${n}${o}`,r-1);default:return $r(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new t5({current:n,depth:r});return e.push(n.trim()),e}function n5(t){return t==="address"||t==="bool"||t==="function"||t==="string"||DS.test(t)||US.test(t)}const oD=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function aD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||DS.test(t)||US.test(t)||oD.test(t)}function cD(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function u1(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!B0(a))continue;const c=Hk(a);if(!c)throw new kc({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let f=0;f<d;f++){const g=u[f].trim();if(!g)continue;const p=Xi(g,{type:"struct"});l.push(p)}if(!l.length)throw new QS({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=r5(c,e)}return r}const uD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function r5(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(BS.test(o.type))r.push(o);else{const c=to(uD,o.type);if(!(c!=null&&c.type))throw new JS({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new e5({type:l});r.push({...o,type:`tuple${u??""}`,components:r5(e[l]??[],e,new Set([...n,l]))})}else if(n5(l))r.push(o);else throw new WS({type:l})}}return r}function l1(t){const e=u1(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];B0(i)||n.push(eb(i,e))}return n}function tb(t){let e;if(typeof t=="string")e=eb(t);else{const n=u1(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!B0(i)){e=eb(i,n);break}}}if(!e)throw new zS({signature:t});return e}function nb(t){const e=[];if(typeof t=="string"){const n=$r(t),r=n.length;for(let s=0;s<r;s++)e.push(Xi(n[s],{modifiers:Wv}))}else{const n=u1(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(B0(i))continue;const o=$r(i),a=o.length;for(let c=0;c<a;c++)e.push(Xi(o[c],{modifiers:Wv,structs:n}))}}if(e.length===0)throw new VS({params:t});return e}function Oe(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function $s(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new p5(t.type);return`${t.name}(${L0(t.inputs,{includeName:e})})`}function L0(t,{includeName:e=!1}={}){return t?t.map(n=>lD(n,{includeName:e})).join(e?", ":","):""}function lD(t,{includeName:e}){return t.type.startsWith("tuple")?`(${L0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function ns(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Tt(t){return ns(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const s5="2.38.3";let Ml={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${s5}`},ne=class rb extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof rb?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof rb&&n.cause.docsPath||n.docsPath,i=(a=Ml.getDocsUrl)==null?void 0:a.call(Ml,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Ml.version?[`Version: ${Ml.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=s5}walk(e){return i5(this,e)}};function i5(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?i5(t.cause,e):e?null:t}class o5 extends ne{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class sb extends ne{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class d1 extends ne{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${L0(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Sl extends ne{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class a5 extends ne{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class c5 extends ne{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Tt(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class f1 extends ne{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class u5 extends ne{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class ib extends ne{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class h1 extends ne{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class l5 extends ne{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class p1 extends ne{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class ob extends ne{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class pc extends ne{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class g1 extends ne{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class d5 extends ne{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class dD extends ne{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${$s(e.abiItem)}\`, and`,`\`${n.type}\` in \`${$s(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let m1=class extends ne{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Gu extends ne{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${L0(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class kf extends ne{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${$s(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class f5 extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class h5 extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let y1=class extends ne{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class p5 extends ne{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class g5 extends ne{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class m5 extends ne{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let b1=class extends ne{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},w1=class extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Vv extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function si(t,{dir:e,size:n=32}={}){return typeof t=="string"?zi(t,{dir:e,size:n}):y5(t,{dir:e,size:n})}function zi(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new w1({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function y5(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new w1({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let E1=class extends ne{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},b5=class extends ne{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class w5 extends ne{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let E5=class extends ne{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Os(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function cs(t,{size:e}){if(Tt(t)>e)throw new E5({givenSize:Tt(t),maxSize:e})}function Dr(t,e={}){const{signed:n}=e;e.size&&cs(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function v5(t,e={}){let n=t;if(e.size&&(cs(n,{size:e.size}),n=Os(n)),Os(n)==="0x00")return!1;if(Os(n)==="0x01")return!0;throw new w5(n)}function rs(t,e={}){return Number(Dr(t,e))}function v1(t,e={}){let n=Ur(t);return e.size&&(cs(n,{size:e.size}),n=Os(n,{dir:"right"})),new TextDecoder().decode(n)}const fD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ss(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ie(t,e):typeof t=="string"?da(t,e):typeof t=="boolean"?M0(t,e):zt(t,e)}function M0(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(cs(n,{size:e.size}),si(n,{size:e.size})):n}function zt(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=fD[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(cs(r,{size:e.size}),si(r,{dir:"right",size:e.size})):r}function Ie(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new E1({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?si(a,{size:r}):a}const hD=new TextEncoder;function da(t,e={}){const n=hD.encode(t);return zt(n,e)}const pD=new TextEncoder;function Dc(t,e={}){return typeof t=="number"||typeof t=="bigint"?C5(t,e):typeof t=="boolean"?A5(t,e):ns(t)?Ur(t,e):ea(t,e)}function A5(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(cs(n,{size:e.size}),si(n,{size:e.size})):n}const pi={zero:48,nine:57,A:65,F:70,a:97,f:102};function Kv(t){if(t>=pi.zero&&t<=pi.nine)return t-pi.zero;if(t>=pi.A&&t<=pi.F)return t-(pi.A-10);if(t>=pi.a&&t<=pi.f)return t-(pi.a-10)}function Ur(t,e={}){let n=t;e.size&&(cs(n,{size:e.size}),n=si(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Kv(r.charCodeAt(a++)),u=Kv(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new ne(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function C5(t,e){const n=Ie(t,e);return Ur(n)}function ea(t,e={}){const n=pD.encode(t);return typeof e.size=="number"?(cs(n,{size:e.size}),si(n,{dir:"right",size:e.size})):n}const ph=BigInt(2**32-1),Gv=BigInt(32);function gD(t,e=!1){return e?{h:Number(t&ph),l:Number(t>>Gv&ph)}:{h:Number(t>>Gv&ph)|0,l:Number(t&ph)|0}}function mD(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=gD(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const yD=(t,e,n)=>t<<n|e>>>32-n,bD=(t,e,n)=>e<<n|t>>>32-n,wD=(t,e,n)=>e<<n-32|t>>>64-n,ED=(t,e,n)=>t<<n-32|e>>>64-n,Gc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ef(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function gc(t,...e){if(!vD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AD(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ef(t.outputLen),ef(t.blockLen)}function Yu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _5(t,e){gc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function CD(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Zu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Qg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fs(t,e){return t<<32-e|t>>>e}const _D=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function SD(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function ID(t){for(let e=0;e<t.length;e++)t[e]=SD(t[e]);return t}const Yv=_D?t=>t:ID;function xD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function F0(t){return typeof t=="string"&&(t=xD(t)),gc(t),t}function TD(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];gc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let A1=class{};function S5(t){const e=r=>t().update(F0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ND(t=32){if(Gc&&typeof Gc.getRandomValues=="function")return Gc.getRandomValues(new Uint8Array(t));if(Gc&&typeof Gc.randomBytes=="function")return Uint8Array.from(Gc.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const OD=BigInt(0),Fl=BigInt(1),PD=BigInt(2),RD=BigInt(7),$D=BigInt(256),kD=BigInt(113),I5=[],x5=[],T5=[];for(let t=0,e=Fl,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],I5.push(2*(5*r+n)),x5.push((t+1)*(t+2)/2%64);let s=OD;for(let i=0;i<7;i++)e=(e<<Fl^(e>>RD)*kD)%$D,e&PD&&(s^=Fl<<(Fl<<BigInt(i))-Fl);T5.push(s)}const N5=mD(T5,!0),DD=N5[0],UD=N5[1],Zv=(t,e,n)=>n>32?wD(t,e,n):yD(t,e,n),Jv=(t,e,n)=>n>32?ED(t,e,n):bD(t,e,n);function BD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=Zv(u,l,1)^n[a],f=Jv(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=x5[o],c=Zv(s,i,a),u=Jv(s,i,a),l=I5[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=DD[r],t[1]^=UD[r]}Zu(n)}let LD=class O5 extends A1{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ef(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=CD(this.state)}clone(){return this._cloneInto()}keccak(){Yv(this.state32),BD(this.state32,this.rounds),Yv(this.state32),this.posOut=0,this.pos=0}update(e){Yu(this),e=F0(e),gc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Yu(this,!1),gc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ef(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Zu(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new O5(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const MD=(t,e,n)=>S5(()=>new LD(e,t,n)),P5=MD(1,136,256/8);function an(t,e){const n=e||"hex",r=P5(ns(t,{strict:!1})?Dc(t):t);return n==="bytes"?r:ss(r)}const FD=t=>an(Dc(t));function jD(t){return FD(t)}function HD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ne("Unable to normalize signature.");return s}const dd=t=>{const e=typeof t=="string"?t:$p(t);return HD(e)};function kp(t){return jD(dd(t))}const Ju=kp;let ui=class extends ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Df=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const em=new Df(8192);function Uf(t,e){if(em.has(`${t}.${e}`))return em.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=an(ea(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return em.set(`${t}.${e}`,i),i}function Zo(t,e){if(!yr(t,{strict:!1}))throw new ui({address:t});return Uf(t,e)}const qD=/^0x[a-fA-F0-9]{40}$/,tm=new Df(8192);function yr(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(tm.has(r))return tm.get(r);const s=qD.test(t)?t.toLowerCase()===t?!0:n?Uf(t)===t:!0:!1;return tm.set(r,s),s}function is(t){return typeof t[0]=="string"?fi(t):R5(t)}function R5(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function fi(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function mc(t,e,n,{strict:r}={}){return ns(t,{strict:!1})?Dp(t,e,n,{strict:r}):C1(t,e,n,{strict:r})}function $5(t,e){if(typeof e=="number"&&e>0&&e>Tt(t)-1)throw new b1({offset:e,position:"start",size:Tt(t)})}function k5(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Tt(t)!==n-e)throw new b1({offset:n,position:"end",size:Tt(t)})}function C1(t,e,n,{strict:r}={}){$5(t,e);const s=t.slice(e,n);return r&&k5(s,e,n),s}function Dp(t,e,n,{strict:r}={}){$5(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&k5(s,e,n),s}const zD=/^(.*)\[([0-9]*)\]$/,D5=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function hi(t,e){if(t.length!==e.length)throw new f1({expectedLength:t.length,givenLength:e.length});const n=WD({params:t,values:e}),r=I1(n);return r.length===0?"0x":r}function WD({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(S1({param:t[r],value:e[r]}));return n}function S1({param:t,value:e}){const n=x1(t.type);if(n){const[r,s]=n;return KD(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return XD(e,{param:t});if(t.type==="address")return VD(e);if(t.type==="bool")return YD(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=_1.exec(t.type)??[];return ZD(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return GD(e,{param:t});if(t.type==="string")return JD(e);throw new f5(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function I1(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Tt(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ie(e+s,{size:32})),r.push(a),s+=Tt(a)):n.push(a)}return is([...n,...r])}function VD(t){if(!yr(t))throw new ui({address:t});return{dynamic:!1,encoded:zi(t.toLowerCase())}}function KD(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new y1(t);if(!r&&t.length!==e)throw new a5({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=S1({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=I1(i);if(r){const a=Ie(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?is([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:is(i.map(({encoded:o})=>o))}}function GD(t,{param:e}){const[,n]=e.type.split("bytes"),r=Tt(t);if(!n){let s=t;return r%32!==0&&(s=zi(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:is([zi(Ie(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new c5({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:zi(t,{dir:"right"})}}function YD(t){if(typeof t!="boolean")throw new ne(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:zi(M0(t))}}function ZD(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new E1({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ie(t,{size:32,signed:e})}}function JD(t){const e=da(t),n=Math.ceil(Tt(e)/32),r=[];for(let s=0;s<n;s++)r.push(zi(mc(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:is([zi(Ie(Tt(e),{size:32})),...r])}}function XD(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=S1({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?I1(r):is(r.map(({encoded:s})=>s))}}function x1(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const yc=t=>mc(kp(t),0,4);function Ea(t){const{abi:e,args:n=[],name:r}=t,s=ns(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?yc(a)===r:a.type==="event"?Ju(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?ab(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=U5(a.inputs,o.inputs,n);if(u)throw new dD({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function ab(t,e){const n=typeof t,r=e.type;switch(r){case"address":return yr(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>ab(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>ab(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function U5(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return U5(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?yr(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?yr(n[r],{strict:!1}):!1)return o}}const Xv="/docs/contract/encodeEventTopics";function Il(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const u=Ea({abi:e,name:n});if(!u)throw new ob(n,{docsPath:Xv});s=u}if(s.type!=="event")throw new ob(void 0,{docsPath:Xv});const i=$s(s),o=Ju(i);let a=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];l.length>0&&(a=(u==null?void 0:u.map((d,f)=>Array.isArray(l[f])?l[f].map((h,g)=>Qv({param:d,value:l[f][g]})):typeof l[f]<"u"&&l[f]!==null?Qv({param:d,value:l[f]}):null))??[])}return[o,...a]}function Qv({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return an(Dc(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new m5(t.type);return hi([t],[e])}function j0(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function B5(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,u=j0(t,{method:"eth_newFilter"}),l=i?Il({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?Ie(o):o,toBlock:typeof c=="bigint"?Ie(c):c,topics:l}]});return{abi:r,args:s,eventName:i,id:d,request:u(d),strict:!!a,type:"event"}}function wn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const e2="/docs/contract/encodeFunctionData";function L5(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Ea({abi:e,args:n,name:r});if(!i)throw new pc(r,{docsPath:e2});s=i}if(s.type!=="function")throw new pc(void 0,{docsPath:e2});return{abi:[s],functionName:yc($s(s))}}function Lr(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:L5(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?hi(s.inputs,e??[]):void 0;return fi([i,o??"0x"])}const QD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},M5={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},eU={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let t2=class extends ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},F5=class extends ne{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},tU=class extends ne{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const nU={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new tU({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new F5({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new t2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new t2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function T1(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(nU);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function j5(t,e={}){typeof e.size<"u"&&cs(t,{size:e.size});const n=zt(t,e);return Dr(n,e)}function H5(t,e={}){let n=t;if(typeof e.size<"u"&&(cs(n,{size:e.size}),n=Os(n)),n.length>1||n[0]>1)throw new b5(n);return!!n[0]}function ii(t,e={}){typeof e.size<"u"&&cs(t,{size:e.size});const n=zt(t,e);return rs(n,e)}function q5(t,e={}){let n=t;return typeof e.size<"u"&&(cs(n,{size:e.size}),n=Os(n,{dir:"right"})),new TextDecoder().decode(n)}function xl(t,e){const n=typeof e=="string"?Ur(e):e,r=T1(n);if(Tt(n)===0&&t.length>0)throw new Sl;if(Tt(e)&&Tt(e)<32)throw new d1({data:typeof e=="string"?e:zt(e),params:t,size:Tt(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=Su(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function Su(t,e,{staticPosition:n}){const r=x1(e.type);if(r){const[s,i]=r;return sU(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return cU(t,e,{staticPosition:n});if(e.type==="address")return rU(t);if(e.type==="bool")return iU(t);if(e.type.startsWith("bytes"))return oU(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return aU(t,e);if(e.type==="string")return uU(t,{staticPosition:n});throw new h5(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const n2=32,cb=32;function rU(t){const e=t.readBytes(32);return[Uf(zt(C1(e,-20))),32]}function sU(t,e,{length:n,staticPosition:r}){if(!n){const o=ii(t.readBytes(cb)),a=r+o,c=a+n2;t.setPosition(a);const u=ii(t.readBytes(n2)),l=tf(e);let d=0;const f=[];for(let h=0;h<u;++h){t.setPosition(c+(l?h*32:d));const[g,p]=Su(t,e,{staticPosition:c});d+=p,f.push(g)}return t.setPosition(r+32),[f,32]}if(tf(e)){const o=ii(t.readBytes(cb)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=Su(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Su(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function iU(t){return[H5(t.readBytes(32),{size:32}),32]}function oU(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ii(t.readBytes(32));t.setPosition(n+o);const a=ii(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[zt(c),32]}return[zt(t.readBytes(Number.parseInt(s,10),32)),32]}function aU(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?j5(s,{signed:n}):ii(s,{signed:n}),32]}function cU(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(tf(e)){const o=ii(t.readBytes(cb)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=Su(t,u,{staticPosition:a});i+=d,s[r?c:u==null?void 0:u.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=Su(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=u}return[s,i]}function uU(t,{staticPosition:e}){const n=ii(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ii(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=q5(Os(i));return t.setPosition(e+32),[o,32]}function tf(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(tf);const n=x1(t.type);return!!(n&&tf({...t,type:n[1]}))}function N1(t){const{abi:e,data:n}=t,r=mc(n,0,4);if(r==="0x")throw new Sl;const i=[...e||[],M5,eU].find(o=>o.type==="error"&&r===yc($s(o)));if(!i)throw new h1(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?xl(i.inputs,mc(n,4)):void 0,errorName:i.name}}const Lt=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function z5({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Lt(e[i]):e[i]}`).join(", ")})`}const W5={gwei:9,wei:18},V5={ether:-9,wei:9},K5={ether:-18,gwei:-9};function Uc(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function H0(t,e="wei"){return Uc(t,W5[e])}function qn(t,e="wei"){return Uc(t,V5[e])}class G5 extends ne{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Y5 extends ne{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function r2(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function lU(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=r2(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=r2(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Bf(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Z5 extends ne{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class J5 extends ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Bf(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class X5 extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var g;const h=Bf({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${H0(f)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${qn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${qn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${qn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class O1 extends ne{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class P1 extends ne{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class dU extends ne{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class Q5 extends ne{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const fU=t=>t,Lf=t=>t;class R1 extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:h}){var y;const g=n?wn(n):void 0;let p=Bf({from:g==null?void 0:g.address,to:d,value:typeof f<"u"&&`${H0(f)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${qn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${qn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${qn(u)} gwei`,nonce:l});h&&(p+=`
${lU(h)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class q0 extends ne{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Ea({abi:n,args:r,name:o}),u=c?z5({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?$s(c,{includeName:!0}):void 0,d=Bf({address:s&&fU(s),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Up extends ne{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=N1({abi:e,data:n});const{abiItem:l,errorName:d,args:f}=o;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=QD[h]}else{const h=l?$s(l,{includeName:!0}):void 0,g=l&&f?z5({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",g&&g!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof h1&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class eI extends ne{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class tI extends ne{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Mf extends ne{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class ta extends ne{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Lf(o)}`,e&&`Request body: ${Lt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class z0 extends ne{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Lf(r)}`,`Request body: ${Lt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class ub extends ne{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Lf(n)}`,`Request body: ${Lt(e)}`],name:"TimeoutError"})}}const hU=-1;class Zn extends ne{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof z0?e.code:n??hU}}class vr extends Zn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Xu extends Zn{constructor(e){super(e,{code:Xu.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Xu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Qu extends Zn{constructor(e){super(e,{code:Qu.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Qu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class el extends Zn{constructor(e,{method:n}={}){super(e,{code:el.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class tl extends Zn{constructor(e){super(e,{code:tl.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class fa extends Zn{constructor(e){super(e,{code:fa.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ha extends Zn{constructor(e){super(e,{code:ha.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class nl extends Zn{constructor(e){super(e,{code:nl.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Wi extends Zn{constructor(e){super(e,{code:Wi.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class bc extends Zn{constructor(e){super(e,{code:bc.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(bc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Jo extends Zn{constructor(e,{method:n}={}){super(e,{code:Jo.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wc extends Zn{constructor(e){super(e,{code:wc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class rl extends Zn{constructor(e){super(e,{code:rl.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(rl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class bn extends vr{constructor(e){super(e,{code:bn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sl extends vr{constructor(e){super(e,{code:sl.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(sl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class il extends vr{constructor(e,{method:n}={}){super(e,{code:il.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ol extends vr{constructor(e){super(e,{code:ol.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class al extends vr{constructor(e){super(e,{code:al.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(al,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class pa extends vr{constructor(e){super(e,{code:pa.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class cl extends vr{constructor(e){super(e,{code:cl.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(cl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ul extends vr{constructor(e){super(e,{code:ul.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ul,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ll extends vr{constructor(e){super(e,{code:ll.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class dl extends vr{constructor(e){super(e,{code:dl.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class fl extends vr{constructor(e){super(e,{code:fl.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class hl extends vr{constructor(e){super(e,{code:hl.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class pl extends vr{constructor(e){super(e,{code:pl.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class nI extends Zn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const pU=3;function ga(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof Mf?t:t instanceof ne?t.walk(g=>"data"in g)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=a,h=t instanceof Sl?new eI({functionName:i}):[pU,fa.code].includes(c)&&(u||l||d||f)?new Up({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof z0?l:f??d}):t;return new q0(h,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function gU(t){const e=an(`0x${t.substring(4)}`).substring(26);return Uf(`0x${e}`)}const mU="modulepreload",yU=function(t){return"/"+t},s2={},mn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=yU(c),c in s2)return;s2[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":mU,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function rI({hash:t,signature:e}){const n=ns(t)?t:ss(t),{secp256k1:r}=await mn(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>CL);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:f}=e,h=Number(f??d),g=i2(h);return new r.Signature(Dr(u),Dr(l)).addRecoveryBit(g)}const o=ns(e)?e:ss(e);if(Tt(o)!==65)throw new Error("invalid signature length");const a=rs(`0x${o.slice(130)}`),c=i2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function i2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function $1({hash:t,signature:e}){return gU(await rI({hash:t,signature:e}))}function sI(t,e="hex"){const n=iI(t),r=T1(new Uint8Array(n.length));return n.encode(r),e==="hex"?zt(r.bytes):r.bytes}function iI(t){return Array.isArray(t)?bU(t.map(e=>iI(e))):wU(t)}function bU(t){const e=t.reduce((s,i)=>s+i.length,0),n=oI(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function wU(t){const e=typeof t=="string"?Ur(t):t,n=oI(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function oI(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ne("Length is too large.")}function EU(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=an(fi(["0x05",sI([e?Ie(e):"0x",s,n?Ie(n):"0x"])]));return r==="bytes"?Ur(i):i}async function k1(t){const{authorization:e,signature:n}=t;return $1({hash:EU(e),signature:n??e})}class aI extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){var g;const h=Bf({from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${H0(f)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${qn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${qn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${qn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Xo extends ne{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Xo,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Xo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class nf extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${qn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(nf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Bp extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${qn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Bp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Lp extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Lp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Mp extends ne{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Mp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Fp extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Fp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class jp extends ne{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(jp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Hp extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Hp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class qp extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(qp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class zp extends ne{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(zp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class rf extends ne{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${qn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${qn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(rf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Tl extends ne{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function W0(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ne?t.walk(s=>(s==null?void 0:s.code)===Xo.code):t;return r instanceof ne?new Xo({cause:t,message:r.details}):Xo.nodeMessage.test(n)?new Xo({cause:t,message:t.details}):nf.nodeMessage.test(n)?new nf({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Bp.nodeMessage.test(n)?new Bp({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Lp.nodeMessage.test(n)?new Lp({cause:t,nonce:e==null?void 0:e.nonce}):Mp.nodeMessage.test(n)?new Mp({cause:t,nonce:e==null?void 0:e.nonce}):Fp.nodeMessage.test(n)?new Fp({cause:t,nonce:e==null?void 0:e.nonce}):jp.nodeMessage.test(n)?new jp({cause:t}):Hp.nodeMessage.test(n)?new Hp({cause:t,gas:e==null?void 0:e.gas}):qp.nodeMessage.test(n)?new qp({cause:t,gas:e==null?void 0:e.gas}):zp.nodeMessage.test(n)?new zp({cause:t}):rf.nodeMessage.test(n)?new rf({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Tl({cause:t})}function vU(t,{docsPath:e,...n}){const r=(()=>{const s=W0(t,n);return s instanceof Tl?t:s})();return new aI(r,{docsPath:e,...n})}function V0(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const cI={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Nl(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=AU(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>zt(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=Ie(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=Ie(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=Ie(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=Ie(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=Ie(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=Ie(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=cI[t.type]),typeof t.value<"u"&&(n.value=Ie(t.value)),n}function AU(t){return t.map(e=>({address:e.address,r:e.r?Ie(BigInt(e.r)):e.r,s:e.s?Ie(BigInt(e.s)):e.s,chainId:Ie(e.chainId),nonce:Ie(e.nonce),...typeof e.yParity<"u"?{yParity:Ie(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ie(e.v)}:{}}))}function o2(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Vv({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Vv({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function CU(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ie(e)),n!==void 0&&(o.nonce=Ie(n)),r!==void 0&&(o.state=o2(r)),s!==void 0){if(o.state)throw new Y5;o.stateDiff=o2(s)}return o}function D1(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!yr(n,{strict:!1}))throw new ui({address:n});if(e[n])throw new G5({address:n});e[n]=CU(r)}return e}const uI=2n**256n-1n;function Bc(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?wn(e):void 0;if(o&&!yr(o.address))throw new ui({address:o.address});if(i&&!yr(i))throw new ui({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Z5;if(r&&r>uI)throw new nf({maxFeePerGas:r});if(s&&r&&s>r)throw new rf({maxFeePerGas:r,maxPriorityFeePerGas:s})}class lI extends ne{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class K0 extends ne{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class dI extends ne{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${qn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class U1 extends ne{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const B1={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function L1(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?rs(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?rs(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?B1[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=_U(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function _U(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function M1(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:L1(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function ei(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var u,l,d;const i=s??!1,o=n!==void 0?Ie(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new U1({blockHash:e,blockNumber:n});return(((d=(l=(u=t.chain)==null?void 0:u.formatters)==null?void 0:l.block)==null?void 0:d.format)||M1)(a,"getBlock")}async function F1(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function SU(t,e){return fI(t,e)}async function fI(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=n||await Oe(t,ei,"getBlock")({}),l=await a({block:u,client:t,request:s});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Dr(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Oe(t,ei,"getBlock")({}),Oe(t,F1,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new K0;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function IU(t,e){return lb(t,e)}async function lb(t,e){var f,h;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var g,p;return typeof((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)??1.2})();if(o<1)throw new lI;const c=10**(((f=o.toString().split(".")[1])==null?void 0:f.length)??0),u=g=>g*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await Oe(t,ei,"getBlock")({});if(typeof((h=r==null?void 0:r.fees)==null?void 0:h.estimateFeesPerGas)=="function"){const g=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(g!==null)return g}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new K0;const g=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await fI(t,{block:l,chain:r,request:s}),p=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??p+g,maxPriorityFeePerGas:g}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await Oe(t,F1,"getGasPrice")({}))}}async function j1(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ie(r):n]},{dedupe:!!r});return rs(s)}function H1(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ur(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>zt(i))}function q1(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ur(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ur(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>zt(o))}function xU(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function TU(t,e,n){return t&e^~t&n}function NU(t,e,n){return t&e^t&n^e&n}let OU=class extends A1{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Qg(this.buffer)}update(e){Yu(this),e=F0(e),gc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Qg(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yu(this),_5(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Zu(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;xU(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Qg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const so=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),PU=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),io=new Uint32Array(64);let RU=class extends OU{constructor(e=32){super(64,e,8,!1),this.A=so[0]|0,this.B=so[1]|0,this.C=so[2]|0,this.D=so[3]|0,this.E=so[4]|0,this.F=so[5]|0,this.G=so[6]|0,this.H=so[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)io[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=io[d-15],h=io[d-2],g=Fs(f,7)^Fs(f,18)^f>>>3,p=Fs(h,17)^Fs(h,19)^h>>>10;io[d]=p+io[d-7]+g+io[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Fs(a,6)^Fs(a,11)^Fs(a,25),h=l+f+TU(a,c,u)+PU[d]+io[d]|0,p=(Fs(r,2)^Fs(r,13)^Fs(r,22))+NU(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Zu(io)}destroy(){this.set(0,0,0,0,0,0,0,0),Zu(this.buffer)}};const hI=S5(()=>new RU),$U=hI;function pI(t,e){return $U(ns(t,{strict:!1})?Dc(t):t)}function gI(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=pI(e);return s.set([n],0),r==="bytes"?s:zt(s)}function mI(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(gI({commitment:i,to:r,version:n}));return s}const a2=6,yI=32,z1=4096,bI=yI*z1,c2=bI*a2-1-1*z1*a2;class kU extends ne{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class DU extends ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function wI(t){const e=typeof t.data=="string"?Ur(t.data):t.data,n=Tt(e);if(!n)throw new DU;if(n>c2)throw new kU({maxSize:c2,size:n});const r=[];let s=!0,i=0;for(;s;){const o=T1(new Uint8Array(bI));let a=0;for(;a<z1;){const c=e.slice(i,i+(yI-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>zt(o.bytes))}function EI(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??wI({data:e}),i=t.commitments??H1({blobs:s,kzg:n,to:r}),o=t.proofs??q1({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function vI(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new J5({transaction:t})}async function G0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return rs(e)}const AI=["blobVersionedHashes","chainId","fees","gas","nonce","type"],u2=new Map;async function Y0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=AI,type:l}=e,d=n&&wn(n),f={...e,...d?{from:d==null?void 0:d.address}:{}};let h;async function g(){return h||(h=await Oe(t,ei,"getBlock")({blockTag:"latest"}),h)}let p;async function y(){return p||(s?s.id:typeof e.chainId<"u"?e.chainId:(p=await Oe(t,G0,"getChainId")({}),p))}if(u.includes("nonce")&&typeof a>"u"&&d)if(c){const C=await y();f.nonce=await c.consume({address:d.address,chainId:C,client:t})}else f.nonce=await Oe(t,j1,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const C=H1({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const N=mI({commitments:C,to:"hex"});f.blobVersionedHashes=N}if(u.includes("sidecars")){const N=q1({blobs:r,commitments:C,kzg:o}),E=EI({blobs:r,commitments:C,proofs:N,to:"hex"});f.sidecars=E}}if(u.includes("chainId")&&(f.chainId=await y()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{f.type=vI(f)}catch{let C=u2.get(t.uid);if(typeof C>"u"){const N=await g();C=typeof(N==null?void 0:N.baseFeePerGas)=="bigint",u2.set(t.uid,C)}f.type=C?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const C=await g(),{maxFeePerGas:N,maxPriorityFeePerGas:E}=await lb(t,{block:C,chain:s,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<E)throw new dI({maxPriorityFeePerGas:E});f.maxPriorityFeePerGas=E,f.maxFeePerGas=N}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new K0;if(typeof e.gasPrice>"u"){const C=await g(),{gasPrice:N}=await lb(t,{block:C,chain:s,request:f,type:"legacy"});f.gasPrice=N}}return u.includes("gas")&&typeof i>"u"&&(f.gas=await Oe(t,Z0,"estimateGas")({...f,account:d&&{address:d.address,type:"json-rpc"}})),Bc(f),delete f.parameters,f}async function Z0(t,e){var s,i,o;const{account:n=t.account}=e,r=n?wn(n):void 0;try{const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:f,data:h,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:C,maxPriorityFeePerGas:N,nonce:E,value:A,stateOverride:_,...O}=await Y0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),M=(typeof d=="bigint"?Ie(d):void 0)||f,D=D1(_),q=await(async()=>{if(O.to)return O.to;if(c&&c.length>0)return await k1({authorization:c[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`")})})();Bc(e);const j=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,T=(j||Nl)({...V0(O,{format:j}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:h,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:C,maxPriorityFeePerGas:N,nonce:E,to:q,value:A},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:D?[T,M??t.experimental_blockTag??"latest",D]:M?[T,M]:[T]}))}catch(a){throw vU(a,{...e,account:r,chain:t.chain})}}async function UU(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Lr({abi:n,args:s,functionName:i});try{return await Oe(t,Z0,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?wn(a.account):void 0;throw ga(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l==null?void 0:l.address})}}function Lc(t,e){if(!yr(t,{strict:!1}))throw new ui({address:t});if(!yr(e,{strict:!1}))throw new ui({address:e});return t.toLowerCase()===e.toLowerCase()}const l2="/docs/contract/decodeEventLog";function J0(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new l5({docsPath:l2});const c=e.find(p=>p.type==="event"&&o===Ju($s(p)));if(!(c&&"name"in c)||c.type!=="event")throw new p1(o,{docsPath:l2});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(p=>!("name"in p&&p.name)),f=d?[]:{},h=l.map((p,y)=>[p,y]).filter(([p])=>"indexed"in p&&p.indexed);for(let p=0;p<h.length;p++){const[y,C]=h[p],N=a[p];if(!N)throw new kf({abiItem:c,param:y});f[d?C:y.name||C]=BU({param:y,value:N})}const g=l.filter(p=>!("indexed"in p&&p.indexed));if(g.length>0){if(n&&n!=="0x")try{const p=xl(g,n);if(p)if(d)for(let y=0;y<l.length;y++)f[y]=f[y]??p.shift();else for(let y=0;y<g.length;y++)f[g[y].name]=p[y]}catch(p){if(i)throw p instanceof d1||p instanceof F5?new Gu({abiItem:c,data:n,params:g,size:Tt(n)}):p}else if(i)throw new Gu({abiItem:c,data:"0x",params:g,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function BU({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(xl([t],e)||[])[0]}function X0(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(l=>l.type==="event"&&o.topics[0]===Ju(l));if(!c)return null;const u=J0({...o,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!LU({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...o}}catch(c){let u,l;if(c instanceof p1)return null;if(c instanceof Gu||c instanceof kf){if(s)return null;u=c.abiItem.name,l=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:l?[]:{},eventName:u}}}).filter(Boolean)}function LU(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?Lc(o,a):i.type==="string"||i.type==="bytes"?an(Dc(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function li(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function W1(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const u=c??!1,l=o??(i?[i]:void 0);let d=[];l&&(d=[l.flatMap(p=>Il({abi:[p],eventName:p.name,args:o?void 0:a}))],i&&(d=d[0]));let f;n?f=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):f=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?Ie(r):r,toBlock:typeof s=="bigint"?Ie(s):s}]});const h=f.map(g=>li(g));return l?X0({abi:l,args:a,logs:h,strict:u}):h}async function CI(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:u}=e,l=o?Ea({abi:n,name:o}):void 0,d=l?void 0:n.filter(f=>f.type==="event");return Oe(t,W1,"getLogs")({address:r,args:s,blockHash:i,event:l,events:d,fromBlock:a,toBlock:c,strict:u})}const nm="/docs/contract/decodeFunctionResult";function va(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Ea({abi:e,args:n,name:r});if(!a)throw new pc(r,{docsPath:nm});i=a}if(i.type!=="function")throw new pc(void 0,{docsPath:nm});if(!i.outputs)throw new g1(i.name,{docsPath:nm});const o=xl(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const V1=BigInt(0),db=BigInt(1);function Ff(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K1(t){if(!Ff(t))throw new Error("Uint8Array expected")}function sf(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function gh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function _I(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?V1:BigInt("0x"+t)}const SI=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",MU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function of(t){if(K1(t),SI)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=MU[t[n]];return e}const gi={_0:48,_9:57,A:65,F:70,a:97,f:102};function d2(t){if(t>=gi._0&&t<=gi._9)return t-gi._0;if(t>=gi.A&&t<=gi.F)return t-(gi.A-10);if(t>=gi.a&&t<=gi.f)return t-(gi.a-10)}function Wp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(SI)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=d2(t.charCodeAt(i)),a=d2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ic(t){return _I(of(t))}function II(t){return K1(t),_I(of(Uint8Array.from(t).reverse()))}function jf(t,e){return Wp(t.toString(16).padStart(e*2,"0"))}function xI(t,e){return jf(t,e).reverse()}function Gr(t,e,n){let r;if(typeof e=="string")try{r=Wp(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Ff(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Vp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];K1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const rm=t=>typeof t=="bigint"&&V1<=t;function G1(t,e,n){return rm(t)&&rm(e)&&rm(n)&&e<=t&&t<n}function Iu(t,e,n,r){if(!G1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function FU(t){let e;for(e=0;t>V1;t>>=db,e+=1);return e}const Q0=t=>(db<<BigInt(t))-db,sm=t=>new Uint8Array(t),f2=t=>Uint8Array.from(t);function jU(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=sm(t),s=sm(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=sm(0))=>{s=a(f2([0]),d),r=a(),d.length!==0&&(s=a(f2([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Vp(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(u()));)c();return o(),h}}const HU={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ff(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function eg(t,e,n={}){const r=(s,i,o)=>{const a=HU[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function h2(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const qU="0.1.1";function zU(){return qU}let Qe=class fb extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof fb){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof fb&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${zU()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return TI(this,e)}};function TI(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?TI(t.cause,e):e?null:t}function Hf(t,e){if(mu(t)>e)throw new aB({givenSize:mu(t),maxSize:e})}const mi={zero:48,nine:57,A:65,F:70,a:97,f:102};function p2(t){if(t>=mi.zero&&t<=mi.nine)return t-mi.zero;if(t>=mi.A&&t<=mi.F)return t-(mi.A-10);if(t>=mi.a&&t<=mi.f)return t-(mi.a-10)}function WU(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new cB({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function NI(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function tg(t,e){if(Br(t)>e)throw new pB({givenSize:Br(t),maxSize:e})}function VU(t,e){if(typeof e=="number"&&e>0&&e>Br(t)-1)throw new LI({offset:e,position:"start",size:Br(t)})}function KU(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Br(t)!==n-e)throw new LI({offset:n,position:"end",size:Br(t)})}function OI(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new gB({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const GU="#__bigint";function PI(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+GU:s,n)}const YU=new TextDecoder,ZU=new TextEncoder;function JU(t){return t instanceof Uint8Array?t:typeof t=="string"?RI(t):XU(t)}function XU(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function RI(t,e={}){const{size:n}=e;let r=t;n&&(tg(t,n),r=vc(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=p2(s.charCodeAt(c++)),l=p2(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new Qe(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function QU(t,e={}){const{size:n}=e,r=ZU.encode(t);return typeof n=="number"?(Hf(r,n),eB(r,n)):r}function eB(t,e){return WU(t,{dir:"right",size:e})}function mu(t){return t.length}function tB(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function nB(t,e={}){const{size:n}=e;typeof n<"u"&&Hf(t,n);const r=Ds(t,e);return DI(r,e)}function rB(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(Hf(r,n),r=$I(r)),r.length>1||r[0]>1)throw new oB(r);return!!r[0]}function Vi(t,e={}){const{size:n}=e;typeof n<"u"&&Hf(t,n);const r=Ds(t,e);return UI(r,e)}function sB(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(Hf(r,n),r=iB(r)),YU.decode(r)}function $I(t){return NI(t,{dir:"left"})}function iB(t){return NI(t,{dir:"right"})}class oB extends Qe{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let aB=class extends Qe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},cB=class extends Qe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const uB=new TextEncoder,lB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dB(t,e={}){const{strict:n=!1}=e;if(!t)throw new g2(t);if(typeof t!="string")throw new g2(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new m2(t);if(!t.startsWith("0x"))throw new m2(t)}function ks(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function fB(t){return t instanceof Uint8Array?Ds(t):Array.isArray(t)?Ds(new Uint8Array(t)):t}function kI(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(tg(n,e.size),Ec(n,e.size)):n}function Ds(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=lB[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(tg(r,e.size),vc(r,e.size)):r}function jn(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new BI({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ec(c,r):c}function Y1(t,e={}){return Ds(uB.encode(t),e)}function Ec(t,e){return OI(t,{dir:"left",size:e})}function vc(t,e){return OI(t,{dir:"right",size:e})}function oi(t,e,n,r={}){const{strict:s}=r;VU(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&KU(i,e,n),i}function Br(t){return Math.ceil((t.length-2)/2)}function DI(t,e={}){const{signed:n}=e;e.size&&tg(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function UI(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:DI(t,e))}function hB(t,e={}){const{strict:n=!1}=e;try{return dB(t,{strict:n}),!0}catch{return!1}}let BI=class extends Qe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},g2=class extends Qe{constructor(e){super(`Value \`${typeof e=="object"?PI(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},m2=class extends Qe{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},pB=class extends Qe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},LI=class extends Qe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},gB=class extends Qe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function mB(t){return{address:t.address,amount:jn(t.amount),index:jn(t.index),validatorIndex:jn(t.validatorIndex)}}function MI(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:jn(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:jn(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:jn(t.gasLimit)},...typeof t.number=="bigint"&&{number:jn(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:jn(t.prevRandao)},...typeof t.time=="bigint"&&{time:jn(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(mB)}}}const af=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],hb=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],FI=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],jI=[...FI,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],yB=[...FI,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],y2=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],b2=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],HI=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],Kp=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],fd=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],bB="0x82ad56cb",Z1="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",qI="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",pb="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",J1="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Gp extends ne{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class zI extends ne{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class WI extends ne{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class X1 extends ne{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const im="/docs/contract/encodeDeployData";function ng(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new o5({docsPath:im});if(!("inputs"in s))throw new sb({docsPath:im});if(!s.inputs||s.inputs.length===0)throw new sb({docsPath:im});const i=hi(s.inputs,n);return fi([r,i])}function Mc({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new Gp({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Gp({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function VI(t,{docsPath:e,...n}){const r=(()=>{const s=W0(t,n);return s instanceof Tl?t:s})();return new R1(r,{docsPath:e,...n})}function Q1(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const om=new Map;function KI({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<l.length;h++){const{resolve:g}=l[h];g==null||g([f[h],f])}}).catch(f=>{for(let h=0;h<l.length;h++){const{reject:g}=l[h];g==null||g(f)}})},o=()=>om.delete(e),a=()=>c().map(({args:l})=>l),c=()=>om.get(e)||[],u=l=>om.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:h}=Q1();return(n==null?void 0:n([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:f,reject:h}),d):(u({args:l,resolve:f,reject:h}),setTimeout(i,r),d)}}}async function Ol(t,e){var T,P,m,b;const{account:n=t.account,authorizationList:r,batch:s=!!((T=t.batch)!=null&&T.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:f,factoryData:h,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:C,maxPriorityFeePerGas:N,nonce:E,to:A,value:_,stateOverride:O,...$}=e,M=n?wn(n):void 0;if(l&&(f||h))throw new ne("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&A)throw new ne("Cannot provide both `code` & `to` as parameters.");const D=l&&d,q=f&&h&&A&&d,j=D||q,L=D?GI({code:l,data:d}):q?vB({data:d,factory:f,factoryData:h,to:A}):d;try{Bc(e);const x=(typeof i=="bigint"?Ie(i):void 0)||o,S=u?MI(u):void 0,R=D1(O),F=(b=(m=(P=t.chain)==null?void 0:P.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,Y=(F||Nl)({...V0($,{format:F}),from:M==null?void 0:M.address,accessList:a,authorizationList:r,blobs:c,data:L,gas:g,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:C,maxPriorityFeePerGas:N,nonce:E,to:j?void 0:A,value:_},"call");if(s&&wB({request:Y})&&!R&&!S)try{return await EB(t,{...Y,blockNumber:i,blockTag:o})}catch(ee){if(!(ee instanceof X1)&&!(ee instanceof Gp))throw ee}const G=(()=>{const ee=[Y,x];return R&&S?[...ee,R,S]:R?[...ee,R]:S?[...ee,{},S]:ee})(),K=await t.request({method:"eth_call",params:G});return K==="0x"?{data:void 0}:{data:K}}catch(I){const x=AB(I),{offchainLookup:S,offchainLookupSignature:R}=await mn(async()=>{const{offchainLookup:F,offchainLookupSignature:z}=await Promise.resolve().then(()=>p9);return{offchainLookup:F,offchainLookupSignature:z}},void 0);if(t.ccipRead!==!1&&(x==null?void 0:x.slice(0,10))===R&&A)return{data:await S(t,{data:x,to:A})};throw j&&(x==null?void 0:x.slice(0,10))==="0x101bb98d"?new tI({factory:f}):VI(I,{...e,account:M,chain:t.chain})}}function wB({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(bB)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function EB(t,e){var p;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((p=t.batch)==null?void 0:p.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Mc({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new X1})(),d=(typeof i=="bigint"?Ie(i):void 0)||o,{schedule:f}=KI({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(y){return y.reduce((N,{data:E})=>N+(E.length-2),0)>n*2},fn:async y=>{const C=y.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),N=Lr({abi:af,args:[C],functionName:"aggregate3"}),E=await t.request({method:"eth_call",params:[{...u===null?{data:GI({code:J1,data:N})}:{to:u,data:N}},d]});return va({abi:af,args:[C],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:h,success:g}]=await f({data:a,to:c});if(!g)throw new Mf({data:h});return h==="0x"?{data:void 0}:{data:h}}function GI(t){const{code:e,data:n}=t;return ng({abi:l1(["constructor(bytes, bytes)"]),bytecode:Z1,args:[e,n]})}function vB(t){const{data:e,factory:n,factoryData:r,to:s}=t;return ng({abi:l1(["constructor(address, bytes, address, bytes)"]),bytecode:qI,args:[s,e,n,r]})}function AB(t){var n;if(!(t instanceof ne))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function os(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Lr({abi:n,args:s,functionName:i});try{const{data:c}=await Oe(t,Ol,"call")({...o,data:a,to:r});return va({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw ga(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function CB(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?wn(a.account):t.account,u=Lr({abi:n,args:s,functionName:o});try{const{data:l}=await Oe(t,Ol,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=va({abi:n,args:s,functionName:o,data:l||"0x"}),f=n.filter(h=>"name"in h&&h.name===e.functionName);return{result:d,request:{abi:f,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(l){throw ga(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const am=new Map,w2=new Map;let _B=0;function Qi(t,e,n){const r=++_B,s=()=>am.get(t)||[],i=()=>{const l=s();am.set(t,l.filter(d=>d.id!==r))},o=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=w2.get(t);if(l.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(am.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...d)=>{var h,g;const f=s();if(f.length!==0)for(const p of f)(g=(h=p.fns)[l])==null||g.call(h,...d)};const u=n(c);return typeof u=="function"&&w2.set(t,u),o}async function Yp(t){return new Promise(e=>setTimeout(e,t))}function Pl(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Yp(c);const u=async()=>{s&&(await t({unpoll:i}),await Yp(r),u())};u()})(),i}const SB=new Map,IB=new Map;function xB(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,SB),r=e(t,IB);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function YI(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=xB(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const TB=t=>`blockNumber.${t}`;async function qf(t,{cacheTime:e=t.cacheTime}={}){const n=await YI(()=>t.request({method:"eth_blockNumber"}),{cacheKey:TB(t.uid),cacheTime:e});return BigInt(n)}async function rg(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>li(i));return!("abi"in e)||!e.abi?s:X0({abi:e.abi,logs:s,strict:n})}async function sg(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function NB(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:d=t.pollingInterval,strict:f}=e;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=f??!1,C=Lt(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return Qi(C,{onLogs:u,onError:c},N=>{let E;a!==void 0&&(E=a-1n);let A,_=!1;const O=Pl(async()=>{var $;if(!_){try{A=await Oe(t,B5,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}_=!0;return}try{let M;if(A)M=await Oe(t,rg,"getFilterChanges")({filter:A});else{const D=await Oe(t,qf,"getBlockNumber")({});E&&E<D?M=await Oe(t,CI,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:E+1n,toBlock:D,strict:y}):M=[],E=D}if(M.length===0)return;if(i)N.onLogs(M);else for(const D of M)N.onLogs([D])}catch(M){A&&M instanceof ha&&(_=!1),($=N.onError)==null||$.call(N,M)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await Oe(t,sg,"uninstallFilter")({filter:A}),O()}})})():(()=>{const y=f??!1,C=Lt(["watchContractEvent",r,s,i,t.uid,o,d,y]);let N=!0,E=()=>N=!1;return Qi(C,{onLogs:u,onError:c},A=>((async()=>{try{const _=(()=>{if(t.transport.type==="fallback"){const M=t.transport.transports.find(D=>D.config.type==="webSocket"||D.config.type==="ipc");return M?M.value:t.transport}return t.transport})(),O=o?Il({abi:n,eventName:o,args:s}):[],{unsubscribe:$}=await _.subscribe({params:["logs",{address:r,topics:O}],onData(M){var q;if(!N)return;const D=M.result;try{const{eventName:j,args:L}=J0({abi:n,data:D.data,topics:D.topics,strict:f}),T=li(D,{args:L,eventName:j});A.onLogs([T])}catch(j){let L,T;if(j instanceof Gu||j instanceof kf){if(f)return;L=j.abiItem.name,T=(q=j.abiItem.inputs)==null?void 0:q.some(m=>!("name"in m&&m.name))}const P=li(D,{args:T?[]:{},eventName:L});A.onLogs([P])}},onError(M){var D;(D=A.onError)==null||D.call(A,M)}});E=$,N||E()}catch(_){c==null||c(_)}})(),()=>E()))})()}class ig extends ne{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class cm extends ne{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function ZI({chain:t,currentChainId:e}){if(!t)throw new WI;if(e!==t.id)throw new zI({chain:t,currentChainId:e})}function OB(t,{docsPath:e,...n}){const r=(()=>{const s=W0(t,n);return s instanceof Tl?t:s})();return new X5(r,{docsPath:e,...n})}async function JI(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const um=new Df(128);async function XI(t,e){var N,E,A,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,type:g,value:p,...y}=e;if(typeof n>"u")throw new ig({docsPath:"/docs/actions/wallet/sendTransaction"});const C=n?wn(n):null;try{Bc(e);const O=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await k1({authorization:i[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`.")})})();if((C==null?void 0:C.type)==="json-rpc"||C===null){let $;r!==null&&($=await Oe(t,G0,"getChainId")({}),ZI({currentChainId:$,chain:r}));const M=(A=(E=(N=t.chain)==null?void 0:N.formatters)==null?void 0:E.transactionRequest)==null?void 0:A.format,q=(M||Nl)({...V0(y,{format:M}),accessList:s,authorizationList:i,blobs:o,chainId:$,data:a,from:C==null?void 0:C.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:O,type:g,value:p},"sendTransaction"),j=um.get(t.uid),L=j?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:L,params:[q]},{retryCount:0})}catch(T){if(j===!1)throw T;const P=T;if(P.name==="InvalidInputRpcError"||P.name==="InvalidParamsRpcError"||P.name==="MethodNotFoundRpcError"||P.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[q]},{retryCount:0}).then(m=>(um.set(t.uid,!0),m)).catch(m=>{const b=m;throw b.name==="MethodNotFoundRpcError"||b.name==="MethodNotSupportedRpcError"?(um.set(t.uid,!1),P):b});throw P}}if((C==null?void 0:C.type)==="local"){const $=await Oe(t,Y0,"prepareTransactionRequest")({account:C,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:C.nonceManager,parameters:[...AI,"sidecars"],type:g,value:p,...y,to:O}),M=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,D=await C.signTransaction($,{serializer:M});return await Oe(t,JI,"sendRawTransaction")({serializedTransaction:D})}throw(C==null?void 0:C.type)==="smart"?new cm({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new cm({docsPath:"/docs/actions/wallet/sendTransaction",type:C==null?void 0:C.type})}catch(O){throw O instanceof cm?O:OB(O,{...e,account:C,chain:e.chain||void 0})}}async function Zp(t,e){return Zp.internal(t,XI,"sendTransaction",e)}(function(t){async function e(n,r,s,i){const{abi:o,account:a=n.account,address:c,args:u,dataSuffix:l,functionName:d,...f}=i;if(typeof a>"u")throw new ig({docsPath:"/docs/contract/writeContract"});const h=a?wn(a):null,g=Lr({abi:o,args:u,functionName:d});try{return await Oe(n,r,s)({data:`${g}${l?l.replace("0x",""):""}`,to:c,account:h,...f})}catch(p){throw ga(p,{abi:o,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:d,sender:h==null?void 0:h.address})}}t.internal=e})(Zp||(Zp={}));class QI extends ne{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}function gl(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await Yp(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}const ex={"0x0":"reverted","0x1":"success"};function eE(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>li(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?rs(t.transactionIndex):null,status:t.status?ex[t.status]:null,type:t.type?B1[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const PB="0x5792579257925792579257925792579257925792579257925792579257925792",RB=Ie(0,{size:32});async function $B(t,e){async function n(l){if(l.endsWith(PB.slice(2))){const f=Os(Dp(l,-64,-32)),h=Dp(l,0,-64).slice(2).match(/.{1,64}/g),g=await Promise.all(h.map(y=>RB.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),p=g.some(y=>y===null)?100:g.every(y=>(y==null?void 0:y.status)==="0x1")?200:g.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:rs(f),receipts:g.filter(Boolean),status:p,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,u]=(()=>{const l=a.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...a,atomic:r,chainId:s?rs(s):void 0,receipts:(i==null?void 0:i.map(l=>({...l,blockNumber:Dr(l.blockNumber),gasUsed:Dr(l.gasUsed),status:ex[l.status]})))??[],statusCode:u,status:c,version:o}}async function Que(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:p})=>p===200||p>=300,retryCount:i=4,retryDelay:o=({count:p})=>~~(1<<p)*200,timeout:a=6e4,throwOnFailure:c=!1}=e,u=Lt(["waitForCallsStatus",t.uid,n]),{promise:l,resolve:d,reject:f}=Q1();let h;const g=Qi(u,{resolve:d,reject:f},p=>{const y=Pl(async()=>{const C=N=>{clearTimeout(h),y(),N(),g()};try{const N=await gl(async()=>{const E=await Oe(t,$B,"getCallsStatus")({id:n});if(c&&E.status==="failure")throw new QI(E);return E},{retryCount:i,delay:o});if(!s(N))return;C(()=>p.resolve(N))}catch(N){C(()=>p.reject(N))}},{interval:r,emitOnBegin:!0});return y});return h=a?setTimeout(()=>{g(),clearTimeout(h),f(new tx({id:n}))},a):void 0,await l}class tx extends ne{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const gb=256;let mh=gb,yh;function nx(t=11){if(!yh||mh+t>gb*2){yh="",mh=0;for(let e=0;e<gb;e++)yh+=(256+Math.random()*256|0).toString(16).substring(1)}return yh.substring(mh,mh+++t)}function og(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=t.pollingInterval??u,d=t.cacheTime??l,f=t.account?wn(t.account):void 0,{config:h,request:g,value:p}=t.transport({chain:n,pollingInterval:l}),y={...h,...p},C={account:f,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:g,transport:y,type:o,uid:nx(),...a?{experimental_blockTag:a}:{}};function N(E){return A=>{const _=A(E);for(const $ in C)delete _[$];const O={...E,..._};return Object.assign(O,{extend:N(O)})}}return Object.assign(C,{extend:N(C)})}function tE(t){var n,r,s,i,o,a;if(!(t instanceof ne))return!1;const e=t.walk(c=>c instanceof Up);return e instanceof Up?((n=e.data)==null?void 0:n.errorName)==="HttpError"||((r=e.data)==null?void 0:r.errorName)==="ResolverError"||((s=e.data)==null?void 0:s.errorName)==="ResolverNotContract"||((i=e.data)==null?void 0:i.errorName)==="ResolverNotFound"||((o=e.data)==null?void 0:o.errorName)==="ReverseAddressMismatch"||((a=e.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function rx(t){const{abi:e,data:n}=t,r=mc(n,0,4),s=e.find(i=>i.type==="function"&&r===yc($s(i)));if(!s)throw new d5(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?xl(s.inputs,mc(n,4)):void 0}}const lm="/docs/contract/encodeErrorResult";function mb(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Ea({abi:e,args:r,name:n});if(!c)throw new ib(n,{docsPath:lm});s=c}if(s.type!=="error")throw new ib(void 0,{docsPath:lm});const i=$s(s),o=yc(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new u5(s.name,{docsPath:lm});a=hi(s.inputs,r)}return fi([o,a])}const dm="/docs/contract/encodeFunctionResult";function sx(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Ea({abi:e,name:n});if(!o)throw new pc(n,{docsPath:dm});s=o}if(s.type!=="function")throw new pc(void 0,{docsPath:dm});if(!s.outputs)throw new g1(s.name,{docsPath:dm});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new y1(r)})();return hi(s.outputs,i)}const zf="x-batch-gateway:true";async function ix(t){const{data:e,ccipRequest:n}=t,{args:[r]}=rx({abi:hb,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(zf)?await ix({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=kB(c)}})),sx({abi:hb,functionName:"query",result:[s,i]})}function kB(t){return t.name==="HttpRequestError"&&t.status?mb({abi:hb,errorName:"HttpError",args:[t.status,t.shortMessage]}):mb({abi:[M5],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function ox(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ns(e)?e:null}function Jp(t){let e=new Uint8Array(32).fill(0);if(!t)return zt(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=ox(n[r]),i=s?Dc(s):an(ea(n[r]),"bytes");e=an(is([e,i]),"bytes")}return zt(e)}function DB(t){return`[${t.slice(2)}]`}function ax(t){const e=new Uint8Array(32).fill(0);return t?ox(t)||an(ea(t)):zt(e)}function nE(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(ea(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=ea(s[i]);o.byteLength>255&&(o=ea(DB(ax(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function UB(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Mc({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(f=>i.endsWith(f)))return null;const d=s!=null?[Jp(i),BigInt(s)]:[Jp(i)];try{const f=Lr({abi:b2,functionName:"addr",args:d}),h={address:u,abi:jI,functionName:"resolveWithGateways",args:[ss(nE(i)),f,o??[zf]],blockNumber:n,blockTag:r},p=await Oe(t,os,"readContract")(h);if(p[0]==="0x")return null;const y=va({abi:b2,args:d,functionName:"addr",data:p[0]});return y==="0x"||Os(y)==="0x00"?null:y}catch(f){if(a)throw f;if(tE(f))return null;throw f}}class BB extends ne{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class fu extends ne{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class ag extends ne{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class cx extends ne{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const LB=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,MB=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,FB=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jB=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function HB(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function E2(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function ux({uri:t,gatewayUrls:e}){const n=FB.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=E2(e==null?void 0:e.ipfs,"https://ipfs.io"),s=E2(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(LB),{protocol:o,subpath:a,target:c,subtarget:u=""}=(i==null?void 0:i.groups)||{},l=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||MB.test(t);if(t.startsWith("http")&&!l&&!d){let h=t;return e!=null&&e.arweave&&(h=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=t.replace(jB,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new ag({uri:t})}function lx(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new BB({data:t});return t.image||t.image_url||t.image_data}async function qB({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await rE({gatewayUrls:t,uri:lx(n)})}catch{throw new ag({uri:e})}}async function rE({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=ux({uri:e,gatewayUrls:t});if(r||await HB(n))return n;throw new ag({uri:e})}function zB(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new fu({reason:"Only EIP-155 supported"});if(!o)throw new fu({reason:"Chain ID not found"});if(!c)throw new fu({reason:"Contract address not found"});if(!s)throw new fu({reason:"Token ID not found"});if(!a)throw new fu({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function WB(t,{nft:e}){if(e.namespace==="erc721")return os(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return os(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new cx({namespace:e.namespace})}async function VB(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?KB(t,{gatewayUrls:e,record:n}):rE({uri:n,gatewayUrls:e})}async function KB(t,{gatewayUrls:e,record:n}){const r=zB(n),s=await WB(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=ux({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=a?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return rE({uri:lx(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),qB({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function dx(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Mc({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(d=>i.endsWith(d)))return null;try{const d={address:u,abi:jI,args:[ss(nE(i)),Lr({abi:y2,functionName:"text",args:[Jp(i),s]}),o??[zf]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},h=await Oe(t,os,"readContract")(d);if(h[0]==="0x")return null;const g=va({abi:y2,functionName:"text",data:h[0]});return g===""?null:g}catch(d){if(a)throw d;if(tE(d))return null;throw d}}async function GB(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await Oe(t,dx,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await VB(t,{record:c,gatewayUrls:r})}catch{return null}}async function YB(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Mc({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const l={address:u,abi:yB,args:[n,i,o??[zf]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=Oe(t,os,"readContract"),[f]=await d(l);return f||null}catch(l){if(a)throw l;if(tE(l))return null;throw l}}async function ZB(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Mc({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await Oe(t,os,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[ss(nE(s))],blockNumber:n,blockTag:r});return c}async function fx(t,e){var y,C,N;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h,...g}=e,p=n?wn(n):void 0;try{Bc(e);const A=(typeof r=="bigint"?Ie(r):void 0)||s,_=(N=(C=(y=t.chain)==null?void 0:y.formatters)==null?void 0:C.transactionRequest)==null?void 0:N.format,$=(_||Nl)({...V0(g,{format:_}),from:p==null?void 0:p.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:h},"createAccessList"),M=await t.request({method:"eth_createAccessList",params:[$,A]});return{accessList:M.accessList,gasUsed:BigInt(M.gasUsed)}}catch(E){throw VI(E,{...e,account:p,chain:t.chain})}}async function JB(t){const e=j0(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function hx(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),u=j0(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(h=>Il({abi:[h],eventName:h.name,args:n}))],r&&(l=l[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?Ie(i):i,toBlock:typeof a=="bigint"?Ie(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:u(d),strict:!!o,toBlock:a,type:"event"}}async function px(t){const e=j0(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function gx(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?Ie(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function XB(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function QB(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?Ie(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),rs(i)}async function yb(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?Ie(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class e9 extends ne{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function t9(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,u,l,d]=await Oe(t,os,"readContract")({abi:n9,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new e9({address:n}):o}}const n9=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function r9(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function s9(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?Ie(n):void 0,o=await t.request({method:"eth_feeHistory",params:[Ie(e),i||r,s]},{dedupe:!!i});return r9(o)}async function i9(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>li(i));return e.abi?X0({abi:e.abi,logs:s,strict:n}):s}function o9(t,e){if(t.length!==e.length)throw new f1({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(mx(s,i))}return fi(n)}function mx(t,e,n=!1){if(t==="address"){const o=e;if(!yr(o))throw new ui({address:o});return si(o.toLowerCase(),{size:n?32:null})}if(t==="string")return da(e);if(t==="bytes")return e;if(t==="bool")return si(M0(e),{size:n?32:1});const r=t.match(_1);if(r){const[o,a,c="256"]=r,u=Number.parseInt(c,10)/8;return Ie(e,{size:n?32:u,signed:a==="int"})}const s=t.match(D5);if(s){const[o,a]=s;if(Number.parseInt(a,10)!==(e.length-2)/2)throw new m1({expectedSize:Number.parseInt(a,10),givenSize:(e.length-2)/2});return si(e,{dir:"right",size:n?32:null})}const i=t.match(zD);if(i&&Array.isArray(e)){const[o,a]=i,c=[];for(let u=0;u<e.length;u++)c.push(mx(a,e[u],!0));return c.length===0?"0x":fi(c)}throw new g5(t)}async function a9({address:t,authorization:e,signature:n}){return Lc(Zo(t),await k1({authorization:e,signature:n}))}const bh=new Df(8192);function c9(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(bh.get(n))return bh.get(n);const r=t().finally(()=>bh.delete(n));return bh.set(n,r),r}function u9(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(u))throw new Jo(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new Jo(new Error("method not supported"),{method:u});const l=s?da(`${c}.${Lt(n)}`):void 0;return c9(()=>gl(async()=>{try{return await t(n)}catch(f){const h=f;switch(h.code){case Xu.code:throw new Xu(h);case Qu.code:throw new Qu(h);case el.code:throw new el(h,{method:n.method});case tl.code:throw new tl(h);case fa.code:throw new fa(h);case ha.code:throw new ha(h);case nl.code:throw new nl(h);case Wi.code:throw new Wi(h);case bc.code:throw new bc(h);case Jo.code:throw new Jo(h,{method:n.method});case wc.code:throw new wc(h);case rl.code:throw new rl(h);case bn.code:throw new bn(h);case sl.code:throw new sl(h);case il.code:throw new il(h);case ol.code:throw new ol(h);case al.code:throw new al(h);case pa.code:throw new pa(h);case cl.code:throw new cl(h);case ul.code:throw new ul(h);case ll.code:throw new ll(h);case dl.code:throw new dl(h);case fl.code:throw new fl(h);case hl.code:throw new hl(h);case pl.code:throw new pl(h);case 5e3:throw new bn(h);default:throw f instanceof ne?f:new nI(h)}}},{delay:({count:f,error:h})=>{var g;if(h&&h instanceof ta){const p=(g=h==null?void 0:h.headers)==null?void 0:g.get("Retry-After");if(p!=null&&p.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>l9(f)}),{enabled:s,id:l})}}function l9(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===wc.code||t.code===fa.code:t instanceof ta&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}class d9 extends ne{constructor({callbackSelector:e,cause:n,data:r,extraData:s,sender:i,urls:o}){var a;super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],(a=n.metaMessages)!=null&&a.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(c=>`    ${Lf(c)}`)],`  Sender: ${i}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class f9 extends ne{constructor({result:e,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Lf(n)}`,`Response: ${Lt(e)}`],name:"OffchainLookupResponseMalformedError"})}}class h9 extends ne{constructor({sender:e,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const yx="0x556f1830",sE={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function bx(t,{blockNumber:e,blockTag:n,data:r,to:s}){const{args:i}=N1({data:r,abi:[sE]}),[o,a,c,u,l]=i,{ccipRead:d}=t,f=d&&typeof(d==null?void 0:d.request)=="function"?d.request:Xp;try{if(!Lc(s,o))throw new h9({sender:o,to:s});const h=a.includes(zf)?await ix({data:c,ccipRequest:f}):await f({data:c,sender:o,urls:a}),{data:g}=await Ol(t,{blockNumber:e,blockTag:n,data:is([u,hi([{type:"bytes"},{type:"bytes"}],[h,l])]),to:s});return g}catch(h){throw new d9({callbackSelector:u,cause:h,data:r,extraData:l,sender:o,urls:a})}}async function Xp({data:t,sender:e,urls:n}){var s;let r=new Error("An unknown error occurred.");for(let i=0;i<n.length;i++){const o=n[i],a=o.includes("{data}")?"GET":"POST",c=a==="POST"?{data:t,sender:e}:void 0,u=a==="POST"?{"Content-Type":"application/json"}:{};try{const l=await fetch(o.replace("{sender}",e.toLowerCase()).replace("{data}",t),{body:JSON.stringify(c),headers:u,method:a});let d;if((s=l.headers.get("Content-Type"))!=null&&s.startsWith("application/json")?d=(await l.json()).data:d=await l.text(),!l.ok){r=new ta({body:c,details:d!=null&&d.error?Lt(d.error):l.statusText,headers:l.headers,status:l.status,url:o});continue}if(!ns(d)){r=new f9({result:d,url:o});continue}return d}catch(l){r=new ta({body:c,details:l.message,url:o})}}throw r}const p9=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:Xp,offchainLookup:bx,offchainLookupAbiItem:sE,offchainLookupSignature:yx},Symbol.toStringTag,{value:"Module"}));function g9(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function m9(t){const{source:e}=t,n=new Map,r=new Df(8192),s=new Map,i=({address:o,chainId:a})=>`${o}.${a}`;return{async consume({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a}),l=this.get({address:o,chainId:a,client:c});this.increment({address:o,chainId:a});const d=await l;return await e.set({address:o,chainId:a},d),r.set(u,d),d},async increment({address:o,chainId:a}){const c=i({address:o,chainId:a}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a});let l=s.get(u);return l||(l=(async()=>{try{const f=await e.get({address:o,chainId:a,client:c}),h=r.get(u)??0;return h>0&&f<=h?h+1:(r.delete(u),f)}finally{this.reset({address:o,chainId:a})}})(),s.set(u,l)),(n.get(u)??0)+await l},reset({address:o,chainId:a}){const c=i({address:o,chainId:a});n.delete(c),s.delete(c)}}}function iE(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function y9(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const v2=y9();function b9(t,e={}){return{async request(n){var f;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const h=await iE(async({signal:p})=>{const y={...c,body:Array.isArray(r)?Lt(r.map(A=>({jsonrpc:"2.0",id:A.id??v2.take(),...A}))):Lt({jsonrpc:"2.0",id:r.id??v2.take(),...r}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?p:null)},C=new Request(t,y),N=await(i==null?void 0:i(C,y))??{...y,url:t};return await s(N.url??t,N)},{errorInstance:new ub({body:r,url:t}),timeout:a,signal:!0});o&&await o(h);let g;if((f=h.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))g=await h.json();else{g=await h.text();try{g=JSON.parse(g||"{}")}catch(p){if(h.ok)throw p;g={error:g}}}if(!h.ok)throw new ta({body:r,details:Lt(g.error)||h.statusText,headers:h.headers,status:h.status,url:t});return g}catch(h){throw h instanceof ta||h instanceof ub?h:new ta({body:r,cause:h,url:t})}}}}const wx=`Ethereum Signed Message:
`;function Ex(t){const e=typeof t=="string"?da(t):typeof t.raw=="string"?t.raw:zt(t.raw),n=da(`${wx}${Tt(e)}`);return is([n,e])}function oE(t,e){return an(Ex(t),e)}class vx extends ne{constructor({domain:e}){super(`Invalid domain "${Lt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ax extends ne{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Cx extends ne{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function _x(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:u,type:l}=c,d=a[u],f=l.match(_1);if(f&&(typeof d=="number"||typeof d=="bigint")){const[p,y,C]=f;Ie(d,{signed:y==="int",size:Number.parseInt(C,10)/8})}if(l==="address"&&typeof d=="string"&&!yr(d))throw new ui({address:d});const h=l.match(D5);if(h){const[p,y]=h;if(y&&Tt(d)!==Number.parseInt(y,10))throw new m1({expectedSize:Number.parseInt(y,10),givenSize:Tt(d)})}const g=s[l];g&&(w9(l),i(g,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new vx({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Ax({primaryType:r,types:s})}function Sx({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function w9(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Cx({type:t})}function Ix(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Sx({domain:e}),...t.types};_x({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(xx({domain:e,types:s})),r!=="EIP712Domain"&&i.push(aE({data:n,primaryType:r,types:s})),an(is(i))}function xx({domain:t,types:e}){return aE({data:t,primaryType:"EIP712Domain",types:e})}function aE({data:t,primaryType:e,types:n}){const r=Tx({data:t,primaryType:e,types:n});return an(r)}function Tx({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[E9({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=Ox({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return hi(r,s)}function E9({primaryType:t,types:e}){const n=ss(v9({primaryType:t,types:e}));return an(n)}function v9({primaryType:t,types:e}){let n="";const r=Nx({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function Nx({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])Nx({primaryType:i.type,types:e},n);return n}function Ox({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},an(Tx({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},an(r)];if(n==="string")return[{type:"bytes32"},an(ss(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>Ox({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},an(hi(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}const A9="0x6492649264926492649264926492649264926492649264926492649264926492";let C9=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const _9={checksum:new C9(8192)},fm=_9.checksum;function Px(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=P5(JU(t));return n==="Bytes"?r:Ds(r)}const S9=/^0x[a-fA-F0-9]{40}$/;function cg(t,e={}){const{strict:n=!0}=e;if(!S9.test(t))throw new A2({address:t,cause:new I9});if(n){if(t.toLowerCase()===t)return;if(Rx(t)!==t)throw new A2({address:t,cause:new x9})}}function Rx(t){if(fm.has(t))return fm.get(t);cg(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=Px(QU(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return fm.set(t,s),s}function bb(t,e={}){const{strict:n=!0}=e??{};try{return cg(t,{strict:n}),!0}catch{return!1}}let A2=class extends Qe{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},I9=class extends Qe{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},x9=class extends Qe{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};const T9=/^(.*)\[([0-9]*)\]$/,N9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,$x=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,C2=2n**256n-1n;function xu(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=lE(e.type);if(i){const[o,a]=i;return P9(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:s})}if(e.type==="tuple")return D9(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return O9(t,{checksum:r});if(e.type==="bool")return R9(t);if(e.type.startsWith("bytes"))return $9(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return k9(t,e);if(e.type==="string")return U9(t,{staticPosition:s});throw new fE(e.type)}const _2=32,wb=32;function O9(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?Rx(i):i)(Ds(tB(r,-20))),32]}function P9(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=Vi(t.readBytes(wb)),u=i+c,l=u+_2;t.setPosition(u);const d=Vi(t.readBytes(_2)),f=cf(e);let h=0;const g=[];for(let p=0;p<d;++p){t.setPosition(l+(f?p*32:h));const[y,C]=xu(t,e,{checksumAddress:r,staticPosition:l});h+=C,g.push(y)}return t.setPosition(i+32),[g,32]}if(cf(e)){const c=Vi(t.readBytes(wb)),u=i+c,l=[];for(let d=0;d<s;++d){t.setPosition(u+d*32);const[f]=xu(t,e,{checksumAddress:r,staticPosition:u});l.push(f)}return t.setPosition(i+32),[l,32]}let o=0;const a=[];for(let c=0;c<s;++c){const[u,l]=xu(t,e,{checksumAddress:r,staticPosition:i+o});o+=l,a.push(u)}return[a,o]}function R9(t){return[rB(t.readBytes(32),{size:32}),32]}function $9(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Vi(t.readBytes(32));t.setPosition(n+o);const a=Vi(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ds(c),32]}return[Ds(t.readBytes(Number.parseInt(s,10),32)),32]}function k9(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?nB(s,{signed:n}):Vi(s,{signed:n}),32]}function D9(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),o=i?[]:{};let a=0;if(cf(e)){const c=Vi(t.readBytes(wb)),u=s+c;for(let l=0;l<e.components.length;++l){const d=e.components[l];t.setPosition(u+a);const[f,h]=xu(t,d,{checksumAddress:r,staticPosition:u});a+=h,o[i?l:d==null?void 0:d.name]=f}return t.setPosition(s+32),[o,32]}for(let c=0;c<e.components.length;++c){const u=e.components[c],[l,d]=xu(t,u,{checksumAddress:r,staticPosition:s});o[i?c:u==null?void 0:u.name]=l,a+=d}return[o,a]}function U9(t,{staticPosition:e}){const n=Vi(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Vi(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=sB($I(i));return t.setPosition(e+32),[o,32]}function B9({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(cE({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function cE({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=lE(r.type);if(s){const[i,o]=s;return M9(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return z9(n,{checksumAddress:t,parameter:r});if(r.type==="address")return L9(n,{checksum:t});if(r.type==="bool")return j9(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=$x.exec(r.type)??[];return H9(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return F9(n,{type:r.type});if(r.type==="string")return q9(n);throw new fE(r.type)}function uE(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Br(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(jn(e+s,{size:32})),r.push(a),s+=Br(a)):n.push(a)}return ks(...n,...r)}function L9(t,e){const{checksum:n=!1}=e;return cg(t,{strict:n}),{dynamic:!1,encoded:Ec(t.toLowerCase())}}function M9(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Q9(t);if(!i&&t.length!==r)throw new X9({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const u=cE({checksumAddress:n,parameter:s,value:t[c]});u.dynamic&&(o=!0),a.push(u)}if(i||o){const c=uE(a);if(i){const u=jn(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?ks(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ks(...a.map(({encoded:c})=>c))}}function F9(t,{type:e}){const[,n]=e.split("bytes"),r=Br(t);if(!n){let s=t;return r%32!==0&&(s=vc(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:ks(Ec(jn(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new Dx({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:vc(t)}}function j9(t){if(typeof t!="boolean")throw new Qe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ec(kI(t))}}function H9(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new BI({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:jn(t,{size:32,signed:e})}}function q9(t){const e=Y1(t),n=Math.ceil(Br(e)/32),r=[];for(let s=0;s<n;s++)r.push(vc(oi(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:ks(vc(jn(Br(e),{size:32})),...r)}}function z9(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,u=cE({checksumAddress:n,parameter:a,value:t[c]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?uE(i):ks(...i.map(({encoded:o})=>o))}}function lE(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function cf(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(cf);const n=lE(t.type);return!!(n&&cf({...t,type:n[1]}))}const W9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new G9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new K9({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new S2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new S2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function V9(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(W9);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class S2 extends Qe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class K9 extends Qe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class G9 extends Qe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Y9(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?RI(e):e,o=V9(i);if(mu(i)===0&&t.length>0)throw new J9;if(mu(i)&&mu(i)<32)throw new Z9({data:typeof e=="string"?e:Ds(e),parameters:t,size:mu(i)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<t.length;++u){const l=t[u];o.setPosition(a);const[d,f]=xu(o,l,{checksumAddress:s,staticPosition:0});a+=f,r==="Array"?c.push(d):c[l.name??u]=d}return c}function dE(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new Ux({expectedLength:t.length,givenLength:e.length});const s=B9({checksumAddress:r,parameters:t,values:e}),i=uE(s);return i.length===0?"0x":i}function Eb(t,e){if(t.length!==e.length)throw new Ux({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Eb.encode(s,i))}return ks(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return cg(c),Ec(c.toLowerCase(),s?32:0)}if(n==="string")return Y1(r);if(n==="bytes")return r;if(n==="bool")return Ec(kI(r),s?32:1);const i=n.match($x);if(i){const[c,u,l="256"]=i,d=Number.parseInt(l,10)/8;return jn(r,{size:s?32:d,signed:u==="int"})}const o=n.match(N9);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new Dx({expectedSize:Number.parseInt(u,10),value:r});return vc(r,s?32:0)}const a=n.match(T9);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let d=0;d<r.length;d++)l.push(e(u,r[d],!0));return l.length===0?"0x":ks(...l)}throw new fE(n)}t.encode=e})(Eb||(Eb={}));function kx(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?nb(t):t}class Z9 extends Qe{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${du(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class J9 extends Qe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class X9 extends Qe{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Dx extends Qe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Br(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Ux extends Qe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Q9 extends Qe{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class fE extends Qe{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}let Bx=class extends A1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,AD(e);const r=F0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Zu(i)}update(e){return Yu(this),this.iHash.update(e),this}digestInto(e){Yu(this),gc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Lx=(t,e,n)=>new Bx(t,e).update(n).digest();Lx.create=(t,e)=>new Bx(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fr=BigInt(0),zn=BigInt(1),ja=BigInt(2),eL=BigInt(3),Mx=BigInt(4),Fx=BigInt(5),jx=BigInt(8);function or(t,e){const n=t%e;return n>=fr?n:e+n}function Mr(t,e,n){let r=t;for(;e-- >fr;)r*=r,r%=n;return r}function vb(t,e){if(t===fr)throw new Error("invert: expected non-zero number");if(e<=fr)throw new Error("invert: expected positive modulus, got "+e);let n=or(t,e),r=e,s=fr,i=zn;for(;n!==fr;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==zn)throw new Error("invert: does not exist");return or(s,e)}function Hx(t,e){const n=(t.ORDER+zn)/Mx,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function tL(t,e){const n=(t.ORDER-Fx)/jx,r=t.mul(e,ja),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,ja),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function nL(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-zn,n=0;for(;e%ja===fr;)e/=ja,n++;let r=ja;const s=hE(t);for(;I2(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Hx;let i=s.pow(r,e);const o=(e+zn)/ja;return function(c,u){if(c.is0(u))return u;if(I2(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,p=c.sqr(f);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===l)throw new Error("Cannot find square root");const y=zn<<BigInt(l-g-1),C=c.pow(d,y);l=g,d=c.sqr(C),f=c.mul(f,d),h=c.mul(h,C)}return h}}function rL(t){return t%Mx===eL?Hx:t%jx===Fx?tL:nL(t)}const sL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function iL(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sL.reduce((r,s)=>(r[s]="function",r),e);return eg(t,n)}function oL(t,e,n){if(n<fr)throw new Error("invalid exponent, negatives unsupported");if(n===fr)return t.ONE;if(n===zn)return e;let r=t.ONE,s=e;for(;n>fr;)n&zn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=zn;return r}function qx(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function I2(t,e){const n=(t.ORDER-zn)/ja,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function zx(t,e){e!==void 0&&ef(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hE(t,e,n=!1,r={}){if(t<=fr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=zx(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Q0(s),ZERO:fr,ONE:zn,create:c=>or(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return fr<=c&&c<t},is0:c=>c===fr,isOdd:c=>(c&zn)===zn,neg:c=>or(-c,t),eql:(c,u)=>c===u,sqr:c=>or(c*c,t),add:(c,u)=>or(c+u,t),sub:(c,u)=>or(c-u,t),mul:(c,u)=>or(c*u,t),pow:(c,u)=>oL(a,c,u),div:(c,u)=>or(c*vb(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>vb(c,t),sqrt:r.sqrt||(c=>(o||(o=rL(t)),o(a,c))),toBytes:c=>n?xI(c,i):jf(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?II(c):ic(c)},invertBatch:c=>qx(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function Wx(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Vx(t){const e=Wx(t);return e+Math.ceil(e/2)}function aL(t,e,n=!1){const r=t.length,s=Wx(e),i=Vx(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?II(t):ic(t),a=or(o,e-zn)+zn;return n?xI(a,s):jf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x2=BigInt(0),Ab=BigInt(1);function hm(t,e){const n=e.negate();return t?n:e}function Kx(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function pm(t,e){Kx(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Q0(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function T2(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ab);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function cL(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function uL(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const gm=new WeakMap,Gx=new WeakMap;function mm(t){return Gx.get(t)||1}function lL(t,e){return{constTimeNegate:hm,hasPrecomputes(n){return mm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>x2;)r&Ab&&(s=s.add(i)),i=i.double(),r>>=Ab;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=pm(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=pm(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:g}=T2(s,c,a);s=u,d?o=o.add(hm(h,r[g])):i=i.add(hm(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=pm(n,e);for(let a=0;a<o.windows&&s!==x2;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=T2(s,a,o);if(s=c,!l){const f=r[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=gm.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&gm.set(r,s(i))),i},wNAFCached(n,r,s){const i=mm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Kx(r,e),Gx.set(n,r),gm.delete(n)}}}function dL(t,e,n,r){cL(n,t),uL(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=FU(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Q0(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let p=0;p<i;p++){const y=r[p],C=Number(y>>BigInt(h)&u);l[C]=l[C].add(n[p])}let g=o;for(let p=l.length-1,y=o;p>0;p--)y=y.add(l[p]),g=g.add(y);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function Yx(t){return iL(t.Fp),eg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zx(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function N2(t){t.lowS!==void 0&&sf("lowS",t.lowS),t.prehash!==void 0&&sf("prehash",t.prehash)}function fL(t){const e=Yx(t);eg(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let hL=class extends Error{constructor(e=""){super(e)}};const $i={Err:hL,_tlv:{encode:(t,e)=>{const{Err:n}=$i;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=gh(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?gh(s.length/2|128):"";return gh(t)+i+s+e},decode(t,e){const{Err:n}=$i;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=$i;if(t<Mi)throw new e("integer: negative integers are not allowed");let n=gh(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=$i;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ic(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=$i,s=Gr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=$i,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function ym(t,e){return of(jf(t,e))}const Mi=BigInt(0),rn=BigInt(1);BigInt(2);const bm=BigInt(3),pL=BigInt(4);function gL(t){const e=fL(t),{Fp:n}=e,r=hE(e.n,e.nBitLength),s=e.toBytes||((E,A,_)=>{const O=A.toAffine();return Vp(Uint8Array.from([4]),n.toBytes(O.x),n.toBytes(O.y))}),i=e.fromBytes||(E=>{const A=E.subarray(1),_=n.fromBytes(A.subarray(0,n.BYTES)),O=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:_,y:O}});function o(E){const{a:A,b:_}=e,O=n.sqr(E),$=n.mul(O,E);return n.add(n.add($,n.mul(E,A)),_)}function a(E,A){const _=n.sqr(A),O=o(E);return n.eql(_,O)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,bm),pL),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(E){return G1(E,rn,e.n)}function d(E){const{allowedPrivateKeyLengths:A,nByteLength:_,wrapPrivateKey:O,n:$}=e;if(A&&typeof E!="bigint"){if(Ff(E)&&(E=of(E)),typeof E!="string"||!A.includes(E.length))throw new Error("invalid private key");E=E.padStart(_*2,"0")}let M;try{M=typeof E=="bigint"?E:ic(Gr("private key",E,_))}catch{throw new Error("invalid private key, expected hex or "+_+" bytes, got "+typeof E)}return O&&(M=or(M,$)),Iu("private key",M,rn,$),M}function f(E){if(!(E instanceof p))throw new Error("ProjectivePoint expected")}const h=h2((E,A)=>{const{px:_,py:O,pz:$}=E;if(n.eql($,n.ONE))return{x:_,y:O};const M=E.is0();A==null&&(A=M?n.ONE:n.inv($));const D=n.mul(_,A),q=n.mul(O,A),j=n.mul($,A);if(M)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:D,y:q}}),g=h2(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:A,y:_}=E.toAffine();if(!n.isValid(A)||!n.isValid(_))throw new Error("bad point: x or y not FE");if(!a(A,_))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(A,_,O){if(A==null||!n.isValid(A))throw new Error("x required");if(_==null||!n.isValid(_)||n.is0(_))throw new Error("y required");if(O==null||!n.isValid(O))throw new Error("z required");this.px=A,this.py=_,this.pz=O,Object.freeze(this)}static fromAffine(A){const{x:_,y:O}=A||{};if(!A||!n.isValid(_)||!n.isValid(O))throw new Error("invalid affine point");if(A instanceof p)throw new Error("projective point not allowed");const $=M=>n.eql(M,n.ZERO);return $(_)&&$(O)?p.ZERO:new p(_,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const _=qx(n,A.map(O=>O.pz));return A.map((O,$)=>O.toAffine(_[$])).map(p.fromAffine)}static fromHex(A){const _=p.fromAffine(i(Gr("pointHex",A)));return _.assertValidity(),_}static fromPrivateKey(A){return p.BASE.multiply(d(A))}static msm(A,_){return dL(p,r,A,_)}_setWindowSize(A){N.setWindowSize(this,A)}assertValidity(){g(this)}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){f(A);const{px:_,py:O,pz:$}=this,{px:M,py:D,pz:q}=A,j=n.eql(n.mul(_,q),n.mul(M,$)),L=n.eql(n.mul(O,q),n.mul(D,$));return j&&L}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:_}=e,O=n.mul(_,bm),{px:$,py:M,pz:D}=this;let q=n.ZERO,j=n.ZERO,L=n.ZERO,T=n.mul($,$),P=n.mul(M,M),m=n.mul(D,D),b=n.mul($,M);return b=n.add(b,b),L=n.mul($,D),L=n.add(L,L),q=n.mul(A,L),j=n.mul(O,m),j=n.add(q,j),q=n.sub(P,j),j=n.add(P,j),j=n.mul(q,j),q=n.mul(b,q),L=n.mul(O,L),m=n.mul(A,m),b=n.sub(T,m),b=n.mul(A,b),b=n.add(b,L),L=n.add(T,T),T=n.add(L,T),T=n.add(T,m),T=n.mul(T,b),j=n.add(j,T),m=n.mul(M,D),m=n.add(m,m),T=n.mul(m,b),q=n.sub(q,T),L=n.mul(m,P),L=n.add(L,L),L=n.add(L,L),new p(q,j,L)}add(A){f(A);const{px:_,py:O,pz:$}=this,{px:M,py:D,pz:q}=A;let j=n.ZERO,L=n.ZERO,T=n.ZERO;const P=e.a,m=n.mul(e.b,bm);let b=n.mul(_,M),I=n.mul(O,D),x=n.mul($,q),S=n.add(_,O),R=n.add(M,D);S=n.mul(S,R),R=n.add(b,I),S=n.sub(S,R),R=n.add(_,$);let F=n.add(M,q);return R=n.mul(R,F),F=n.add(b,x),R=n.sub(R,F),F=n.add(O,$),j=n.add(D,q),F=n.mul(F,j),j=n.add(I,x),F=n.sub(F,j),T=n.mul(P,R),j=n.mul(m,x),T=n.add(j,T),j=n.sub(I,T),T=n.add(I,T),L=n.mul(j,T),I=n.add(b,b),I=n.add(I,b),x=n.mul(P,x),R=n.mul(m,R),I=n.add(I,x),x=n.sub(b,x),x=n.mul(P,x),R=n.add(R,x),b=n.mul(I,R),L=n.add(L,b),b=n.mul(F,R),j=n.mul(S,j),j=n.sub(j,b),b=n.mul(S,I),T=n.mul(F,T),T=n.add(T,b),new p(j,L,T)}subtract(A){return this.add(A.negate())}is0(){return this.equals(p.ZERO)}wNAF(A){return N.wNAFCached(this,A,p.normalizeZ)}multiplyUnsafe(A){const{endo:_,n:O}=e;Iu("scalar",A,Mi,O);const $=p.ZERO;if(A===Mi)return $;if(this.is0()||A===rn)return this;if(!_||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,A,p.normalizeZ);let{k1neg:M,k1:D,k2neg:q,k2:j}=_.splitScalar(A),L=$,T=$,P=this;for(;D>Mi||j>Mi;)D&rn&&(L=L.add(P)),j&rn&&(T=T.add(P)),P=P.double(),D>>=rn,j>>=rn;return M&&(L=L.negate()),q&&(T=T.negate()),T=new p(n.mul(T.px,_.beta),T.py,T.pz),L.add(T)}multiply(A){const{endo:_,n:O}=e;Iu("scalar",A,rn,O);let $,M;if(_){const{k1neg:D,k1:q,k2neg:j,k2:L}=_.splitScalar(A);let{p:T,f:P}=this.wNAF(q),{p:m,f:b}=this.wNAF(L);T=N.constTimeNegate(D,T),m=N.constTimeNegate(j,m),m=new p(n.mul(m.px,_.beta),m.py,m.pz),$=T.add(m),M=P.add(b)}else{const{p:D,f:q}=this.wNAF(A);$=D,M=q}return p.normalizeZ([$,M])[0]}multiplyAndAddUnsafe(A,_,O){const $=p.BASE,M=(q,j)=>j===Mi||j===rn||!q.equals($)?q.multiplyUnsafe(j):q.multiply(j),D=M(this,_).add(M(A,O));return D.is0()?void 0:D}toAffine(A){return h(this,A)}isTorsionFree(){const{h:A,isTorsionFree:_}=e;if(A===rn)return!0;if(_)return _(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:_}=e;return A===rn?this:_?_(p,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return sf("isCompressed",A),this.assertValidity(),s(p,this,A)}toHex(A=!0){return sf("isCompressed",A),of(this.toRawBytes(A))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:C}=e,N=lL(p,y?Math.ceil(C/2):C);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function mL(t){const e=Yx(t);return eg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function yL(t){const e=mL(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(m){return or(m,r)}function u(m){return vb(m,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=gL({...e,toBytes(m,b,I){const x=b.toAffine(),S=n.toBytes(x.x),R=Vp;return sf("isCompressed",I),I?R(Uint8Array.from([b.hasEvenY()?2:3]),S):R(Uint8Array.from([4]),S,n.toBytes(x.y))},fromBytes(m){const b=m.length,I=m[0],x=m.subarray(1);if(b===o&&(I===2||I===3)){const S=ic(x);if(!G1(S,rn,n.ORDER))throw new Error("Point is not on curve");const R=f(S);let F;try{F=n.sqrt(R)}catch(G){const K=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+K)}const z=(F&rn)===rn;return(I&1)===1!==z&&(F=n.neg(F)),{x:S,y:F}}else if(b===a&&I===4){const S=n.fromBytes(x.subarray(0,n.BYTES)),R=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:S,y:R}}else{const S=o,R=a;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+R+", got "+b)}}});function g(m){const b=r>>rn;return m>b}function p(m){return g(m)?c(-m):m}const y=(m,b,I)=>ic(m.slice(b,I));class C{constructor(b,I,x){Iu("r",b,rn,r),Iu("s",I,rn,r),this.r=b,this.s=I,x!=null&&(this.recovery=x),Object.freeze(this)}static fromCompact(b){const I=s;return b=Gr("compactSignature",b,I*2),new C(y(b,0,I),y(b,I,2*I))}static fromDER(b){const{r:I,s:x}=$i.toSig(Gr("DER",b));return new C(I,x)}assertValidity(){}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const{r:I,s:x,recovery:S}=this,R=$(Gr("msgHash",b));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const F=S===2||S===3?I+e.n:I;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=S&1?"03":"02",Y=l.fromHex(z+ym(F,n.BYTES)),G=u(F),K=c(-R*G),ee=c(x*G),se=l.BASE.multiplyAndAddUnsafe(Y,K,ee);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Wp(this.toDERHex())}toDERHex(){return $i.hexFromSig(this)}toCompactRawBytes(){return Wp(this.toCompactHex())}toCompactHex(){const b=s;return ym(this.r,b)+ym(this.s,b)}}const N={isValidPrivateKey(m){try{return d(m),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const m=Vx(e.n);return aL(e.randomBytes(m),e.n)},precompute(m=8,b=l.BASE){return b._setWindowSize(m),b.multiply(BigInt(3)),b}};function E(m,b=!0){return l.fromPrivateKey(m).toRawBytes(b)}function A(m){if(typeof m=="bigint")return!1;if(m instanceof l)return!0;const I=Gr("key",m).length,x=n.BYTES,S=x+1,R=2*x+1;if(!(e.allowedPrivateKeyLengths||s===S))return I===S||I===R}function _(m,b,I=!0){if(A(m)===!0)throw new Error("first arg must be private key");if(A(b)===!1)throw new Error("second arg must be public key");return l.fromHex(b).multiply(d(m)).toRawBytes(I)}const O=e.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const b=ic(m),I=m.length*8-i;return I>0?b>>BigInt(I):b},$=e.bits2int_modN||function(m){return c(O(m))},M=Q0(i);function D(m){return Iu("num < 2^"+i,m,Mi,M),jf(m,s)}function q(m,b,I=j){if(["recovered","canonical"].some(re=>re in I))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:S}=e;let{lowS:R,prehash:F,extraEntropy:z}=I;R==null&&(R=!0),m=Gr("msgHash",m),N2(I),F&&(m=Gr("prehashed msgHash",x(m)));const Y=$(m),G=d(b),K=[D(G),D(Y)];if(z!=null&&z!==!1){const re=z===!0?S(n.BYTES):z;K.push(Gr("extraEntropy",re))}const ee=Vp(...K),se=Y;function he(re){const fe=O(re);if(!h(fe))return;const De=u(fe),qe=l.BASE.multiply(fe).toAffine(),Me=c(qe.x);if(Me===Mi)return;const ut=c(De*c(se+Me*G));if(ut===Mi)return;let un=(qe.x===Me?0:2)|Number(qe.y&rn),ln=ut;return R&&g(ut)&&(ln=p(ut),un^=1),new C(Me,ln,un)}return{seed:ee,k2sig:he}}const j={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function T(m,b,I=j){const{seed:x,k2sig:S}=q(m,b,I),R=e;return jU(R.hash.outputLen,R.nByteLength,R.hmac)(x,S)}l.BASE._setWindowSize(8);function P(m,b,I,x=L){var un;const S=m;b=Gr("msgHash",b),I=Gr("publicKey",I);const{lowS:R,prehash:F,format:z}=x;if(N2(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Y=typeof S=="string"||Ff(S),G=!Y&&!z&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!Y&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ee;try{if(G&&(K=new C(S.r,S.s)),Y){try{z!=="compact"&&(K=C.fromDER(S))}catch(ln){if(!(ln instanceof $i.Err))throw ln}!K&&z!=="der"&&(K=C.fromCompact(S))}ee=l.fromHex(I)}catch{return!1}if(!K||R&&K.hasHighS())return!1;F&&(b=e.hash(b));const{r:se,s:he}=K,re=$(b),fe=u(he),De=c(re*fe),qe=c(se*fe),Me=(un=l.BASE.multiplyAndAddUnsafe(ee,De,qe))==null?void 0:un.toAffine();return Me?c(Me.x)===se:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:_,sign:T,verify:P,ProjectivePoint:l,Signature:C,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bL(t){return{hash:t,hmac:(e,...n)=>Lx(t,e,TD(...n)),randomBytes:ND}}function wL(t,e){const n=r=>yL({...t,...bL(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),O2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),EL=BigInt(0),vL=BigInt(1),Cb=BigInt(2),P2=(t,e)=>(t+e/Cb)/e;function AL(t){const e=Zx,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Mr(l,n,e)*l%e,f=Mr(d,n,e)*l%e,h=Mr(f,Cb,e)*u%e,g=Mr(h,s,e)*h%e,p=Mr(g,i,e)*g%e,y=Mr(p,a,e)*p%e,C=Mr(y,c,e)*y%e,N=Mr(C,a,e)*p%e,E=Mr(N,n,e)*l%e,A=Mr(E,o,e)*g%e,_=Mr(A,r,e)*u%e,O=Mr(_,Cb,e);if(!_b.eql(_b.sqr(O),t))throw new Error("Cannot find square root");return O}const _b=hE(Zx,void 0,void 0,{sqrt:AL}),pE=wL({a:EL,b:BigInt(7),Fp:_b,n:O2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=O2,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vL*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=P2(i*t,e),c=P2(-r*t,e);let u=or(t-a*n-c*s,e),l=or(-a*r-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},hI),CL=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:pE},Symbol.toStringTag,{value:"Module"}));function Jx(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new wm({signature:t});if(typeof t.s>"u")throw new wm({signature:t});if(n&&typeof t.yParity>"u")throw new wm({signature:t});if(t.r<0n||t.r>C2)throw new OL({value:t.r});if(t.s<0n||t.s>C2)throw new PL({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new mE({value:t.yParity})}function _L(t){return Xx(Ds(t))}function Xx(t){if(t.length!==130&&t.length!==132)throw new NL({signature:t});const e=BigInt(oi(t,0,32)),n=BigInt(oi(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return gE(s)}catch{throw new mE({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function SL(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return IL(t)}function IL(t){const e=typeof t=="string"?Xx(t):t instanceof Uint8Array?_L(t):typeof t.r=="string"?TL(t):t.v?xL(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return Jx(e),e}function xL(t){return{r:t.r,s:t.s,yParity:gE(t.v)}}function TL(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=gE(n)),typeof r!="number")throw new mE({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function gE(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new RL({value:t})}let NL=class extends Qe{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Br(fB(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}};class wm extends Qe{constructor({signature:e}){super(`Signature \`${PI(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class OL extends Qe{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class PL extends Qe{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}let mE=class extends Qe{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},RL=class extends Qe{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function $L(t,e={}){return typeof t.chainId=="string"?kL(t):{...t,...e.signature}}function kL(t){const{address:e,chainId:n,nonce:r}=t,s=SL(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}const DL="0x8010801080108010801080108010801080108010801080108010801080108010",UL=kx("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Qx(t){if(typeof t=="string"){if(oi(t,-32)!==DL)throw new ML(t)}else Jx(t.authorization)}function BL(t){Qx(t);const e=UI(oi(t,-64,-32)),n=oi(t,-e-64,-64),r=oi(t,0,-e-64),[s,i,o]=Y9(UL,n);return{authorization:$L({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function LL(t){try{return Qx(t),!0}catch{return!1}}let ML=class extends Qe{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function FL(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=fi([hi([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),A9]);return s==="hex"?i:Ur(i)}class eT extends ne{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function jL(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new eT({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function HL(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function qL(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?rs(t.nonce):void 0,storageProof:t.storageProof?HL(t.storageProof):void 0}}async function zL(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?Ie(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return qL(a)}async function WL(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?Ie(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function ug(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var l,d,f;const o=r||"latest",a=n!==void 0?Ie(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ie(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ie(i)]},{dedupe:!!a}),!c)throw new O1({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((f=(d=(l=t.chain)==null?void 0:l.formatters)==null?void 0:d.transaction)==null?void 0:f.format)||L1)(c,"getTransaction")}async function VL(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([Oe(t,qf,"getBlockNumber")({}),e?Oe(t,ug,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function rp(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new P1({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||eE)(n,"getTransactionReceipt")}async function tT(t,e){var N;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,u=e.contracts,{batchSize:l=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof((N=t.batch)==null?void 0:N.multicall)=="object"?t.batch.multicall:{},f=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return Mc({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),h=[[]];let g=0,p=0;for(let E=0;E<u.length;E++){const{abi:A,address:_,args:O,functionName:$}=u[E];try{const M=Lr({abi:A,args:O,functionName:$});p+=(M.length-2)/2,l>0&&p>l&&h[g].length>0&&(g++,p=(M.length-2)/2,h[g]=[]),h[g]=[...h[g],{allowFailure:!0,callData:M,target:_}]}catch(M){const D=ga(M,{abi:A,address:_,args:O,docsPath:"/docs/contract/multicall",functionName:$,sender:n});if(!s)throw D;h[g]=[...h[g],{allowFailure:!0,callData:"0x",target:_}]}}const y=await Promise.allSettled(h.map(E=>Oe(t,os,"readContract")({...f===null?{code:J1}:{address:f},abi:af,account:n,args:[E],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),C=[];for(let E=0;E<y.length;E++){const A=y[E];if(A.status==="rejected"){if(!s)throw A.reason;for(let O=0;O<h[E].length;O++)C.push({status:"failure",error:A.reason,result:void 0});continue}const _=A.value;for(let O=0;O<_.length;O++){const{returnData:$,success:M}=_[O],{callData:D}=h[E][O],{abi:q,address:j,functionName:L,args:T}=u[C.length];try{if(D==="0x")throw new Sl;if(!M)throw new Mf({data:$});const P=va({abi:q,args:T,data:$,functionName:L});C.push(s?{result:P,status:"success"}:P)}catch(P){const m=ga(P,{abi:q,address:j,args:T,docsPath:"/docs/contract/multicall",functionName:L});if(!s)throw m;C.push({error:m,result:void 0,status:"failure"})}}}if(C.length!==u.length)throw new ne("multicall results mismatch");return C}async function Sb(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const f of s){const h=f.blockOverrides?MI(f.blockOverrides):void 0,g=f.calls.map(y=>{const C=y,N=C.account?wn(C.account):void 0,E=C.abi?Lr(C):C.data,A={...C,data:C.dataSuffix?is([E||"0x",C.dataSuffix]):E,from:C.from??(N==null?void 0:N.address)};return Bc(A),Nl(A)}),p=f.stateOverrides?D1(f.stateOverrides):void 0;c.push({blockOverrides:h,calls:g,stateOverrides:p})}const l=(typeof n=="bigint"?Ie(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},l]})).map((f,h)=>({...M1(f),calls:f.calls.map((g,p)=>{var q,j;const{abi:y,args:C,functionName:N,to:E}=s[h].calls[p],A=((q=g.error)==null?void 0:q.data)??g.returnData,_=BigInt(g.gasUsed),O=(j=g.logs)==null?void 0:j.map(L=>li(L)),$=g.status==="0x1"?"success":"failure",M=y&&$==="success"&&A!=="0x"?va({abi:y,data:A,functionName:N}):null,D=(()=>{var T;if($==="success")return;let L;if(((T=g.error)==null?void 0:T.data)==="0x"?L=new Sl:g.error&&(L=new Mf(g.error)),!!L)return ga(L,{abi:y??[],address:E??"0x",args:C,functionName:N??"<unknown>"})})();return{data:A,gasUsed:_,logs:O,status:$,...$==="success"?{result:M}:{error:D}}})}))}catch(c){const u=c,l=W0(u,{});throw l instanceof Tl?u:l}}function Ib(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Qe("Unable to normalize signature.");return s}function xb(t,e){const n=typeof t,r=e.type;switch(r){case"address":return bb(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>xb(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>xb(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function nT(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return nT(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?bb(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?bb(n[r],{strict:!1}):!1)return o}}function rT(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?tb(t):t;return{...r,...n?{hash:yu(r)}:{}}}function lg(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=hB(e,{strict:!1}),o=t.filter(u=>i?u.type==="function"||u.type==="error"?sT(u)===oi(e,0,4):u.type==="event"?yu(u)===e:!1:"name"in u&&u.name===e);if(o.length===0)throw new Qp({name:e});if(o.length===1)return{...o[0],...s?{hash:yu(o[0])}:{}};let a;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:yu(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,f)=>{const h="inputs"in u&&u.inputs[f];return h?xb(d,h):!1})){if(a&&"inputs"in a&&a.inputs){const d=nT(u.inputs,a.inputs,r);if(d)throw new GL({abiItem:u,type:d[0]},{abiItem:a,type:d[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=o;return{...u,overloads:l}})();if(!c)throw new Qp({name:e});return{...c,...s?{hash:yu(c)}:{}}}function sT(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return lg(n,r)}return t[0]})();return oi(yu(e),0,4)}function KL(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,s]=t;return lg(r,s)}return t[0]})(),n=typeof e=="string"?e:$p(e);return Ib(n)}function yu(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return lg(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Px(Y1(KL(e)))}class GL extends Qe{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Ib($p(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Ib($p(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Qp extends Qe{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function YL(...t){var i;const[e,n]=(()=>{if(Array.isArray(t[0])){const[o,a]=t;return[JL(o),a]}return t})(),{bytecode:r,args:s}=n;return ks(r,(i=e.inputs)!=null&&i.length&&(s!=null&&s.length)?dE(e.inputs,s):"0x")}function ZL(t){return rT(t)}function JL(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new Qp({name:"constructor"});return e}function XL(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[u,l,d]=t;return[R2(u,l,{args:d}),d]}const[a,c]=t;return[a,c]})(),{overloads:r}=e,s=r?R2([e,...r],e.name,{args:n}):e,i=QL(s),o=n.length>0?dE(s.inputs,n):void 0;return o?ks(i,o):i}function Yc(t,e={}){return rT(t,e)}function R2(t,e,n){const r=lg(t,e,n);if(r.type!=="function")throw new Qp({name:e,type:"function"});return r}function QL(t){return sT(t)}const iT="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ms="0x0000000000000000000000000000000000000000",eM="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function tM(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,u=e.account?wn(e.account):void 0;if(o&&!u)throw new ne("`account` is required when `traceAssetChanges` is true");const l=u?YL(ZL("constructor(bytes, bytes)"),{bytecode:Z1,args:[eM,XL(Yc("function getBalance(address)"),[u.address])]}):void 0,d=o?await Promise.all(e.calls.map(async x=>{if(!x.data&&!x.abi)return;const{accessList:S}=await fx(t,{account:u.address,...x,data:x.abi?Lr(x):x.data});return S.map(({address:R,storageKeys:F})=>F.length>0?R:null)})).then(x=>x.flat().filter(Boolean)):[],f=await Sb(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:l}],stateOverrides:i},{calls:d.map((x,S)=>({abi:[Yc("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:x,from:ms,nonce:S})),stateOverrides:[{address:ms,nonce:0}]}]:[],{calls:[...s,{}].map(x=>({...x,from:u==null?void 0:u.address})),stateOverrides:i},...o?[{calls:[{data:l}]},{calls:d.map((x,S)=>({abi:[Yc("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:x,from:ms,nonce:S})),stateOverrides:[{address:ms,nonce:0}]},{calls:d.map((x,S)=>({to:x,abi:[Yc("function decimals() returns (uint256)")],functionName:"decimals",from:ms,nonce:S})),stateOverrides:[{address:ms,nonce:0}]},{calls:d.map((x,S)=>({to:x,abi:[Yc("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ms,nonce:S})),stateOverrides:[{address:ms,nonce:0}]},{calls:d.map((x,S)=>({to:x,abi:[Yc("function symbol() returns (string)")],functionName:"symbol",from:ms,nonce:S})),stateOverrides:[{address:ms,nonce:0}]}]:[]],traceTransfers:a,validation:c}),h=o?f[2]:f[0],[g,p,,y,C,N,E,A]=o?f:[],{calls:_,...O}=h,$=_.slice(0,-1)??[],M=(g==null?void 0:g.calls)??[],D=(p==null?void 0:p.calls)??[],q=[...M,...D].map(x=>x.status==="success"?Dr(x.data):null),j=(y==null?void 0:y.calls)??[],L=(C==null?void 0:C.calls)??[],T=[...j,...L].map(x=>x.status==="success"?Dr(x.data):null),P=((N==null?void 0:N.calls)??[]).map(x=>x.status==="success"?x.result:null),m=((A==null?void 0:A.calls)??[]).map(x=>x.status==="success"?x.result:null),b=((E==null?void 0:E.calls)??[]).map(x=>x.status==="success"?x.result:null),I=[];for(const[x,S]of T.entries()){const R=q[x];if(typeof S!="bigint"||typeof R!="bigint")continue;const F=P[x-1],z=m[x-1],Y=b[x-1],G=x===0?{address:iT,decimals:18,symbol:"ETH"}:{address:d[x-1],decimals:Y||F?Number(F??1):void 0,symbol:z??void 0};I.some(K=>K.token.address===G.address)||I.push({token:G,value:{pre:R,post:S,diff:S-R}})}return{assetChanges:I,block:O,results:$}}const oT="0x6492649264926492649264926492649264926492649264926492649264926492";function nM(t){if(oi(t,-32)!==oT)throw new iM(t)}function rM(t){const{data:e,signature:n,to:r}=t;return ks(dE(kx("address, bytes, bytes"),[r,e,n]),oT)}function sM(t){try{return nM(t),!0}catch{return!1}}class iM extends Qe{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Tb({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new pE.Signature(Dr(t),Dr(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ur(o)}async function dg(t,e){var a,c,u,l,d,f;const{address:n,hash:r,erc6492VerifierAddress:s=e.universalSignatureVerifierAddress??((u=(c=(a=t.chain)==null?void 0:a.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:u.address),multicallAddress:i=e.multicallAddress??((f=(d=(l=t.chain)==null?void 0:l.contracts)==null?void 0:d.multicall3)==null?void 0:f.address)}=e,o=(()=>{const h=e.signature;return ns(h)?h:typeof h=="object"&&"r"in h&&"s"in h?Tb(h):zt(h)})();try{return LL(o)?await oM(t,{...e,multicallAddress:i,signature:o}):await aM(t,{...e,verifierAddress:s,signature:o})}catch(h){try{if(Lc(Zo(n),await $1({hash:r,signature:o})))return!0}catch{}if(h instanceof Ac)return!1;throw h}}async function oM(t,e){var y;const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=e,{authorization:a,data:c,signature:u,to:l}=BL(e.signature);if(await yb(t,{address:n,blockNumber:r,blockTag:s})===fi(["0xef0100",a.address]))return await cM(t,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:Ie(a.r,{size:32}),s:Ie(a.s,{size:32}),yParity:a.yParity};if(!await a9({address:n,authorization:f}))throw new Ac;const g=await Oe(t,os,"readContract")({...o?{address:o}:{code:J1},authorizationList:[f],abi:af,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:l??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Lr({abi:HI,functionName:"isValidSignature",args:[i,u]})}]]}),p=(y=g[g.length-1])==null?void 0:y.returnData;if(p!=null&&p.startsWith("0x1626ba7e"))return!0;throw new Ac}async function aM(t,e){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=e,u=await(async()=>!r&&!s||sM(o)?o:rM({data:s,signature:o,to:r}))(),l=a?{to:a,data:Lr({abi:Kp,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:ng({abi:Kp,args:[n,i,u],bytecode:pb}),...c},{data:d}=await Oe(t,Ol,"call")(l).catch(f=>{throw f instanceof R1?new Ac:f});if(v5(d??"0x0"))return!0;throw new Ac}async function cM(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=e;if((await Oe(t,os,"readContract")({address:n,abi:HI,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof q0?new Ac:c})).startsWith("0x1626ba7e"))return!0;throw new Ac}class Ac extends Error{}async function uM(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=oE(n);return dg(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function lM(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:u,...l}=e,d=Ix({message:o,primaryType:a,types:c,domain:u});return dg(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...l})}function aT(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Lt(["watchBlockNumber",t.uid,e,n,o]);return Qi(d,{onBlockNumber:r,onError:s},f=>Pl(async()=>{var h;try{const g=await Oe(t,qf,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(g===c)return;if(g-c>1&&n)for(let p=c+1n;p<g;p++)f.onBlockNumber(p,c),c=p}(c===void 0||g>c)&&(f.onBlockNumber(g,c),c=g)}catch(g){(h=f.onError)==null||h.call(f,g)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Lt(["watchBlockNumber",t.uid,e,n]);return Qi(d,{onBlockNumber:r,onError:s},f=>{let h=!0,g=()=>h=!1;return(async()=>{try{const p=(()=>{if(t.transport.type==="fallback"){const C=t.transport.transports.find(N=>N.config.type==="webSocket"||N.config.type==="ipc");return C?C.value:t.transport}return t.transport})(),{unsubscribe:y}=await p.subscribe({params:["newHeads"],onData(C){var E;if(!h)return;const N=Dr((E=C.result)==null?void 0:E.number);f.onBlockNumber(N,c),c=N},onError(C){var N;(N=f.onError)==null||N.call(f,C)}});g=y,h||g()}catch(p){s==null||s(p)}})(),()=>g()})})()}async function cT(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:_})=>~~(1<<_)*200,timeout:c=18e4}=e,u=Lt(["waitForTransactionReceipt",t.uid,s]),l=(()=>{var _;return e.pollingInterval?e.pollingInterval:(_=t.chain)!=null&&_.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,f,h,g=!1,p,y;const{promise:C,resolve:N,reject:E}=Q1(),A=c?setTimeout(()=>{y==null||y(),p==null||p(),E(new Q5({hash:s}))},c):void 0;return p=Qi(u,{onReplaced:i,resolve:N,reject:E},async _=>{if(h=await Oe(t,rp,"getTransactionReceipt")({hash:s}).catch(()=>{}),h&&r<=1){clearTimeout(A),_.resolve(h),p==null||p();return}y=Oe(t,aT,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(O){const $=D=>{clearTimeout(A),y==null||y(),D(),p==null||p()};let M=O;if(!g)try{if(h){if(r>1&&(!h.blockNumber||M-h.blockNumber+1n<r))return;$(()=>_.resolve(h));return}if(n&&!d&&(g=!0,await gl(async()=>{d=await Oe(t,ug,"getTransaction")({hash:s}),d.blockNumber&&(M=d.blockNumber)},{delay:a,retryCount:o}),g=!1),h=await Oe(t,rp,"getTransactionReceipt")({hash:s}),r>1&&(!h.blockNumber||M-h.blockNumber+1n<r))return;$(()=>_.resolve(h))}catch(D){if(D instanceof O1||D instanceof P1){if(!d){g=!1;return}try{f=d,g=!0;const q=await gl(()=>Oe(t,ei,"getBlock")({blockNumber:M,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:T})=>T instanceof U1});g=!1;const j=q.transactions.find(({from:T,nonce:P})=>T===f.from&&P===f.nonce);if(!j||(h=await Oe(t,rp,"getTransactionReceipt")({hash:j.hash}),r>1&&(!h.blockNumber||M-h.blockNumber+1n<r)))return;let L="replaced";j.to===f.to&&j.value===f.value&&j.input===f.input?L="repriced":j.from===j.to&&j.value===0n&&(L="cancelled"),$(()=>{var T;(T=_.onReplaced)==null||T.call(_,{reason:L,replacedTransaction:f,transaction:j,transactionReceipt:h}),_.resolve(h)})}catch(q){$(()=>_.reject(q))}}else $(()=>_.reject(D))}}})}),C}function dM(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const u=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),l=o??!1;let d;return u?(()=>{const g=Lt(["watchBlocks",t.uid,e,n,r,l,c]);return Qi(g,{onBlock:s,onError:i},p=>Pl(async()=>{var y;try{const C=await Oe(t,ei,"getBlock")({blockTag:e,includeTransactions:l});if(C.number!==null&&(d==null?void 0:d.number)!=null){if(C.number===d.number)return;if(C.number-d.number>1&&n)for(let N=(d==null?void 0:d.number)+1n;N<C.number;N++){const E=await Oe(t,ei,"getBlock")({blockNumber:N,includeTransactions:l});p.onBlock(E,d),d=E}}((d==null?void 0:d.number)==null||e==="pending"&&(C==null?void 0:C.number)==null||C.number!==null&&C.number>d.number)&&(p.onBlock(C,d),d=C)}catch(C){(y=p.onError)==null||y.call(p,C)}},{emitOnBegin:r,interval:c}))})():(()=>{let g=!0,p=!0,y=()=>g=!1;return(async()=>{try{r&&Oe(t,ei,"getBlock")({blockTag:e,includeTransactions:l}).then(E=>{g&&p&&(s(E,void 0),p=!1)}).catch(i);const C=(()=>{if(t.transport.type==="fallback"){const E=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),{unsubscribe:N}=await C.subscribe({params:["newHeads"],async onData(E){var _;if(!g)return;const A=await Oe(t,ei,"getBlock")({blockNumber:(_=E.result)==null?void 0:_.number,includeTransactions:l}).catch(()=>{});g&&(s(A,d),p=!1,d=A)},onError(E){i==null||i(E)}});y=N,g||y()}catch(C){i==null||i(C)}})(),()=>y()})()}function fM(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:u,pollingInterval:l=t.pollingInterval,strict:d}){const f=typeof u<"u"?u:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),h=d??!1;return f?(()=>{const y=Lt(["watchEvent",e,n,r,t.uid,s,l,o]);return Qi(y,{onLogs:c,onError:a},C=>{let N;o!==void 0&&(N=o-1n);let E,A=!1;const _=Pl(async()=>{var O;if(!A){try{E=await Oe(t,hx,"createEventFilter")({address:e,args:n,event:s,events:i,strict:h,fromBlock:o})}catch{}A=!0;return}try{let $;if(E)$=await Oe(t,rg,"getFilterChanges")({filter:E});else{const M=await Oe(t,qf,"getBlockNumber")({});N&&N!==M?$=await Oe(t,W1,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:N+1n,toBlock:M}):$=[],N=M}if($.length===0)return;if(r)C.onLogs($);else for(const M of $)C.onLogs([M])}catch($){E&&$ instanceof ha&&(A=!1),(O=C.onError)==null||O.call(C,$)}},{emitOnBegin:!0,interval:l});return async()=>{E&&await Oe(t,sg,"uninstallFilter")({filter:E}),_()}})})():(()=>{let y=!0,C=()=>y=!1;return(async()=>{try{const N=(()=>{if(t.transport.type==="fallback"){const O=t.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return O?O.value:t.transport}return t.transport})(),E=i??(s?[s]:void 0);let A=[];E&&(A=[E.flatMap($=>Il({abi:[$],eventName:$.name,args:n}))],s&&(A=A[0]));const{unsubscribe:_}=await N.subscribe({params:["logs",{address:e,topics:A}],onData(O){var M;if(!y)return;const $=O.result;try{const{eventName:D,args:q}=J0({abi:E??[],data:$.data,topics:$.topics,strict:h}),j=li($,{args:q,eventName:D});c([j])}catch(D){let q,j;if(D instanceof Gu||D instanceof kf){if(d)return;q=D.abiItem.name,j=(M=D.abiItem.inputs)==null?void 0:M.some(T=>!("name"in T&&T.name))}const L=li($,{args:j?[]:{},eventName:q});c([L])}},onError(O){a==null||a(O)}});C=_,y||C()}catch(N){a==null||a(N)}})(),()=>C()})()}function uT(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=Lt(["watchPendingTransactions",t.uid,e,i]);return Qi(u,{onTransactions:r,onError:n},l=>{let d;const f=Pl(async()=>{var h;try{if(!d)try{d=await Oe(t,px,"createPendingTransactionFilter")({});return}catch(p){throw f(),p}const g=await Oe(t,rg,"getFilterChanges")({filter:d});if(g.length===0)return;if(e)l.onTransactions(g);else for(const p of g)l.onTransactions([p])}catch(g){(h=l.onError)==null||h.call(l,g)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Oe(t,sg,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const h=f.result;r([h])},onError(f){n==null||n(f)}});l=d,u||l()}catch(d){n==null||n(d)}})(),()=>l()})()}function hM(t){var d,f,h;const{scheme:e,statement:n,...r}=((d=t.match(pM))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=((f=t.match(gM))==null?void 0:f.groups)??{},l=(h=t.split("Resources:")[1])==null?void 0:h.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const pM=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,gM=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function mM(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!yr(r.address,{strict:!1})||e&&!Lc(r.address,e))return!1}catch{return!1}return!0}async function yM(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=e,l=hM(s);if(!l.address||!mM({address:n,domain:r,message:l,nonce:i,scheme:o,time:c}))return!1;const f=oE(s);return dg(t,{address:l.address,hash:f,signature:a,...u})}async function bM(t,{serializedTransaction:e,throwOnReceiptRevert:n,timeout:r}){var a,c,u;const s=await t.request({method:"eth_sendRawTransactionSync",params:r?[e,Ie(r)]:[e]},{retryCount:0}),o=(((u=(c=(a=t.chain)==null?void 0:a.formatters)==null?void 0:c.transactionReceipt)==null?void 0:u.format)||eE)(s);if(o.status==="reverted"&&n)throw new dU({receipt:o});return o}function lT(t){return{call:e=>Ol(t,e),createAccessList:e=>fx(t,e),createBlockFilter:()=>JB(t),createContractEventFilter:e=>B5(t,e),createEventFilter:e=>hx(t,e),createPendingTransactionFilter:()=>px(t),estimateContractGas:e=>UU(t,e),estimateGas:e=>Z0(t,e),getBalance:e=>gx(t,e),getBlobBaseFee:()=>XB(t),getBlock:e=>ei(t,e),getBlockNumber:e=>qf(t,e),getBlockTransactionCount:e=>QB(t,e),getBytecode:e=>yb(t,e),getChainId:()=>G0(t),getCode:e=>yb(t,e),getContractEvents:e=>CI(t,e),getEip712Domain:e=>t9(t,e),getEnsAddress:e=>UB(t,e),getEnsAvatar:e=>GB(t,e),getEnsName:e=>YB(t,e),getEnsResolver:e=>ZB(t,e),getEnsText:e=>dx(t,e),getFeeHistory:e=>s9(t,e),estimateFeesPerGas:e=>IU(t,e),getFilterChanges:e=>rg(t,e),getFilterLogs:e=>i9(t,e),getGasPrice:()=>F1(t),getLogs:e=>W1(t,e),getProof:e=>zL(t,e),estimateMaxPriorityFeePerGas:e=>SU(t,e),getStorageAt:e=>WL(t,e),getTransaction:e=>ug(t,e),getTransactionConfirmations:e=>VL(t,e),getTransactionCount:e=>j1(t,e),getTransactionReceipt:e=>rp(t,e),multicall:e=>tT(t,e),prepareTransactionRequest:e=>Y0(t,e),readContract:e=>os(t,e),sendRawTransaction:e=>JI(t,e),sendRawTransactionSync:e=>bM(t,e),simulate:e=>Sb(t,e),simulateBlocks:e=>Sb(t,e),simulateCalls:e=>tM(t,e),simulateContract:e=>CB(t,e),verifyHash:e=>dg(t,e),verifyMessage:e=>uM(t,e),verifySiweMessage:e=>yM(t,e),verifyTypedData:e=>lM(t,e),uninstallFilter:e=>sg(t,e),waitForTransactionReceipt:e=>cT(t,e),watchBlocks:e=>dM(t,e),watchBlockNumber:e=>aT(t,e),watchContractEvent:e=>NB(t,e),watchEvent:e=>fM(t,e),watchPendingTransactions:e=>uT(t,e)}}function wM(t){const{key:e="public",name:n="Public Client"}=t;return og({...t,key:e,name:n,type:"publicClient"}).extend(lT)}async function lle(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new ig({docsPath:"/docs/eip7702/prepareAuthorization"});const i=wn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:wn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Oe(t,G0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Oe(t,j1,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&Lc(o.address,i.address))&&(a.nonce+=1)),a}async function EM(t,{account:e=t.account,message:n}){if(!e)throw new ig({docsPath:"/docs/actions/wallet/signMessage"});const r=wn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?da(n):n.raw instanceof Uint8Array?ss(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}function fg({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=nx();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:u9(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function dT(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>fg({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Nb(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=fT,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let f=t,h=()=>{};const g=fg({key:n,name:r,async request({method:p,params:y}){let C;const N=async(E=0)=>{const A=f[E]({...d,chain:c,retryCount:0,timeout:l});try{const _=await A.request({method:p,params:y});return h({method:p,params:y,response:_,transport:A,status:"success"}),_}catch(_){if(h({error:_,method:p,params:y,transport:A,status:"error"}),i(_)||E===f.length-1||(C??(C=f.slice(E+1).some(O=>{const{include:$,exclude:M}=O({chain:c}).config.methods||{};return $?$.includes(p):M?!M.includes(p):!0})),!C))throw _;return N(E+1)}};return N()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:p=>h=p,transports:f.map(p=>p({chain:c,retryCount:0}))});if(s){const p=typeof s=="object"?s:{};vM({chain:c,interval:p.interval??u,onTransports:y=>f=y,ping:p.ping,sampleCount:p.sampleCount,timeout:p.timeout,transports:f,weights:p.weights})}return g}}function fT(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===bc.code||t.code===bn.code||Xo.nodeMessage.test(t.message)||t.code===5e3))}function vM({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const f=await Promise.all(o.map(async p=>{const y=p({chain:t,retryCount:0,timeout:i}),C=Date.now();let N,E;try{await(r?r({transport:y}):y.request({method:"net_listening"})),E=1}catch{E=0}finally{N=Date.now()}return{latency:N-C,success:E}}));l.push(f),l.length>s&&l.shift();const h=Math.max(...l.map(p=>Math.max(...p.map(({latency:y})=>y)))),g=o.map((p,y)=>{const C=l.map(O=>O[y].latency),E=1-C.reduce((O,$)=>O+$,0)/C.length/h,A=l.map(O=>O[y].success),_=A.reduce((O,$)=>O+$,0)/A.length;return _===0?[0,y]:[u*E+c*_,y]}).sort((p,y)=>y[0]-p[0]);n(g.map(([,p])=>o[p])),await Yp(e),d()};d()}class hT extends ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function hd(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:h,timeout:g})=>{const{batchSize:p=1e3,wait:y=0}=typeof n=="object"?n:{},C=e.retryCount??h,N=g??e.timeout??1e4,E=t||(f==null?void 0:f.rpcUrls.default.http[0]);if(!E)throw new hT;const A=b9(E,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:N});return fg({key:i,methods:o,name:a,async request({method:_,params:O}){const $={method:_,params:O},{schedule:M}=KI({id:E,wait:y,shouldSplitBatch(L){return L.length>p},fn:L=>A.request({body:L}),sort:(L,T)=>L.id-T.id}),D=async L=>n?M(L):[await A.request({body:L})],[{error:q,result:j}]=await D($);if(d)return{error:q,result:j};if(q)throw new z0({body:$,error:q,url:E});return j},retryCount:C,retryDelay:l,timeout:N,type:"http"},{fetchOptions:s,url:E})}}function $2(t){const{r:e,s:n}=pE.Signature.fromCompact(t.slice(2,130)),r=+`0x${t.slice(130)}`,[s,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:Ie(e,{size:32}),s:Ie(n,{size:32}),v:s,yParity:i}:{r:Ie(e,{size:32}),s:Ie(n,{size:32}),yParity:i}}const AM=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:o5,AbiConstructorParamsNotFoundError:sb,AbiDecodingDataSizeTooSmallError:d1,AbiDecodingZeroDataError:Sl,AbiEncodingArrayLengthMismatchError:a5,AbiEncodingBytesSizeMismatchError:c5,AbiEncodingLengthMismatchError:f1,AbiErrorInputsNotFoundError:u5,AbiErrorNotFoundError:ib,AbiErrorSignatureNotFoundError:h1,AbiEventNotFoundError:ob,AbiEventSignatureEmptyTopicsError:l5,AbiEventSignatureNotFoundError:p1,AbiFunctionNotFoundError:pc,AbiFunctionOutputsNotFoundError:g1,AbiFunctionSignatureNotFoundError:d5,AccountStateConflictError:G5,AtomicReadyWalletRejectedUpgradeError:hl,AtomicityNotSupportedError:pl,BaseError:ne,BaseFeeScalarError:lI,BlockNotFoundError:U1,BundleFailedError:QI,BundleTooLargeError:fl,BytesSizeMismatchError:m1,CallExecutionError:R1,ChainDisconnectedError:al,ChainDoesNotSupportContract:Gp,ChainMismatchError:zI,ChainNotFoundError:WI,CircularReferenceError:e5,ClientChainNotConfiguredError:X1,ContractFunctionExecutionError:q0,ContractFunctionRevertedError:Up,ContractFunctionZeroDataError:eI,CounterfactualDeploymentFailedError:tI,DecodeLogDataMismatch:Gu,DecodeLogTopicsMismatch:kf,DuplicateIdError:ll,Eip1559FeesNotSupportedError:K0,EnsAvatarInvalidNftUriError:fu,EnsAvatarUnsupportedNamespaceError:cx,EnsAvatarUriResolutionError:ag,EstimateGasExecutionError:aI,ExecutionRevertedError:Xo,FeeCapTooHighError:nf,FeeCapTooLowError:Bp,FeeConflictError:Z5,FilterTypeNotSupportedError:m5,HttpRequestError:ta,InsufficientFundsError:jp,IntegerOutOfRangeError:E1,InternalRpcError:fa,IntrinsicGasTooHighError:Hp,IntrinsicGasTooLowError:qp,InvalidAbiDecodingTypeError:h5,InvalidAbiEncodingTypeError:f5,InvalidAbiItemError:zS,InvalidAbiParametersError:VS,InvalidAbiTypeParameterError:JS,InvalidAddressError:ui,InvalidArrayError:y1,InvalidBytesBooleanError:b5,InvalidDecimalNumberError:eT,InvalidDefinitionTypeError:p5,InvalidDomainError:vx,InvalidFunctionModifierError:ZS,InvalidHexBooleanError:w5,InvalidInputRpcError:ha,InvalidModifierError:YS,InvalidParameterError:KS,InvalidParamsRpcError:tl,InvalidParenthesisError:t5,InvalidPrimaryTypeError:Ax,InvalidRequestRpcError:Qu,InvalidSerializableTransactionError:J5,InvalidSignatureError:kc,InvalidStructSignatureError:QS,InvalidStructTypeError:Cx,JsonRpcVersionUnsupportedError:rl,LimitExceededRpcError:wc,MaxFeePerGasTooLowError:dI,MethodNotFoundRpcError:el,MethodNotSupportedRpcError:Jo,NonceMaxValueError:Fp,NonceTooHighError:Lp,NonceTooLowError:Mp,ParseRpcError:Xu,ProviderDisconnectedError:ol,ProviderRpcError:vr,RawContractError:Mf,ResourceNotFoundRpcError:nl,ResourceUnavailableRpcError:Wi,RpcError:Zn,RpcRequestError:z0,SizeExceedsPaddingSizeError:w1,SizeOverflowError:E5,SliceOffsetOutOfBoundsError:b1,SolidityProtectedKeywordError:GS,StateAssignmentConflictError:Y5,SwitchChainError:pa,TimeoutError:ub,TipAboveFeeCapError:rf,TransactionExecutionError:X5,TransactionNotFoundError:O1,TransactionReceiptNotFoundError:P1,TransactionRejectedRpcError:bc,TransactionTypeNotSupportedError:zp,UnauthorizedProviderError:sl,UnknownBundleIdError:dl,UnknownNodeError:Tl,UnknownRpcError:nI,UnknownSignatureError:XS,UnknownTypeError:WS,UnsupportedChainIdError:ul,UnsupportedNonOptionalCapabilityError:cl,UnsupportedPackedAbiType:g5,UnsupportedProviderMethodError:il,UrlRequiredError:hT,UserRejectedRequestError:bn,WaitForCallsStatusTimeoutError:tx,WaitForTransactionReceiptTimeoutError:Q5,assertCurrentChain:ZI,assertRequest:Bc,blobsToCommitments:H1,blobsToProofs:q1,boolToBytes:A5,boolToHex:M0,bytesToBigInt:j5,bytesToBool:H5,bytesToHex:zt,bytesToNumber:ii,bytesToString:q5,ccipFetch:Xp,ccipRequest:Xp,checksumAddress:Uf,commitmentToVersionedHash:gI,commitmentsToVersionedHashes:mI,concat:is,concatBytes:R5,concatHex:fi,createClient:og,createNonceManager:m9,createPublicClient:wM,createTransport:fg,custom:dT,decodeAbiParameters:xl,decodeErrorResult:N1,decodeEventLog:J0,decodeFunctionData:rx,decodeFunctionResult:va,defineChain:g9,deploylessCallViaBytecodeBytecode:Z1,deploylessCallViaFactoryBytecode:qI,encodeAbiParameters:hi,encodeDeployData:ng,encodeErrorResult:mb,encodeEventTopics:Il,encodeFunctionData:Lr,encodeFunctionResult:sx,encodePacked:o9,erc20Abi:fd,erc6492SignatureValidatorAbi:Kp,erc6492SignatureValidatorByteCode:pb,ethAddress:iT,etherUnits:W5,fallback:Nb,formatBlock:M1,formatEther:H0,formatGwei:qn,formatLog:li,formatTransaction:L1,formatTransactionReceipt:eE,formatTransactionRequest:Nl,formatUnits:Uc,getAbiItem:Ea,getAddress:Zo,getChainContractAddress:Mc,getContractError:ga,getEventSelector:Ju,getEventSignature:dd,getFunctionSelector:yc,getFunctionSignature:dd,getTransactionType:vI,getTypesForEIP712Domain:Sx,gweiUnits:V5,hashDomain:xx,hashMessage:oE,hashStruct:aE,hashTypedData:Ix,hexToBigInt:Dr,hexToBool:v5,hexToBytes:Ur,hexToNumber:rs,hexToSignature:$2,hexToString:v1,http:hd,isAddress:yr,isAddressEqual:Lc,isHex:ns,keccak256:an,labelhash:ax,maxUint256:uI,multicall3Abi:af,namehash:Jp,numberToBytes:C5,numberToHex:Ie,offchainLookup:bx,offchainLookupAbiItem:sE,offchainLookupSignature:yx,pad:si,padBytes:y5,padHex:zi,parseAbi:l1,parseAbiItem:tb,parseAbiParameters:nb,parseEventLogs:X0,parseSignature:$2,parseUnits:jL,prepareEncodeFunctionData:L5,presignMessagePrefix:wx,publicActions:lT,recoverAddress:$1,recoverPublicKey:rI,rpcTransactionType:cI,serializeErc6492Signature:FL,serializeSignature:Tb,sha256:pI,shouldThrow:fT,signatureToHex:Tb,size:Tt,slice:mc,sliceBytes:C1,sliceHex:Dp,stringToBytes:ea,stringToHex:da,stringify:Lt,toBlobSidecars:EI,toBlobs:wI,toBytes:Dc,toEventHash:kp,toEventSelector:Ju,toEventSignature:dd,toFunctionHash:kp,toFunctionSelector:yc,toFunctionSignature:dd,toHex:ss,toPrefixedMessage:Ex,toRlp:sI,transactionType:B1,trim:Os,universalSignatureValidatorAbi:Kp,universalSignatureValidatorByteCode:pb,validateTypedData:_x,weiUnits:K5,withCache:YI,withRetry:gl,withTimeout:iE,zeroAddress:ms},Symbol.toStringTag,{value:"Module"}));async function jl(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Wf{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await jl(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await jl(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await jl(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await jl(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await jl(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon({body:e,...n}){const r=this.createUrl(n);return navigator.sendBeacon(r.toString(),e?JSON.stringify(e):void 0)}}const Ob={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Ve.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ge.isTelegram()){if(ge.isIos())return t.filter(e=>e!=="google");if(ge.isMac())return t.filter(e=>e!=="x");if(ge.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t},isSocialsEnabled(){var t,e,n,r;return Array.isArray((t=X.state.features)==null?void 0:t.socials)&&((e=X.state.features)==null?void 0:e.socials.length)>0||Array.isArray((n=X.state.remoteFeatures)==null?void 0:n.socials)&&((r=X.state.remoteFeatures)==null?void 0:r.socials.length)>0},isEmailEnabled(){var t,e;return!!((t=X.state.features)!=null&&t.email||(e=X.state.remoteFeatures)!=null&&e.email)}},Se=pt({features:Ve.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ve.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),X={state:Se,subscribeKey(t,e){return Ft(Se,t,e)},setOptions(t){Object.assign(Se,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...Se.remoteFeatures,...t};Se.remoteFeatures=e,(n=Se.remoteFeatures)!=null&&n.socials&&(Se.remoteFeatures.socials=Ob.filterSocialsByPlatform(Se.remoteFeatures.socials)),(r=Se.features)!=null&&r.pay&&(Se.remoteFeatures.email=!1,Se.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;Se.features||(Se.features=Ve.DEFAULT_FEATURES);const e={...Se.features,...t};Se.features=e,(n=Se.features)!=null&&n.pay&&Se.remoteFeatures&&(Se.remoteFeatures.email=!1,Se.remoteFeatures.socials=!1)},setProjectId(t){Se.projectId=t},setCustomRpcUrls(t){Se.customRpcUrls=t},setAllWallets(t){Se.allWallets=t},setIncludeWalletIds(t){Se.includeWalletIds=t},setExcludeWalletIds(t){Se.excludeWalletIds=t},setFeaturedWalletIds(t){Se.featuredWalletIds=t},setTokens(t){Se.tokens=t},setTermsConditionsUrl(t){Se.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Se.privacyPolicyUrl=t},setCustomWallets(t){Se.customWallets=t},setIsSiweEnabled(t){Se.isSiweEnabled=t},setIsUniversalProvider(t){Se.isUniversalProvider=t},setSdkVersion(t){Se.sdkVersion=t},setMetadata(t){Se.metadata=t},setDisableAppend(t){Se.disableAppend=t},setEIP6963Enabled(t){Se.enableEIP6963=t},setDebug(t){Se.debug=t},setEnableWalletGuide(t){Se.enableWalletGuide=t},setEnableAuthLogger(t){Se.enableAuthLogger=t},setEnableWallets(t){Se.enableWallets=t},setPreferUniversalLinks(t){Se.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Ve.SIWX_DEFAULTS))t[e]??(t[e]=n);Se.siwx=t},setConnectMethodsOrder(t){Se.features={...Se.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Se.features={...Se.features,walletFeaturesOrder:t}},setSocialsOrder(t){Se.remoteFeatures={...Se.remoteFeatures,socials:t}},setCollapseWallets(t){Se.features={...Se.features,collapseWallets:t}},setEnableEmbedded(t){Se.enableEmbedded=t},setAllowUnsupportedChain(t){Se.allowUnsupportedChain=t},setManualWCControl(t){Se.manualWCControl=t},setEnableNetworkSwitch(t){Se.enableNetworkSwitch=t},setEnableMobileFullScreen(t){Se.enableMobileFullScreen=ge.isMobile()&&t},setEnableReconnect(t){Se.enableReconnect=t},setCoinbasePreference(t){Se.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Se.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Se.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Se.universalProviderConfigOverride},getSnapshot(){return Ld(Se)}},Da=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Wt=pt({...Da}),CM={state:Wt,subscribeKey(t,e){return Ft(Wt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ge.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Wt.message=Da.message,Wt.variant=Da.variant,Wt.svg=Da.svg,Wt.open=Da.open,Wt.autoClose=Da.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Da.autoClose}){Wt.open?(Wt.open=!1,setTimeout(()=>{Wt.message=t,Wt.variant=n,Wt.svg=e,Wt.open=!0,Wt.autoClose=r},150)):(Wt.message=t,Wt.variant=n,Wt.svg=e,Wt.open=!0,Wt.autoClose=r)}},St=CM,_M={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},pT=ge.getBlockchainApiUrl(),Jn=pt({clientId:null,api:new Wf({baseUrl:pT,clientId:null}),supportedChains:{http:[],ws:[]}}),Ne={state:Jn,async get(t){const{st:e,sv:n}=Ne.getSdkProperties(),r=X.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Jn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=X.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Jn.supportedChains.http.length||await Ne.getSupportedNetworks()}catch{return!1}return Jn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ne.get({path:"v1/supported-chains"});return Jn.supportedChains=t,t}catch{return Jn.supportedChains}},async fetchIdentity({address:t}){const e=ie.getIdentityFromCacheForAddress(t);if(e)return e;const n=await Ne.get({path:`/v1/identity/${t}`,params:{sender:B.state.activeCaipAddress?ge.getPlainAddress(B.state.activeCaipAddress):void 0}});return ie.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await Ne.isNetworkSupported((c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=ie.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await Ne.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return ie.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Ne.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Ne.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Ne.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var s;if(!await Ne.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=ie.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Jn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:X.state.projectId},headers:{"Content-Type":"application/json"}});return ie.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Ne.isNetworkSupported((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Ne.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ne.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Ne.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Jn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ve.CONVERT_SLIPPAGE_TOLERANCE},projectId:X.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ne.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var u;const{st:r,sv:s}=Ne.getSdkProperties();if(!await Ne.isNetworkSupported((u=B.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return St.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ie.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ne.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ie.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Ne.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r,s;if(!await Ne.isNetworkSupported((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId))return[];const n=(s=B.getAccountData())==null?void 0:s.address;return Ne.get({path:`/v1/profile/reverse/${t}`,params:{sender:n,apiVersion:"2"}})},async getEnsNameSuggestions(t){var n;return await Ne.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Ne.isNetworkSupported((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Jn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Ne.isNetworkSupported((a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Jn.api.post({path:"/v1/generators/onrampurl",params:{projectId:X.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Ne.isNetworkSupported((e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ne.get({path:"/v1/onramp/options"})}catch{return _M}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Ne.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Jn.api.post({path:"/v1/onramp/quote",params:{projectId:X.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Ne.isNetworkSupported((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ne.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Ne.isNetworkSupported((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Jn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:X.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Jn.clientId=t,Jn.api=new Wf({baseUrl:pT,clientId:t})}},Wr={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},SM={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Wr.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Wr.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===Wr.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Wr.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===J.CHAIN.SOLANA&&t===Wr.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Wr.COINBASE.url}/dapp?cb_url=${r}`),e===J.CHAIN.BITCOIN&&t===Wr.BINANCE.id&&!("binancew3w"in window)){const s=B.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(Wr.BINANCE.deeplink);a.searchParams.set("appId",Wr.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Wr.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},IM=Object.freeze({enabled:!0,events:[]}),xM=new Wf({baseUrl:ge.getAnalyticsUrl(),clientId:null}),TM=5,NM=60*1e3,oo=pt({...IM}),OM={state:oo,subscribeKey(t,e){return Ft(oo,t,e)},async sendError(t,e){if(!oo.enabled)return;const n=Date.now();if(oo.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<NM}).length>=TM)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};oo.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=X.state;await xM.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){oo.enabled=!0},disable(){oo.enabled=!1},clearEvents(){oo.events=[]}};class Cc extends Error{constructor(e,n,r){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=n,this.originalError=r,r&&r instanceof Error&&(this.originalName=r.name),Object.setPrototypeOf(this,Cc.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Cc):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function k2(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?n="Unknown error":n=(t==null?void 0:t.message)||JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof Cc?t:new Cc(n,e,t);throw OM.sendError(r,r.category),r}function Ar(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return k2(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return k2(a,e)}},n[r]=i}else n[r]=s}),n}const _r=pt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),PM={state:_r,subscribeNetworkImages(t){return Mt(_r.networkImages,()=>t(_r.networkImages))},subscribeKey(t,e){return Ft(_r,t,e)},subscribe(t){return Mt(_r,()=>t(_r))},setWalletImage(t,e){_r.walletImages[t]=e},setNetworkImage(t,e){_r.networkImages[t]=e},setChainImage(t,e){_r.chainImages[t]=e},setConnectorImage(t,e){_r.connectorImages={..._r.connectorImages,[t]:e}},setTokenImage(t,e){_r.tokenImages[t]=e},setCurrencyImage(t,e){_r.currencyImages[t]=e}},Qr=Ar(PM),RM={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},Em=pt({networkImagePromises:{}}),gT={async fetchWalletImage(t){if(t)return await Te._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Em.networkImagePromises[t]||(Em.networkImagePromises[t]=Te._fetchNetworkImage(t)),await Em.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Qr.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Qr.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Qr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Qr.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Qr.state.connectorImages[t.imageId]},getChainImage(t){return Qr.state.networkImages[RM[t]]},getTokenImage(t){if(t)return Qr.state.tokenImages[t]}},$M=ge.getAnalyticsUrl(),kM=new Wf({baseUrl:$M,clientId:null}),DM=["MODAL_CREATED"],UM=45,D2=1e3*10,Rt=pt({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Le={state:Rt,subscribe(t){return Mt(Rt,()=>t(Rt))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=X.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(Rt.pendingEvents).length/1024>UM,e=Rt.lastFlush+D2<Date.now();return t||e},_setPendingEvent(t){var e,n;try{let r=(e=B.getAccountData())==null?void 0:e.address;if("address"in t.data&&t.data.address&&(r=t.data.address),DM.includes(t.data.event)||typeof window>"u")return;const s=(n=B.getActiveCaipNetwork())==null?void 0:n.caipNetworkId;this.state.pendingEvents.push({eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:r,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:s}}}),Rt.reportedErrors.FORBIDDEN=!1,Le.shouldFlushEvents()&&Le._submitPendingEvents()}catch(r){console.warn("_setPendingEvent",r)}},sendEvent(t){var n;Rt.timestamp=Date.now(),Rt.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];((n=X.state.features)!=null&&n.analytics||e.includes(t.event))&&Le._setPendingEvent(Rt),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){Rt.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(Rt.lastFlush=Date.now(),!(Rt.pendingEvents.length===0&&Rt.walletImpressions.length===0))try{const t=Le._transformPendingEventsForBatch(Rt.pendingEvents);Rt.walletImpressions.length&&t.push({eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...Rt.walletImpressions]}}),kM.sendBeacon({path:"/batch",params:Le.getSdkProperties(),body:t}),Rt.reportedErrors.FORBIDDEN=!1,Rt.pendingEvents=[],Rt.walletImpressions=[]}catch{Rt.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){var t,e,n;Rt.subscribedToVisibilityChange||typeof document>"u"||(Rt.subscribedToVisibilityChange=!0,(t=document==null?void 0:document.addEventListener)==null||t.call(document,"visibilitychange",()=>{document.visibilityState==="hidden"&&Le._submitPendingEvents()}),(e=document==null?void 0:document.addEventListener)==null||e.call(document,"freeze",()=>{Le._submitPendingEvents()}),(n=window==null?void 0:window.addEventListener)==null||n.call(window,"pagehide",()=>{Le._submitPendingEvents()}),setInterval(()=>{Le._submitPendingEvents()},D2))}},BM=ge.getApiUrl(),Xn=new Wf({baseUrl:BM,clientId:null}),LM=40,U2=4,MM=20,Be=pt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[]}),Te={state:Be,subscribeKey(t,e){return Ft(Be,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=X.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return X.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Xn.baseUrl}/getWalletImage/${t}`,n=await Xn.getBlob({path:e,params:Te._getSdkProperties()});Qr.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Xn.baseUrl}/public/getAssetImage/${t}`,n=await Xn.getBlob({path:e,params:Te._getSdkProperties()});Qr.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Xn.baseUrl}/public/getAssetImage/${t}`,n=await Xn.getBlob({path:e,params:Te._getSdkProperties()});Qr.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Xn.baseUrl}/public/getCurrencyImage/${t}`,n=await Xn.getBlob({path:e,params:Te._getSdkProperties()});Qr.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Xn.baseUrl}/public/getTokenImage/${t}`,n=await Xn.getBlob({path:e,params:Te._getSdkProperties()});Qr.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){const e=t.length,n=ge.isMobile()?t==null?void 0:t.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Wr).map(o=>o.id).includes(s.id)):t,r=e-n.length;return{filteredWallets:n,mobileFilteredOutWalletsLength:r}},async fetchProjectConfig(){return(await Xn.get({path:"/appkit/v1/config",params:Te._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Xn.get({path:"/projects/v1/origins",params:Te._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===J.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=J.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=B.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!gT.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Te._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ae.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Te._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Te._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Te._fetchTokenImage(e)))},async fetchWallets(t){var o;const e=t.exclude??[];Te._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Wr).map(a=>a.id));const r=await Xn.get({path:"/getWallets",params:{...Te._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(o=t.include)==null?void 0:o.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=Te._filterWalletsByPlatform(r==null?void 0:r.data);return{data:s||[],count:r==null?void 0:r.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=ae.state.connectors;if(!(t!=null&&t.length))return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),B.state.activeChain===J.CHAIN.EVM){const s=[...t.flatMap(i=>{var o;return((o=i.connectors)==null?void 0:o.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}))||[]}),...t.map(i=>{var o;return(o=i.info)==null?void 0:o.rdns})].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:n}=await Te.fetchWallets(e);Be.explorerWallets=n;const r=B.getRequestedCaipNetworkIds().join(",");Be.explorerFilteredWallets=n.filter(s=>{var i;return(i=s.chains)==null?void 0:i.some(o=>r.includes(o))})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=X.state;if(t!=null&&t.length){const e={...Te._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??U2,include:t},{data:n}=await Te.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Te._fetchWalletImage(i))),Be.featured=r,Be.allFeatured=r}},async fetchRecommendedWallets(){try{Be.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=X.state,r=[...e??[],...n??[]].filter(Boolean),s=B.getRequestedCaipNetworkIds().join(","),i={page:1,entries:U2,include:t,exclude:r,chains:s},{data:o,count:a}=await Te.fetchWallets(i),c=ie.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>Te._fetchWalletImage(d))),Be.recommended=o,Be.allRecommended=o,Be.count=a??0}catch{}finally{Be.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=X.state,s=B.getRequestedCaipNetworkIds().join(","),i=[...Be.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),o={page:t,entries:LM,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:u}=await Te.fetchWallets(o);Be.mobileFilteredOutWalletsLength=u+(Be.mobileFilteredOutWalletsLength??0);const l=a.slice(0,MM).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(l.map(d=>Te._fetchWalletImage(d))),Be.wallets=ge.uniqueBy([...Be.wallets,...Te._filterOutExtensions(a)],"id").filter(d=>{var f;return(f=d.chains)==null?void 0:f.some(h=>s.includes(h))}),Be.count=c>Be.count?c:Be.count,Be.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Te.fetchWallets(e);n&&n.forEach(r=>{Be.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=X.state,s=B.getRequestedCaipNetworkIds().join(",");Be.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Te.fetchWallets(i);Le.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Te._fetchWalletImage(c)),ge.wait(300)]),Be.search=Te._filterOutExtensions(o)},initPromise(t,e){const n=Be.promises[t];return n||(Be.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){const i=[t&&Te.initPromise("connectorImages",Te.fetchConnectorImages),e&&Te.initPromise("featuredWallets",Te.fetchFeaturedWallets),n&&Te.initPromise("recommendedWallets",Te.fetchRecommendedWallets),r&&Te.initPromise("networkImages",Te.fetchNetworkImages),s&&Te.initPromise("walletRanks",Te.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=X.state.features)!=null&&t.analytics&&Te.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Xn.get({path:"/getAnalyticsConfig",params:Te._getSdkProperties()});X.setFeatures({analytics:t})}catch{X.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Be.filteredWallets=[]},setFilterByNamespace(t){if(!t){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.recommended=Be.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Be.filteredWallets=Be.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},lt=pt({view:"Connect",history:["Connect"],transactionStack:[]}),FM={state:lt,subscribeKey(t,e){return Ft(lt,t,e)},pushTransactionStack(t){lt.transactionStack.push(t)},popTransactionStack(t){const e=lt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ve.goBack();break;case"cancel":s==null||s(),ve.goBack();break}},push(t,e){t!==lt.view&&(lt.view=t,lt.history.push(t),lt.data=e)},reset(t,e){lt.view=t,lt.history=[t],lt.data=e},replace(t,e){lt.history.at(-1)===t||(lt.view=t,lt.history[lt.history.length-1]=t,lt.data=e)},goBack(){var r,s;const t=B.state.activeCaipAddress,e=ve.state.view==="ConnectingFarcaster",n=!t&&e;if(lt.history.length>1){lt.history.pop();const[i]=lt.history.slice(-1);i&&(t&&i==="Connect"?lt.view="Account":lt.view=i)}else Ke.close();(r=lt.data)!=null&&r.wallet&&(lt.data.wallet=void 0),(s=lt.data)!=null&&s.redirectView&&(lt.data.redirectView=void 0),setTimeout(()=>{var i,o,a;if(n){B.setAccountProp("farcasterUrl",void 0,B.state.activeChain);const c=ae.getAuthConnector();(i=c==null?void 0:c.provider)==null||i.reload();const u=Ld(X.state);(a=(o=c==null?void 0:c.provider)==null?void 0:o.syncDappData)==null||a.call(o,{metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType})}},100)},goBackToIndex(t){if(lt.history.length>1){lt.history=lt.history.slice(0,t+1);const[e]=lt.history.slice(-1);e&&(lt.view=e)}},goBackOrCloseModal(){ve.state.history.length>1?ve.goBack():Ke.close()}},ve=Ar(FM),yi=pt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Pb={state:yi,subscribe(t){return Mt(yi,()=>t(yi))},setThemeMode(t){yi.themeMode=t;try{const e=ae.getAuthConnector();if(e){const n=Pb.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Fd(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){yi.themeVariables={...yi.themeVariables,...t};try{const e=ae.getAuthConnector();if(e){const n=Pb.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Fd(yi.themeVariables,yi.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ld(yi)}},ir=Ar(Pb),mT=Object.fromEntries(yS.map(t=>[t,void 0])),jM=Object.fromEntries(yS.map(t=>[t,!0])),rt=pt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:mT,filterByNamespaceMap:jM}),HM={state:rt,subscribe(t){return Mt(rt,()=>{t(rt)})},subscribeKey(t,e){return Ft(rt,t,e)},initialize(t){t.forEach(e=>{const n=ie.getConnectedConnectorId(e);n&&ae.setConnectorId(n,e)})},setActiveConnector(t){t&&(rt.activeConnector=Md(t))},setConnectors(t){t.filter(s=>!rt.allConnectors.some(i=>i.id===s.id&&ae.getConnectorName(i.name)===ae.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&rt.allConnectors.push(Md(s))});const n=ae.getEnabledNamespaces(),r=ae.getEnabledConnectors(n);rt.connectors=ae.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(rt.filterByNamespaceMap).forEach(e=>{rt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{rt.filterByNamespaceMap[e]=!0}),ae.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){rt.filterByNamespaceMap[t]=e,ae.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ae.getEnabledNamespaces(),e=ae.getEnabledConnectors(t),n=ae.areAllNamespacesEnabled();rt.connectors=ae.mergeMultiChainConnectors(e),n?Te.clearFilterByNamespaces():Te.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(rt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return rt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(rt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ae.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===J.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ae.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===J.CONNECTOR_ID.AUTH){const s=t,i=Ld(X.state),o=ir.getSnapshot().themeMode,a=ir.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Fd(a,o)}),ae.setConnectors([t])}else ae.setConnectors([t])},getAuthConnector(t){var r;const e=t||B.state.activeChain,n=rt.connectors.find(s=>s.id===J.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return rt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return rt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||B.state.activeChain;return rt.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="AUTH")return;const e=t,n=Ld(X.state),r=ir.getSnapshot().themeMode,s=ir.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Fd(s,r)})},getConnectorsByNamespace(t){const e=rt.allConnectors.filter(n=>n.chain===t);return ae.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return B.checkIfSmartAccountEnabled()&&Ln(t)===It.ACCOUNT_TYPES.EOA},selectWalletConnector(t){var r;const e=(r=ve.state.data)==null?void 0:r.redirectView,n=ae.getConnector({id:t.id,rdns:t.rdns});SM.handleMobileDeeplinkRedirect((n==null?void 0:n.explorerId)||t.id,B.state.activeChain),n?ve.push("ConnectingExternal",{connector:n,wallet:t,redirectView:e}):ve.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?ae.getConnectorsByNamespace(t):ae.mergeMultiChainConnectors(rt.allConnectors)},setFilterByNamespace(t){rt.filterByNamespace=t,rt.connectors=ae.getConnectors(t),Te.setFilterByNamespace(t)},setConnectorId(t,e){t&&(rt.activeConnectorIds={...rt.activeConnectorIds,[e]:t},ie.setConnectedConnectorId(e,t))},removeConnectorId(t){rt.activeConnectorIds={...rt.activeConnectorIds,[t]:void 0},ie.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return rt.activeConnectorIds[t]},isConnected(t){return t?!!rt.activeConnectorIds[t]:Object.values(rt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){rt.activeConnectorIds={...mT}}},ae=Ar(HM),qM=1e3,Hl={checkNamespaceConnectorId(t,e){return ae.getConnectorId(t)===e},isSocialProvider(t){return Ve.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ae.setActiveConnector(e),s==null||s(ge.isMobile()&&t),r){const u=Ke.subscribeKey("open",l=>{l||(ve.state.view!==r&&ve.replace(r),u(),a(new Error("Modal closed")))})}const c=B.subscribeKey("activeCaipAddress",u=>{u&&(i==null||i(),n&&Ke.close(),c(),o(Jt.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,n)=>{const r=B.subscribeKey("activeCaipAddress",s=>{s&&(Ke.close(),r(),e(Jt.parseCaipAddress(s)))});le.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i,o=!1,a=null;const c=e||B.state.activeChain,u=B.subscribeKey("activeCaipAddress",l=>{l&&(n&&Ke.close(),u())});return new Promise((l,d)=>{async function f(g){var p;if((p=g.data)!=null&&p.resultUri)if(g.origin===J.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const y=ae.getAuthConnector(c);if(y&&!o){i&&i.close(),o=!0;const C=g.data.resultUri;Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),ie.setConnectedSocialProvider(t),await le.connectExternal({id:y.id,type:y.type,socialUri:C},y.chain);const N=B.state.activeCaipAddress;if(!N){d(new Error("Failed to connect"));return}l(Jt.parseCaipAddress(N)),Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(y){Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:ge.parseError(y)}}),d(new Error("Failed to connect"))}}else Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function h(){if(Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){r==null||r();const g=Ke.subscribeKey("open",y=>{!y&&t==="farcaster"&&(d(new Error("Popup closed")),s==null||s(),g())}),p=ae.getAuthConnector();if(p){const y=B.getAccountData(c);if(!(y!=null&&y.farcasterUrl))try{const{url:C}=await p.provider.getFarcasterUri();B.setAccountProp("farcasterUrl",C,c)}catch{d(new Error("Failed to connect to farcaster"))}}}else{const g=ae.getAuthConnector();a=ge.returnOpenHref(`${J.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g){const{uri:p}=await g.provider.getSocialRedirectUri({provider:t});if(a&&p){a.location.href=p,i=a;const y=setInterval(()=>{i!=null&&i.closed&&!o&&(d(new Error("Popup closed")),clearInterval(y))},1e3);window.addEventListener("message",f,!1)}else a==null||a.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Ke.subscribeKey("open",c=>{c||(ve.state.view!==e&&ve.replace(e),a(),i(new Error("Modal closed")))})}const o=B.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Ke.close(),o(),s(Jt.parseCaipAddress(a)))})})},async updateEmail(){const t=ie.getConnectedConnectorId(B.state.activeChain),e=ae.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==J.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await Ke.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Ke.close(),clearInterval(i),o(),r({email:a}))},qM),o=Ke.subscribeKey("open",a=>{a||(ve.state.view!=="Connect"&&ve.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return B.checkIfSmartAccountEnabled()&&Ln(t)===It.ACCOUNT_TYPES.EOA}};function uf(){var r,s;const t=((r=B.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=B.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Ve.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Ln(t){var n;return(n=B.getAccountData(t))==null?void 0:n.preferredAccountType}function pd(t){var e,n;return t?(n=(e=B.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:B.state.activeCaipNetwork}const e0={getConnectionStatus(t,e){const n=ae.state.activeConnectorIds[e],r=le.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=X.state.remoteFeatures)!=null&&a.multiWallet),n=ae.state.activeConnectorIds[t],r=le.getConnections(t),i=(le.state.recentConnections.get(t)??[]).filter(c=>ae.getConnectorById(c.connectorId)),o=e0.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},_t=pt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),zM={state:_t,subscribe(t){return Mt(_t,()=>t(_t))},setLastNetworkInView(t){_t.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");_t.loading=!0;try{const n=await Ne.fetchTransactions({account:t,cursor:_t.next,chainId:(e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=sp.filterSpamTransactions(n.data),s=sp.filterByConnectedChain(r),i=[..._t.transactions,...s];_t.loading=!1,_t.transactions=i,_t.transactionsByYear=sp.groupTransactionsByYearAndMonth(_t.transactionsByYear,s),_t.empty=i.length===0,_t.next=n.next?n.next:void 0}catch{const r=B.state.activeChain;Le.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:X.state.projectId,cursor:_t.next,isSmartAccount:Ln(r)===It.ACCOUNT_TYPES.SMART_ACCOUNT}}),St.showError("Failed to fetch transactions"),_t.loading=!1,_t.empty=!0,_t.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(u=>u.id!==r.id);n[s]={...o,[i]:[...c,r].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){_t.next=void 0},resetTransactions(){_t.transactions=[],_t.transactionsByYear={},_t.lastNetworkInView=void 0,_t.loading=!1,_t.empty=!1,_t.next=void 0}},sp=Ar(zM,"API_ERROR"),et=pt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Ia;const WM={state:et,subscribe(t){return Mt(et,()=>t(et))},subscribeKey(t,e){return Ft(et,t,e)},_getClient(){return et._client},setClient(t){et._client=Md(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);le.syncStorageConnections(e)},syncStorageConnections(t){const e=ie.getConnections(),n=t??Array.from(B.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(et.recentConnections);i.set(r,s),et.recentConnections=i}},getConnections(t){return t?et.connections.get(t)??[]:[]},hasAnyConnection(t){const e=le.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){var n,r,s,i;const e=ge.isTelegram()||ge.isSafari()&&ge.isIos();if(t==="always"||t==="auto"&&e){if(Ia){await Ia,Ia=void 0;return}if(!ge.isPairingExpired(et==null?void 0:et.wcPairingExpiry)){const o=et.wcUri;et.wcUri=o;return}Ia=(r=(n=le._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n).catch(()=>{}),le.state.status="connecting",await Ia,Ia=void 0,et.wcPairingExpiry=void 0,le.state.status="connected"}else await((i=(s=le._getClient())==null?void 0:s.connectWalletConnect)==null?void 0:i.call(s))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=le._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&B.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=le._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||B.state.activeChain;e&&ae.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Ke.setLoading(!0,B.state.activeChain);const n=ae.getAuthConnector();n&&(B.setAccountProp("preferredAccountType",t,e),await n.provider.setPreferredAccount(t),ie.setPreferredAccountTypes(Object.entries(B.state.chains).reduce((s,[i,o])=>{const a=i,c=Ln(a);return c!==void 0&&(s[a]=c),s},{})),await le.reconnectExternal(n),Ke.setLoading(!1,B.state.activeChain),Le.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=le._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=le._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=le._getClient())==null?void 0:n.formatUnits(t,e)},updateBalance(t){var e;return(e=le._getClient())==null?void 0:e.updateBalance(t)},async sendTransaction(t){var e;return(e=le._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=le._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=le._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=le._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=le._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=le._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=le._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=le._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=le._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){et.wcUri=void 0,et.wcPairingExpiry=void 0,et.wcLinking=void 0,et.recentWallet=void 0,et.status="disconnected",sp.resetTransactions(),ie.deleteWalletConnectDeepLink(),ie.deleteRecentWallet()},resetUri(){et.wcUri=void 0,et.wcPairingExpiry=void 0,Ia=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=le.state;e&&ie.setWalletConnectDeepLink(e),n&&ie.setAppKitRecent(n),t&&Le.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=ve.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown",view:ve.state.view,walletRank:n==null?void 0:n.order}})},setWcBasic(t){et.wcBasic=t},setUri(t){et.wcUri=t,et.wcPairingExpiry=ge.getPairingExpiry()},setWcLinking(t){et.wcLinking=t},setWcError(t){et.wcError=t,et.buffering=!1},setRecentWallet(t){et.recentWallet=t},setBuffering(t){et.buffering=t},setStatus(t){et.status=t},setIsSwitchingConnection(t){et.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=le._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Cc("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},async disconnectConnector({id:t,namespace:e}){var n;try{await((n=le._getClient())==null?void 0:n.disconnectConnector({id:t,namespace:e}))}catch(r){throw new Cc("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map(et.connections);n.set(e,t),et.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var i,o;const n=B.getAccountData(e),r=(o=(i=n==null?void 0:n.user)==null?void 0:i.accounts)==null?void 0:o.find(a=>a.type==="smartAccount"),s=r&&r.address.toLowerCase()===t.toLowerCase()&&Hl.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await le.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ae.getConnectorById(t.connectorId),s=t.connectorId===J.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)n&&await le.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await le.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var u,l;const s=ae.getConnectorById(t.connectorId),i=(l=(u=t.auth)==null?void 0:u.name)==null?void 0:l.toLowerCase(),o=t.connectorId===J.CONNECTOR_ID.AUTH,a=t.connectorId===J.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Hl.isSocialProvider(i)){const{address:d}=await Hl.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Ke.open({view:"ConnectingFarcaster"})},onConnect(){ve.replace("ProfileWallets")}});c=d}else{const{address:d}=await Hl.connectEmail({closeModalOnConnect:r,onOpen(){Ke.open({view:"EmailLogin"})},onConnect(){ve.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Hl.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(f){const h=f?"AllWallets":"ConnectingWalletConnect";Ke.state.open?ve.push(h):Ke.open({view:h})},onConnect(){ve.replace("ProfileWallets")}});c=d}else{const d=await le.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await le.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){var c;let i;const o=(c=B.getAccountData(n))==null?void 0:c.caipAddress;if(o){const{address:u}=Jt.parseCaipAddress(o);i=u}const a=e0.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const u=await le.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&u){const l=u.toLowerCase()!==i.toLowerCase();s==null||s({address:u,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const u=await le.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});u&&(s==null||s({address:u,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},le=Ar(WM),vm={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Uc(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let Am;async function B2(){if(!Am){const{createPublicClient:t,http:e,defineChain:n}=await mn(async()=>{const{createPublicClient:r,http:s,defineChain:i}=await Promise.resolve().then(()=>AM);return{createPublicClient:r,http:s,defineChain:i}},void 0);Am={createPublicClient:t,http:e,defineChain:n}}return Am}const Rb={getBlockchainApiRpcUrl(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()},async getViemChain(t){const{defineChain:e}=await B2(),{chainId:n}=Jt.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(n)})},async createViemPublicClient(t){const{createPublicClient:e,http:n}=await B2(),r=X.state.projectId,s=await Rb.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:n(Rb.getBlockchainApiRpcUrl(t.caipNetworkId,r))})}},hg={async getMyTokensWithBalance(t){var a;const e=(a=B.getAccountData())==null?void 0:a.address,n=B.state.activeCaipNetwork,r=ae.getConnectorId("eip155")===J.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ie.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===J.CHAIN.EVM&&r){const c=await this.getEIP155Balances(e,n);if(c)return this.filterLowQualityTokens(c)}const o=await Ne.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=vm.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await le.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await le.walletGetAssets({account:t,chainFilter:[s]});if(!vm.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(u=>vm.createBalance(u,e.caipNetworkId));return ie.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:n}){const r=await Rb.createViemPublicClient(n),{address:s}=Jt.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await r.multicall({contracts:[{address:e,functionName:"name",args:[],abi:fd},{address:e,functionName:"symbol",args:[],abi:fd},{address:e,functionName:"balanceOf",args:[s],abi:fd},{address:e,functionName:"decimals",args:[],abi:fd}]});return{name:i,symbol:o,decimals:c,balance:a&&c?Uc(a,c):"0"}}},Cm={adapters:{}},yT={state:Cm,initialize(t){Cm.adapters={...t}},get(t){return Cm.adapters[t]}},t0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Qn=pt({providers:{...t0},providerIds:{...t0}}),wt={state:Qn,subscribeKey(t,e){return Ft(Qn,t,e)},subscribe(t){return Mt(Qn,()=>{t(Qn)})},subscribeProviders(t){return Mt(Qn.providers,()=>t(Qn.providers))},setProvider(t,e){t&&e&&(Qn.providers[t]=Md(e))},getProvider(t){if(t)return Qn.providers[t]},setProviderId(t,e){e&&(Qn.providerIds[t]=e)},getProviderId(t){if(t)return Qn.providerIds[t]},reset(){Qn.providers={...t0},Qn.providerIds={...t0}},resetChain(t){Qn.providers[t]=void 0,Qn.providerIds[t]=void 0}},Zc=pt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),xs={state:Zc,subscribe(t){return Mt(Zc,()=>t(Zc))},subscribeOpen(t){return Ft(Zc,"open",t)},set(t){Object.assign(Zc,{...Zc,...t})}},hu={async getTokenList(t){var r;const e=await Ne.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=B.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(le==null?void 0:le.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Ne.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Ne.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=le.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await hg.getMyTokensWithBalance(t);return B.setAccountProp("tokenBalance",e,B.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:uf(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]},async handleSwapError(t){var e,n;try{const r=t==null?void 0:t.cause;if(!(r!=null&&r.json))return;const s=await r.json(),i=(n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description;return i!=null&&i.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},tt=pt({tokenBalances:[],loading:!1}),VM={state:tt,subscribe(t){return Mt(tt,()=>t(tt))},subscribeKey(t,e){return Ft(tt,t,e)},setToken(t){t&&(tt.token=Md(t))},setTokenAmount(t){tt.sendTokenAmount=t},setReceiverAddress(t){tt.receiverAddress=t},setReceiverProfileImageUrl(t){tt.receiverProfileImageUrl=t},setReceiverProfileName(t){tt.receiverProfileName=t},setNetworkBalanceInUsd(t){tt.networkBalanceInUSD=t},setLoading(t){tt.loading=t},getSdkEventProperties(t){var e,n;return{message:ge.parseError(t),isSmartAccount:Ln(B.state.activeChain)===It.ACCOUNT_TYPES.SMART_ACCOUNT,token:((e=tt.token)==null?void 0:e.symbol)||"",amount:tt.sendTokenAmount??0,network:((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}},async sendToken(){var t;try{switch(Ge.setLoading(!0),(t=B.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ge.sendEvmToken();return;case"solana":await Ge.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(e){throw Li.isUserRejectedRequestError(e)?new ES(e):e}finally{Ge.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=B.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Ln(t);if(!Ge.state.sendTokenAmount||!Ge.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ge.state.token)throw new Error("A token is required");if((n=Ge.state.token)!=null&&n.address){Le.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===It.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ge.state.token.address,amount:Ge.state.sendTokenAmount,network:((r=B.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}});const{hash:i}=await Ge.sendERC20Token({receiverAddress:Ge.state.receiverAddress,tokenAddress:Ge.state.token.address,sendTokenAmount:Ge.state.sendTokenAmount,decimals:Ge.state.token.quantity.decimals});i&&(tt.hash=i)}else{Le.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===It.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ge.state.token.symbol||"",amount:Ge.state.sendTokenAmount,network:((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}});const{hash:i}=await Ge.sendNativeToken({receiverAddress:Ge.state.receiverAddress,sendTokenAmount:Ge.state.sendTokenAmount,decimals:Ge.state.token.quantity.decimals});i&&(tt.hash=i)}},async fetchTokenBalance(t){var o,a,c;tt.loading=!0;const e=B.state.activeChain,n=(o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=B.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=((c=B.getAccountData(e))==null?void 0:c.caipAddress)??B.state.activeCaipAddress,i=s?ge.getPlainAddress(s):void 0;if(tt.lastRetry&&!ge.isAllowedRetry(tt.lastRetry,30*Ve.ONE_SEC_MS))return tt.loading=!1,[];try{if(i&&n&&r){const u=await hg.getMyTokensWithBalance();return tt.tokenBalances=u,tt.lastRetry=void 0,u}}catch(u){tt.lastRetry=Date.now(),t==null||t(u),St.showError("Token Balance Unavailable")}finally{tt.loading=!1}return[]},fetchNetworkBalance(){if(tt.tokenBalances.length===0)return;const t=hu.mapBalancesToSwapTokens(tt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===uf());e&&(tt.networkBalanceInUSD=e?Dt.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var o,a,c,u;ve.pushTransactionStack({});const e=t.receiverAddress,n=(o=B.getAccountData())==null?void 0:o.address,r=le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await le.sendTransaction({chainNamespace:J.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)});return Le.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ln("eip155")===It.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=Ge.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||"",hash:i||""}}),(u=le._getClient())==null||u.updateBalance("eip155"),Ge.resetSend(),{hash:i}},async sendERC20Token(t){var r,s,i;ve.pushTransactionStack({onSuccess(){ve.replace("Account")}});const e=le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),n=(r=B.getAccountData())==null?void 0:r.address;if(n&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const o=ge.getPlainAddress(t.tokenAddress);if(!o)throw new Error("SendController:sendERC20Token - tokenAddress is required");const a=await le.writeContract({fromAddress:n,tokenAddress:o,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:uR.getERC20Abi(o),chainNamespace:J.CHAIN.EVM});return Le.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ln("eip155")===It.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=Ge.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((i=B.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||"",hash:a||""}}),Ge.resetSend(),{hash:a}}return{hash:void 0}},async sendSolanaToken(){var n;if(!Ge.state.sendTokenAmount||!Ge.state.receiverAddress)throw new Error("An amount and receiver address are required");ve.pushTransactionStack({onSuccess(){ve.replace("Account")}});let t;Ge.state.token&&Ge.state.token.address!==Ve.SOLANA_NATIVE_TOKEN_ADDRESS&&(ge.isCaipAddress(Ge.state.token.address)?t=ge.getPlainAddress(Ge.state.token.address):t=Ge.state.token.address);const e=await le.sendTransaction({chainNamespace:"solana",tokenMint:t,to:Ge.state.receiverAddress,value:Ge.state.sendTokenAmount});e&&(tt.hash=e),(n=le._getClient())==null||n.updateBalance("solana"),Ge.resetSend()},resetSend(){tt.token=void 0,tt.sendTokenAmount=void 0,tt.receiverAddress=void 0,tt.receiverProfileImageUrl=void 0,tt.receiverProfileName=void 0,tt.loading=!1,tt.tokenBalances=[]}},Ge=Ar(VM),_m={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},wh={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},pe=pt({chains:HP(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),bT={state:pe,subscribe(t){return Mt(pe,()=>{t(pe)})},subscribeKey(t,e){return Ft(pe,t,e)},subscribeAccountStateProp(t,e,n){var s;const r=n||pe.activeChain;return r?Ft(((s=pe.chains.get(r))==null?void 0:s.accountState)||{},t,e):()=>{}},subscribeChainProp(t,e,n){let r;return Mt(pe.chains,()=>{var i;const s=n||pe.activeChain;if(s){const o=(i=pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ie.getActiveNetworkProps(),i=e==null?void 0:e.find(l=>l.id.toString()===(r==null?void 0:r.toString())),a=t.find(l=>(l==null?void 0:l.namespace)===s)||(t==null?void 0:t[0]),c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=X.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(pe.noAdapters=!0),pe.noAdapters||(pe.activeChain=a==null?void 0:a.namespace,pe.activeCaipNetwork=i,B.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),pe.activeChain&&xs.set({activeChain:a==null?void 0:a.namespace})),u.forEach(l=>{const d=e==null?void 0:e.filter(g=>g.chainNamespace===l),f=ie.getPreferredAccountTypes()||{},h={...X.state.defaultAccountTypes,...f};B.state.chains.set(l,{namespace:l,networkState:pt({...wh,caipNetwork:d==null?void 0:d[0]}),accountState:pt({..._m,preferredAccountType:h[l]}),caipNetworks:d??[],...n}),B.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){var e,n;if(pe.activeChain===t){const r=Array.from(pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&B.setActiveCaipNetwork(s)}}pe.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...wh,caipNetwork:n[0]},accountState:{..._m},caipNetworks:n,connectionControllerClient:e}),B.setRequestedCaipNetworks((n==null?void 0:n.filter(r=>r.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),B.setRequestedCaipNetworks(r,t.chainNamespace),ae.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=pe.chains.get(t);if(n){const o=((r=pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&B.setActiveCaipNetwork(n.caipNetworks[0]),pe.chains.set(t,{...n,caipNetworks:a}),B.setRequestedCaipNetworks(a||[],t),a.length===0&&ae.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=pe.chains.get(t);n&&(n.networkState={...n.networkState||wh,...e},pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=pe.chains.get(t);if(r){const s={...r.accountState||_m,...e};pe.chains.set(t,{...r,accountState:s}),(pe.chains.size===1||pe.activeChain===t)&&e.caipAddress&&(pe.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const n=pe.chains.get(t);if(n){const r={...n.networkState||wh,...e};pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){B.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;pe.activeChain=t;const e=t?pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,pe.activeCaipNetwork=n,B.setChainNetworkData(t,{caipNetwork:n}),ie.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),xs.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var i,o;if(!t)return;const e=pe.activeChain===t.chainNamespace;e||B.setIsSwitchingNamespace(!0);const n=pe.chains.get(t.chainNamespace);pe.activeChain=t.chainNamespace,pe.activeCaipNetwork=t,B.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let r=(i=n==null?void 0:n.accountState)==null?void 0:i.address;if(r)pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${r}`;else if(e&&pe.activeCaipAddress){const{address:a}=Jt.parseCaipAddress(pe.activeCaipAddress);r=a,pe.activeCaipAddress=`${t.caipNetworkId}:${r}`}else pe.activeCaipAddress=void 0;B.setChainAccountData(t.chainNamespace,{address:r,caipAddress:pe.activeCaipAddress}),Ge.resetSend(),xs.set({activeChain:pe.activeChain,selectedNetworkId:(o=pe.activeCaipNetwork)==null?void 0:o.caipNetworkId}),ie.setActiveCaipNetworkId(t.caipNetworkId),!B.checkIfSupportedNetwork(t.chainNamespace)&&X.state.enableNetworkSwitch&&!X.state.allowUnsupportedChain&&!le.state.wcBasic&&B.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==B.state.activeChain,n=(s=B.getNetworkData(t))==null?void 0:s.caipNetwork,r=B.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await B.switchActiveNetwork(r)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){var o;const n=B.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=wt.getProviderId(pe.activeChain)==="AUTH",s=(o=B.getAccountData(n))==null?void 0:o.address,i=J.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===n||r&&i){const a=yT.get(t.chainNamespace);if(!a)throw new Error("Adapter not found");await a.switchNetwork({caipNetwork:t})}B.setActiveCaipNetwork(t)}catch(a){if(e)throw a}Le.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ge.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=B.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){B.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=B.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ae.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=B.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=pe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:pe.activeCaipNetwork},getActiveCaipAddress(){return pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},setApprovedCaipNetworksData(t,e){B.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){var s;const n=e||((s=pe.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=B.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!pe.activeChain)return!0;const e=B.getRequestedCaipNetworks(pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},checkIfSmartAccountEnabled(){var r,s;const t=mS.caipNetworkIdToNumber((r=pe.activeCaipNetwork)==null?void 0:r.caipNetworkId);if(!pe.activeChain||!t)return!1;const n=((s=tn.get(Ce.SMART_ACCOUNT_ENABLED_NETWORKS))==null?void 0:s.split(","))||[];return!!(n!=null&&n.includes(t.toString()))},showUnsupportedChainUI(){Ke.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ve.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){B.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=B.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=X.state.defaultAccountTypes[e];pe.activeCaipAddress=void 0,B.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ae.removeConnectorId(e)},setIsSwitchingNamespace(t){pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(pe.chains.forEach(s=>{J.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||pe.activeChain;if(e)return(n=B.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||pe.activeChain;if(e)return(n=B.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=B.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id.toString()===(e==null?void 0:e.toString()));return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ae.state.filterByNamespace;return(t?[pe.chains.get(t)]:Array.from(pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?B.getRequestedCaipNetworks(t):B.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return bT.getCaipNetworks(e).find(n=>n.id.toString()===t.toString()||n.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){pe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return pe.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){var o,a;const e=B.getAccountData();if(!e)return[];const n=(o=B.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=B.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=B.state.activeCaipAddress,i=s?ge.getPlainAddress(s):void 0;if(B.setAccountProp("balanceLoading",!0,r),e.lastRetry&&!ge.isAllowedRetry(e.lastRetry,30*Ve.ONE_SEC_MS))return B.setAccountProp("balanceLoading",!1,r),[];try{if(i&&n&&r){const c=await hg.getMyTokensWithBalance();return B.setAccountProp("tokenBalance",c,r),B.setAccountProp("lastRetry",void 0,r),B.setAccountProp("balanceLoading",!1,r),c}}catch(c){B.setAccountProp("lastRetry",Date.now(),r),t==null||t(c),St.showError("Token Balance Unavailable")}finally{B.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(t){var c;const e=t.chainNamespace,n=!!((c=B.getAccountData(e))!=null&&c.caipAddress),r=B.getAllApprovedCaipNetworkIds(),s=B.getNetworkProp("supportsAllNetworks",e)!==!1,i=ae.getConnectorId(e),o=ae.getAuthConnector(),a=i===J.CONNECTOR_ID.AUTH&&o;return!n||s||a?!1:!(r!=null&&r.includes(t.caipNetworkId))}},B=Ar(bT),KM={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){var f,h;const n=B.state.activeCaipNetwork,r=B.state.activeChain,s=ve.state.data;if(t.id===(n==null?void 0:n.id))return;const o=!!((f=B.getAccountData(r))!=null&&f.address),a=!!((h=B.getAccountData(t.chainNamespace))!=null&&h.address),c=t.chainNamespace!==r,l=ae.getConnectorId(r)===J.CONNECTOR_ID.AUTH,d=J.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===t.chainNamespace);e||l&&d?ve.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?ve.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ve.push("SwitchNetwork",{...s,network:t})}},er=pt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),GM={state:er,subscribe(t){return Mt(er,()=>t(er))},subscribeKey(t,e){return Ft(er,t,e)},async open(t){var o,a;const e=t==null?void 0:t.namespace,n=B.state.activeChain,r=e&&e!==n,s=(o=B.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress,i=B.state.noAdapters;if(le.state.wcBasic?Te.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await Te.prefetch(),ae.setFilterByNamespace(t==null?void 0:t.namespace),Ke.setLoading(!0,e),e&&r){const c=((a=B.getNetworkData(e))==null?void 0:a.caipNetwork)||B.getRequestedCaipNetworks(e)[0];c&&(i?(await B.switchActiveNetwork(c),ve.push("ConnectingWalletConnectBasic")):KM.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0}))}else X.state.manualWCControl||i&&!s?ge.isMobile()?ve.reset("AllWallets"):ve.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ve.reset(t.view,t.data):s?ve.reset("Account"):ve.reset("Connect");er.open=!0,xs.set({open:!0}),Le.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=X.state.enableEmbedded,e=!!B.state.activeCaipAddress;er.open&&Le.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),er.open=!1,ve.reset("Connect"),Ke.clearLoading(),t?e?ve.replace("Account"):ve.push("Connect"):xs.set({open:!1}),le.resetUri()},setLoading(t,e){e&&er.loadingNamespaceMap.set(e,t),er.loading=t,xs.set({loading:t})},clearLoading(){er.loadingNamespaceMap.clear(),er.loading=!1,xs.set({loading:!1})},shake(){er.shake||(er.shake=!0,setTimeout(()=>{er.shake=!1},500))}},Ke=Ar(GM),_d={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},$b={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},YM={providers:vS,selectedProvider:null,error:null,purchaseCurrency:_d,paymentCurrency:$b,purchaseCurrencies:[_d],paymentCurrencies:[],quotesLoading:!1},nt=pt(YM),ZM={state:nt,subscribe(t){return Mt(nt,()=>t(nt))},subscribeKey(t,e){return Ft(nt,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=B.state.activeChain,s=r===J.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=B.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",dR),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",X.state.projectId),nt.selectedProvider={...t,url:o.toString()}}else nt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=vS.filter(r=>e.includes(r.name));nt.providers=n}else nt.providers=[]},setPurchaseCurrency(t){nt.purchaseCurrency=t},setPaymentCurrency(t){nt.paymentCurrency=t},setPurchaseAmount(t){kb.state.purchaseAmount=t},setPaymentAmount(t){kb.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ne.getOnrampOptions();nt.purchaseCurrencies=t.purchaseCurrencies,nt.paymentCurrencies=t.paymentCurrencies,nt.paymentCurrency=t.paymentCurrencies[0]||$b,nt.purchaseCurrency=t.purchaseCurrencies[0]||_d,await Te.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Te.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;nt.quotesLoading=!0;try{const n=await Ne.getOnrampQuote({purchaseCurrency:nt.purchaseCurrency,paymentCurrency:nt.paymentCurrency,amount:((t=nt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=nt.purchaseCurrency)==null?void 0:e.symbol});return nt.quotesLoading=!1,nt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return nt.error=n.message,nt.quotesLoading=!1,null}finally{nt.quotesLoading=!1}},resetState(){nt.selectedProvider=null,nt.error=null,nt.purchaseCurrency=_d,nt.paymentCurrency=$b,nt.purchaseCurrencies=[_d],nt.paymentCurrencies=[],nt.paymentAmount=void 0,nt.purchaseAmount=void 0,nt.quotesLoading=!1}},kb=Ar(ZM);var yE={exports:{}},Tu=typeof Reflect=="object"?Reflect:null,L2=Tu&&typeof Tu.apply=="function"?Tu.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},ip;Tu&&typeof Tu.ownKeys=="function"?ip=Tu.ownKeys:Object.getOwnPropertySymbols?ip=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ip=function(e){return Object.getOwnPropertyNames(e)};function JM(t){console&&console.warn&&console.warn(t)}var wT=Number.isNaN||function(e){return e!==e};function mt(){mt.init.call(this)}yE.exports=mt;yE.exports.once=t7;mt.EventEmitter=mt;mt.prototype._events=void 0;mt.prototype._eventsCount=0;mt.prototype._maxListeners=void 0;var M2=10;function pg(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return M2},set:function(t){if(typeof t!="number"||t<0||wT(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");M2=t}});mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||wT(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ET(t){return t._maxListeners===void 0?mt.defaultMaxListeners:t._maxListeners}mt.prototype.getMaxListeners=function(){return ET(this)};mt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")L2(c,this,n);else for(var u=c.length,l=ST(c,u),r=0;r<u;++r)L2(l[r],this,n);return!0};function vT(t,e,n,r){var s,i,o;if(pg(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=ET(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,JM(a)}return t}mt.prototype.addListener=function(e,n){return vT(this,e,n,!1)};mt.prototype.on=mt.prototype.addListener;mt.prototype.prependListener=function(e,n){return vT(this,e,n,!0)};function XM(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function AT(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=XM.bind(r);return s.listener=n,r.wrapFn=s,s}mt.prototype.once=function(e,n){return pg(n),this.on(e,AT(this,e,n)),this};mt.prototype.prependOnceListener=function(e,n){return pg(n),this.prependListener(e,AT(this,e,n)),this};mt.prototype.removeListener=function(e,n){var r,s,i,o,a;if(pg(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():QM(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};mt.prototype.off=mt.prototype.removeListener;mt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function CT(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?e7(s):ST(s,s.length)}mt.prototype.listeners=function(e){return CT(this,e,!0)};mt.prototype.rawListeners=function(e){return CT(this,e,!1)};mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):_T.call(t,e)};mt.prototype.listenerCount=_T;function _T(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?ip(this._events):[]};function ST(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function QM(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function e7(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function t7(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}IT(t,e,i,{once:!0}),e!=="error"&&n7(t,s,{once:!0})})}function n7(t,e,n){typeof t.on=="function"&&IT(t,"error",e,n)}function IT(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var us=yE.exports;const bE=Oc(us);var ue={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Db=function(t,e){return Db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Db(t,e)};function r7(t,e){Db(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ub=function(){return Ub=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ub.apply(this,arguments)};function s7(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function i7(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function o7(t,e){return function(n,r){e(n,r,t)}}function a7(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function c7(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function u7(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function l7(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function d7(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Bb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xT(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function f7(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xT(arguments[e]));return t}function h7(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function lf(t){return this instanceof lf?(this.v=t,this):new lf(t)}function p7(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(g,p){i.push([f,h,g,p])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof lf?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function g7(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:lf(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function m7(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bb=="function"?Bb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function y7(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b7(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function w7(t){return t&&t.__esModule?t:{default:t}}function E7(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function v7(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const A7=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ub},__asyncDelegator:g7,__asyncGenerator:p7,__asyncValues:m7,__await:lf,__awaiter:c7,__classPrivateFieldGet:E7,__classPrivateFieldSet:v7,__createBinding:l7,__decorate:i7,__exportStar:d7,__extends:r7,__generator:u7,__importDefault:w7,__importStar:b7,__makeTemplateObject:y7,__metadata:a7,__param:o7,__read:xT,__rest:s7,__spread:f7,__spreadArrays:h7,__values:Bb},Symbol.toStringTag,{value:"Module"})),gg=sS(A7);var Sm={},ql={},F2;function C7(){if(F2)return ql;F2=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return ql.delay=t,ql}var xa={},Im={},Ta={},j2;function _7(){return j2||(j2=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.ONE_THOUSAND=Ta.ONE_HUNDRED=void 0,Ta.ONE_HUNDRED=100,Ta.ONE_THOUSAND=1e3),Ta}var xm={},H2;function S7(){return H2||(H2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(xm)),xm}var q2;function TT(){return q2||(q2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gg;e.__exportStar(_7(),t),e.__exportStar(S7(),t)}(Im)),Im}var z2;function I7(){if(z2)return xa;z2=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.fromMiliseconds=xa.toMiliseconds=void 0;const t=TT();function e(r){return r*t.ONE_THOUSAND}xa.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return xa.fromMiliseconds=n,xa}var W2;function x7(){return W2||(W2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gg;e.__exportStar(C7(),t),e.__exportStar(I7(),t)}(Sm)),Sm}var Jc={},V2;function T7(){if(V2)return Jc;V2=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Jc.Watch=t,Jc.default=t,Jc}var Tm={},zl={},K2;function N7(){if(K2)return zl;K2=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.IWatch=void 0;class t{}return zl.IWatch=t,zl}var G2;function O7(){return G2||(G2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),gg.__exportStar(N7(),t)}(Tm)),Tm}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gg;e.__exportStar(x7(),t),e.__exportStar(T7(),t),e.__exportStar(O7(),t),e.__exportStar(TT(),t)})(ue);class Fc{}let P7=class extends Fc{constructor(e){super()}};const Y2=ue.FIVE_SECONDS,jc={pulse:"heartbeat_pulse"};let R7=class NT extends P7{constructor(e){super(e),this.events=new us.EventEmitter,this.interval=Y2,this.interval=(e==null?void 0:e.interval)||Y2}static async init(e){const n=new NT(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ue.toMiliseconds(this.interval))}pulse(){this.events.emit(jc.pulse)}};const $7=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,k7=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D7=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function U7(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){B7(t);return}return e}function B7(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Eh(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!D7.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($7.test(t)||k7.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,U7)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function L7(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function en(t,...e){try{return L7(t(...e))}catch(n){return Promise.reject(n)}}function M7(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function F7(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function op(t){if(M7(t))return String(t);if(F7(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return op(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Lb="base64:";function j7(t){return typeof t=="string"?t:Lb+z7(t)}function H7(t){return typeof t!="string"||!t.startsWith(Lb)?t:q7(t.slice(Lb.length))}function q7(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function z7(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function rr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function W7(...t){return rr(t.join(":"))}function vh(t){return t=rr(t),t?t+":":""}function V7(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function K7(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const G7="memory",Y7=()=>{const t=new Map;return{name:G7,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Z7(t={}){const e={mounts:{"":t.driver||Y7()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=rr(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await Z2(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const f=new Map,h=g=>{let p=f.get(g.base);return p||(p={driver:g.driver,base:g.base,items:[]},f.set(g.base,p)),p};for(const g of u){const p=typeof g=="string",y=rr(p?g:g.key),C=p?void 0:g.value,N=p||!g.options?l:{...l,...g.options},E=n(y);h(E).items.push({key:y,value:C,relativeKey:E.relativeKey,options:N})}return Promise.all([...f.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(u,l={}){u=rr(u);const{relativeKey:d,driver:f}=n(u);return en(f.hasItem,d,l)},getItem(u,l={}){u=rr(u);const{relativeKey:d,driver:f}=n(u);return en(f.getItem,d,l).then(h=>Eh(h))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?en(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(h=>({key:W7(d.base,h.key),value:Eh(h.value)}))):Promise.all(d.items.map(f=>en(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Eh(h)})))))},getItemRaw(u,l={}){u=rr(u);const{relativeKey:d,driver:f}=n(u);return f.getItemRaw?en(f.getItemRaw,d,l):en(f.getItem,d,l).then(h=>H7(h))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=rr(u);const{relativeKey:f,driver:h}=n(u);h.setItem&&(await en(h.setItem,f,op(l),d),h.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return en(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:op(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>en(d.driver.setItem,f.relativeKey,op(f.value),f.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=rr(u);const{relativeKey:f,driver:h}=n(u);if(h.setItemRaw)await en(h.setItemRaw,f,l,d);else if(h.setItem)await en(h.setItem,f,j7(l),d);else return;h.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=rr(u);const{relativeKey:d,driver:f}=n(u);f.removeItem&&(await en(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await en(f.removeItem,d+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=rr(u);const{relativeKey:d,driver:f}=n(u),h=Object.create(null);if(f.getMeta&&Object.assign(h,await en(f.getMeta,d,l)),!l.nativeOnly){const g=await en(f.getItem,d+"$",l).then(p=>Eh(p));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(h,g))}return h},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var y;u=vh(u);const d=r(u,!0);let f=[];const h=[];let g=!0;for(const C of d){(y=C.driver.flags)!=null&&y.maxDepth||(g=!1);const N=await en(C.driver.getKeys,C.relativeBase,l);for(const E of N){const A=C.mountpoint+rr(E);f.some(_=>A.startsWith(_))||h.push(A)}f=[C.mountpoint,...f.filter(E=>!E.startsWith(C.mountpoint))]}const p=l.maxDepth!==void 0&&!g;return h.filter(C=>(!p||V7(C,l.maxDepth))&&K7(C,u))},async clear(u,l={}){u=vh(u),await Promise.all(r(u,!1).map(async d=>{if(d.driver.clear)return en(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(h=>d.driver.removeItem(h,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>J2(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=vh(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(Z2(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){var d,f;u=vh(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((f=(d=e.unwatch)[u])==null||f.call(d),delete e.unwatch[u]),l&&await J2(e.mounts[u]),e.mountpoints=e.mountpoints.filter(h=>h!==u),delete e.mounts[u])},getMount(u=""){u=rr(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=rr(u),r(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function Z2(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function J2(t){typeof t.dispose=="function"&&await en(t.dispose)}function Hc(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function OT(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Hc(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let Nm;function Vf(){return Nm||(Nm=OT("keyval-store","keyval")),Nm}function X2(t,e=Vf()){return e("readonly",n=>Hc(n.get(t)))}function J7(t,e,n=Vf()){return n("readwrite",r=>(r.put(e,t),Hc(r.transaction)))}function X7(t,e=Vf()){return e("readwrite",n=>(n.delete(t),Hc(n.transaction)))}function Q7(t=Vf()){return t("readwrite",e=>(e.clear(),Hc(e.transaction)))}function eF(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Hc(t.transaction)}function tF(t=Vf()){return t("readonly",e=>{if(e.getAllKeys)return Hc(e.getAllKeys());const n=[];return eF(e,r=>n.push(r.key)).then(()=>n)})}const nF="idb-keyval";var rF=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=OT(t.dbName,t.storeName)),{name:nF,options:t,async hasItem(s){return!(typeof await X2(n(s),r)>"u")},async getItem(s){return await X2(n(s),r)??null},setItem(s,i){return J7(n(s),i,r)},removeItem(s){return X7(n(s),r)},getKeys(){return tF(r)},clear(){return Q7(r)}}};const sF="WALLET_CONNECT_V2_INDEXED_DB",iF="keyvaluestorage";let oF=class{constructor(){this.indexedDb=Z7({driver:rF({dbName:sF,storeName:iF})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Ji(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ap={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Om<"u"&&Om.localStorage?ap.exports=Om.localStorage:typeof window<"u"&&window.localStorage?ap.exports=window.localStorage:ap.exports=new e})();function aF(t){var e;return[t[0],hc((e=t[1])!=null?e:"")]}let cF=class{constructor(){this.localStorage=ap.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(aF)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return hc(n)}async setItem(e,n){this.localStorage.setItem(e,Ji(n))}async removeItem(e){this.localStorage.removeItem(e)}};const uF="wc_storage_version",Q2=1,lF=async(t,e,n)=>{const r=uF,s=await e.getItem(r);if(s&&s>=Q2){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,Q2),n(e),dF(t,o)},dF=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let fF=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new cF;this.storage=e;try{const n=new oF;lF(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var hF=Object.defineProperty,pF=(t,e,n)=>e in t?hF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eA=(t,e,n)=>pF(t,typeof e!="symbol"?e+"":e,n);let gF=class extends Fc{constructor(e){super(),this.opts=e,eA(this,"protocol","wc"),eA(this,"version",2)}};var mF=Object.defineProperty,yF=(t,e,n)=>e in t?mF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bF=(t,e,n)=>yF(t,e+"",n);let wF=class extends Fc{constructor(e,n){super(),this.core=e,this.logger=n,bF(this,"records",new Map)}},EF=class{constructor(e,n){this.logger=e,this.core=n}},vF=class extends Fc{constructor(e,n){super(),this.relayer=e,this.logger=n}},AF=class extends Fc{constructor(e){super()}},CF=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},_F=class extends Fc{constructor(e,n){super(),this.relayer=e,this.logger=n}},SF=class extends Fc{constructor(e,n){super(),this.core=e,this.logger=n}},IF=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},xF=class{constructor(e,n){this.projectId=e,this.logger=n}},TF=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var NF=Object.defineProperty,OF=(t,e,n)=>e in t?NF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tA=(t,e,n)=>OF(t,typeof e!="symbol"?e+"":e,n);let PF=class{constructor(e){this.opts=e,tA(this,"protocol","wc"),tA(this,"version",2)}},RF=class{constructor(e){this.client=e}};function $F(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function PT(t,...e){if(!$F(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nA(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function kF(t,e){PT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Xc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pm=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function DF(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function RT(t){return typeof t=="string"&&(t=DF(t)),PT(t),t}let UF=class{clone(){return this._cloneInto()}};function BF(t){const e=r=>t().update(RT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $T(t=32){if(Xc&&typeof Xc.getRandomValues=="function")return Xc.getRandomValues(new Uint8Array(t));if(Xc&&typeof Xc.randomBytes=="function")return Xc.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function LF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let MF=class extends UF{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Pm(this.buffer)}update(e){nA(this);const{view:n,buffer:r,blockLen:s}=this;e=RT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Pm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nA(this),kF(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;LF(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Pm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Ah=BigInt(2**32-1),Mb=BigInt(32);function kT(t,e=!1){return e?{h:Number(t&Ah),l:Number(t>>Mb&Ah)}:{h:Number(t>>Mb&Ah)|0,l:Number(t&Ah)|0}}function FF(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=kT(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const jF=(t,e)=>BigInt(t>>>0)<<Mb|BigInt(e>>>0),HF=(t,e,n)=>t>>>n,qF=(t,e,n)=>t<<32-n|e>>>n,zF=(t,e,n)=>t>>>n|e<<32-n,WF=(t,e,n)=>t<<32-n|e>>>n,VF=(t,e,n)=>t<<64-n|e>>>n-32,KF=(t,e,n)=>t>>>n-32|e<<64-n,GF=(t,e)=>e,YF=(t,e)=>t,ZF=(t,e,n)=>t<<n|e>>>32-n,JF=(t,e,n)=>e<<n|t>>>32-n,XF=(t,e,n)=>e<<n-32|t>>>64-n,QF=(t,e,n)=>t<<n-32|e>>>64-n;function ej(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const tj=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),nj=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,rj=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),sj=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ij=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),oj=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ze={fromBig:kT,split:FF,toBig:jF,shrSH:HF,shrSL:qF,rotrSH:zF,rotrSL:WF,rotrBH:VF,rotrBL:KF,rotr32H:GF,rotr32L:YF,rotlSH:ZF,rotlSL:JF,rotlBH:XF,rotlBL:QF,add:ej,add3L:tj,add3H:nj,add4L:rj,add4H:sj,add5H:oj,add5L:ij},[aj,cj]=ze.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ao=new Uint32Array(80),co=new Uint32Array(80);let uj=class extends MF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=y|0}process(e,n){for(let E=0;E<16;E++,n+=4)ao[E]=e.getUint32(n),co[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const A=ao[E-15]|0,_=co[E-15]|0,O=ze.rotrSH(A,_,1)^ze.rotrSH(A,_,8)^ze.shrSH(A,_,7),$=ze.rotrSL(A,_,1)^ze.rotrSL(A,_,8)^ze.shrSL(A,_,7),M=ao[E-2]|0,D=co[E-2]|0,q=ze.rotrSH(M,D,19)^ze.rotrBH(M,D,61)^ze.shrSH(M,D,6),j=ze.rotrSL(M,D,19)^ze.rotrBL(M,D,61)^ze.shrSL(M,D,6),L=ze.add4L($,j,co[E-7],co[E-16]),T=ze.add4H(L,O,q,ao[E-7],ao[E-16]);ao[E]=T|0,co[E]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:y,Hh:C,Hl:N}=this;for(let E=0;E<80;E++){const A=ze.rotrSH(d,f,14)^ze.rotrSH(d,f,18)^ze.rotrBH(d,f,41),_=ze.rotrSL(d,f,14)^ze.rotrSL(d,f,18)^ze.rotrBL(d,f,41),O=d&h^~d&p,$=f&g^~f&y,M=ze.add5L(N,_,$,cj[E],co[E]),D=ze.add5H(M,C,A,O,aj[E],ao[E]),q=M|0,j=ze.rotrSH(r,s,28)^ze.rotrBH(r,s,34)^ze.rotrBH(r,s,39),L=ze.rotrSL(r,s,28)^ze.rotrBL(r,s,34)^ze.rotrBL(r,s,39),T=r&i^r&a^i&a,P=s&o^s&c^o&c;C=p|0,N=y|0,p=h|0,y=g|0,h=d|0,g=f|0,{h:d,l:f}=ze.add(u|0,l|0,D|0,q|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const m=ze.add3L(q,L,P);r=ze.add3H(m,D,j,T),s=m|0}({h:r,l:s}=ze.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ze.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ze.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ze.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=ze.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=ze.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:y}=ze.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:C,l:N}=ze.add(this.Hh|0,this.Hl|0,C|0,N|0),this.set(r,s,i,o,a,c,u,l,d,f,h,g,p,y,C,N)}roundClean(){ao.fill(0),co.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const lj=BF(()=>new uj);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wE=BigInt(0),DT=BigInt(1),dj=BigInt(2);function EE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function vE(t){if(!EE(t))throw new Error("Uint8Array expected")}function Rm(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const fj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function AE(t){vE(t);let e="";for(let n=0;n<t.length;n++)e+=fj[t[n]];return e}function UT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?wE:BigInt("0x"+t)}const bi={_0:48,_9:57,A:65,F:70,a:97,f:102};function rA(t){if(t>=bi._0&&t<=bi._9)return t-bi._0;if(t>=bi.A&&t<=bi.F)return t-(bi.A-10);if(t>=bi.a&&t<=bi.f)return t-(bi.a-10)}function BT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=rA(t.charCodeAt(i)),a=rA(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function hj(t){return UT(AE(t))}function cp(t){return vE(t),UT(AE(Uint8Array.from(t).reverse()))}function LT(t,e){return BT(t.toString(16).padStart(e*2,"0"))}function Fb(t,e){return LT(t,e).reverse()}function wi(t,e,n){let r;if(typeof e=="string")try{r=BT(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(EE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function sA(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];vE(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const $m=t=>typeof t=="bigint"&&wE<=t;function pj(t,e,n){return $m(t)&&$m(e)&&$m(n)&&e<=t&&t<n}function Wl(t,e,n,r){if(!pj(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gj(t){let e;for(e=0;t>wE;t>>=DT,e+=1);return e}const mj=t=>(dj<<BigInt(t-1))-DT,yj={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||EE(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function CE(t,e,n={}){const r=(s,i,o)=>{const a=yj[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function iA(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const cn=BigInt(0),Bt=BigInt(1),Ba=BigInt(2),bj=BigInt(3),jb=BigInt(4),oA=BigInt(5),aA=BigInt(8);function Yt(t,e){const n=t%e;return n>=cn?n:e+n}function wj(t,e,n){if(e<cn)throw new Error("invalid exponent, negatives unsupported");if(n<=cn)throw new Error("invalid modulus");if(n===Bt)return cn;let r=Bt;for(;e>cn;)e&Bt&&(r=r*t%n),t=t*t%n,e>>=Bt;return r}function js(t,e,n){let r=t;for(;e-- >cn;)r*=r,r%=n;return r}function cA(t,e){if(t===cn)throw new Error("invert: expected non-zero number");if(e<=cn)throw new Error("invert: expected positive modulus, got "+e);let n=Yt(t,e),r=e,s=cn,i=Bt;for(;n!==cn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Bt)throw new Error("invert: does not exist");return Yt(s,e)}function Ej(t){const e=(t-Bt)/Ba;let n,r,s;for(n=t-Bt,r=0;n%Ba===cn;n/=Ba,r++);for(s=Ba;s<t&&wj(s,e,t)!==t-Bt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Bt)/jb;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+Bt)/Ba;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let g=o.sqr(d);f<c&&!o.eql(g,o.ONE);f++)g=o.sqr(g);const h=o.pow(u,Bt<<BigInt(c-f-1));u=o.sqr(h),l=o.mul(l,h),d=o.mul(d,u),c=f}return l}}function vj(t){if(t%jb===bj){const e=(t+Bt)/jb;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%aA===oA){const e=(t-oA)/aA;return function(n,r){const s=n.mul(r,Ba),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Ba),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Ej(t)}const Aj=(t,e)=>(Yt(t,e)&Bt)===Bt,Cj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _j(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Cj.reduce((r,s)=>(r[s]="function",r),e);return CE(t,n)}function Sj(t,e,n){if(n<cn)throw new Error("invalid exponent, negatives unsupported");if(n===cn)return t.ONE;if(n===Bt)return e;let r=t.ONE,s=e;for(;n>cn;)n&Bt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Bt;return r}function Ij(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function MT(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function FT(t,e,n=!1,r={}){if(t<=cn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=MT(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:mj(s),ZERO:cn,ONE:Bt,create:c=>Yt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return cn<=c&&c<t},is0:c=>c===cn,isOdd:c=>(c&Bt)===Bt,neg:c=>Yt(-c,t),eql:(c,u)=>c===u,sqr:c=>Yt(c*c,t),add:(c,u)=>Yt(c+u,t),sub:(c,u)=>Yt(c-u,t),mul:(c,u)=>Yt(c*u,t),pow:(c,u)=>Sj(a,c,u),div:(c,u)=>Yt(c*cA(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>cA(c,t),sqrt:r.sqrt||(c=>(o||(o=vj(t)),o(a,c))),invertBatch:c=>Ij(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?Fb(c,i):LT(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?cp(c):hj(c)}});return Object.freeze(a)}const uA=BigInt(0),Ch=BigInt(1);function km(t,e){const n=e.negate();return t?n:e}function jT(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Dm(t,e){jT(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function xj(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Tj(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Um=new WeakMap,HT=new WeakMap;function Bm(t){return HT.get(t)||1}function Nj(t,e){return{constTimeNegate:km,hasPrecomputes(n){return Bm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>uA;)r&Ch&&(s=s.add(i)),i=i.double(),r>>=Ch;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Dm(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Dm(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let g=Number(s&u);s>>=d,g>o&&(g-=l,s+=Ch);const p=h,y=h+Math.abs(g)-1,C=f%2!==0,N=g<0;g===0?c=c.add(km(C,r[p])):a=a.add(km(N,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Dm(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===uA)break;let h=Number(s&c);if(s>>=l,h>a&&(h-=u,s+=Ch),h===0)continue;let g=r[f+Math.abs(h)-1];h<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(n,r,s){let i=Um.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Um.set(r,s(i))),i},wNAFCached(n,r,s){const i=Bm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Bm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){jT(r,e),HT.set(n,r),Um.delete(n)}}}function Oj(t,e,n,r){if(xj(n,t),Tj(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=gj(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let h=0;h<r.length;h++){const g=r[h],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[h])}let f=s;for(let h=c.length-1,g=s;h>0;h--)g=g.add(c[h]),f=f.add(g);if(l=l.add(f),d!==0)for(let h=0;h<o;h++)l=l.double()}return l}function Pj(t){return _j(t.Fp),CE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...MT(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ds=BigInt(0),tr=BigInt(1),_h=BigInt(2),Rj=BigInt(8),$j={zip215:!0};function kj(t){const e=Pj(t);return CE(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Dj(t){const e=kj(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=_h<<BigInt(a*8)-tr,l=n.create,d=FT(e.n,e.nBitLength),f=e.uvRatio||((m,b)=>{try{return{isValid:!0,value:n.sqrt(m*n.inv(b))}}catch{return{isValid:!1,value:ds}}}),h=e.adjustScalarBytes||(m=>m),g=e.domain||((m,b,I)=>{if(Rm("phflag",I),b.length||I)throw new Error("Contexts/pre-hash are not supported");return m});function p(m,b){Wl("coordinate "+m,b,ds,u)}function y(m){if(!(m instanceof E))throw new Error("ExtendedPoint expected")}const C=iA((m,b)=>{const{ex:I,ey:x,ez:S}=m,R=m.is0();b==null&&(b=R?Rj:n.inv(S));const F=l(I*b),z=l(x*b),Y=l(S*b);if(R)return{x:ds,y:tr};if(Y!==tr)throw new Error("invZ was invalid");return{x:F,y:z}}),N=iA(m=>{const{a:b,d:I}=e;if(m.is0())throw new Error("bad point: ZERO");const{ex:x,ey:S,ez:R,et:F}=m,z=l(x*x),Y=l(S*S),G=l(R*R),K=l(G*G),ee=l(z*b),se=l(G*l(ee+Y)),he=l(K+l(I*l(z*Y)));if(se!==he)throw new Error("bad point: equation left != right (1)");const re=l(x*S),fe=l(R*F);if(re!==fe)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(b,I,x,S){this.ex=b,this.ey=I,this.ez=x,this.et=S,p("x",b),p("y",I),p("z",x),p("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof E)throw new Error("extended point not allowed");const{x:I,y:x}=b||{};return p("x",I),p("y",x),new E(I,x,tr,l(I*x))}static normalizeZ(b){const I=n.invertBatch(b.map(x=>x.ez));return b.map((x,S)=>x.toAffine(I[S])).map(E.fromAffine)}static msm(b,I){return Oj(E,d,b,I)}_setWindowSize(b){O.setWindowSize(this,b)}assertValidity(){N(this)}equals(b){y(b);const{ex:I,ey:x,ez:S}=this,{ex:R,ey:F,ez:z}=b,Y=l(I*z),G=l(R*S),K=l(x*z),ee=l(F*S);return Y===G&&K===ee}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:b}=e,{ex:I,ey:x,ez:S}=this,R=l(I*I),F=l(x*x),z=l(_h*l(S*S)),Y=l(b*R),G=I+x,K=l(l(G*G)-R-F),ee=Y+F,se=ee-z,he=Y-F,re=l(K*se),fe=l(ee*he),De=l(K*he),qe=l(se*ee);return new E(re,fe,qe,De)}add(b){y(b);const{a:I,d:x}=e,{ex:S,ey:R,ez:F,et:z}=this,{ex:Y,ey:G,ez:K,et:ee}=b;if(I===BigInt(-1)){const oh=l((R-S)*(G+Y)),Ll=l((R+S)*(G-Y)),no=l(Ll-oh);if(no===ds)return this.double();const Cr=l(F*_h*ee),Vc=l(z*_h*K),ah=Vc+Cr,ls=Ll+oh,ch=Vc-Cr,U=l(ah*no),w=l(ls*ch),v=l(ah*ch),H=l(no*ls);return new E(U,w,H,v)}const se=l(S*Y),he=l(R*G),re=l(z*x*ee),fe=l(F*K),De=l((S+R)*(Y+G)-se-he),qe=fe-re,Me=fe+re,ut=l(he-I*se),un=l(De*qe),ln=l(Me*ut),Bl=l(De*ut),qg=l(qe*Me);return new E(un,ln,qg,Bl)}subtract(b){return this.add(b.negate())}wNAF(b){return O.wNAFCached(this,b,E.normalizeZ)}multiply(b){const I=b;Wl("scalar",I,tr,r);const{p:x,f:S}=this.wNAF(I);return E.normalizeZ([x,S])[0]}multiplyUnsafe(b,I=E.ZERO){const x=b;return Wl("scalar",x,ds,r),x===ds?_:this.is0()||x===tr?this:O.wNAFCachedUnsafe(this,x,E.normalizeZ,I)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return O.unsafeLadder(this,r).is0()}toAffine(b){return C(this,b)}clearCofactor(){const{h:b}=e;return b===tr?this:this.multiplyUnsafe(b)}static fromHex(b,I=!1){const{d:x,a:S}=e,R=n.BYTES;b=wi("pointHex",b,R),Rm("zip215",I);const F=b.slice(),z=b[R-1];F[R-1]=z&-129;const Y=cp(F),G=I?u:n.ORDER;Wl("pointHex.y",Y,ds,G);const K=l(Y*Y),ee=l(K-tr),se=l(x*K-S);let{isValid:he,value:re}=f(ee,se);if(!he)throw new Error("Point.fromHex: invalid y coordinate");const fe=(re&tr)===tr,De=(z&128)!==0;if(!I&&re===ds&&De)throw new Error("Point.fromHex: x=0 and x_0=1");return De!==fe&&(re=l(-re)),E.fromAffine({x:re,y:Y})}static fromPrivateKey(b){return D(b).point}toRawBytes(){const{x:b,y:I}=this.toAffine(),x=Fb(I,n.BYTES);return x[x.length-1]|=b&tr?128:0,x}toHex(){return AE(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,tr,l(e.Gx*e.Gy)),E.ZERO=new E(ds,tr,tr,ds);const{BASE:A,ZERO:_}=E,O=Nj(E,a*8);function $(m){return Yt(m,r)}function M(m){return $(cp(m))}function D(m){const b=n.BYTES;m=wi("private key",m,b);const I=wi("hashed private key",i(m),2*b),x=h(I.slice(0,b)),S=I.slice(b,2*b),R=M(x),F=A.multiply(R),z=F.toRawBytes();return{head:x,prefix:S,scalar:R,point:F,pointBytes:z}}function q(m){return D(m).pointBytes}function j(m=new Uint8Array,...b){const I=sA(...b);return M(i(g(I,wi("context",m),!!s)))}function L(m,b,I={}){m=wi("message",m),s&&(m=s(m));const{prefix:x,scalar:S,pointBytes:R}=D(b),F=j(I.context,x,m),z=A.multiply(F).toRawBytes(),Y=j(I.context,z,R,m),G=$(F+Y*S);Wl("signature.s",G,ds,r);const K=sA(z,Fb(G,n.BYTES));return wi("result",K,n.BYTES*2)}const T=$j;function P(m,b,I,x=T){const{context:S,zip215:R}=x,F=n.BYTES;m=wi("signature",m,2*F),b=wi("message",b),I=wi("publicKey",I,F),R!==void 0&&Rm("zip215",R),s&&(b=s(b));const z=cp(m.slice(F,2*F));let Y,G,K;try{Y=E.fromHex(I,R),G=E.fromHex(m.slice(0,F),R),K=A.multiplyUnsafe(z)}catch{return!1}if(!R&&Y.isSmallOrder())return!1;const ee=j(S,G.toRawBytes(),Y.toRawBytes(),b);return G.add(Y.multiplyUnsafe(ee)).subtract(K).clearCofactor().equals(E.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:L,verify:P,ExtendedPoint:E,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(n.BYTES),precompute(m=8,b=E.BASE){return b._setWindowSize(m),b.multiply(BigInt(3)),b}}}}BigInt(0),BigInt(1);const _E=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),lA=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Uj=BigInt(1),dA=BigInt(2);BigInt(3);const Bj=BigInt(5),Lj=BigInt(8);function Mj(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=_E,o=t*t%i*t%i,a=js(o,dA,i)*o%i,c=js(a,Uj,i)*t%i,u=js(c,Bj,i)*c%i,l=js(u,e,i)*u%i,d=js(l,n,i)*l%i,f=js(d,r,i)*d%i,h=js(f,s,i)*f%i,g=js(h,s,i)*f%i,p=js(g,e,i)*u%i;return{pow_p_5_8:js(p,dA,i)*t%i,b2:o}}function Fj(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function jj(t,e){const n=_E,r=Yt(e*e*e,n),s=Yt(r*r*e,n),i=Mj(t*s).pow_p_5_8;let o=Yt(t*r*i,n);const a=Yt(e*o*o,n),c=o,u=Yt(o*lA,n),l=a===t,d=a===Yt(-t,n),f=a===Yt(-t*lA,n);return l&&(o=c),(d||f)&&(o=u),Aj(o,n)&&(o=Yt(-o,n)),{isValid:l||d,value:o}}const Hj=FT(_E,void 0,!0),qj={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hj,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Lj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:lj,randomBytes:$T,adjustScalarBytes:Fj,uvRatio:jj},qT=Dj(qj),zj="EdDSA",Wj="JWT",n0=".",mg="base64url",zT="utf8",WT="utf8",Vj=":",Kj="did",Gj="key",fA="base58btc",Yj="z",Zj="K36",Jj=32;function SE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function VT(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?SE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function KT(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=VT(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return SE(n)}function Xj(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,y=0,C=0,N=g.length;C!==N&&g[C]===0;)C++,p++;for(var E=(N-C)*l+1>>>0,A=new Uint8Array(E);C!==N;){for(var _=g[C],O=0,$=E-1;(_!==0||O<y)&&$!==-1;$--,O++)_+=256*A[$]>>>0,A[$]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=O,C++}for(var M=E-y;M!==E&&A[M]===0;)M++;for(var D=c.repeat(p);M<E;++M)D+=t.charAt(A[M]);return D}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var y=0,C=0;g[p]===c;)y++,p++;for(var N=(g.length-p)*u+1>>>0,E=new Uint8Array(N);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var _=0,O=N-1;(A!==0||_<C)&&O!==-1;O--,_++)A+=a*E[O]>>>0,E[O]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");C=_,p++}if(g[p]!==" "){for(var $=N-C;$!==N&&E[$]===0;)$++;for(var M=new Uint8Array(y+(N-$)),D=y;$!==N;)M[D++]=E[$++];return M}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var Qj=Xj,eH=Qj;const GT=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},tH=t=>new TextEncoder().encode(t),nH=t=>new TextDecoder().decode(t);let rH=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},sH=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YT(this,e)}},iH=class{constructor(e){this.decoders=e}or(e){return YT(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const YT=(t,e)=>new iH({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let oH=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new rH(e,n,r),this.decoder=new sH(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const yg=({name:t,prefix:e,encode:n,decode:r})=>new oH(t,e,n,r),Kf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=eH(n,e);return yg({prefix:t,name:e,encode:r,decode:i=>GT(s(i))})},aH=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},cH=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},En=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>yg({prefix:e,name:t,encode(s){return cH(s,r,n)},decode(s){return aH(s,r,n,t)}}),uH=yg({prefix:"\0",name:"identity",encode:t=>nH(t),decode:t=>tH(t)});var lH=Object.freeze({__proto__:null,identity:uH});const dH=En({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fH=Object.freeze({__proto__:null,base2:dH});const hH=En({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var pH=Object.freeze({__proto__:null,base8:hH});const gH=Kf({prefix:"9",name:"base10",alphabet:"0123456789"});var mH=Object.freeze({__proto__:null,base10:gH});const yH=En({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bH=En({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wH=Object.freeze({__proto__:null,base16:yH,base16upper:bH});const EH=En({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vH=En({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AH=En({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CH=En({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_H=En({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),SH=En({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),IH=En({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xH=En({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TH=En({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NH=Object.freeze({__proto__:null,base32:EH,base32upper:vH,base32pad:AH,base32padupper:CH,base32hex:_H,base32hexupper:SH,base32hexpad:IH,base32hexpadupper:xH,base32z:TH});const OH=Kf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PH=Kf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var RH=Object.freeze({__proto__:null,base36:OH,base36upper:PH});const $H=Kf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),kH=Kf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var DH=Object.freeze({__proto__:null,base58btc:$H,base58flickr:kH});const UH=En({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),BH=En({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),LH=En({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),MH=En({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var FH=Object.freeze({__proto__:null,base64:UH,base64pad:BH,base64url:LH,base64urlpad:MH});const ZT=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jH=ZT.reduce((t,e,n)=>(t[n]=e,t),[]),HH=ZT.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function qH(t){return t.reduce((e,n)=>(e+=jH[n],e),"")}function zH(t){const e=[];for(const n of t){const r=HH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const WH=yg({prefix:"🚀",name:"base256emoji",encode:qH,decode:zH});var VH=Object.freeze({__proto__:null,base256emoji:WH}),KH=JT,hA=128,GH=-128,YH=Math.pow(2,31);function JT(t,e,n){e=e||[],n=n||0;for(var r=n;t>=YH;)e[n++]=t&255|hA,t/=128;for(;t&GH;)e[n++]=t&255|hA,t>>>=7;return e[n]=t|0,JT.bytes=n-r+1,e}var ZH=Hb,JH=128,pA=127;function Hb(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Hb.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&pA)<<s:(o&pA)*Math.pow(2,s),s+=7}while(o>=JH);return Hb.bytes=i-r,n}var XH=Math.pow(2,7),QH=Math.pow(2,14),eq=Math.pow(2,21),tq=Math.pow(2,28),nq=Math.pow(2,35),rq=Math.pow(2,42),sq=Math.pow(2,49),iq=Math.pow(2,56),oq=Math.pow(2,63),aq=function(t){return t<XH?1:t<QH?2:t<eq?3:t<tq?4:t<nq?5:t<rq?6:t<sq?7:t<iq?8:t<oq?9:10},cq={encode:KH,decode:ZH,encodingLength:aq},XT=cq;const gA=(t,e,n=0)=>(XT.encode(t,e,n),e),mA=t=>XT.encodingLength(t),qb=(t,e)=>{const n=e.byteLength,r=mA(t),s=r+mA(n),i=new Uint8Array(s+n);return gA(t,i,0),gA(n,i,r),i.set(e,s),new uq(t,n,e,i)};let uq=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const QT=({name:t,code:e,encode:n})=>new lq(t,e,n);let lq=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?qb(this.code,n):n.then(r=>qb(this.code,r))}else throw Error("Unknown type, must be binary type")}};const e3=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),dq=QT({name:"sha2-256",code:18,encode:e3("SHA-256")}),fq=QT({name:"sha2-512",code:19,encode:e3("SHA-512")});var hq=Object.freeze({__proto__:null,sha256:dq,sha512:fq});const t3=0,pq="identity",n3=GT,gq=t=>qb(t3,n3(t)),mq={code:t3,name:pq,encode:n3,digest:gq};var yq=Object.freeze({__proto__:null,identity:mq});new TextEncoder,new TextDecoder;const yA={...lH,...fH,...pH,...mH,...wH,...NH,...RH,...DH,...FH,...VH};({...hq,...yq});function r3(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const bA=r3("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Lm=r3("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=VT(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),s3={utf8:bA,"utf-8":bA,hex:yA.base16,latin1:Lm,ascii:Lm,binary:Lm,...yA};function bg(t,e="utf8"){const n=s3[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Rl(t,e="utf8"){const n=s3[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?SE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function wA(t){return hc(bg(Rl(t,mg),zT))}function r0(t){return bg(Rl(Ji(t),zT),mg)}function i3(t){const e=Rl(Zj,fA),n=Yj+bg(KT([e,t]),fA);return[Kj,Gj,n].join(Vj)}function bq(t){return bg(t,mg)}function wq(t){return Rl(t,mg)}function Eq(t){return Rl([r0(t.header),r0(t.payload)].join(n0),WT)}function vq(t){return[r0(t.header),r0(t.payload),bq(t.signature)].join(n0)}function zb(t){const e=t.split(n0),n=wA(e[0]),r=wA(e[1]),s=wq(e[2]),i=Rl(e.slice(0,2).join(n0),WT);return{header:n,payload:r,signature:s,data:i}}function EA(t=$T(Jj)){const e=qT.getPublicKey(t);return{secretKey:KT([t,e]),publicKey:e}}async function Aq(t,e,n,r,s=ue.fromMiliseconds(Date.now())){const i={alg:zj,typ:Wj},o=i3(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=Eq({header:i,payload:c}),l=qT.sign(u,r.secretKey.slice(0,32));return vq({header:i,payload:c,signature:l})}var vA=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Cq=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),_q=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Sq=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Iq=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),xq=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Tq=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Nq=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,AA=3,Oq=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Tq]],CA=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Pq(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xq:typeof navigator<"u"?$q(navigator.userAgent):Dq()}function Rq(t){return t!==""&&Oq.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function $q(t){var e=Rq(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Iq;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<AA&&(s=vA(vA([],s,!0),Uq(AA-s.length),!0)):s=[];var i=s.join("."),o=kq(t),a=Nq.exec(t);return a&&a[1]?new Sq(n,i,o,a[1]):new Cq(n,i,o)}function kq(t){for(var e=0,n=CA.length;e<n;e++){var r=CA[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Dq(){var t=typeof process<"u"&&process.version;return t?new _q(process.version.slice(1)):null}function Uq(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.getLocalStorage=vt.getLocalStorageOrThrow=vt.getCrypto=vt.getCryptoOrThrow=o3=vt.getLocation=vt.getLocationOrThrow=IE=vt.getNavigator=vt.getNavigatorOrThrow=_c=vt.getDocument=vt.getDocumentOrThrow=vt.getFromWindowOrThrow=vt.getFromWindow=void 0;function qc(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}vt.getFromWindow=qc;function $l(t){const e=qc(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}vt.getFromWindowOrThrow=$l;function Bq(){return $l("document")}vt.getDocumentOrThrow=Bq;function Lq(){return qc("document")}var _c=vt.getDocument=Lq;function Mq(){return $l("navigator")}vt.getNavigatorOrThrow=Mq;function Fq(){return qc("navigator")}var IE=vt.getNavigator=Fq;function jq(){return $l("location")}vt.getLocationOrThrow=jq;function Hq(){return qc("location")}var o3=vt.getLocation=Hq;function qq(){return $l("crypto")}vt.getCryptoOrThrow=qq;function zq(){return qc("crypto")}vt.getCrypto=zq;function Wq(){return $l("localStorage")}vt.getLocalStorageOrThrow=Wq;function Vq(){return qc("localStorage")}vt.getLocalStorage=Vq;var xE={};Object.defineProperty(xE,"__esModule",{value:!0});var a3=xE.getWindowMetadata=void 0;const _A=vt;function Kq(){let t,e;try{t=_A.getDocumentOrThrow(),e=_A.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),f=[];for(let h=0;h<d.length;h++){const g=d[h],p=g.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const y=g.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let C=e.protocol+"//"+e.host;if(y.indexOf("/")===0)C+=y;else{const N=e.pathname.split("/");N.pop();const E=N.join("/");C+=E+"/"+y}f.push(C)}else if(y.indexOf("//")===0){const C=e.protocol+y;f.push(C)}else f.push(y)}}return f}function r(...d){const f=t.getElementsByTagName("meta");for(let h=0;h<f.length;h++){const g=f[h],p=["itemprop","property","name"].map(y=>g.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(p.length&&p){const y=g.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,u=n();return{description:a,url:c,icons:u,name:o}}a3=xE.getWindowMetadata=Kq;const Gq="0.1.1";function Yq(){return Gq}let jt=class Wb extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Wb){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Wb&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Yq()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return c3(this,e)}};function c3(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?c3(t.cause,e):e?null:t}const Qc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zq(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function df(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Sc(t,...e){if(!Zq(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Jq(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");df(t.outputLen),df(t.blockLen)}function ml(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function u3(t,e){Sc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Xq(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Mm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Hs(t,e){return t<<32-e|t>>>e}const Qq=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ez(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function tz(t){for(let e=0;e<t.length;e++)t[e]=ez(t[e]);return t}const SA=Qq?t=>t:tz;function nz(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function wg(t){return typeof t=="string"&&(t=nz(t)),Sc(t),t}function rz(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Sc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class TE{}function l3(t){const e=r=>t().update(wg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function sz(t=32){if(Qc&&typeof Qc.getRandomValues=="function")return Qc.getRandomValues(new Uint8Array(t));if(Qc&&typeof Qc.randomBytes=="function")return Uint8Array.from(Qc.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function iz(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function oz(t,e,n){return t&e^~t&n}function az(t,e,n){return t&e^t&n^e&n}class cz extends TE{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Mm(this.buffer)}update(e){ml(this),e=wg(e),Sc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Mm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ml(this),u3(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,yl(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;iz(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Mm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const uo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sh=BigInt(2**32-1),IA=BigInt(32);function uz(t,e=!1){return e?{h:Number(t&Sh),l:Number(t>>IA&Sh)}:{h:Number(t>>IA&Sh)|0,l:Number(t&Sh)|0}}function lz(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=uz(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const dz=(t,e,n)=>t<<n|e>>>32-n,fz=(t,e,n)=>e<<n|t>>>32-n,hz=(t,e,n)=>e<<n-32|t>>>64-n,pz=(t,e,n)=>t<<n-32|e>>>64-n,gz=BigInt(0),Vl=BigInt(1),mz=BigInt(2),yz=BigInt(7),bz=BigInt(256),wz=BigInt(113),d3=[],f3=[],h3=[];for(let t=0,e=Vl,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],d3.push(2*(5*r+n)),f3.push((t+1)*(t+2)/2%64);let s=gz;for(let i=0;i<7;i++)e=(e<<Vl^(e>>yz)*wz)%bz,e&mz&&(s^=Vl<<(Vl<<BigInt(i))-Vl);h3.push(s)}const p3=lz(h3,!0),Ez=p3[0],vz=p3[1],xA=(t,e,n)=>n>32?hz(t,e,n):dz(t,e,n),TA=(t,e,n)=>n>32?pz(t,e,n):fz(t,e,n);function Az(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=xA(u,l,1)^n[a],f=TA(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=f3[o],c=xA(s,i,a),u=TA(s,i,a),l=d3[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Ez[r],t[1]^=vz[r]}yl(n)}class NE extends TE{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,df(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Xq(this.state)}clone(){return this._cloneInto()}keccak(){SA(this.state32),Az(this.state32,this.rounds),SA(this.state32),this.posOut=0,this.pos=0}update(e){ml(this),e=wg(e),Sc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ml(this,!1),Sc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return df(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(u3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,yl(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new NE(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Cz=(t,e,n)=>l3(()=>new NE(e,t,n)),_z=Cz(1,136,256/8),Sz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lo=new Uint32Array(64);class Iz extends cz{constructor(e=32){super(64,e,8,!1),this.A=uo[0]|0,this.B=uo[1]|0,this.C=uo[2]|0,this.D=uo[3]|0,this.E=uo[4]|0,this.F=uo[5]|0,this.G=uo[6]|0,this.H=uo[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)lo[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=lo[d-15],h=lo[d-2],g=Hs(f,7)^Hs(f,18)^f>>>3,p=Hs(h,17)^Hs(h,19)^h>>>10;lo[d]=p+lo[d-7]+g+lo[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Hs(a,6)^Hs(a,11)^Hs(a,25),h=l+f+oz(a,c,u)+Sz[d]+lo[d]|0,p=(Hs(r,2)^Hs(r,13)^Hs(r,22))+az(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){yl(lo)}destroy(){this.set(0,0,0,0,0,0,0,0),yl(this.buffer)}}const xz=l3(()=>new Iz);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OE=BigInt(0),Vb=BigInt(1);function Gf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function PE(t){if(!Gf(t))throw new Error("Uint8Array expected")}function ff(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Ih(t){const e=t.toString(16);return e.length&1?"0"+e:e}function g3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OE:BigInt("0x"+t)}const m3=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Tz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hf(t){if(PE(t),m3)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Tz[t[n]];return e}const Ei={_0:48,_9:57,A:65,F:70,a:97,f:102};function NA(t){if(t>=Ei._0&&t<=Ei._9)return t-Ei._0;if(t>=Ei.A&&t<=Ei.F)return t-(Ei.A-10);if(t>=Ei.a&&t<=Ei.f)return t-(Ei.a-10)}function s0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(m3)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=NA(t.charCodeAt(i)),a=NA(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oc(t){return g3(hf(t))}function y3(t){return PE(t),g3(hf(Uint8Array.from(t).reverse()))}function Yf(t,e){return s0(t.toString(16).padStart(e*2,"0"))}function b3(t,e){return Yf(t,e).reverse()}function Yr(t,e,n){let r;if(typeof e=="string")try{r=s0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Gf(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function i0(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];PE(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Fm=t=>typeof t=="bigint"&&OE<=t;function RE(t,e,n){return Fm(t)&&Fm(e)&&Fm(n)&&e<=t&&t<n}function Nu(t,e,n,r){if(!RE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Nz(t){let e;for(e=0;t>OE;t>>=Vb,e+=1);return e}const Eg=t=>(Vb<<BigInt(t))-Vb,jm=t=>new Uint8Array(t),OA=t=>Uint8Array.from(t);function Oz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=jm(t),s=jm(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=jm(0))=>{s=a(OA([0]),d),r=a(),d.length!==0&&(s=a(OA([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return i0(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(u()));)c();return o(),h}}const Pz={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Gf(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function vg(t,e,n={}){const r=(s,i,o)=>{const a=Pz[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function PA(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function Rz(t,e){if(DA(t)>e)throw new Qz({givenSize:DA(t),maxSize:e})}const vi={zero:48,nine:57,A:65,F:70,a:97,f:102};function RA(t){if(t>=vi.zero&&t<=vi.nine)return t-vi.zero;if(t>=vi.A&&t<=vi.F)return t-(vi.A-10);if(t>=vi.a&&t<=vi.f)return t-(vi.a-10)}function $z(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new eW({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function w3(t,e){if(ma(t)>e)throw new qz({givenSize:ma(t),maxSize:e})}function kz(t,e){if(typeof e=="number"&&e>0&&e>ma(t)-1)throw new A3({offset:e,position:"start",size:ma(t)})}function Dz(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ma(t)!==n-e)throw new A3({offset:n,position:"end",size:ma(t)})}function E3(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new zz({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Uz="#__bigint";function $E(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Uz:s,n)}const Bz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Lz(t,e={}){const{strict:n=!1}=e;if(!t)throw new $A(t);if(typeof t!="string")throw new $A(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new kA(t);if(!t.startsWith("0x"))throw new kA(t)}function Mz(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function kE(t){return t instanceof Uint8Array?o0(t):Array.isArray(t)?o0(new Uint8Array(t)):t}function o0(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Bz[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(w3(r,e.size),v3(r,e.size)):r}function Hm(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new Hz({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Fz(c,r):c}function Fz(t,e){return E3(t,{dir:"left",size:e})}function v3(t,e){return E3(t,{dir:"right",size:e})}function Pi(t,e,n,r={}){const{strict:s}=r;kz(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Dz(i,e,n),i}function ma(t){return Math.ceil((t.length-2)/2)}function jz(t,e={}){const{strict:n=!1}=e;try{return Lz(t,{strict:n}),!0}catch{return!1}}class Hz extends jt{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class $A extends jt{constructor(e){super(`Value \`${typeof e=="object"?$E(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class kA extends jt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let qz=class extends jt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class A3 extends jt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let zz=class extends jt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Wz=new TextEncoder;function Vz(t){if(!(t instanceof Uint8Array)){if(!t)throw new xh(t);if(typeof t!="object")throw new xh(t);if(!("BYTES_PER_ELEMENT"in t))throw new xh(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new xh(t)}}function Kz(t){return t instanceof Uint8Array?t:typeof t=="string"?Yz(t):Gz(t)}function Gz(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Yz(t,e={}){const{size:n}=e;let r=t;n&&(w3(t,n),r=v3(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=RA(s.charCodeAt(c++)),l=RA(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new jt(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function Zz(t,e={}){const{size:n}=e,r=Wz.encode(t);return typeof n=="number"?(Rz(r,n),Jz(r,n)):r}function Jz(t,e){return $z(t,{dir:"right",size:e})}function DA(t){return t.length}function Xz(t){try{return Vz(t),!0}catch{return!1}}class xh extends jt{constructor(e){super(`Value \`${typeof e=="object"?$E(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class Qz extends jt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class eW extends jt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function C3(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=_z(Kz(t));return n==="Bytes"?r:o0(r)}class tW extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const nW={checksum:new tW(8192)},qm=nW.checksum;function _3(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new UA({prefix:r,cause:new cW});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new UA({prefix:r,cause:new aW});return}throw new oW({publicKey:t})}function rW(t){const e=(()=>{if(jz(t))return S3(t);if(Xz(t))return sW(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return _3(e),e}function sW(t){return S3(o0(t))}function S3(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new uW({publicKey:t});if(t.length===130){const r=BigInt(Pi(t,0,32)),s=BigInt(Pi(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(Pi(t,0,1)),s=BigInt(Pi(t,1,33)),i=BigInt(Pi(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(Pi(t,0,1)),n=BigInt(Pi(t,1,33));return{prefix:e,x:n}}function iW(t,e={}){_3(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return Mz(i?Hm(n,{size:1}):"0x",Hm(r,{size:32}),typeof s=="bigint"?Hm(s,{size:32}):"0x")}class oW extends jt{constructor({publicKey:e}){super(`Value \`${$E(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class UA extends jt{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class aW extends jt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class cW extends jt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let uW=class extends jt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${ma(kE(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const lW=/^0x[a-fA-F0-9]{40}$/;function I3(t,e={}){const{strict:n=!0}=e;if(!lW.test(t))throw new BA({address:t,cause:new hW});if(n){if(t.toLowerCase()===t)return;if(x3(t)!==t)throw new BA({address:t,cause:new pW})}}function x3(t){if(qm.has(t))return qm.get(t);I3(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=C3(Zz(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return qm.set(t,s),s}function dW(t,e={}){const{checksum:n=!1}=e;return I3(t),n?x3(t):t}function fW(t,e={}){const n=C3(`0x${iW(t).slice(4)}`).substring(26);return dW(`0x${n}`,e)}class BA extends jt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class hW extends jt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class pW extends jt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class T3 extends TE{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Jq(e);const r=wg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),yl(i)}update(e){return ml(this),this.iHash.update(e),this}digestInto(e){ml(this),Sc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const N3=(t,e,n)=>new T3(t,e).update(n).digest();N3.create=(t,e)=>new T3(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hr=BigInt(0),Wn=BigInt(1),Ha=BigInt(2),gW=BigInt(3),O3=BigInt(4),P3=BigInt(5),R3=BigInt(8);function ar(t,e){const n=t%e;return n>=hr?n:e+n}function Fr(t,e,n){let r=t;for(;e-- >hr;)r*=r,r%=n;return r}function Kb(t,e){if(t===hr)throw new Error("invert: expected non-zero number");if(e<=hr)throw new Error("invert: expected positive modulus, got "+e);let n=ar(t,e),r=e,s=hr,i=Wn;for(;n!==hr;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==Wn)throw new Error("invert: does not exist");return ar(s,e)}function $3(t,e){const n=(t.ORDER+Wn)/O3,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function mW(t,e){const n=(t.ORDER-P3)/R3,r=t.mul(e,Ha),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ha),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function yW(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Wn,n=0;for(;e%Ha===hr;)e/=Ha,n++;let r=Ha;const s=DE(t);for(;LA(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return $3;let i=s.pow(r,e);const o=(e+Wn)/Ha;return function(c,u){if(c.is0(u))return u;if(LA(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,p=c.sqr(f);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===l)throw new Error("Cannot find square root");const y=Wn<<BigInt(l-g-1),C=c.pow(d,y);l=g,d=c.sqr(C),f=c.mul(f,d),h=c.mul(h,C)}return h}}function bW(t){return t%O3===gW?$3:t%R3===P3?mW:yW(t)}const wW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function EW(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=wW.reduce((r,s)=>(r[s]="function",r),e);return vg(t,n)}function vW(t,e,n){if(n<hr)throw new Error("invalid exponent, negatives unsupported");if(n===hr)return t.ONE;if(n===Wn)return e;let r=t.ONE,s=e;for(;n>hr;)n&Wn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Wn;return r}function k3(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function LA(t,e){const n=(t.ORDER-Wn)/Ha,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function D3(t,e){e!==void 0&&df(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function DE(t,e,n=!1,r={}){if(t<=hr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=D3(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Eg(s),ZERO:hr,ONE:Wn,create:c=>ar(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return hr<=c&&c<t},is0:c=>c===hr,isOdd:c=>(c&Wn)===Wn,neg:c=>ar(-c,t),eql:(c,u)=>c===u,sqr:c=>ar(c*c,t),add:(c,u)=>ar(c+u,t),sub:(c,u)=>ar(c-u,t),mul:(c,u)=>ar(c*u,t),pow:(c,u)=>vW(a,c,u),div:(c,u)=>ar(c*Kb(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Kb(c,t),sqrt:r.sqrt||(c=>(o||(o=bW(t)),o(a,c))),toBytes:c=>n?b3(c,i):Yf(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?y3(c):oc(c)},invertBatch:c=>k3(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function U3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function B3(t){const e=U3(t);return e+Math.ceil(e/2)}function AW(t,e,n=!1){const r=t.length,s=U3(e),i=B3(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?y3(t):oc(t),a=ar(o,e-Wn)+Wn;return n?b3(a,s):Yf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const MA=BigInt(0),Gb=BigInt(1);function zm(t,e){const n=e.negate();return t?n:e}function L3(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Wm(t,e){L3(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Eg(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function FA(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Gb);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function CW(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function _W(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Vm=new WeakMap,M3=new WeakMap;function Km(t){return M3.get(t)||1}function SW(t,e){return{constTimeNegate:zm,hasPrecomputes(n){return Km(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>MA;)r&Gb&&(s=s.add(i)),i=i.double(),r>>=Gb;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Wm(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Wm(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:g}=FA(s,c,a);s=u,d?o=o.add(zm(h,r[g])):i=i.add(zm(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Wm(n,e);for(let a=0;a<o.windows&&s!==MA;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=FA(s,a,o);if(s=c,!l){const f=r[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=Vm.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Vm.set(r,s(i))),i},wNAFCached(n,r,s){const i=Km(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Km(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){L3(r,e),M3.set(n,r),Vm.delete(n)}}}function IW(t,e,n,r){CW(n,t),_W(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Nz(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Eg(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let p=0;p<i;p++){const y=r[p],C=Number(y>>BigInt(h)&u);l[C]=l[C].add(n[p])}let g=o;for(let p=l.length-1,y=o;p>0;p--)y=y.add(l[p]),g=g.add(y);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function F3(t){return EW(t.Fp),vg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...D3(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function jA(t){t.lowS!==void 0&&ff("lowS",t.lowS),t.prehash!==void 0&&ff("prehash",t.prehash)}function xW(t){const e=F3(t);vg(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class TW extends Error{constructor(e=""){super(e)}}const ki={Err:TW,_tlv:{encode:(t,e)=>{const{Err:n}=ki;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ih(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ih(s.length/2|128):"";return Ih(t)+i+s+e},decode(t,e){const{Err:n}=ki;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ki;if(t<Fi)throw new e("integer: negative integers are not allowed");let n=Ih(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ki;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return oc(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ki,s=Yr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=ki,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Gm(t,e){return hf(Yf(t,e))}const Fi=BigInt(0),sn=BigInt(1);BigInt(2);const Ym=BigInt(3),NW=BigInt(4);function OW(t){const e=xW(t),{Fp:n}=e,r=DE(e.n,e.nBitLength),s=e.toBytes||((E,A,_)=>{const O=A.toAffine();return i0(Uint8Array.from([4]),n.toBytes(O.x),n.toBytes(O.y))}),i=e.fromBytes||(E=>{const A=E.subarray(1),_=n.fromBytes(A.subarray(0,n.BYTES)),O=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:_,y:O}});function o(E){const{a:A,b:_}=e,O=n.sqr(E),$=n.mul(O,E);return n.add(n.add($,n.mul(E,A)),_)}function a(E,A){const _=n.sqr(A),O=o(E);return n.eql(_,O)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,Ym),NW),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(E){return RE(E,sn,e.n)}function d(E){const{allowedPrivateKeyLengths:A,nByteLength:_,wrapPrivateKey:O,n:$}=e;if(A&&typeof E!="bigint"){if(Gf(E)&&(E=hf(E)),typeof E!="string"||!A.includes(E.length))throw new Error("invalid private key");E=E.padStart(_*2,"0")}let M;try{M=typeof E=="bigint"?E:oc(Yr("private key",E,_))}catch{throw new Error("invalid private key, expected hex or "+_+" bytes, got "+typeof E)}return O&&(M=ar(M,$)),Nu("private key",M,sn,$),M}function f(E){if(!(E instanceof p))throw new Error("ProjectivePoint expected")}const h=PA((E,A)=>{const{px:_,py:O,pz:$}=E;if(n.eql($,n.ONE))return{x:_,y:O};const M=E.is0();A==null&&(A=M?n.ONE:n.inv($));const D=n.mul(_,A),q=n.mul(O,A),j=n.mul($,A);if(M)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:D,y:q}}),g=PA(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:A,y:_}=E.toAffine();if(!n.isValid(A)||!n.isValid(_))throw new Error("bad point: x or y not FE");if(!a(A,_))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(A,_,O){if(A==null||!n.isValid(A))throw new Error("x required");if(_==null||!n.isValid(_)||n.is0(_))throw new Error("y required");if(O==null||!n.isValid(O))throw new Error("z required");this.px=A,this.py=_,this.pz=O,Object.freeze(this)}static fromAffine(A){const{x:_,y:O}=A||{};if(!A||!n.isValid(_)||!n.isValid(O))throw new Error("invalid affine point");if(A instanceof p)throw new Error("projective point not allowed");const $=M=>n.eql(M,n.ZERO);return $(_)&&$(O)?p.ZERO:new p(_,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const _=k3(n,A.map(O=>O.pz));return A.map((O,$)=>O.toAffine(_[$])).map(p.fromAffine)}static fromHex(A){const _=p.fromAffine(i(Yr("pointHex",A)));return _.assertValidity(),_}static fromPrivateKey(A){return p.BASE.multiply(d(A))}static msm(A,_){return IW(p,r,A,_)}_setWindowSize(A){N.setWindowSize(this,A)}assertValidity(){g(this)}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){f(A);const{px:_,py:O,pz:$}=this,{px:M,py:D,pz:q}=A,j=n.eql(n.mul(_,q),n.mul(M,$)),L=n.eql(n.mul(O,q),n.mul(D,$));return j&&L}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:_}=e,O=n.mul(_,Ym),{px:$,py:M,pz:D}=this;let q=n.ZERO,j=n.ZERO,L=n.ZERO,T=n.mul($,$),P=n.mul(M,M),m=n.mul(D,D),b=n.mul($,M);return b=n.add(b,b),L=n.mul($,D),L=n.add(L,L),q=n.mul(A,L),j=n.mul(O,m),j=n.add(q,j),q=n.sub(P,j),j=n.add(P,j),j=n.mul(q,j),q=n.mul(b,q),L=n.mul(O,L),m=n.mul(A,m),b=n.sub(T,m),b=n.mul(A,b),b=n.add(b,L),L=n.add(T,T),T=n.add(L,T),T=n.add(T,m),T=n.mul(T,b),j=n.add(j,T),m=n.mul(M,D),m=n.add(m,m),T=n.mul(m,b),q=n.sub(q,T),L=n.mul(m,P),L=n.add(L,L),L=n.add(L,L),new p(q,j,L)}add(A){f(A);const{px:_,py:O,pz:$}=this,{px:M,py:D,pz:q}=A;let j=n.ZERO,L=n.ZERO,T=n.ZERO;const P=e.a,m=n.mul(e.b,Ym);let b=n.mul(_,M),I=n.mul(O,D),x=n.mul($,q),S=n.add(_,O),R=n.add(M,D);S=n.mul(S,R),R=n.add(b,I),S=n.sub(S,R),R=n.add(_,$);let F=n.add(M,q);return R=n.mul(R,F),F=n.add(b,x),R=n.sub(R,F),F=n.add(O,$),j=n.add(D,q),F=n.mul(F,j),j=n.add(I,x),F=n.sub(F,j),T=n.mul(P,R),j=n.mul(m,x),T=n.add(j,T),j=n.sub(I,T),T=n.add(I,T),L=n.mul(j,T),I=n.add(b,b),I=n.add(I,b),x=n.mul(P,x),R=n.mul(m,R),I=n.add(I,x),x=n.sub(b,x),x=n.mul(P,x),R=n.add(R,x),b=n.mul(I,R),L=n.add(L,b),b=n.mul(F,R),j=n.mul(S,j),j=n.sub(j,b),b=n.mul(S,I),T=n.mul(F,T),T=n.add(T,b),new p(j,L,T)}subtract(A){return this.add(A.negate())}is0(){return this.equals(p.ZERO)}wNAF(A){return N.wNAFCached(this,A,p.normalizeZ)}multiplyUnsafe(A){const{endo:_,n:O}=e;Nu("scalar",A,Fi,O);const $=p.ZERO;if(A===Fi)return $;if(this.is0()||A===sn)return this;if(!_||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,A,p.normalizeZ);let{k1neg:M,k1:D,k2neg:q,k2:j}=_.splitScalar(A),L=$,T=$,P=this;for(;D>Fi||j>Fi;)D&sn&&(L=L.add(P)),j&sn&&(T=T.add(P)),P=P.double(),D>>=sn,j>>=sn;return M&&(L=L.negate()),q&&(T=T.negate()),T=new p(n.mul(T.px,_.beta),T.py,T.pz),L.add(T)}multiply(A){const{endo:_,n:O}=e;Nu("scalar",A,sn,O);let $,M;if(_){const{k1neg:D,k1:q,k2neg:j,k2:L}=_.splitScalar(A);let{p:T,f:P}=this.wNAF(q),{p:m,f:b}=this.wNAF(L);T=N.constTimeNegate(D,T),m=N.constTimeNegate(j,m),m=new p(n.mul(m.px,_.beta),m.py,m.pz),$=T.add(m),M=P.add(b)}else{const{p:D,f:q}=this.wNAF(A);$=D,M=q}return p.normalizeZ([$,M])[0]}multiplyAndAddUnsafe(A,_,O){const $=p.BASE,M=(q,j)=>j===Fi||j===sn||!q.equals($)?q.multiplyUnsafe(j):q.multiply(j),D=M(this,_).add(M(A,O));return D.is0()?void 0:D}toAffine(A){return h(this,A)}isTorsionFree(){const{h:A,isTorsionFree:_}=e;if(A===sn)return!0;if(_)return _(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:_}=e;return A===sn?this:_?_(p,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return ff("isCompressed",A),this.assertValidity(),s(p,this,A)}toHex(A=!0){return ff("isCompressed",A),hf(this.toRawBytes(A))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:C}=e,N=SW(p,y?Math.ceil(C/2):C);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function PW(t){const e=F3(t);return vg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function RW(t){const e=PW(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(m){return ar(m,r)}function u(m){return Kb(m,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=OW({...e,toBytes(m,b,I){const x=b.toAffine(),S=n.toBytes(x.x),R=i0;return ff("isCompressed",I),I?R(Uint8Array.from([b.hasEvenY()?2:3]),S):R(Uint8Array.from([4]),S,n.toBytes(x.y))},fromBytes(m){const b=m.length,I=m[0],x=m.subarray(1);if(b===o&&(I===2||I===3)){const S=oc(x);if(!RE(S,sn,n.ORDER))throw new Error("Point is not on curve");const R=f(S);let F;try{F=n.sqrt(R)}catch(G){const K=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+K)}const z=(F&sn)===sn;return(I&1)===1!==z&&(F=n.neg(F)),{x:S,y:F}}else if(b===a&&I===4){const S=n.fromBytes(x.subarray(0,n.BYTES)),R=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:S,y:R}}else{const S=o,R=a;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+R+", got "+b)}}});function g(m){const b=r>>sn;return m>b}function p(m){return g(m)?c(-m):m}const y=(m,b,I)=>oc(m.slice(b,I));class C{constructor(b,I,x){Nu("r",b,sn,r),Nu("s",I,sn,r),this.r=b,this.s=I,x!=null&&(this.recovery=x),Object.freeze(this)}static fromCompact(b){const I=s;return b=Yr("compactSignature",b,I*2),new C(y(b,0,I),y(b,I,2*I))}static fromDER(b){const{r:I,s:x}=ki.toSig(Yr("DER",b));return new C(I,x)}assertValidity(){}addRecoveryBit(b){return new C(this.r,this.s,b)}recoverPublicKey(b){const{r:I,s:x,recovery:S}=this,R=$(Yr("msgHash",b));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const F=S===2||S===3?I+e.n:I;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=S&1?"03":"02",Y=l.fromHex(z+Gm(F,n.BYTES)),G=u(F),K=c(-R*G),ee=c(x*G),se=l.BASE.multiplyAndAddUnsafe(Y,K,ee);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return s0(this.toDERHex())}toDERHex(){return ki.hexFromSig(this)}toCompactRawBytes(){return s0(this.toCompactHex())}toCompactHex(){const b=s;return Gm(this.r,b)+Gm(this.s,b)}}const N={isValidPrivateKey(m){try{return d(m),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const m=B3(e.n);return AW(e.randomBytes(m),e.n)},precompute(m=8,b=l.BASE){return b._setWindowSize(m),b.multiply(BigInt(3)),b}};function E(m,b=!0){return l.fromPrivateKey(m).toRawBytes(b)}function A(m){if(typeof m=="bigint")return!1;if(m instanceof l)return!0;const I=Yr("key",m).length,x=n.BYTES,S=x+1,R=2*x+1;if(!(e.allowedPrivateKeyLengths||s===S))return I===S||I===R}function _(m,b,I=!0){if(A(m)===!0)throw new Error("first arg must be private key");if(A(b)===!1)throw new Error("second arg must be public key");return l.fromHex(b).multiply(d(m)).toRawBytes(I)}const O=e.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const b=oc(m),I=m.length*8-i;return I>0?b>>BigInt(I):b},$=e.bits2int_modN||function(m){return c(O(m))},M=Eg(i);function D(m){return Nu("num < 2^"+i,m,Fi,M),Yf(m,s)}function q(m,b,I=j){if(["recovered","canonical"].some(re=>re in I))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:S}=e;let{lowS:R,prehash:F,extraEntropy:z}=I;R==null&&(R=!0),m=Yr("msgHash",m),jA(I),F&&(m=Yr("prehashed msgHash",x(m)));const Y=$(m),G=d(b),K=[D(G),D(Y)];if(z!=null&&z!==!1){const re=z===!0?S(n.BYTES):z;K.push(Yr("extraEntropy",re))}const ee=i0(...K),se=Y;function he(re){const fe=O(re);if(!h(fe))return;const De=u(fe),qe=l.BASE.multiply(fe).toAffine(),Me=c(qe.x);if(Me===Fi)return;const ut=c(De*c(se+Me*G));if(ut===Fi)return;let un=(qe.x===Me?0:2)|Number(qe.y&sn),ln=ut;return R&&g(ut)&&(ln=p(ut),un^=1),new C(Me,ln,un)}return{seed:ee,k2sig:he}}const j={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function T(m,b,I=j){const{seed:x,k2sig:S}=q(m,b,I),R=e;return Oz(R.hash.outputLen,R.nByteLength,R.hmac)(x,S)}l.BASE._setWindowSize(8);function P(m,b,I,x=L){var un;const S=m;b=Yr("msgHash",b),I=Yr("publicKey",I);const{lowS:R,prehash:F,format:z}=x;if(jA(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Y=typeof S=="string"||Gf(S),G=!Y&&!z&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!Y&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ee;try{if(G&&(K=new C(S.r,S.s)),Y){try{z!=="compact"&&(K=C.fromDER(S))}catch(ln){if(!(ln instanceof ki.Err))throw ln}!K&&z!=="der"&&(K=C.fromCompact(S))}ee=l.fromHex(I)}catch{return!1}if(!K||R&&K.hasHighS())return!1;F&&(b=e.hash(b));const{r:se,s:he}=K,re=$(b),fe=u(he),De=c(re*fe),qe=c(se*fe),Me=(un=l.BASE.multiplyAndAddUnsafe(ee,De,qe))==null?void 0:un.toAffine();return Me?c(Me.x)===se:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:_,sign:T,verify:P,ProjectivePoint:l,Signature:C,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $W(t){return{hash:t,hmac:(e,...n)=>N3(t,e,rz(...n)),randomBytes:sz}}function kW(t,e){const n=r=>RW({...t,...$W(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const j3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),HA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),DW=BigInt(0),UW=BigInt(1),Yb=BigInt(2),qA=(t,e)=>(t+e/Yb)/e;function BW(t){const e=j3,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Fr(l,n,e)*l%e,f=Fr(d,n,e)*l%e,h=Fr(f,Yb,e)*u%e,g=Fr(h,s,e)*h%e,p=Fr(g,i,e)*g%e,y=Fr(p,a,e)*p%e,C=Fr(y,c,e)*y%e,N=Fr(C,a,e)*p%e,E=Fr(N,n,e)*l%e,A=Fr(E,o,e)*g%e,_=Fr(A,r,e)*u%e,O=Fr(_,Yb,e);if(!Zb.eql(Zb.sqr(O),t))throw new Error("Cannot find square root");return O}const Zb=DE(j3,void 0,void 0,{sqrt:BW}),LW=kW({a:DW,b:BigInt(7),Fp:Zb,n:HA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=HA,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-UW*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=qA(i*t,e),c=qA(-r*t,e);let u=ar(t-a*n-c*s,e),l=ar(-a*r-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},xz);function MW(t){if(t.length!==130&&t.length!==132)throw new jW({signature:t});const e=BigInt(Pi(t,0,32)),n=BigInt(Pi(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return FW(s)}catch{throw new HW({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function FW(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new qW({value:t})}class jW extends jt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ma(kE(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class HW extends jt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class qW extends jt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function H3(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function a0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function UE(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Jb(t){if(!Array.isArray(t))throw new Error("array expected")}function c0(t,e){if(!H3(!0,e))throw new Error(`${t}: array of strings expected`)}function WW(t,e){if(!H3(!1,e))throw new Error(`${t}: array of numbers expected`)}function VW(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function KW(t){const e=typeof t=="string"?t.split(""):t,n=e.length;c0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Jb(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Jb(s),s.map(i=>{a0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function GW(t=""){return a0("join",t),{encode:e=>(c0("join.decode",e),e.join(t)),decode:e=>(a0("join.decode",e),e.split(t))}}function YW(t,e="="){return UE(t),a0("padding",e),{encode(n){for(c0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){c0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const q3=(t,e)=>e===0?t:q3(e,t%e),u0=(t,e)=>t+(e-q3(t,e)),Zm=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function zA(t,e,n,r){if(Jb(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(u0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${u0(e,n)}`);let s=0,i=0;const o=Zm[e],a=Zm[n]-1,c=[];for(const u of t){if(UE(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const l=Zm[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function ZW(t,e=!1){if(UE(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(u0(8,t)>32||u0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!zW(n))throw new Error("radix2.encode input should be Uint8Array");return zA(Array.from(n),8,t,!e)},decode:n=>(WW("radix2.decode",n),Uint8Array.from(zA(n,t,8,e)))}}const JW=VW(ZW(5),KW("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),YW(5),GW(""));function XW(t){return fW(QW(t))}function QW(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,a=new LW.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(kE(e).substring(2));return rW(a)}function eV(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,f=0;const h=u.length;for(;f!==h&&u[f]===0;)f++,l++;const g=(h-f)*i+1>>>0,p=new Uint8Array(g);for(;f!==h;){let N=u[f],E=0;for(let A=g-1;(N!==0||E<d)&&A!==-1;A--,E++)N+=256*p[A]>>>0,p[A]=N%n>>>0,N=N/n>>>0;if(N!==0)throw new Error("Non-zero carry");d=E,f++}let y=g-d;for(;y!==g&&p[y]===0;)y++;let C=r.repeat(l);for(;y<g;++y)C+=t.charAt(p[y]);return C}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;u[l]===r;)d++,l++;const h=(u.length-l)*s+1>>>0,g=new Uint8Array(h);for(;l<u.length;){const N=u.charCodeAt(l);if(N>255)return;let E=e[N];if(E===255)return;let A=0;for(let _=h-1;(E!==0||A<f)&&_!==-1;_--,A++)E+=n*g[_]>>>0,g[_]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");f=A,l++}let p=h-f;for(;p!==h&&g[p]===0;)p++;const y=new Uint8Array(d+(h-p));let C=d;for(;p!==h;)y[C++]=g[p++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var tV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const kl=eV(tV);function nV(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function rV(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const sV=new TextEncoder,iV=50;function oV(t,e,n){sV.encodeInto(t,e.subarray(n))}function aV(t,e,n){t.length>iV?oV(t,e,n):rV(t,e,n)}const cV=4096;function z3(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,u=t[r++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[r++]&63,u=t[r++]&63,l=t[r++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=cV&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const uV=new TextDecoder,lV=200;function dV(t,e,n){const r=t.subarray(e,e+n);return uV.decode(r)}function fV(t,e,n){return n>lV?dV(t,e,n):z3(t,e,n)}class Th{constructor(e,n){this.type=e,this.data=n}}class xr extends Error{constructor(e){super(e);const n=Object.create(xr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:xr.name})}}const Kl=4294967295;function hV(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function W3(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function V3(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function pV(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const gV=-1,mV=4294967296-1,yV=17179869184-1;function bV({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=yV)if(e===0&&t<=mV){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),W3(r,4,t),n}}function wV(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function EV(t){if(t instanceof Date){const e=wV(t);return bV(e)}else return null}function vV(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=V3(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new xr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function AV(t){const e=vV(t);return new Date(e.sec*1e3+e.nsec/1e6)}const CV={type:gV,encode:EV,decode:AV};class l0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(CV)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Th(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Th(o,i)}}}return e instanceof Th?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Th(n,e)}}l0.defaultCodec=new l0;function _V(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Xb(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):_V(t)?new Uint8Array(t):Uint8Array.from(t)}const SV=100,IV=2048;let xV=class K3{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??l0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??SV,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??IV,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new K3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=nV(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),aV(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Xb(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),hV(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),W3(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function TV(t,e){return new xV(e).encodeSharedRef(t)}function Jm(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const NV=16,OV=16;class PV{constructor(e=NV,n=OV){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=z3(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Qb="array",Sd="map_key",G3="map_value",RV=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new xr("The type of key must be string or number but "+typeof t)};class $V{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Qb,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Sd,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Qb){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Sd||e.type===G3){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Gl=-1,BE=new DataView(new ArrayBuffer(0)),kV=new Uint8Array(BE.buffer);try{BE.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const WA=new RangeError("Insufficient data"),DV=new PV;let UV=class Y3{constructor(e){this.totalPos=0,this.pos=0,this.view=BE,this.bytes=kV,this.headByte=Gl,this.stack=new $V,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??l0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Kl,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Kl,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Kl,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Kl,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Kl,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:DV,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??RV}clone(){return new Y3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Gl,this.stack.reset()}setBuffer(e){const n=Xb(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Gl&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=Xb(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Jm(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new xr(`Unrecognized type byte: ${Jm(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Qb)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Sd){if(n==="__proto__")throw new xr("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=G3;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Sd;continue e}}return n}}readHeadByte(){return this.headByte===Gl&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Gl}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new xr(`Unrecognized array type byte: ${Jm(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new xr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new xr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new xr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw WA;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=fV(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Sd:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new xr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw WA;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new xr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=pV(this.view,this.pos);return this.pos+=8,e}readI64(){const e=V3(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function BV(t,e){return new UV(e).decode(t)}function LE(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Z3(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?LE(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Id(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Z3(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return LE(n)}function LV(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,y=0,C=0,N=g.length;C!==N&&g[C]===0;)C++,p++;for(var E=(N-C)*l+1>>>0,A=new Uint8Array(E);C!==N;){for(var _=g[C],O=0,$=E-1;(_!==0||O<y)&&$!==-1;$--,O++)_+=256*A[$]>>>0,A[$]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=O,C++}for(var M=E-y;M!==E&&A[M]===0;)M++;for(var D=c.repeat(p);M<E;++M)D+=t.charAt(A[M]);return D}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var y=0,C=0;g[p]===c;)y++,p++;for(var N=(g.length-p)*u+1>>>0,E=new Uint8Array(N);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var _=0,O=N-1;(A!==0||_<C)&&O!==-1;O--,_++)A+=a*E[O]>>>0,E[O]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");C=_,p++}if(g[p]!==" "){for(var $=N-C;$!==N&&E[$]===0;)$++;for(var M=new Uint8Array(y+(N-$)),D=y;$!==N;)M[D++]=E[$++];return M}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var MV=LV,FV=MV;const jV=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},HV=t=>new TextEncoder().encode(t),qV=t=>new TextDecoder().decode(t);class zV{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class WV{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return J3(this,e)}}class VV{constructor(e){this.decoders=e}or(e){return J3(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const J3=(t,e)=>new VV({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class KV{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new zV(e,n,r),this.decoder=new WV(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ag=({name:t,prefix:e,encode:n,decode:r})=>new KV(t,e,n,r),Zf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=FV(n,e);return Ag({prefix:t,name:e,encode:r,decode:i=>jV(s(i))})},GV=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},YV=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},vn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Ag({prefix:e,name:t,encode(s){return YV(s,r,n)},decode(s){return GV(s,r,n,t)}}),ZV=Ag({prefix:"\0",name:"identity",encode:t=>qV(t),decode:t=>HV(t)}),JV=Object.freeze(Object.defineProperty({__proto__:null,identity:ZV},Symbol.toStringTag,{value:"Module"})),XV=vn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QV=Object.freeze(Object.defineProperty({__proto__:null,base2:XV},Symbol.toStringTag,{value:"Module"})),eK=vn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tK=Object.freeze(Object.defineProperty({__proto__:null,base8:eK},Symbol.toStringTag,{value:"Module"})),nK=Zf({prefix:"9",name:"base10",alphabet:"0123456789"}),rK=Object.freeze(Object.defineProperty({__proto__:null,base10:nK},Symbol.toStringTag,{value:"Module"})),sK=vn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iK=vn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),oK=Object.freeze(Object.defineProperty({__proto__:null,base16:sK,base16upper:iK},Symbol.toStringTag,{value:"Module"})),aK=vn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cK=vn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),uK=vn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lK=vn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dK=vn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fK=vn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hK=vn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pK=vn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gK=vn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),mK=Object.freeze(Object.defineProperty({__proto__:null,base32:aK,base32hex:dK,base32hexpad:hK,base32hexpadupper:pK,base32hexupper:fK,base32pad:uK,base32padupper:lK,base32upper:cK,base32z:gK},Symbol.toStringTag,{value:"Module"})),yK=Zf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),bK=Zf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wK=Object.freeze(Object.defineProperty({__proto__:null,base36:yK,base36upper:bK},Symbol.toStringTag,{value:"Module"})),EK=Zf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vK=Zf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),AK=Object.freeze(Object.defineProperty({__proto__:null,base58btc:EK,base58flickr:vK},Symbol.toStringTag,{value:"Module"})),CK=vn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_K=vn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),SK=vn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),IK=vn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),xK=Object.freeze(Object.defineProperty({__proto__:null,base64:CK,base64pad:_K,base64url:SK,base64urlpad:IK},Symbol.toStringTag,{value:"Module"})),X3=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),TK=X3.reduce((t,e,n)=>(t[n]=e,t),[]),NK=X3.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function OK(t){return t.reduce((e,n)=>(e+=TK[n],e),"")}function PK(t){const e=[];for(const n of t){const r=NK[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const RK=Ag({prefix:"🚀",name:"base256emoji",encode:OK,decode:PK}),$K=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:RK},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const VA={...JV,...QV,...tK,...rK,...oK,...mK,...wK,...AK,...xK,...$K};function Q3(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const KA=Q3("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Xm=Q3("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Z3(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),eN={utf8:KA,"utf-8":KA,hex:VA.base16,latin1:Xm,ascii:Xm,binary:Xm,...VA};function es(t,e="utf8"){const n=eN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?LE(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function mr(t,e="utf8"){const n=eN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const kK={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},DK="Input must be an string, Buffer or Uint8Array";function UK(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(DK);return e}function BK(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Nh(t){return(4294967296+t).toString(16).substring(1)}function LK(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Nh(e[s]).toUpperCase(),r+=" ",r+=Nh(e[s+1]).toUpperCase();else if(n===64)r+=Nh(e[s+1]).toUpperCase(),r+=Nh(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function MK(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),u=c-r;r=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var tN={normalizeInput:UK,toHex:BK,debugPrint:LK,testSpeed:MK};const up=tN;function Oh(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function GA(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function nN(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function fo(t,e,n,r,s,i){const o=gd[s],a=gd[s+1],c=gd[i],u=gd[i+1];Oh(je,t,e),GA(je,t,o,a);let l=je[r]^je[t],d=je[r+1]^je[t+1];je[r]=d,je[r+1]=l,Oh(je,n,r),l=je[e]^je[n],d=je[e+1]^je[n+1],je[e]=l>>>24^d<<8,je[e+1]=d>>>24^l<<8,Oh(je,t,e),GA(je,t,c,u),l=je[r]^je[t],d=je[r+1]^je[t+1],je[r]=l>>>16^d<<16,je[r+1]=d>>>16^l<<16,Oh(je,n,r),l=je[e]^je[n],d=je[e+1]^je[n+1],je[e]=d>>>31^l<<1,je[e+1]=l>>>31^d<<1}const rN=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),FK=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],_n=new Uint8Array(FK.map(function(t){return t*2})),je=new Uint32Array(32),gd=new Uint32Array(32);function sN(t,e){let n=0;for(n=0;n<16;n++)je[n]=t.h[n],je[n+16]=rN[n];for(je[24]=je[24]^t.t,je[25]=je[25]^t.t/4294967296,e&&(je[28]=~je[28],je[29]=~je[29]),n=0;n<32;n++)gd[n]=nN(t.b,4*n);for(n=0;n<12;n++)fo(0,8,16,24,_n[n*16+0],_n[n*16+1]),fo(2,10,18,26,_n[n*16+2],_n[n*16+3]),fo(4,12,20,28,_n[n*16+4],_n[n*16+5]),fo(6,14,22,30,_n[n*16+6],_n[n*16+7]),fo(0,10,20,30,_n[n*16+8],_n[n*16+9]),fo(2,12,22,24,_n[n*16+10],_n[n*16+11]),fo(4,14,16,26,_n[n*16+12],_n[n*16+13]),fo(6,8,18,28,_n[n*16+14],_n[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^je[n]^je[n+16]}const ho=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function iN(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ho.fill(0),ho[0]=t,e&&(ho[1]=e.length),ho[2]=1,ho[3]=1,n&&ho.set(n,32),r&&ho.set(r,48);for(let i=0;i<16;i++)s.h[i]=rN[i]^nN(ho,i*4);return e&&(ME(s,e),s.c=128),s}function ME(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,sN(t,!1),t.c=0),t.b[t.c++]=e[n]}function oN(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;sN(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function aN(t,e,n,r,s){n=n||64,t=up.normalizeInput(t),r&&(r=up.normalizeInput(r)),s&&(s=up.normalizeInput(s));const i=iN(n,e,r,s);return ME(i,t),oN(i)}function jK(t,e,n,r,s){const i=aN(t,e,n,r,s);return up.toHex(i)}var HK={blake2b:aN,blake2bHex:jK,blake2bInit:iN,blake2bUpdate:ME,blake2bFinal:oN};const cN=tN;function qK(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function po(t,e,n,r,s,i){at[t]=at[t]+at[e]+s,at[r]=Ph(at[r]^at[t],16),at[n]=at[n]+at[r],at[e]=Ph(at[e]^at[n],12),at[t]=at[t]+at[e]+i,at[r]=Ph(at[r]^at[t],8),at[n]=at[n]+at[r],at[e]=Ph(at[e]^at[n],7)}function Ph(t,e){return t>>>e^t<<32-e}const uN=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),at=new Uint32Array(16),dn=new Uint32Array(16);function lN(t,e){let n=0;for(n=0;n<8;n++)at[n]=t.h[n],at[n+8]=uN[n];for(at[12]^=t.t,at[13]^=t.t/4294967296,e&&(at[14]=~at[14]),n=0;n<16;n++)dn[n]=qK(t.b,4*n);for(n=0;n<10;n++)po(0,4,8,12,dn[Sn[n*16+0]],dn[Sn[n*16+1]]),po(1,5,9,13,dn[Sn[n*16+2]],dn[Sn[n*16+3]]),po(2,6,10,14,dn[Sn[n*16+4]],dn[Sn[n*16+5]]),po(3,7,11,15,dn[Sn[n*16+6]],dn[Sn[n*16+7]]),po(0,5,10,15,dn[Sn[n*16+8]],dn[Sn[n*16+9]]),po(1,6,11,12,dn[Sn[n*16+10]],dn[Sn[n*16+11]]),po(2,7,8,13,dn[Sn[n*16+12]],dn[Sn[n*16+13]]),po(3,4,9,14,dn[Sn[n*16+14]],dn[Sn[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=at[n]^at[n+8]}function dN(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(uN),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(FE(r,e),r.c=64),r}function FE(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,lN(t,!1),t.c=0),t.b[t.c++]=e[n]}function fN(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;lN(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function hN(t,e,n){n=n||32,t=cN.normalizeInput(t);const r=dN(n,e);return FE(r,t),fN(r)}function zK(t,e,n){const r=hN(t,e,n);return cN.toHex(r)}var WK={blake2s:hN,blake2sHex:zK,blake2sInit:dN,blake2sUpdate:FE,blake2sFinal:fN};const Yl=HK,Zl=WK;var VK={blake2b:Yl.blake2b,blake2bHex:Yl.blake2bHex,blake2bInit:Yl.blake2bInit,blake2bUpdate:Yl.blake2bUpdate,blake2bFinal:Yl.blake2bFinal,blake2s:Zl.blake2s,blake2sHex:Zl.blake2sHex,blake2sInit:Zl.blake2sInit,blake2sUpdate:Zl.blake2sUpdate,blake2sFinal:Zl.blake2sFinal},KK={};const GK=":";function lp(t){const[e,n]=t.split(GK);return{namespace:e,reference:n}}function pN(t,e){return t.includes(":")?[t]:e.chains||[]}var YK=Object.defineProperty,ZK=Object.defineProperties,JK=Object.getOwnPropertyDescriptors,YA=Object.getOwnPropertySymbols,XK=Object.prototype.hasOwnProperty,QK=Object.prototype.propertyIsEnumerable,ew=(t,e,n)=>e in t?YK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZA=(t,e)=>{for(var n in e||(e={}))XK.call(e,n)&&ew(t,n,e[n]);if(YA)for(var n of YA(e))QK.call(e,n)&&ew(t,n,e[n]);return t},eG=(t,e)=>ZK(t,JK(e)),JA=(t,e,n)=>ew(t,typeof e!="symbol"?e+"":e,n);const tG="ReactNative",kr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},nG="js";function d0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Aa(){return!_c()&&!!IE()&&navigator.product===tG}function rG(){return Aa()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function sG(){return Aa()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Dl(){return!d0()&&!!IE()&&!!_c()}function Jf(){return Aa()?kr.reactNative:d0()?kr.node:Dl()?kr.browser:kr.unknown}function XA(){var t;try{return Aa()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function iG(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function oG(t){var e,n;const r=gN();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),eG(ZA(ZA({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function gN(){return a3()||{name:"",description:"",url:"",icons:[""]}}function aG(){if(Jf()===kr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Pq();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function cG(){var t;const e=Jf();return e===kr.browser?[e,((t=o3())==null?void 0:t.host)||"unknown"].join(":"):e}function mN(t,e,n){const r=aG(),s=cG();return[[t,e].join("-"),[nG,n].join("-"),r,s].join("/")}function uG({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=mN(t,e,r),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=iG(u[1]||"",d);return u[0]+"?"+f}function qa(t,e){return t.filter(n=>e.includes(n)).length===t.length}function tw(t){return Object.fromEntries(t.entries())}function nw(t){return new Map(Object.entries(t))}function Ua(t=ue.FIVE_MINUTES,e){const n=ue.toMiliseconds(t||ue.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},n),r=a,s=c})}}function ti(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function yN(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function lG(t){return yN("topic",t)}function dG(t){return yN("id",t)}function bN(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Gt(t,e){return ue.fromMiliseconds(Date.now()+ue.toMiliseconds(t))}function No(t){return Date.now()>=ue.toMiliseconds(t)}function dt(t,e){return`${t}${e?`:${e}`:""}`}function ac(t=[],e=[]){return[...new Set([...t,...e])]}async function fG({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=hG(i,t,e),a=Jf();if(a===kr.browser){if(!((r=_c())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}pG(o)}else a===kr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function hG(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${bG(r,!0)}`}else s=`${s}/wc?${r}`;return s}function pG(t){let e="_self";yG()?e="_top":(mG()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function gG(t,e){let n="";try{if(Dl()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function QA(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function eC(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function jE(){return typeof process<"u"&&KK.IS_VITEST==="true"}function mG(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function yG(){try{return window.self!==window.top}catch{return!1}}function bG(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function wN(t){return Buffer.from(t,"base64").toString("utf-8")}function wG(t){return new Promise(e=>setTimeout(e,t))}let EG=class{constructor({limit:e}){JA(this,"limit"),JA(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const Rh=BigInt(2**32-1),tC=BigInt(32);function EN(t,e=!1){return e?{h:Number(t&Rh),l:Number(t>>tC&Rh)}:{h:Number(t>>tC&Rh)|0,l:Number(t&Rh)|0}}function vN(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=EN(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const nC=(t,e,n)=>t>>>n,rC=(t,e,n)=>t<<32-n|e>>>n,Oo=(t,e,n)=>t>>>n|e<<32-n,Po=(t,e,n)=>t<<32-n|e>>>n,md=(t,e,n)=>t<<64-n|e>>>n-32,yd=(t,e,n)=>t>>>n-32|e<<64-n,vG=(t,e)=>e,AG=(t,e)=>t,CG=(t,e,n)=>t<<n|e>>>32-n,_G=(t,e,n)=>e<<n|t>>>32-n,SG=(t,e,n)=>e<<n-32|t>>>64-n,IG=(t,e,n)=>t<<n-32|e>>>64-n;function ws(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const HE=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),qE=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,xG=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),TG=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,NG=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),OG=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,eu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Cg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function eo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Us(t,...e){if(!Cg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _g(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");eo(t.outputLen),eo(t.blockLen)}function ya(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zE(t,e){Us(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function pf(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function as(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Qm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qs(t,e){return t<<32-e|t>>>e}const AN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function CN(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Ii=AN?t=>t:t=>CN(t);function PG(t){for(let e=0;e<t.length;e++)t[e]=CN(t[e]);return t}const Ro=AN?t=>t:PG,_N=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",RG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ou(t){if(Us(t),_N)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=RG[t[n]];return e}const Ai={_0:48,_9:57,A:65,F:70,a:97,f:102};function sC(t){if(t>=Ai._0&&t<=Ai._9)return t-Ai._0;if(t>=Ai.A&&t<=Ai.F)return t-(Ai.A-10);if(t>=Ai.a&&t<=Ai.f)return t-(Ai.a-10)}function f0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(_N)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=sC(t.charCodeAt(i)),a=sC(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function SN(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ps(t){return typeof t=="string"&&(t=SN(t)),Us(t),t}function Lo(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Us(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Sg=class{};function Xf(t){const e=r=>t().update(Ps(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $G(t){const e=(r,s)=>t(s).update(Ps(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function zc(t=32){if(eu&&typeof eu.getRandomValues=="function")return eu.getRandomValues(new Uint8Array(t));if(eu&&typeof eu.randomBytes=="function")return Uint8Array.from(eu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const kG=BigInt(0),Jl=BigInt(1),DG=BigInt(2),UG=BigInt(7),BG=BigInt(256),LG=BigInt(113),IN=[],xN=[],TN=[];for(let t=0,e=Jl,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],IN.push(2*(5*r+n)),xN.push((t+1)*(t+2)/2%64);let s=kG;for(let i=0;i<7;i++)e=(e<<Jl^(e>>UG)*LG)%BG,e&DG&&(s^=Jl<<(Jl<<BigInt(i))-Jl);TN.push(s)}const NN=vN(TN,!0),MG=NN[0],FG=NN[1],iC=(t,e,n)=>n>32?SG(t,e,n):CG(t,e,n),oC=(t,e,n)=>n>32?IG(t,e,n):_G(t,e,n);function jG(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=iC(u,l,1)^n[a],f=oC(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=xN[o],c=iC(s,i,a),u=oC(s,i,a),l=IN[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=MG[r],t[1]^=FG[r]}as(n)}let HG=class ON extends Sg{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,eo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=pf(this.state)}clone(){return this._cloneInto()}keccak(){Ro(this.state32),jG(this.state32,this.rounds),Ro(this.state32),this.posOut=0,this.pos=0}update(e){ya(this),e=Ps(e),Us(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ya(this,!1),Us(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return eo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,as(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new ON(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const qG=(t,e,n)=>Xf(()=>new HG(e,t,n)),zG=qG(1,136,256/8);function WG(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function VG(t,e,n){return t&e^~t&n}function KG(t,e,n){return t&e^t&n^e&n}let PN=class extends Sg{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Qm(this.buffer)}update(e){ya(this),e=Ps(e),Us(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Qm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ya(this),zE(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,as(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;WG(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Qm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const go=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),In=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),xn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),GG=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mo=new Uint32Array(64);let YG=class extends PN{constructor(e=32){super(64,e,8,!1),this.A=go[0]|0,this.B=go[1]|0,this.C=go[2]|0,this.D=go[3]|0,this.E=go[4]|0,this.F=go[5]|0,this.G=go[6]|0,this.H=go[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)mo[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=mo[d-15],h=mo[d-2],g=qs(f,7)^qs(f,18)^f>>>3,p=qs(h,17)^qs(h,19)^h>>>10;mo[d]=p+mo[d-7]+g+mo[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=qs(a,6)^qs(a,11)^qs(a,25),h=l+f+VG(a,c,u)+GG[d]+mo[d]|0,g=(qs(r,2)^qs(r,13)^qs(r,22))+KG(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){as(mo)}destroy(){this.set(0,0,0,0,0,0,0,0),as(this.buffer)}};const RN=vN(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ZG=RN[0],JG=RN[1],yo=new Uint32Array(80),bo=new Uint32Array(80);let WE=class extends PN{constructor(e=64){super(128,e,16,!1),this.Ah=xn[0]|0,this.Al=xn[1]|0,this.Bh=xn[2]|0,this.Bl=xn[3]|0,this.Ch=xn[4]|0,this.Cl=xn[5]|0,this.Dh=xn[6]|0,this.Dl=xn[7]|0,this.Eh=xn[8]|0,this.El=xn[9]|0,this.Fh=xn[10]|0,this.Fl=xn[11]|0,this.Gh=xn[12]|0,this.Gl=xn[13]|0,this.Hh=xn[14]|0,this.Hl=xn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=y|0}process(e,n){for(let E=0;E<16;E++,n+=4)yo[E]=e.getUint32(n),bo[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const A=yo[E-15]|0,_=bo[E-15]|0,O=Oo(A,_,1)^Oo(A,_,8)^nC(A,_,7),$=Po(A,_,1)^Po(A,_,8)^rC(A,_,7),M=yo[E-2]|0,D=bo[E-2]|0,q=Oo(M,D,19)^md(M,D,61)^nC(M,D,6),j=Po(M,D,19)^yd(M,D,61)^rC(M,D,6),L=xG($,j,bo[E-7],bo[E-16]),T=TG(L,O,q,yo[E-7],yo[E-16]);yo[E]=T|0,bo[E]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:y,Hh:C,Hl:N}=this;for(let E=0;E<80;E++){const A=Oo(d,f,14)^Oo(d,f,18)^md(d,f,41),_=Po(d,f,14)^Po(d,f,18)^yd(d,f,41),O=d&h^~d&p,$=f&g^~f&y,M=NG(N,_,$,JG[E],bo[E]),D=OG(M,C,A,O,ZG[E],yo[E]),q=M|0,j=Oo(r,s,28)^md(r,s,34)^md(r,s,39),L=Po(r,s,28)^yd(r,s,34)^yd(r,s,39),T=r&i^r&a^i&a,P=s&o^s&c^o&c;C=p|0,N=y|0,p=h|0,y=g|0,h=d|0,g=f|0,{h:d,l:f}=ws(u|0,l|0,D|0,q|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const m=HE(q,L,P);r=qE(m,D,j,T),s=m|0}({h:r,l:s}=ws(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ws(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ws(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ws(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=ws(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=ws(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:y}=ws(this.Gh|0,this.Gl|0,p|0,y|0),{h:C,l:N}=ws(this.Hh|0,this.Hl|0,C|0,N|0),this.set(r,s,i,o,a,c,u,l,d,f,h,g,p,y,C,N)}roundClean(){as(yo,bo)}destroy(){as(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},XG=class extends WE{constructor(){super(48),this.Ah=In[0]|0,this.Al=In[1]|0,this.Bh=In[2]|0,this.Bl=In[3]|0,this.Ch=In[4]|0,this.Cl=In[5]|0,this.Dh=In[6]|0,this.Dl=In[7]|0,this.Eh=In[8]|0,this.El=In[9]|0,this.Fh=In[10]|0,this.Fl=In[11]|0,this.Gh=In[12]|0,this.Gl=In[13]|0,this.Hh=In[14]|0,this.Hl=In[15]|0}};const Tn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let QG=class extends WE{constructor(){super(32),this.Ah=Tn[0]|0,this.Al=Tn[1]|0,this.Bh=Tn[2]|0,this.Bl=Tn[3]|0,this.Ch=Tn[4]|0,this.Cl=Tn[5]|0,this.Dh=Tn[6]|0,this.Dl=Tn[7]|0,this.Eh=Tn[8]|0,this.El=Tn[9]|0,this.Fh=Tn[10]|0,this.Fl=Tn[11]|0,this.Gh=Tn[12]|0,this.Gl=Tn[13]|0,this.Hh=Tn[14]|0,this.Hl=Tn[15]|0}};const Ig=Xf(()=>new YG),eY=Xf(()=>new WE),tY=Xf(()=>new XG),nY=Xf(()=>new QG),rY=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Vt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),me=new Uint32Array(32);function wo(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=me[2*t],u=me[2*t+1],l=me[2*e],d=me[2*e+1],f=me[2*n],h=me[2*n+1],g=me[2*r],p=me[2*r+1],y=HE(c,l,o);u=qE(y,u,d,a),c=y|0,{Dh:p,Dl:g}={Dh:p^u,Dl:g^c},{Dh:p,Dl:g}={Dh:vG(p,g),Dl:AG(p)},{h,l:f}=ws(h,f,p,g),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:Oo(d,l,24),Bl:Po(d,l,24)},me[2*t]=c,me[2*t+1]=u,me[2*e]=l,me[2*e+1]=d,me[2*n]=f,me[2*n+1]=h,me[2*r]=g,me[2*r+1]=p}function Eo(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=me[2*t],u=me[2*t+1],l=me[2*e],d=me[2*e+1],f=me[2*n],h=me[2*n+1],g=me[2*r],p=me[2*r+1],y=HE(c,l,o);u=qE(y,u,d,a),c=y|0,{Dh:p,Dl:g}={Dh:p^u,Dl:g^c},{Dh:p,Dl:g}={Dh:Oo(p,g,16),Dl:Po(p,g,16)},{h,l:f}=ws(h,f,p,g),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:md(d,l,63),Bl:yd(d,l,63)},me[2*t]=c,me[2*t+1]=u,me[2*e]=l,me[2*e+1]=d,me[2*n]=f,me[2*n+1]=h,me[2*r]=g,me[2*r+1]=p}function sY(t,e={},n,r,s){if(eo(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}let iY=class extends Sg{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,eo(e),eo(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=pf(this.buffer)}update(e){ya(this),e=Ps(e),Us(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Ro(s),this.compress(s,0,!1),Ro(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));Ro(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);Ro(d);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){ya(this),zE(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,as(this.buffer.subarray(n)),Ro(r),this.compress(r,0,!0),Ro(r);const s=pf(e);this.get().forEach((i,o)=>s[o]=Ii(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}},oY=class extends iY{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Vt[0]|0,this.v0h=Vt[1]|0,this.v1l=Vt[2]|0,this.v1h=Vt[3]|0,this.v2l=Vt[4]|0,this.v2h=Vt[5]|0,this.v3l=Vt[6]|0,this.v3h=Vt[7]|0,this.v4l=Vt[8]|0,this.v4h=Vt[9]|0,this.v5l=Vt[10]|0,this.v5h=Vt[11]|0,this.v6l=Vt[12]|0,this.v6h=Vt[13]|0,this.v7l=Vt[14]|0,this.v7h=Vt[15]|0,sY(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ps(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ps(i);const a=pf(i);this.v4l^=Ii(a[0]),this.v4h^=Ii(a[1]),this.v5l^=Ii(a[2]),this.v5h^=Ii(a[3])}if(s!==void 0){s=Ps(s);const a=pf(s);this.v6l^=Ii(a[0]),this.v6h^=Ii(a[1]),this.v7l^=Ii(a[2]),this.v7h^=Ii(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:h,v6h:g,v7l:p,v7h:y}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=g|0,this.v7l=p|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,u)=>me[u]=c),me.set(Vt,16);let{h:s,l:i}=EN(BigInt(this.length));me[24]=Vt[8]^i,me[25]=Vt[9]^s,r&&(me[28]=~me[28],me[29]=~me[29]);let o=0;const a=rY;for(let c=0;c<12;c++)wo(0,4,8,12,e,n+2*a[o++]),Eo(0,4,8,12,e,n+2*a[o++]),wo(1,5,9,13,e,n+2*a[o++]),Eo(1,5,9,13,e,n+2*a[o++]),wo(2,6,10,14,e,n+2*a[o++]),Eo(2,6,10,14,e,n+2*a[o++]),wo(3,7,11,15,e,n+2*a[o++]),Eo(3,7,11,15,e,n+2*a[o++]),wo(0,5,10,15,e,n+2*a[o++]),Eo(0,5,10,15,e,n+2*a[o++]),wo(1,6,11,12,e,n+2*a[o++]),Eo(1,6,11,12,e,n+2*a[o++]),wo(2,7,8,13,e,n+2*a[o++]),Eo(2,7,8,13,e,n+2*a[o++]),wo(3,4,9,14,e,n+2*a[o++]),Eo(3,4,9,14,e,n+2*a[o++]);this.v0l^=me[0]^me[16],this.v0h^=me[1]^me[17],this.v1l^=me[2]^me[18],this.v1h^=me[3]^me[19],this.v2l^=me[4]^me[20],this.v2h^=me[5]^me[21],this.v3l^=me[6]^me[22],this.v3h^=me[7]^me[23],this.v4l^=me[8]^me[24],this.v4h^=me[9]^me[25],this.v5l^=me[10]^me[26],this.v5h^=me[11]^me[27],this.v6l^=me[12]^me[28],this.v6h^=me[13]^me[29],this.v7l^=me[14]^me[30],this.v7h^=me[15]^me[31],as(me)}destroy(){this.destroyed=!0,as(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const aY=$G(t=>new oY(t)),cY="https://rpc.walletconnect.org/v1";function $N(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(zG(n)).toString("hex")}async function uY(t,e,n,r,s,i){switch(n.t){case"eip191":return await lY(t,e,n.s);case"eip1271":return await dY(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function lY(t,e,n){const r=MW(n);return XW({payload:$N(e),signature:r}).toLowerCase()===t.toLowerCase()}async function dY(t,e,n,r,s,i){const o=lp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:$N(e)).substring(2),f=a+d+c+l+u,h=await fetch(`${i||cY}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:fY(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await h.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function fY(){return Date.now()+Math.floor(Math.random()*1e3)}function hY(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return kl.encode(i)}function pY(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=aY(r,{dkLen:32});return kl.encode(s)}function aC(t){const e=new Uint8Array(Ig(gY(t)));return kl.encode(e)}function gY(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function cC(t){const e=Buffer.from(t,"base64"),n=BV(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=TV(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=nY(i);return JW.encode(o).replace(/=+$/,"")}function ey(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function mY(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(ey(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(ey(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(ey(r.length)),s.push(r);const i=Buffer.concat(s),o=Ig(i);return Buffer.from(o).toString("hex").toUpperCase()}function yY(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const s=(n=(e=t==null?void 0:t.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var bY=Object.defineProperty,wY=Object.defineProperties,EY=Object.getOwnPropertyDescriptors,uC=Object.getOwnPropertySymbols,vY=Object.prototype.hasOwnProperty,AY=Object.prototype.propertyIsEnumerable,lC=(t,e,n)=>e in t?bY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CY=(t,e)=>{for(var n in e||(e={}))vY.call(e,n)&&lC(t,n,e[n]);if(uC)for(var n of uC(e))AY.call(e,n)&&lC(t,n,e[n]);return t},_Y=(t,e)=>wY(t,EY(e));const SY="did:pkh:",VE=t=>t==null?void 0:t.split(":"),IY=t=>{const e=t&&VE(t);if(e)return t.includes(SY)?e[3]:e[1]},rw=t=>{const e=t&&VE(t);if(e)return e[2]+":"+e[3]},h0=t=>{const e=t&&VE(t);if(e)return e.pop()};async function dC(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=kN(s,s.iss),o=h0(s.iss);return await uY(o,i,r,rw(s.iss),n)}const kN=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=h0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${IY(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,h=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,g=dp(t.resources);if(g){const p=gf(g);s=DY(s,p)}return[n,r,"",s,"",i,o,a,c,u,l,d,f,h].filter(p=>p!=null).join(`
`)};function xY(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function TY(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ic(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function NY(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:OY(e,n,r)}}}function OY(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function DN(t){return Ic(t),`urn:recap:${xY(t).replace(/=/g,"")}`}function gf(t){const e=TY(t.replace("urn:recap:",""));return Ic(e),e}function PY(t,e,n){const r=NY(t,e,n);return DN(r)}function RY(t){return t&&t.includes("urn:recap:")}function $Y(t,e){const n=gf(t),r=gf(e),s=kY(n,r);return DN(s)}function kY(t,e){Ic(t),Ic(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=_Y(CY({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),r}function DY(t="",e){Ic(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function fC(t){var e;const n=gf(t);Ic(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function hC(t){const e=gf(t);Ic(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function dp(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return RY(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function UN(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sw(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ty(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cr(t,...e){if(!UN(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function pC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function UY(t,e){cr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function na(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function bl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function BY(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const LY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function MY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function iw(t){if(typeof t=="string")t=MY(t);else if(UN(t))t=ow(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function FY(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function jY(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const HY=(t,e)=>{function n(r,...s){if(cr(r),!LY)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?cr(u):cr(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&cr(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");cr(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,cr(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(cr(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function gC(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!zY(e))throw new Error("invalid output, must be aligned");return e}function mC(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function qY(t,e,n){sw(n);const r=new Uint8Array(16),s=BY(r);return mC(s,0,BigInt(e),n),mC(s,8,BigInt(t),n),r}function zY(t){return t.byteOffset%4===0}function ow(t){return Uint8Array.from(t)}const BN=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),WY=BN("expand 16-byte k"),VY=BN("expand 32-byte k"),KY=na(WY),GY=na(VY);function st(t,e){return t<<e|t>>>32-e}function aw(t){return t.byteOffset%4===0}const $h=64,YY=16,LN=2**32-1,yC=new Uint32Array;function ZY(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array($h),l=na(u),d=aw(s)&&aw(i),f=d?na(s):yC,h=d?na(i):yC;for(let g=0;g<c;o++){if(t(e,n,r,l,o,a),o>=LN)throw new Error("arx: counter overflow");const p=Math.min($h,c-g);if(d&&p===$h){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let C=0,N;C<YY;C++)N=y+C,h[N]=f[N]^l[C];g+=$h;continue}for(let y=0,C;y<p;y++)C=g+y,i[C]=s[C]^u[y];g+=p}}function JY(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=FY({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ty(s),ty(o),sw(i),sw(n),(a,c,u,l,d=0)=>{cr(a),cr(c),cr(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),cr(l),ty(d),d<0||d>=LN)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const h=[];let g=a.length,p,y;if(g===32)h.push(p=ow(a)),y=GY;else if(g===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),y=KY,h.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);aw(c)||h.push(c=ow(c));const C=na(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,C,na(c.subarray(0,16)),C),c=c.subarray(16)}const N=16-s;if(N!==c.length)throw new Error(`arx: nonce must be ${N} or 16 bytes`);if(N!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,h.push(c)}const E=na(c);return ZY(t,y,C,E,u,l,d,o),bl(...h),l}}const fn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let XY=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=iw(e),cr(e,32);const n=fn(e,0),r=fn(e,2),s=fn(e,4),i=fn(e,6),o=fn(e,8),a=fn(e,10),c=fn(e,12),u=fn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=fn(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],h=o[6],g=o[7],p=o[8],y=o[9],C=fn(e,n+0),N=fn(e,n+2),E=fn(e,n+4),A=fn(e,n+6),_=fn(e,n+8),O=fn(e,n+10),$=fn(e,n+12),M=fn(e,n+14);let D=i[0]+(C&8191),q=i[1]+((C>>>13|N<<3)&8191),j=i[2]+((N>>>10|E<<6)&8191),L=i[3]+((E>>>7|A<<9)&8191),T=i[4]+((A>>>4|_<<12)&8191),P=i[5]+(_>>>1&8191),m=i[6]+((_>>>14|O<<2)&8191),b=i[7]+((O>>>11|$<<5)&8191),I=i[8]+(($>>>8|M<<8)&8191),x=i[9]+(M>>>5|s),S=0,R=S+D*a+q*(5*y)+j*(5*p)+L*(5*g)+T*(5*h);S=R>>>13,R&=8191,R+=P*(5*f)+m*(5*d)+b*(5*l)+I*(5*u)+x*(5*c),S+=R>>>13,R&=8191;let F=S+D*c+q*a+j*(5*y)+L*(5*p)+T*(5*g);S=F>>>13,F&=8191,F+=P*(5*h)+m*(5*f)+b*(5*d)+I*(5*l)+x*(5*u),S+=F>>>13,F&=8191;let z=S+D*u+q*c+j*a+L*(5*y)+T*(5*p);S=z>>>13,z&=8191,z+=P*(5*g)+m*(5*h)+b*(5*f)+I*(5*d)+x*(5*l),S+=z>>>13,z&=8191;let Y=S+D*l+q*u+j*c+L*a+T*(5*y);S=Y>>>13,Y&=8191,Y+=P*(5*p)+m*(5*g)+b*(5*h)+I*(5*f)+x*(5*d),S+=Y>>>13,Y&=8191;let G=S+D*d+q*l+j*u+L*c+T*a;S=G>>>13,G&=8191,G+=P*(5*y)+m*(5*p)+b*(5*g)+I*(5*h)+x*(5*f),S+=G>>>13,G&=8191;let K=S+D*f+q*d+j*l+L*u+T*c;S=K>>>13,K&=8191,K+=P*a+m*(5*y)+b*(5*p)+I*(5*g)+x*(5*h),S+=K>>>13,K&=8191;let ee=S+D*h+q*f+j*d+L*l+T*u;S=ee>>>13,ee&=8191,ee+=P*c+m*a+b*(5*y)+I*(5*p)+x*(5*g),S+=ee>>>13,ee&=8191;let se=S+D*g+q*h+j*f+L*d+T*l;S=se>>>13,se&=8191,se+=P*u+m*c+b*a+I*(5*y)+x*(5*p),S+=se>>>13,se&=8191;let he=S+D*p+q*g+j*h+L*f+T*d;S=he>>>13,he&=8191,he+=P*l+m*u+b*c+I*a+x*(5*y),S+=he>>>13,he&=8191;let re=S+D*y+q*p+j*g+L*h+T*f;S=re>>>13,re&=8191,re+=P*d+m*l+b*u+I*c+x*a,S+=re>>>13,re&=8191,S=(S<<2)+S|0,S=S+R|0,R=S&8191,S=S>>>13,F+=S,i[0]=R,i[1]=F,i[2]=z,i[3]=Y,i[4]=G,i[5]=K,i[6]=ee,i[7]=se,i[8]=he,i[9]=re}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;bl(r)}update(e){pC(this),e=iw(e),cr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){bl(this.h,this.r,this.buffer,this.pad)}digestInto(e){pC(this),UY(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function QY(t){const e=(r,s)=>t(s).update(iw(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const eZ=QY(t=>new XY(t));function tZ(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],h=e[3],g=e[4],p=e[5],y=e[6],C=e[7],N=s,E=n[0],A=n[1],_=n[2],O=o,$=a,M=c,D=u,q=l,j=d,L=f,T=h,P=g,m=p,b=y,I=C,x=N,S=E,R=A,F=_;for(let Y=0;Y<i;Y+=2)O=O+q|0,x=st(x^O,16),P=P+x|0,q=st(q^P,12),O=O+q|0,x=st(x^O,8),P=P+x|0,q=st(q^P,7),$=$+j|0,S=st(S^$,16),m=m+S|0,j=st(j^m,12),$=$+j|0,S=st(S^$,8),m=m+S|0,j=st(j^m,7),M=M+L|0,R=st(R^M,16),b=b+R|0,L=st(L^b,12),M=M+L|0,R=st(R^M,8),b=b+R|0,L=st(L^b,7),D=D+T|0,F=st(F^D,16),I=I+F|0,T=st(T^I,12),D=D+T|0,F=st(F^D,8),I=I+F|0,T=st(T^I,7),O=O+j|0,F=st(F^O,16),b=b+F|0,j=st(j^b,12),O=O+j|0,F=st(F^O,8),b=b+F|0,j=st(j^b,7),$=$+L|0,x=st(x^$,16),I=I+x|0,L=st(L^I,12),$=$+L|0,x=st(x^$,8),I=I+x|0,L=st(L^I,7),M=M+T|0,S=st(S^M,16),P=P+S|0,T=st(T^P,12),M=M+T|0,S=st(S^M,8),P=P+S|0,T=st(T^P,7),D=D+q|0,R=st(R^D,16),m=m+R|0,q=st(q^m,12),D=D+q|0,R=st(R^D,8),m=m+R|0,q=st(q^m,7);let z=0;r[z++]=o+O|0,r[z++]=a+$|0,r[z++]=c+M|0,r[z++]=u+D|0,r[z++]=l+q|0,r[z++]=d+j|0,r[z++]=f+L|0,r[z++]=h+T|0,r[z++]=g+P|0,r[z++]=p+m|0,r[z++]=y+b|0,r[z++]=C+I|0,r[z++]=N+x|0,r[z++]=E+S|0,r[z++]=A+R|0,r[z++]=_+F|0}const nZ=JY(tZ,{counterRight:!1,counterLength:4,allowShortKeys:!1}),rZ=new Uint8Array(16),bC=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(rZ.subarray(n))},sZ=new Uint8Array(32);function wC(t,e,n,r,s){const i=t(e,n,sZ),o=eZ.create(i);s&&bC(o,s),bC(o,r);const a=qY(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return bl(i,a),c}const iZ=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=gC(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=wC(t,e,n,a,r);return i.set(c,o),bl(c),i},decrypt(s,i){i=gC(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=wC(t,e,n,o,r);if(!jY(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),bl(c),i}}),MN=HY({blockSize:64,nonceLength:12,tagLength:16},iZ(nZ));let FN=class extends Sg{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,_g(e);const r=Ps(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),as(i)}update(e){return ya(this),this.iHash.update(e),this}digestInto(e){ya(this),Us(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xg=(t,e,n)=>new FN(t,e).update(n).digest();xg.create=(t,e)=>new FN(t,e);function oZ(t,e,n){return _g(t),n===void 0&&(n=new Uint8Array(t.outputLen)),xg(t,Ps(n),Ps(e))}const ny=Uint8Array.from([0]),EC=Uint8Array.of();function aZ(t,e,n,r=32){_g(t),eo(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=EC);const o=new Uint8Array(i*s),a=xg.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)ny[0]=l+1,c.update(l===0?EC:u).update(n).update(ny).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),as(u,ny),o.slice(0,r)}const cZ=(t,e,n,r,s)=>aZ(t,oZ(t,e,n),r,s),Tg=Ig,KE=BigInt(0),cw=BigInt(1);function p0(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function za(t,e,n=""){const r=Cg(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function kh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function jN(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?KE:BigInt("0x"+t)}function Ng(t){return jN(Ou(t))}function g0(t){return Us(t),jN(Ou(Uint8Array.from(t).reverse()))}function GE(t,e){return f0(t.toString(16).padStart(e*2,"0"))}function YE(t,e){return GE(t,e).reverse()}function Un(t,e,n){let r;if(typeof e=="string")try{r=f0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Cg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const ry=t=>typeof t=="bigint"&&KE<=t;function uZ(t,e,n){return ry(t)&&ry(e)&&ry(n)&&e<=t&&t<n}function uw(t,e,n,r){if(!uZ(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function HN(t){let e;for(e=0;t>KE;t>>=cw,e+=1);return e}const Qf=t=>(cw<<BigInt(t))-cw;function lZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>n(o,i,...f),l=(f=r(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=u();const g=i.slice();h.push(g),f+=i.length}return Lo(...h)};return(f,h)=>{c(),l(f);let g;for(;!(g=h(d()));)l();return c(),g}}function Og(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function vC(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const pr=BigInt(0),Vn=BigInt(1),Wa=BigInt(2),qN=BigInt(3),zN=BigInt(4),WN=BigInt(5),dZ=BigInt(7),VN=BigInt(8),fZ=BigInt(9),KN=BigInt(16);function Tr(t,e){const n=t%e;return n>=pr?n:e+n}function ys(t,e,n){let r=t;for(;e-- >pr;)r*=r,r%=n;return r}function AC(t,e){if(t===pr)throw new Error("invert: expected non-zero number");if(e<=pr)throw new Error("invert: expected positive modulus, got "+e);let n=Tr(t,e),r=e,s=pr,i=Vn;for(;n!==pr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Vn)throw new Error("invert: does not exist");return Tr(s,e)}function ZE(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function GN(t,e){const n=(t.ORDER+Vn)/zN,r=t.pow(e,n);return ZE(t,r,e),r}function hZ(t,e){const n=(t.ORDER-WN)/VN,r=t.mul(e,Wa),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Wa),s),a=t.mul(i,t.sub(o,t.ONE));return ZE(t,a,e),a}function pZ(t){const e=Ca(t),n=YN(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+dZ)/KN;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,i),h=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,h),l=a.cmov(f,d,g);const p=a.eql(a.sqr(l),c),y=a.cmov(u,l,p);return ZE(a,y,c),y}}function YN(t){if(t<qN)throw new Error("sqrt is not defined for small field");let e=t-Vn,n=0;for(;e%Wa===pr;)e/=Wa,n++;let r=Wa;const s=Ca(t);for(;CC(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return GN;let i=s.pow(r,e);const o=(e+Vn)/Wa;return function(a,c){if(a.is0(c))return c;if(CC(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(h++,g=a.sqr(g),h===u)throw new Error("Cannot find square root");const p=Vn<<BigInt(u-h-1),y=a.pow(l,p);u=h,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function gZ(t){return t%zN===qN?GN:t%VN===WN?hZ:t%KN===fZ?pZ(t):YN(t)}const mZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yZ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=mZ.reduce((r,s)=>(r[s]="function",r),e);return Og(t,n),t}function bZ(t,e,n){if(n<pr)throw new Error("invalid exponent, negatives unsupported");if(n===pr)return t.ONE;if(n===Vn)return e;let r=t.ONE,s=e;for(;n>pr;)n&Vn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Vn;return r}function ZN(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function CC(t,e){const n=(t.ORDER-Vn)/Wa,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function JN(t,e){e!==void 0&&eo(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ca(t,e,n=!1,r={}){if(t<=pr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=JN(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:Qf(c),ZERO:pr,ONE:Vn,allowedLengths:a,create:f=>Tr(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return pr<=f&&f<t},is0:f=>f===pr,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&Vn)===Vn,neg:f=>Tr(-f,t),eql:(f,h)=>f===h,sqr:f=>Tr(f*f,t),add:(f,h)=>Tr(f+h,t),sub:(f,h)=>Tr(f-h,t),mul:(f,h)=>Tr(f*h,t),pow:(f,h)=>bZ(d,f,h),div:(f,h)=>Tr(f*AC(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>AC(f,t),sqrt:i||(f=>(l||(l=gZ(t)),l(d,f))),toBytes:f=>n?YE(f,u):GE(f,u),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const p=new Uint8Array(u);p.set(f,n?0:p.length-f.length),f=p}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=n?g0(f):Ng(f);if(o&&(g=Tr(g,t)),!h&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>ZN(d,f),cmov:(f,h,g)=>g?h:f});return Object.freeze(d)}function XN(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function QN(t){const e=XN(t);return e+Math.ceil(e/2)}function wZ(t,e,n=!1){const r=t.length,s=XN(e),i=QN(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?g0(t):Ng(t),a=Tr(o,e-Vn)+Vn;return n?YE(a,s):GE(a,s)}const wl=BigInt(0),Va=BigInt(1);function m0(t,e){const n=e.negate();return t?n:e}function sy(t,e){const n=ZN(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function e8(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function iy(t,e){e8(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Qf(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function _C(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Va);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function EZ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function vZ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const oy=new WeakMap,t8=new WeakMap;function ay(t){return t8.get(t)||1}function SC(t){if(t!==wl)throw new Error("invalid wNAF")}let AZ=class{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>wl;)n&Va&&(r=r.add(s)),s=s.double(),n>>=Va;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=iy(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=iy(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:h}=_C(r,a,o);r=c,l?i=i.add(m0(f,n[h])):s=s.add(m0(d,n[u]))}return SC(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=iy(e,this.bits);for(let o=0;o<i.windows&&r!==wl;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=_C(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return SC(r),s}getPrecomputes(e,n,r){let s=oy.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),oy.set(n,s))),s}cached(e,n,r){const s=ay(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=ay(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){e8(n,this.bits),t8.set(e,n),oy.delete(e)}hasCache(e){return ay(e)!==1}};function CZ(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>wl||r>wl;)n&Va&&(i=i.add(s)),r&Va&&(o=o.add(s)),s=s.double(),n>>=Va,r>>=Va;return{p1:i,p2:o}}function _Z(t,e,n,r){EZ(n,t),vZ(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=HN(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Qf(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let p=0;p<i;p++){const y=r[p],C=Number(y>>BigInt(h)&u);l[C]=l[C].add(n[p])}let g=o;for(let p=l.length-1,y=o;p>0;p--)y=y.add(l[p]),g=g.add(y);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function IC(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yZ(e),e}else return Ca(t,{isLE:n})}function SZ(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>wl))throw new Error(`CURVE.${a} must be positive bigint`)}const s=IC(e.p,n.Fp,r),i=IC(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),SN("HashToScalar-");const Xl=BigInt(0),tu=BigInt(1),Dh=BigInt(2);function IZ(t){return Og(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function xZ(t){const e=IZ(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||zc,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?Dh**BigInt(254):Dh**BigInt(447),g=a?BigInt(8)*Dh**BigInt(251)-tu:BigInt(4)*Dh**BigInt(445)-tu,p=h+g+tu,y=L=>Tr(L,n),C=N(d);function N(L){return YE(y(L),l)}function E(L){const T=Un("u coordinate",L,l);return a&&(T[31]&=127),y(g0(T))}function A(L){return g0(s(Un("scalar",L,l)))}function _(L,T){const P=M(E(T),A(L));if(P===Xl)throw new Error("invalid private or public key received");return N(P)}function O(L){return _(L,C)}function $(L,T,P){const m=y(L*(T-P));return T=y(T-m),P=y(P+m),{x_2:T,x_3:P}}function M(L,T){uw("u",L,Xl,n),uw("scalar",T,h,p);const P=T,m=L;let b=tu,I=Xl,x=L,S=tu,R=Xl;for(let z=BigInt(u-1);z>=Xl;z--){const Y=P>>z&tu;R^=Y,{x_2:b,x_3:x}=$(R,b,x),{x_2:I,x_3:S}=$(R,I,S),R=Y;const G=b+I,K=y(G*G),ee=b-I,se=y(ee*ee),he=K-se,re=x+S,fe=x-S,De=y(fe*G),qe=y(re*ee),Me=De+qe,ut=De-qe;x=y(Me*Me),S=y(m*y(ut*ut)),b=y(K*se),I=y(he*(K+y(f*he)))}({x_2:b,x_3:x}=$(R,b,x)),{x_2:I,x_3:S}=$(R,I,S);const F=i(I);return y(b*F)}const D={secretKey:l,publicKey:l,seed:l},q=(L=c(l))=>(Us(L,D.seed),L);function j(L){const T=q(L);return{secretKey:T,publicKey:O(T)}}return{keygen:j,getSharedSecret:(L,T)=>_(L,T),getPublicKey:L=>O(L),scalarMult:_,scalarMultBase:O,utils:{randomSecretKey:q,randomPrivateKey:q},GuBytes:C.slice(),lengths:D}}const TZ=BigInt(1),xC=BigInt(2),NZ=BigInt(3),OZ=BigInt(5);BigInt(8);const n8=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),PZ={p:n8,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function RZ(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=n8,o=t*t%i*t%i,a=ys(o,xC,i)*o%i,c=ys(a,TZ,i)*t%i,u=ys(c,OZ,i)*c%i,l=ys(u,e,i)*u%i,d=ys(l,n,i)*l%i,f=ys(d,r,i)*d%i,h=ys(f,s,i)*f%i,g=ys(h,s,i)*f%i,p=ys(g,e,i)*u%i;return{pow_p_5_8:ys(p,xC,i)*t%i,b2:o}}function $Z(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const kZ=Ca(PZ.p,{isLE:!0}),lw=(()=>{const t=kZ.ORDER;return xZ({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=RZ(e);return Tr(ys(n,NZ,t)*r,t)},adjustScalarBytes:$Z})})(),TC=(t,e)=>(t+(t>=0?e:-e)/r8)/e;function DZ(t,e,n){const[[r,s],[i,o]]=e,a=TC(o*t,n),c=TC(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<ji,f=l<ji;d&&(u=-u),f&&(l=-l);const h=Qf(Math.ceil(HN(n)/2))+Pu;if(u<ji||u>=h||l<ji||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function dw(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function cy(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return p0(n.lowS,"lowS"),p0(n.prehash,"prehash"),n.format!==void 0&&dw(n.format),n}let UZ=class extends Error{constructor(e=""){super(e)}};const Di={Err:UZ,_tlv:{encode:(t,e)=>{const{Err:n}=Di;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=kh(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?kh(s.length/2|128):"";return kh(t)+i+s+e},decode(t,e){const{Err:n}=Di;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Di;if(t<ji)throw new e("integer: negative integers are not allowed");let n=kh(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Di;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ng(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Di,s=Un("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Di,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},ji=BigInt(0),Pu=BigInt(1),r8=BigInt(2),Uh=BigInt(3),BZ=BigInt(4);function bu(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Un("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function LZ(t,e={}){const n=SZ("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;Og(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=i8(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(L,T,P){const{x:m,y:b}=T.toAffine(),I=r.toBytes(m);if(p0(P,"isCompressed"),P){l();const x=!r.isOdd(b);return Lo(s8(x),I)}else return Lo(Uint8Array.of(4),I,r.toBytes(b))}function f(L){za(L,void 0,"Point");const{publicKey:T,publicKeyUncompressed:P}=u,m=L.length,b=L[0],I=L.subarray(1);if(m===T&&(b===2||b===3)){const x=r.fromBytes(I);if(!r.isValid(x))throw new Error("bad point: is not on curve, wrong x");const S=p(x);let R;try{R=r.sqrt(S)}catch(z){const Y=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}l();const F=r.isOdd(R);return(b&1)===1!==F&&(R=r.neg(R)),{x,y:R}}else if(m===P&&b===4){const x=r.BYTES,S=r.fromBytes(I.subarray(0,x)),R=r.fromBytes(I.subarray(x,x*2));if(!y(S,R))throw new Error("bad point: is not on curve");return{x:S,y:R}}else throw new Error(`bad point: got length ${m}, expected compressed=${T} or uncompressed=${P}`)}const h=e.toBytes||d,g=e.fromBytes||f;function p(L){const T=r.sqr(L),P=r.mul(T,L);return r.add(r.add(P,r.mul(L,i.a)),i.b)}function y(L,T){const P=r.sqr(T),m=p(L);return r.eql(P,m)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const C=r.mul(r.pow(i.a,Uh),BZ),N=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(C,N)))throw new Error("bad curve params: a or b");function E(L,T,P=!1){if(!r.isValid(T)||P&&r.is0(T))throw new Error(`bad point coordinate ${L}`);return T}function A(L){if(!(L instanceof D))throw new Error("ProjectivePoint expected")}function _(L){if(!c||!c.basises)throw new Error("no endo");return DZ(L,c.basises,s.ORDER)}const O=vC((L,T)=>{const{X:P,Y:m,Z:b}=L;if(r.eql(b,r.ONE))return{x:P,y:m};const I=L.is0();T==null&&(T=I?r.ONE:r.inv(b));const x=r.mul(P,T),S=r.mul(m,T),R=r.mul(b,T);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x,y:S}}),$=vC(L=>{if(L.is0()){if(e.allowInfinityPoint&&!r.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:T,y:P}=L.toAffine();if(!r.isValid(T)||!r.isValid(P))throw new Error("bad point: x or y not field elements");if(!y(T,P))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(L,T,P,m,b){return P=new D(r.mul(P.X,L),P.Y,P.Z),T=m0(m,T),P=m0(b,P),T.add(P)}class D{constructor(T,P,m){this.X=E("x",T),this.Y=E("y",P,!0),this.Z=E("z",m),Object.freeze(this)}static CURVE(){return i}static fromAffine(T){const{x:P,y:m}=T||{};if(!T||!r.isValid(P)||!r.isValid(m))throw new Error("invalid affine point");if(T instanceof D)throw new Error("projective point not allowed");return r.is0(P)&&r.is0(m)?D.ZERO:new D(P,m,r.ONE)}static fromBytes(T){const P=D.fromAffine(g(za(T,void 0,"point")));return P.assertValidity(),P}static fromHex(T){return D.fromBytes(Un("pointHex",T))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(T=8,P=!0){return j.createCache(this,T),P||this.multiply(Uh),this}assertValidity(){$(this)}hasEvenY(){const{y:T}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(T)}equals(T){A(T);const{X:P,Y:m,Z:b}=this,{X:I,Y:x,Z:S}=T,R=r.eql(r.mul(P,S),r.mul(I,b)),F=r.eql(r.mul(m,S),r.mul(x,b));return R&&F}negate(){return new D(this.X,r.neg(this.Y),this.Z)}double(){const{a:T,b:P}=i,m=r.mul(P,Uh),{X:b,Y:I,Z:x}=this;let S=r.ZERO,R=r.ZERO,F=r.ZERO,z=r.mul(b,b),Y=r.mul(I,I),G=r.mul(x,x),K=r.mul(b,I);return K=r.add(K,K),F=r.mul(b,x),F=r.add(F,F),S=r.mul(T,F),R=r.mul(m,G),R=r.add(S,R),S=r.sub(Y,R),R=r.add(Y,R),R=r.mul(S,R),S=r.mul(K,S),F=r.mul(m,F),G=r.mul(T,G),K=r.sub(z,G),K=r.mul(T,K),K=r.add(K,F),F=r.add(z,z),z=r.add(F,z),z=r.add(z,G),z=r.mul(z,K),R=r.add(R,z),G=r.mul(I,x),G=r.add(G,G),z=r.mul(G,K),S=r.sub(S,z),F=r.mul(G,Y),F=r.add(F,F),F=r.add(F,F),new D(S,R,F)}add(T){A(T);const{X:P,Y:m,Z:b}=this,{X:I,Y:x,Z:S}=T;let R=r.ZERO,F=r.ZERO,z=r.ZERO;const Y=i.a,G=r.mul(i.b,Uh);let K=r.mul(P,I),ee=r.mul(m,x),se=r.mul(b,S),he=r.add(P,m),re=r.add(I,x);he=r.mul(he,re),re=r.add(K,ee),he=r.sub(he,re),re=r.add(P,b);let fe=r.add(I,S);return re=r.mul(re,fe),fe=r.add(K,se),re=r.sub(re,fe),fe=r.add(m,b),R=r.add(x,S),fe=r.mul(fe,R),R=r.add(ee,se),fe=r.sub(fe,R),z=r.mul(Y,re),R=r.mul(G,se),z=r.add(R,z),R=r.sub(ee,z),z=r.add(ee,z),F=r.mul(R,z),ee=r.add(K,K),ee=r.add(ee,K),se=r.mul(Y,se),re=r.mul(G,re),ee=r.add(ee,se),se=r.sub(K,se),se=r.mul(Y,se),re=r.add(re,se),K=r.mul(ee,re),F=r.add(F,K),K=r.mul(fe,re),R=r.mul(he,R),R=r.sub(R,K),K=r.mul(he,ee),z=r.mul(fe,z),z=r.add(z,K),new D(R,F,z)}subtract(T){return this.add(T.negate())}is0(){return this.equals(D.ZERO)}multiply(T){const{endo:P}=e;if(!s.isValidNot0(T))throw new Error("invalid scalar: out of range");let m,b;const I=x=>j.cached(this,x,S=>sy(D,S));if(P){const{k1neg:x,k1:S,k2neg:R,k2:F}=_(T),{p:z,f:Y}=I(S),{p:G,f:K}=I(F);b=Y.add(K),m=M(P.beta,z,G,x,R)}else{const{p:x,f:S}=I(T);m=x,b=S}return sy(D,[m,b])[0]}multiplyUnsafe(T){const{endo:P}=e,m=this;if(!s.isValid(T))throw new Error("invalid scalar: out of range");if(T===ji||m.is0())return D.ZERO;if(T===Pu)return m;if(j.hasCache(this))return this.multiply(T);if(P){const{k1neg:b,k1:I,k2neg:x,k2:S}=_(T),{p1:R,p2:F}=CZ(D,m,I,S);return M(P.beta,R,F,b,x)}else return j.unsafe(m,T)}multiplyAndAddUnsafe(T,P,m){const b=this.multiplyUnsafe(P).add(T.multiplyUnsafe(m));return b.is0()?void 0:b}toAffine(T){return O(this,T)}isTorsionFree(){const{isTorsionFree:T}=e;return o===Pu?!0:T?T(D,this):j.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:T}=e;return o===Pu?this:T?T(D,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(T=!0){return p0(T,"isCompressed"),this.assertValidity(),h(D,this,T)}toHex(T=!0){return Ou(this.toBytes(T))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(T=!0){return this.toBytes(T)}_setWindowSize(T){this.precompute(T)}static normalizeZ(T){return sy(D,T)}static msm(T,P){return _Z(D,s,T,P)}static fromPrivateKey(T){return D.BASE.multiply(bu(s,T))}}D.BASE=new D(i.Gx,i.Gy,r.ONE),D.ZERO=new D(r.ZERO,r.ONE,r.ZERO),D.Fp=r,D.Fn=s;const q=s.BITS,j=new AZ(D,e.endo?Math.ceil(q/2):q);return D.BASE.precompute(8),D}function s8(t){return Uint8Array.of(t?2:3)}function i8(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function MZ(t,e={}){const{Fn:n}=t,r=e.randomBytes||zc,s=Object.assign(i8(t.Fp,n),{seed:QN(n.ORDER)});function i(f){try{return!!bu(n,f)}catch{return!1}}function o(f,h){const{publicKey:g,publicKeyUncompressed:p}=s;try{const y=f.length;return h===!0&&y!==g||h===!1&&y!==p?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return wZ(za(f,s.seed,"seed"),n.ORDER)}function c(f,h=!0){return t.BASE.multiply(bu(n,f)).toBytes(h)}function u(f){const h=a(f);return{secretKey:h,publicKey:c(h)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:h,publicKey:g,publicKeyUncompressed:p}=s;if(n.allowedLengths||h===g)return;const y=Un("key",f).length;return y===g||y===p}function d(f,h,g=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const p=bu(n,f);return t.fromHex(h).multiply(p).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>bu(n,f),precompute(f=8,h=t.BASE){return h.precompute(f,!1)}},lengths:s})}function FZ(t,e,n={}){_g(e),Og(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||zc,s=n.hmac||((P,...m)=>xg(e,P,Lo(...m))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h}=MZ(t,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function y(P){const m=a>>Pu;return P>m}function C(P,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${P}: out of range 1..Point.Fn.ORDER`);return m}function N(P,m){dw(m);const b=h.signature,I=m==="compact"?b:m==="recovered"?b+1:void 0;return za(P,I,`${m} signature`)}class E{constructor(m,b,I){this.r=C("r",m),this.s=C("s",b),I!=null&&(this.recovery=I),Object.freeze(this)}static fromBytes(m,b=p){N(m,b);let I;if(b==="der"){const{r:F,s:z}=Di.toSig(za(m));return new E(F,z)}b==="recovered"&&(I=m[0],b="compact",m=m.subarray(1));const x=o.BYTES,S=m.subarray(0,x),R=m.subarray(x,x*2);return new E(o.fromBytes(S),o.fromBytes(R),I)}static fromHex(m,b){return this.fromBytes(f0(m),b)}addRecoveryBit(m){return new E(this.r,this.s,m)}recoverPublicKey(m){const b=i.ORDER,{r:I,s:x,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*r8<b&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=S===2||S===3?I+a:I;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const F=i.toBytes(R),z=t.fromBytes(Lo(s8((S&1)===0),F)),Y=o.inv(R),G=_(Un("msgHash",m)),K=o.create(-G*Y),ee=o.create(x*Y),se=t.BASE.multiplyUnsafe(K).add(z.multiplyUnsafe(ee));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return y(this.s)}toBytes(m=p){if(dw(m),m==="der")return f0(Di.hexFromSig(this));const b=o.toBytes(this.r),I=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Lo(Uint8Array.of(this.recovery),b,I)}return Lo(b,I)}toHex(m){return Ou(this.toBytes(m))}assertValidity(){}static fromCompact(m){return E.fromBytes(Un("sig",m),"compact")}static fromDER(m){return E.fromBytes(Un("sig",m),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ou(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ou(this.toBytes("compact"))}}const A=n.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const m=Ng(P),b=P.length*8-c;return b>0?m>>BigInt(b):m},_=n.bits2int_modN||function(P){return o.create(A(P))},O=Qf(c);function $(P){return uw("num < 2^"+c,P,ji,O),o.toBytes(P)}function M(P,m){return za(P,void 0,"message"),m?za(e(P),void 0,"prehashed message"):P}function D(P,m,b){if(["recovered","canonical"].some(ee=>ee in b))throw new Error("sign() legacy options not supported");const{lowS:I,prehash:x,extraEntropy:S}=cy(b,g);P=M(P,x);const R=_(P),F=bu(o,m),z=[$(F),$(R)];if(S!=null&&S!==!1){const ee=S===!0?r(h.secretKey):S;z.push(Un("extraEntropy",ee))}const Y=Lo(...z),G=R;function K(ee){const se=A(ee);if(!o.isValidNot0(se))return;const he=o.inv(se),re=t.BASE.multiply(se).toAffine(),fe=o.create(re.x);if(fe===ji)return;const De=o.create(he*o.create(G+fe*F));if(De===ji)return;let qe=(re.x===fe?0:2)|Number(re.y&Pu),Me=De;return I&&y(De)&&(Me=o.neg(De),qe^=1),new E(fe,Me,qe)}return{seed:Y,k2sig:K}}function q(P,m,b={}){P=Un("message",P);const{seed:I,k2sig:x}=D(P,m,b);return lZ(e.outputLen,o.BYTES,s)(I,x)}function j(P){let m;const b=typeof P=="string"||Cg(P),I=!b&&P!==null&&typeof P=="object"&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!b&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(I)m=new E(P.r,P.s);else if(b){try{m=E.fromBytes(Un("sig",P),"der")}catch(x){if(!(x instanceof Di.Err))throw x}if(!m)try{m=E.fromBytes(Un("sig",P),"compact")}catch{return!1}}return m||!1}function L(P,m,b,I={}){const{lowS:x,prehash:S,format:R}=cy(I,g);if(b=Un("publicKey",b),m=M(Un("message",m),S),"strict"in I)throw new Error("options.strict was renamed to lowS");const F=R===void 0?j(P):E.fromBytes(Un("sig",P),R);if(F===!1)return!1;try{const z=t.fromBytes(b);if(x&&F.hasHighS())return!1;const{r:Y,s:G}=F,K=_(m),ee=o.inv(G),se=o.create(K*ee),he=o.create(Y*ee),re=t.BASE.multiplyUnsafe(se).add(z.multiplyUnsafe(he));return re.is0()?!1:o.create(re.x)===Y}catch{return!1}}function T(P,m,b={}){const{prehash:I}=cy(b,g);return m=M(m,I),E.fromBytes(P,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h,Point:t,sign:q,verify:L,recoverPublicKey:T,Signature:E,hash:e})}function jZ(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Ca(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function HZ(t){const{CURVE:e,curveOpts:n}=jZ(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function qZ(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,JN(n.Fn.ORDER,n.Fn.BITS))})}function zZ(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=HZ(t),i=LZ(e,n),o=FZ(i,r,s);return qZ(t,o)}function fw(t,e){const n=r=>zZ({...t,hash:r});return{...n(e),create:n}}const o8={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},a8={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},c8={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},WZ=Ca(o8.p),VZ=Ca(a8.p),KZ=Ca(c8.p),GZ=fw({...o8,Fp:WZ,lowS:!1},Ig);fw({...a8,Fp:VZ,lowS:!1},tY),fw({...c8,Fp:KZ,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},eY);const YZ=GZ,u8="base10",Kn="base16",ur="base64pad",Mo="base64url",eh="utf8",l8=0,Ki=1,th=2,ZZ=0,NC=1,xd=12,JE=32;function JZ(){const t=lw.utils.randomPrivateKey(),e=lw.getPublicKey(t);return{privateKey:mr(t,Kn),publicKey:mr(e,Kn)}}function hw(){const t=zc(JE);return mr(t,Kn)}function XZ(t,e){const n=lw.getSharedSecret(es(t,Kn),es(e,Kn)),r=cZ(Tg,n,void 0,void 0,JE);return mr(r,Kn)}function fp(t){const e=Tg(es(t,Kn));return mr(e,Kn)}function Jr(t){const e=Tg(es(t,eh));return mr(e,Kn)}function d8(t){return es(`${t}`,u8)}function xc(t){return Number(mr(t,u8))}function f8(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function h8(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function QZ(t){const e=d8(typeof t.type<"u"?t.type:l8);if(xc(e)===Ki&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?es(t.senderPublicKey,Kn):void 0,r=typeof t.iv<"u"?es(t.iv,Kn):zc(xd),s=es(t.symKey,Kn),i=MN(s,r).encrypt(es(t.message,eh)),o=p8({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Mo?f8(o):o}function eJ(t){const e=es(t.symKey,Kn),{sealed:n,iv:r}=mf({encoded:t.encoded,encoding:t.encoding}),s=MN(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return mr(s,eh)}function tJ(t,e){const n=d8(th),r=zc(xd),s=es(t,eh),i=p8({type:n,sealed:s,iv:r});return e===Mo?f8(i):i}function nJ(t,e){const{sealed:n}=mf({encoded:t,encoding:e});return mr(n,eh)}function p8(t){if(xc(t.type)===th)return mr(Id([t.type,t.sealed]),ur);if(xc(t.type)===Ki){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return mr(Id([t.type,t.senderPublicKey,t.iv,t.sealed]),ur)}return mr(Id([t.type,t.iv,t.sealed]),ur)}function mf(t){const e=(t.encoding||ur)===Mo?h8(t.encoded):t.encoded,n=es(e,ur),r=n.slice(ZZ,NC),s=NC;if(xc(r)===Ki){const c=s+JE,u=c+xd,l=n.slice(s,c),d=n.slice(c,u),f=n.slice(u);return{type:r,sealed:f,iv:d,senderPublicKey:l}}if(xc(r)===th){const c=n.slice(s),u=zc(xd);return{type:r,sealed:c,iv:u}}const i=s+xd,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function rJ(t,e){const n=mf({encoded:t,encoding:e==null?void 0:e.encoding});return g8({type:xc(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?mr(n.senderPublicKey,Kn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function g8(t){const e=(t==null?void 0:t.type)||l8;if(e===Ki){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function OC(t){return t.type===Ki&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function PC(t){return t.type===th}function sJ(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Id([new Uint8Array([4]),e,n])}function iJ(t,e){const[n,r,s]=t.split("."),i=Buffer.from(h8(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=Tg(c),l=sJ(e);if(!YZ.verify(Id([o,a]),u,l))throw new Error("Invalid signature");return zb(t).payload}const oJ="irn";function y0(t){return(t==null?void 0:t.relay)||{protocol:oJ}}function wu(t){const e=kK[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var aJ=Object.defineProperty,cJ=Object.defineProperties,uJ=Object.getOwnPropertyDescriptors,RC=Object.getOwnPropertySymbols,lJ=Object.prototype.hasOwnProperty,dJ=Object.prototype.propertyIsEnumerable,$C=(t,e,n)=>e in t?aJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uy=(t,e)=>{for(var n in e||(e={}))lJ.call(e,n)&&$C(t,n,e[n]);if(RC)for(var n of RC(e))dJ.call(e,n)&&$C(t,n,e[n]);return t},fJ=(t,e)=>cJ(t,uJ(e));function hJ(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function kC(t){if(!t.includes("wc:")){const u=wN(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:pJ(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:hJ(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function pJ(t){return t.startsWith("//")?t.substring(2):t}function gJ(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function DC(t){const e=new URLSearchParams,n=uy(uy(fJ(uy({},gJ(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&e.append(r,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Bh(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var mJ=Object.defineProperty,yJ=Object.defineProperties,bJ=Object.getOwnPropertyDescriptors,UC=Object.getOwnPropertySymbols,wJ=Object.prototype.hasOwnProperty,EJ=Object.prototype.propertyIsEnumerable,BC=(t,e,n)=>e in t?mJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vJ=(t,e)=>{for(var n in e||(e={}))wJ.call(e,n)&&BC(t,n,e[n]);if(UC)for(var n of UC(e))EJ.call(e,n)&&BC(t,n,e[n]);return t},AJ=(t,e)=>yJ(t,bJ(e));function Ul(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function CJ(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ul(n.accounts))}),e}function _J(t,e){const n=[];return Object.values(t).forEach(r=>{Ul(r.accounts).includes(e)&&n.push(...r.methods)}),n}function SJ(t,e){const n=[];return Object.values(t).forEach(r=>{Ul(r.accounts).includes(e)&&n.push(...r.events)}),n}function m8(t){return t.includes(":")}function IJ(t){return m8(t)?t.split(":")[0]:t}function LC(t){var e,n,r;const s={};if(!yf(t))return s;for(const[i,o]of Object.entries(t)){const a=m8(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=IJ(i);s[l]=AJ(vJ({},s[l]),{chains:ac(a,(e=s[l])==null?void 0:e.chains),methods:ac(c,(n=s[l])==null?void 0:n.methods),events:ac(u,(r=s[l])==null?void 0:r.events)})}return s}function xJ(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function MC(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=xJ(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ac(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function TJ(t,e){var n,r,s,i,o,a;const c=LC(t),u=LC(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:ac((n=c[f])==null?void 0:n.chains,(r=u[f])==null?void 0:r.chains),methods:ac((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:ac((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const NJ={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},OJ={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(t,e){const{message:n,code:r}=OJ[t];return{message:e?`${n} ${e}`:n,code:r}}function kt(t,e){const{message:n,code:r}=NJ[t];return{message:e?`${n} ${e}`:n,code:r}}function El(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function yf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Zt(t){return typeof t>"u"}function qt(t,e){return e&&Zt(t)?!0:typeof t=="string"&&!!t.trim().length}function XE(t,e){return e&&Zt(t)?!0:typeof t=="number"&&!isNaN(t)}function PJ(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return qa(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Ul(a),d=n[o];(!qa(pN(o,d),l)||!qa(d.methods,c)||!qa(d.events,u))&&(i=!1)}),i):!1}function b0(t){return qt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function RJ(t){if(qt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&b0(n)}}return!1}function $J(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(qt(t,!1)){if(e(t))return!0;const n=wN(t);return e(n)}}catch{}return!1}function kJ(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function DJ(t){return t==null?void 0:t.topic}function UJ(t,e){let n=null;return qt(t==null?void 0:t.publicKey,!1)||(n=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function FC(t){let e=!0;return El(t)?t.length&&(e=t.every(n=>qt(n,!1))):e=!1,e}function BJ(t,e,n){let r=null;return El(e)&&e.length?e.forEach(s=>{r||b0(s)||(r=kt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):b0(t)||(r=kt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function LJ(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=BJ(s,pN(s,i),`${e} ${n}`);o&&(r=o)}),r}function MJ(t,e){let n=null;return El(t)?t.forEach(r=>{n||RJ(r)||(n=kt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=kt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function FJ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=MJ(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function jJ(t,e){let n=null;return FC(t==null?void 0:t.methods)?FC(t==null?void 0:t.events)||(n=kt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=kt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function y8(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=jJ(r,`${e}, namespace`);s&&(n=s)}),n}function HJ(t,e,n){let r=null;if(t&&yf(t)){const s=y8(t,e);s&&(r=s);const i=LJ(t,e,n);i&&(r=i)}else r=de("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function ly(t,e){let n=null;if(t&&yf(t)){const r=y8(t,e);r&&(n=r);const s=FJ(t,e);s&&(n=s)}else n=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function b8(t){return qt(t.protocol,!0)}function qJ(t,e){let n=!1;return t?t&&El(t)&&t.length&&t.forEach(r=>{n=b8(r)}):n=!0,n}function zJ(t){return typeof t=="number"}function sr(t){return typeof t<"u"&&typeof t!==null}function WJ(t){return!(!t||typeof t!="object"||!t.code||!XE(t.code,!1)||!t.message||!qt(t.message,!1))}function VJ(t){return!(Zt(t)||!qt(t.method,!1))}function KJ(t){return!(Zt(t)||Zt(t.result)&&Zt(t.error)||!XE(t.id,!1)||!qt(t.jsonrpc,!1))}function GJ(t){return!(Zt(t)||!qt(t.name,!1))}function jC(t,e){return!(!b0(e)||!CJ(t).includes(e))}function YJ(t,e,n){return qt(n,!1)?_J(t,e).includes(n):!1}function ZJ(t,e,n){return qt(n,!1)?SJ(t,e).includes(n):!1}function HC(t,e,n){let r=null;const s=JJ(t),i=XJ(e),o=Object.keys(s),a=Object.keys(i),c=qC(Object.keys(t)),u=qC(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(r=de("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),qa(o,a)||(r=de("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=Ul(e[d].accounts);f.includes(d)||(r=de("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(qa(s[d].methods,i[d].methods)?qa(s[d].events,i[d].events)||(r=de("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=de("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function JJ(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function qC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function XJ(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ul(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function QJ(t,e){return XE(t,!1)&&t<=e.max&&t>=e.min}function zC(){const t=Jf();return new Promise(e=>{switch(t){case kr.browser:e(eX());break;case kr.reactNative:e(tX());break;case kr.node:e(nX());break;default:e(!0)}})}function eX(){return Dl()&&(navigator==null?void 0:navigator.onLine)}async function tX(){if(Aa()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function nX(){return!0}function rX(t){switch(Jf()){case kr.browser:sX(t);break;case kr.reactNative:iX(t);break}}function sX(t){!Aa()&&Dl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function iX(t){Aa()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function oX(){var t;return Dl()&&_c()?((t=_c())==null?void 0:t.visibilityState)==="visible":!0}const dy={};class Ql{static get(e){return dy[e]}static set(e,n){dy[e]=n}static delete(e){delete dy[e]}}function aX(t){const e=kl.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function cX({publicKey:t,signature:e,payload:n}){var r;const s=pw(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=dX(n.address),a=n.era==="00"?new Uint8Array([0]):pw(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${lX(n.tip)}`),d=hX(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),h=fX(f.length+1);return new Uint8Array([...h,i,...f])}function uX(t){const e=pw(t),n=VK.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function pw(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function lX(t){return t.startsWith("0x")?t.slice(2):t}function dX(t){const e=kl.decode(t)[0];return e===42?0:e===60?2:1}function fX(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function hX(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function pX(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=aX(t.transaction.address),r=cX({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return uX(s)}function w8({logger:t,name:e}){const n=typeof t=="string"?$f({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}const gX="PARSE_ERROR",mX="INVALID_REQUEST",yX="METHOD_NOT_FOUND",bX="INVALID_PARAMS",E8="INTERNAL_ERROR",QE="SERVER_ERROR",wX=[-32700,-32600,-32601,-32602,-32603],Td={[gX]:{code:-32700,message:"Parse error"},[mX]:{code:-32600,message:"Invalid Request"},[yX]:{code:-32601,message:"Method not found"},[bX]:{code:-32602,message:"Invalid params"},[E8]:{code:-32603,message:"Internal error"},[QE]:{code:-32e3,message:"Server error"}},v8=QE;function EX(t){return wX.includes(t)}function WC(t){return Object.keys(Td).includes(t)?Td[t]:Td[v8]}function vX(t){const e=Object.values(Td).find(n=>n.code===t);return e||Td[v8]}function A8(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var C8={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gw=function(t,e){return gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},gw(t,e)};function AX(t,e){gw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mw=function(){return mw=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mw.apply(this,arguments)};function CX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _X(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function SX(t,e){return function(n,r){e(n,r,t)}}function IX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xX(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function TX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function NX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function OX(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function yw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _8(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function PX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_8(arguments[e]));return t}function RX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function bf(t){return this instanceof bf?(this.v=t,this):new bf(t)}function $X(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(g,p){i.push([f,h,g,p])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof bf?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function kX(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:bf(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function DX(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yw=="function"?yw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function UX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function BX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function LX(t){return t&&t.__esModule?t:{default:t}}function MX(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function FX(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const jX=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mw},__asyncDelegator:kX,__asyncGenerator:$X,__asyncValues:DX,__await:bf,__awaiter:xX,__classPrivateFieldGet:MX,__classPrivateFieldSet:FX,__createBinding:NX,__decorate:_X,__exportStar:OX,__extends:AX,__generator:TX,__importDefault:LX,__importStar:BX,__makeTemplateObject:UX,__metadata:IX,__param:SX,__read:_8,__rest:CX,__spread:PX,__spreadArrays:RX,__values:yw},Symbol.toStringTag,{value:"Module"})),HX=sS(jX);var Ci={},VC;function qX(){if(VC)return Ci;VC=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.isBrowserCryptoAvailable=Ci.getSubtleCrypto=Ci.getBrowerCrypto=void 0;function t(){return(dr===null||dr===void 0?void 0:dr.crypto)||(dr===null||dr===void 0?void 0:dr.msCrypto)||{}}Ci.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ci.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ci.isBrowserCryptoAvailable=n,Ci}var _i={},KC;function zX(){if(KC)return _i;KC=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowser=_i.isNode=_i.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_i.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_i.isNode=e;function n(){return!t()&&!e()}return _i.isBrowser=n,_i}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=HX;e.__exportStar(qX(),t),e.__exportStar(zX(),t)})(C8);function Gs(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Qo(t=6){return BigInt(Gs(t))}function Ss(t,e,n){return{id:n||Gs(),jsonrpc:"2.0",method:t,params:e}}function wf(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Pg(t,e,n){return{id:t,jsonrpc:"2.0",error:WX(e)}}function WX(t,e){return typeof t>"u"?WC(E8):(typeof t=="string"&&(t=Object.assign(Object.assign({},WC(QE)),{message:t})),EX(t.code)&&(t=vX(t.code)),t)}let VX=class{},KX=class extends VX{constructor(){super()}},GX=class extends KX{constructor(e){super()}};const YX="^https?:",ZX="^wss?:";function JX(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function S8(t,e){const n=JX(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function GC(t){return S8(t,YX)}function YC(t){return S8(t,ZX)}function XX(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function I8(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ev(t){return I8(t)&&"method"in t}function Rg(t){return I8(t)&&(Ys(t)||Xr(t))}function Ys(t){return"result"in t}function Xr(t){return"error"in t}let tv=class extends GX{constructor(e){super(e),this.events=new us.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Ss(e.method,e.params||[],e.id||Qo().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Xr(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Rg(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const QX=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),eQ=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ZC=t=>t.split("?")[0],JC=10,tQ=QX();let nQ=class{constructor(e){if(this.url=e,this.events=new us.EventEmitter,this.registering=!1,!YC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ji(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!YC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=C8.isReactNative()?void 0:{rejectUnauthorized:!XX(e)},i=new tQ(e,[],s);eQ()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?hc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Pg(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return A8(e,ZC(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>JC&&this.events.setMaxListeners(JC)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ZC(this.url)}`));return this.events.emit("register_error",n),n}};var rQ={};const x8="wc",T8=2,bw="core",di=`${x8}@2:${bw}:`,sQ={logger:"error"},iQ={database:":memory:"},oQ="crypto",XC="client_ed25519_seed",aQ=ue.ONE_DAY,cQ="keychain",uQ="0.3",lQ="messages",dQ="0.3",fQ=ue.SIX_HOURS,hQ="publisher",N8="irn",pQ="error",O8="wss://relay.walletconnect.org",gQ="relayer",Ut={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},mQ="_subscription",jr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},yQ=.1,ww="2.22.3",At={link_mode:"link_mode",relay:"relay"},hp={inbound:"inbound",outbound:"outbound"},bQ="0.3",wQ="WALLETCONNECT_CLIENT_ID",QC="WALLETCONNECT_LINK_MODE_APPS",Ir={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},EQ="subscription",vQ="0.3",AQ="pairing",CQ="0.3",ed={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},La={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},fs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_Q="history",SQ="0.3",IQ="expirer",Vr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},xQ="0.3",TQ="verify-api",NQ="https://verify.walletconnect.com",P8="https://verify.walletconnect.org",Nd=P8,OQ=`${Nd}/v3`,PQ=[NQ,P8],RQ="echo",$Q="https://echo.walletconnect.com",Ks={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},xi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},hs={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Na={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Oa={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},td={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},kQ=.1,DQ="event-client",UQ=86400,BQ="https://pulse.walletconnect.org/batch";function LQ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,y=0,C=0,N=g.length;C!==N&&g[C]===0;)C++,p++;for(var E=(N-C)*l+1>>>0,A=new Uint8Array(E);C!==N;){for(var _=g[C],O=0,$=E-1;(_!==0||O<y)&&$!==-1;$--,O++)_+=256*A[$]>>>0,A[$]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=O,C++}for(var M=E-y;M!==E&&A[M]===0;)M++;for(var D=c.repeat(p);M<E;++M)D+=t.charAt(A[M]);return D}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var y=0,C=0;g[p]===c;)y++,p++;for(var N=(g.length-p)*u+1>>>0,E=new Uint8Array(N);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var _=0,O=N-1;(A!==0||_<C)&&O!==-1;O--,_++)A+=a*E[O]>>>0,E[O]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");C=_,p++}if(g[p]!==" "){for(var $=N-C;$!==N&&E[$]===0;)$++;for(var M=new Uint8Array(y+(N-$)),D=y;$!==N;)M[D++]=E[$++];return M}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var MQ=LQ,FQ=MQ;const R8=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jQ=t=>new TextEncoder().encode(t),HQ=t=>new TextDecoder().decode(t);class qQ{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zQ{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $8(this,e)}}class WQ{constructor(e){this.decoders=e}or(e){return $8(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $8=(t,e)=>new WQ({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class VQ{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new qQ(e,n,r),this.decoder=new zQ(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $g=({name:t,prefix:e,encode:n,decode:r})=>new VQ(t,e,n,r),nh=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=FQ(n,e);return $g({prefix:t,name:e,encode:r,decode:i=>R8(s(i))})},KQ=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},GQ=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},An=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>$g({prefix:e,name:t,encode(s){return GQ(s,r,n)},decode(s){return KQ(s,r,n,t)}}),YQ=$g({prefix:"\0",name:"identity",encode:t=>HQ(t),decode:t=>jQ(t)});var ZQ=Object.freeze({__proto__:null,identity:YQ});const JQ=An({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var XQ=Object.freeze({__proto__:null,base2:JQ});const QQ=An({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eee=Object.freeze({__proto__:null,base8:QQ});const tee=nh({prefix:"9",name:"base10",alphabet:"0123456789"});var nee=Object.freeze({__proto__:null,base10:tee});const ree=An({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),see=An({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iee=Object.freeze({__proto__:null,base16:ree,base16upper:see});const oee=An({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aee=An({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cee=An({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uee=An({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lee=An({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dee=An({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fee=An({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hee=An({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pee=An({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gee=Object.freeze({__proto__:null,base32:oee,base32upper:aee,base32pad:cee,base32padupper:uee,base32hex:lee,base32hexupper:dee,base32hexpad:fee,base32hexpadupper:hee,base32z:pee});const mee=nh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yee=nh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bee=Object.freeze({__proto__:null,base36:mee,base36upper:yee});const wee=nh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Eee=nh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vee=Object.freeze({__proto__:null,base58btc:wee,base58flickr:Eee});const Aee=An({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cee=An({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_ee=An({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),See=An({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Iee=Object.freeze({__proto__:null,base64:Aee,base64pad:Cee,base64url:_ee,base64urlpad:See});const k8=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xee=k8.reduce((t,e,n)=>(t[n]=e,t),[]),Tee=k8.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Nee(t){return t.reduce((e,n)=>(e+=xee[n],e),"")}function Oee(t){const e=[];for(const n of t){const r=Tee[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Pee=$g({prefix:"🚀",name:"base256emoji",encode:Nee,decode:Oee});var Ree=Object.freeze({__proto__:null,base256emoji:Pee}),$ee=D8,e_=128,kee=-128,Dee=Math.pow(2,31);function D8(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Dee;)e[n++]=t&255|e_,t/=128;for(;t&kee;)e[n++]=t&255|e_,t>>>=7;return e[n]=t|0,D8.bytes=n-r+1,e}var Uee=Ew,Bee=128,t_=127;function Ew(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Ew.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&t_)<<s:(o&t_)*Math.pow(2,s),s+=7}while(o>=Bee);return Ew.bytes=i-r,n}var Lee=Math.pow(2,7),Mee=Math.pow(2,14),Fee=Math.pow(2,21),jee=Math.pow(2,28),Hee=Math.pow(2,35),qee=Math.pow(2,42),zee=Math.pow(2,49),Wee=Math.pow(2,56),Vee=Math.pow(2,63),Kee=function(t){return t<Lee?1:t<Mee?2:t<Fee?3:t<jee?4:t<Hee?5:t<qee?6:t<zee?7:t<Wee?8:t<Vee?9:10},Gee={encode:$ee,decode:Uee,encodingLength:Kee},U8=Gee;const n_=(t,e,n=0)=>(U8.encode(t,e,n),e),r_=t=>U8.encodingLength(t),vw=(t,e)=>{const n=e.byteLength,r=r_(t),s=r+r_(n),i=new Uint8Array(s+n);return n_(t,i,0),n_(n,i,r),i.set(e,s),new Yee(t,n,e,i)};let Yee=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const B8=({name:t,code:e,encode:n})=>new Zee(t,e,n);class Zee{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?vw(this.code,n):n.then(r=>vw(this.code,r))}else throw Error("Unknown type, must be binary type")}}const L8=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jee=B8({name:"sha2-256",code:18,encode:L8("SHA-256")}),Xee=B8({name:"sha2-512",code:19,encode:L8("SHA-512")});var Qee=Object.freeze({__proto__:null,sha256:Jee,sha512:Xee});const M8=0,ete="identity",F8=R8,tte=t=>vw(M8,F8(t)),nte={code:M8,name:ete,encode:F8,digest:tte};var rte=Object.freeze({__proto__:null,identity:nte});new TextEncoder,new TextDecoder;const s_={...ZQ,...XQ,...eee,...nee,...iee,...gee,...bee,...vee,...Iee,...Ree};({...Qee,...rte});function j8(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ste(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?j8(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function H8(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const i_=H8("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),fy=H8("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ste(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),ite={utf8:i_,"utf-8":i_,hex:s_.base16,latin1:fy,ascii:fy,binary:fy,...s_};function ote(t,e="utf8"){const n=ite[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?j8(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var ate=Object.defineProperty,cte=(t,e,n)=>e in t?ate(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zs=(t,e,n)=>cte(t,typeof e!="symbol"?e+"":e,n);class ute{constructor(e,n){this.core=e,this.logger=n,zs(this,"keychain",new Map),zs(this,"name",cQ),zs(this,"version",uQ),zs(this,"initialized",!1),zs(this,"storagePrefix",di),zs(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),zs(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),zs(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),zs(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=de("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),zs(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=wr(n,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,tw(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?nw(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lte=Object.defineProperty,dte=(t,e,n)=>e in t?lte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xt=(t,e,n)=>dte(t,typeof e!="symbol"?e+"":e,n);class fte{constructor(e,n,r){this.core=e,this.logger=n,Xt(this,"name",oQ),Xt(this,"keychain"),Xt(this,"randomSessionIdentifier",hw()),Xt(this,"initialized",!1),Xt(this,"clientId"),Xt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Xt(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Xt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=EA(s),o=i3(i.publicKey);return this.clientId=o,o}),Xt(this,"generateKeyPair",()=>{this.isInitialized();const s=JZ();return this.setPrivateKey(s.publicKey,s.privateKey)}),Xt(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=EA(i),a=this.randomSessionIdentifier;return await Aq(a,s,aQ,o)}),Xt(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=XZ(a,i);return this.setSymKey(c,o)}),Xt(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||fp(s);return await this.keychain.set(o,s),o}),Xt(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Xt(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Xt(this,"encode",async(s,i,o)=>{this.isInitialized();const a=g8(o),c=Ji(i);if(PC(a))return tJ(c,o==null?void 0:o.encoding);if(OC(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return QZ({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Xt(this,"decode",async(s,i,o)=>{this.isInitialized();const a=rJ(i,o);if(PC(a)){const c=nJ(i,o==null?void 0:o.encoding);return hc(c)}if(OC(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=eJ({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return hc(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Xt(this,"getPayloadType",(s,i=ur)=>{const o=mf({encoded:s,encoding:i});return xc(o.type)}),Xt(this,"getPayloadSenderPublicKey",(s,i=ur)=>{const o=mf({encoded:s,encoding:i});return o.senderPublicKey?mr(o.senderPublicKey,Kn):void 0}),this.core=e,this.logger=wr(n,this.name),this.keychain=r||new ute(this.core,this.logger)}get context(){return br(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(XC)}catch{e=hw(),await this.keychain.set(XC,e)}return ote(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var hte=Object.defineProperty,pte=Object.defineProperties,gte=Object.getOwnPropertyDescriptors,o_=Object.getOwnPropertySymbols,mte=Object.prototype.hasOwnProperty,yte=Object.prototype.propertyIsEnumerable,Aw=(t,e,n)=>e in t?hte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bte=(t,e)=>{for(var n in e||(e={}))mte.call(e,n)&&Aw(t,n,e[n]);if(o_)for(var n of o_(e))yte.call(e,n)&&Aw(t,n,e[n]);return t},wte=(t,e)=>pte(t,gte(e)),Sr=(t,e,n)=>Aw(t,typeof e!="symbol"?e+"":e,n);class Ete extends EF{constructor(e,n){super(e,n),this.logger=e,this.core=n,Sr(this,"messages",new Map),Sr(this,"messagesWithoutClientAck",new Map),Sr(this,"name",lQ),Sr(this,"version",dQ),Sr(this,"initialized",!1),Sr(this,"storagePrefix",di),Sr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Sr(this,"set",async(r,s,i)=>{this.isInitialized();const o=Jr(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===hp.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,wte(bte({},c),{[o]:s}))}return await this.persist(),o}),Sr(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Sr(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Sr(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Jr(s);return typeof i[o]<"u"}),Sr(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Jr(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Sr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=wr(e,this.name),this.core=n}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,tw(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,tw(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?nw(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?nw(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vte=Object.defineProperty,Ate=Object.defineProperties,Cte=Object.getOwnPropertyDescriptors,a_=Object.getOwnPropertySymbols,_te=Object.prototype.hasOwnProperty,Ste=Object.prototype.propertyIsEnumerable,Cw=(t,e,n)=>e in t?vte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nu=(t,e)=>{for(var n in e||(e={}))_te.call(e,n)&&Cw(t,n,e[n]);if(a_)for(var n of a_(e))Ste.call(e,n)&&Cw(t,n,e[n]);return t},c_=(t,e)=>Ate(t,Cte(e)),Hr=(t,e,n)=>Cw(t,typeof e!="symbol"?e+"":e,n);class Ite extends vF{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Hr(this,"events",new us.EventEmitter),Hr(this,"name",hQ),Hr(this,"queue",new Map),Hr(this,"publishTimeout",ue.toMiliseconds(ue.ONE_MINUTE)),Hr(this,"initialPublishTimeout",ue.toMiliseconds(ue.ONE_SECOND*15)),Hr(this,"needsTransportRestart",!1),Hr(this,"publish",async(r,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=(i==null?void 0:i.ttl)||fQ,f=(i==null?void 0:i.prompt)||!1,h=(i==null?void 0:i.tag)||0,g=(i==null?void 0:i.id)||Qo().toString(),p=wu(y0().protocol),y={id:g,method:(i==null?void 0:i.publishMethod)||p.publish,params:nu({topic:r,message:s,ttl:d,prompt:f,tag:h,attestation:i==null?void 0:i.attestation},i==null?void 0:i.tvf)},C=`Failed to publish payload, please try again. id:${g} tag:${h}`;try{Zt((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),Zt((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const N=new Promise(async E=>{const A=({id:O})=>{var $;(($=y.id)==null?void 0:$.toString())===O.toString()&&(this.removeRequestFromQueue(O),this.relayer.events.removeListener(Ut.publish,A),E())};this.relayer.events.on(Ut.publish,A);const _=ti(new Promise((O,$)=>{this.rpcPublish(y,i).then(O).catch(M=>{this.logger.warn(M,M==null?void 0:M.message),$(M)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${h}`);try{await _,this.events.removeListener(Ut.publish,A)}catch(O){this.queue.set(g,{request:y,opts:i,attempt:1}),this.logger.warn(O,O==null?void 0:O.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:s,opts:i}}),await ti(N,this.publishTimeout,C)}catch(N){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(N),(l=i==null?void 0:i.internal)!=null&&l.throwOnFailedPublish)throw N}finally{this.queue.delete(g)}}),Hr(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:u,opts:l={}}=r,{attestation:d,tvf:f,publishMethod:h,prompt:g,tag:p,ttl:y=ue.FIVE_MINUTES}=l,C=l.id||Qo().toString(),N=wu(y0().protocol),E=h||N.publish,A={id:C,method:E,params:nu(c_(nu({},u),{ttl:y,prompt:g,tag:p,attestation:d}),f)},_=`Failed to publish custom payload, please try again. id:${C} tag:${p}`;try{Zt((s=A.params)==null?void 0:s.prompt)&&((i=A.params)==null||delete i.prompt),Zt((o=A.params)==null?void 0:o.tag)&&((a=A.params)==null||delete a.tag);const O=new Promise(async $=>{const M=({id:q})=>{var j;((j=A.id)==null?void 0:j.toString())===q.toString()&&(this.removeRequestFromQueue(q),this.relayer.events.removeListener(Ut.publish,M),$())};this.relayer.events.on(Ut.publish,M);const D=ti(new Promise((q,j)=>{this.rpcPublish(A,l).then(q).catch(L=>{this.logger.warn(L,L==null?void 0:L.message),j(L)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${E} id:${C} tag:${p}`);try{await D,this.events.removeListener(Ut.publish,M)}catch(q){this.queue.set(C,{request:A,opts:l,attempt:1}),this.logger.warn(q,q==null?void 0:q.message)}});this.logger.trace({type:"method",method:"publish",params:{id:C,payload:u,opts:l}}),await ti(O,this.publishTimeout,_)}catch(O){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(O),(c=l==null?void 0:l.internal)!=null&&c.throwOnFailedPublish)throw O}finally{this.queue.delete(C)}}),Hr(this,"on",(r,s)=>{this.events.on(r,s)}),Hr(this,"once",(r,s)=>{this.events.once(r,s)}),Hr(this,"off",(r,s)=>{this.events.off(r,s)}),Hr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=wr(n,this.name),this.registerEventListeners()}get context(){return br(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(Ut.publish,nu(nu({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,c_(nu({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(jc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ut.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ut.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var xte=Object.defineProperty,Tte=(t,e,n)=>e in t?xte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ru=(t,e,n)=>Tte(t,typeof e!="symbol"?e+"":e,n);class Nte{constructor(){ru(this,"map",new Map),ru(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ru(this,"get",e=>this.map.get(e)||[]),ru(this,"exists",(e,n)=>this.get(e).includes(n)),ru(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),ru(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Ote=Object.defineProperty,Pte=Object.defineProperties,Rte=Object.getOwnPropertyDescriptors,u_=Object.getOwnPropertySymbols,$te=Object.prototype.hasOwnProperty,kte=Object.prototype.propertyIsEnumerable,_w=(t,e,n)=>e in t?Ote(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nd=(t,e)=>{for(var n in e||(e={}))$te.call(e,n)&&_w(t,n,e[n]);if(u_)for(var n of u_(e))kte.call(e,n)&&_w(t,n,e[n]);return t},hy=(t,e)=>Pte(t,Rte(e)),bt=(t,e,n)=>_w(t,typeof e!="symbol"?e+"":e,n);class Dte extends _F{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,bt(this,"subscriptions",new Map),bt(this,"topicMap",new Nte),bt(this,"events",new us.EventEmitter),bt(this,"name",EQ),bt(this,"version",vQ),bt(this,"pending",new Map),bt(this,"cached",[]),bt(this,"initialized",!1),bt(this,"storagePrefix",di),bt(this,"subscribeTimeout",ue.toMiliseconds(ue.ONE_MINUTE)),bt(this,"initialSubscribeTimeout",ue.toMiliseconds(ue.ONE_SECOND*15)),bt(this,"clientId"),bt(this,"batchSubscribeTopicsLimit",500),bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),bt(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=y0(s),a={topic:r,relay:o,transportType:s==null?void 0:s.transportType};(i=s==null?void 0:s.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),bt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),bt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),bt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),bt(this,"on",(r,s)=>{this.events.on(r,s)}),bt(this,"once",(r,s)=>{this.events.once(r,s)}),bt(this,"off",(r,s)=>{this.events.off(r,s)}),bt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),bt(this,"start",async()=>{await this.onConnect()}),bt(this,"stop",async()=>{await this.onDisconnect()}),bt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),bt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),bt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(jc.pulse,async()=>{await this.checkPending()}),this.events.on(Ir.created,async r=>{const s=Ir.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ir.deleted,async r=>{const s=Ir.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=wr(n,this.name),this.clientId=""}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=y0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=kt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r==null?void 0:r.internal)!=null&&s.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===At.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:wu(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===At.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},ue.toMiliseconds(ue.ONE_SECOND)),o;const u=new Promise(async d=>{const f=h=>{h.topic===e&&(this.events.removeListener(Ir.created,f),d(h.id))};this.events.on(Ir.created,f);try{const h=await ti(new Promise((g,p)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y==null?void 0:y.message),p(y)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ir.created,f),d(h)}catch{}}),l=await ti(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ut.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:wu(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await ti(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ut.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:wu(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await ti(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ut.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:wu(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,hy(nd({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,nd({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,nd({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ir.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ir.deleted,hy(nd({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ir.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ir.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>hy(nd({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await wG(ue.toMiliseconds(ue.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Jr(e+await this.getClientId())}}var Ute=Object.defineProperty,l_=Object.getOwnPropertySymbols,Bte=Object.prototype.hasOwnProperty,Lte=Object.prototype.propertyIsEnumerable,Sw=(t,e,n)=>e in t?Ute(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d_=(t,e)=>{for(var n in e||(e={}))Bte.call(e,n)&&Sw(t,n,e[n]);if(l_)for(var n of l_(e))Lte.call(e,n)&&Sw(t,n,e[n]);return t},it=(t,e,n)=>Sw(t,typeof e!="symbol"?e+"":e,n);class Mte extends AF{constructor(e){var n;super(e),it(this,"protocol","wc"),it(this,"version",2),it(this,"core"),it(this,"logger"),it(this,"events",new us.EventEmitter),it(this,"provider"),it(this,"messages"),it(this,"subscriber"),it(this,"publisher"),it(this,"name",gQ),it(this,"transportExplicitlyClosed",!1),it(this,"initialized",!1),it(this,"connectionAttemptInProgress",!1),it(this,"relayUrl"),it(this,"projectId"),it(this,"packageName"),it(this,"bundleId"),it(this,"hasExperiencedNetworkDisruption",!1),it(this,"pingTimeout"),it(this,"heartBeatTimeout",ue.toMiliseconds(ue.THIRTY_SECONDS+ue.FIVE_SECONDS)),it(this,"reconnectTimeout"),it(this,"connectPromise"),it(this,"reconnectInProgress",!1),it(this,"requestsInFlight",[]),it(this,"connectTimeout",ue.toMiliseconds(ue.ONE_SECOND*15)),it(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const o=r.id||Qo().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),it(this,"resetPingTimeout",()=>{d0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),it(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),it(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Ut.connect)}),it(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),it(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Ut.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),it(this,"registerProviderListeners",()=>{this.provider.on(jr.payload,this.onPayloadHandler),this.provider.on(jr.connect,this.onConnectHandler),this.provider.on(jr.disconnect,this.onDisconnectHandler),this.provider.on(jr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=w8({logger:(n=e.logger)!=null?n:pQ,name:this.name}),this.messages=new Ete(this.logger,e.core),this.subscriber=new Dte(this,this.logger),this.publisher=new Ite(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||O8,rG()?this.packageName=XA():sG()&&(this.bundleId=XA()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return br(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:At.relay},hp.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Ir.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Ir.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,d_({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ti(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await zC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Gt(ue.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Ut.message,e),await this.recordMessageEvent(e,hp.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(jr.disconnect,i),await ti(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(jr.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(jr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(jr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ue.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(d0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new tv(new nQ(uG({sdkVersion:ww,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ev(e)){if(!e.method.endsWith(mQ))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:At.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(d_({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Rg(e)&&this.events.emit(Ut.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,hp.inbound),this.events.emit(Ut.message,e))}async acknowledgePayload(e){const n=wf(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(jr.payload,this.onPayloadHandler),this.provider.off(jr.connect,this.onConnectHandler),this.provider.off(jr.disconnect,this.onDisconnectHandler),this.provider.off(jr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await zC();rX(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(jc.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&oX())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ut.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ue.toMiliseconds(yQ)))))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Fte(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function f_(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function h_(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const jte="[object RegExp]",Hte="[object String]",qte="[object Number]",zte="[object Boolean]",p_="[object Arguments]",Wte="[object Symbol]",Vte="[object Date]",Kte="[object Map]",Gte="[object Set]",Yte="[object Array]",Zte="[object Function]",Jte="[object ArrayBuffer]",py="[object Object]",Xte="[object Error]",Qte="[object DataView]",ene="[object Uint8Array]",tne="[object Uint8ClampedArray]",nne="[object Uint16Array]",rne="[object Uint32Array]",sne="[object BigUint64Array]",ine="[object Int8Array]",one="[object Int16Array]",ane="[object Int32Array]",cne="[object BigInt64Array]",une="[object Float32Array]",lne="[object Float64Array]";function dne(){}function g_(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function fne(t,e,n){return bd(t,e,void 0,void 0,void 0,void 0,n)}function bd(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Od(t,e,i,o)}return Od(t,e,i,o)}function Od(t,e,n,r){if(Object.is(t,e))return!0;let s=h_(t),i=h_(e);if(s===p_&&(s=py),i===p_&&(i=py),s!==i)return!1;switch(s){case Hte:return t.toString()===e.toString();case qte:{const c=t.valueOf(),u=e.valueOf();return Fte(c,u)}case zte:case Vte:case Wte:return Object.is(t.valueOf(),e.valueOf());case jte:return t.source===e.source&&t.flags===e.flags;case Zte:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Kte:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!bd(u,e.get(c),c,t,e,n,r))return!1;return!0}case Gte:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(h=>bd(d,h,void 0,t,e,n,r));if(f===-1)return!1;u.splice(f,1)}return!0}case Yte:case ene:case tne:case nne:case rne:case sne:case ine:case one:case ane:case cne:case une:case lne:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!bd(t[c],e[c],c,t,e,n,r))return!1;return!0}case Jte:return t.byteLength!==e.byteLength?!1:Od(new Uint8Array(t),new Uint8Array(e),n,r);case Qte:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Od(new Uint8Array(t),new Uint8Array(e),n,r);case Xte:return t.name===e.name&&t.message===e.message;case py:{if(!(Od(t.constructor,e.constructor,n,r)||g_(t)&&g_(e)))return!1;const c=[...Object.keys(t),...f_(t)],u=[...Object.keys(e),...f_(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!bd(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function hne(t,e){return fne(t,e,dne)}var pne=Object.defineProperty,m_=Object.getOwnPropertySymbols,gne=Object.prototype.hasOwnProperty,mne=Object.prototype.propertyIsEnumerable,Iw=(t,e,n)=>e in t?pne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y_=(t,e)=>{for(var n in e||(e={}))gne.call(e,n)&&Iw(t,n,e[n]);if(m_)for(var n of m_(e))mne.call(e,n)&&Iw(t,n,e[n]);return t},nr=(t,e,n)=>Iw(t,typeof e!="symbol"?e+"":e,n);class Wc extends CF{constructor(e,n,r,s=di,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,nr(this,"map",new Map),nr(this,"version",bQ),nr(this,"cached",[]),nr(this,"initialized",!1),nr(this,"getKey"),nr(this,"storagePrefix",di),nr(this,"recentlyDeleted",[]),nr(this,"recentlyDeletedLimit",200),nr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Zt(o)?this.map.set(this.getKey(o),o):kJ(o)?this.map.set(o.id,o):DJ(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),nr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),nr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),nr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>hne(a[c],o[c]))):this.values)),nr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=y_(y_({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),nr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=wr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=de("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yne=Object.defineProperty,bne=(t,e,n)=>e in t?yne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Je=(t,e,n)=>bne(t,typeof e!="symbol"?e+"":e,n);let wne=class{constructor(e,n){this.core=e,this.logger=n,Je(this,"name",AQ),Je(this,"version",CQ),Je(this,"events",new bE),Je(this,"pairings"),Je(this,"initialized",!1),Je(this,"storagePrefix",di),Je(this,"ignoredPayloadTypes",[Ki]),Je(this,"registeredMethods",[]),Je(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Je(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Je(this,"create",async r=>{this.isInitialized();const s=hw(),i=await this.core.crypto.setSymKey(s),o=Gt(ue.FIVE_MINUTES),a={protocol:N8},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},u=DC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(La.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:i,uri:u}}),Je(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Ks.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=kC(r.uri);s.props.properties.topic=i,s.addTrace(Ks.pairing_uri_validation_success),s.addTrace(Ks.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(Ks.existing_pairing),l.active)throw s.setError(xi.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ks.pairing_not_expired)}const d=c||Gt(ue.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(Ks.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(La.create,f),s.addTrace(Ks.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Ks.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(xi.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(xi.subscribe_pairing_topic_failure),h}return s.addTrace(Ks.subscribe_pairing_topic_success),f}),Je(this,"activate",async({topic:r})=>{this.isInitialized();const s=Gt(ue.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Je(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Ua();this.events.once(dt("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),Je(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Je(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Je(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Je(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",kt("USER_DISCONNECTED")),await this.deletePairing(s))}),Je(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return DC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Je(this,"sendRequest",async(r,s,i)=>{const o=Ss(s,i),a=await this.core.crypto.encode(r,o),c=ed[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Je(this,"sendResult",async(r,s,i)=>{const o=wf(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ed[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Je(this,"sendError",async(r,s,i)=>{const o=Pg(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ed[c]?ed[c].res:ed.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Je(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,kt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Je(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>No(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Je(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Je(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Je(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(La.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Je(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ys(s)?this.events.emit(dt("pairing_ping",i),{}):Xr(s)&&this.events.emit(dt("pairing_ping",i),{error:s.error})},500)}),Je(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(La.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Je(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=kt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Je(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(kt("WC_METHOD_UNSUPPORTED",r))}),Je(this,"isValidPair",(r,s)=>{var i;if(!sr(r)){const{message:a}=de("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(xi.malformed_pairing_uri),new Error(a)}if(!$J(r.uri)){const{message:a}=de("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(xi.malformed_pairing_uri),new Error(a)}const o=kC(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(xi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=de("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(xi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ue.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(xi.pairing_expired);const{message:a}=de("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Je(this,"isValidPing",async r=>{if(!sr(r)){const{message:i}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Je(this,"isValidDisconnect",async r=>{if(!sr(r)){const{message:i}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Je(this,"isValidPairingTopic",async r=>{if(!qt(r,!1)){const{message:s}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(No(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=de("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=wr(n,this.name),this.pairings=new Wc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return br(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ut.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==At.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);ev(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Rg(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Vr.expired,async e=>{const{topic:n}=bN(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(La.expire,{topic:n}))})}};var Ene=Object.defineProperty,vne=(t,e,n)=>e in t?Ene(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hn=(t,e,n)=>vne(t,typeof e!="symbol"?e+"":e,n);let Ane=class extends wF{constructor(e,n){super(e,n),this.core=e,this.logger=n,hn(this,"records",new Map),hn(this,"events",new us.EventEmitter),hn(this,"name",_Q),hn(this,"version",SQ),hn(this,"cached",[]),hn(this,"initialized",!1),hn(this,"storagePrefix",di),hn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),hn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Gt(ue.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(fs.created,o)}),hn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Xr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(fs.updated,s))}),hn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),hn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(fs.deleted,i)}}),this.persist()}),hn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),hn(this,"on",(r,s)=>{this.events.on(r,s)}),hn(this,"once",(r,s)=>{this.events.once(r,s)}),hn(this,"off",(r,s)=>{this.events.off(r,s)}),hn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=wr(n,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ss(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(fs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(fs.created,e=>{const n=fs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(fs.updated,e=>{const n=fs.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(fs.deleted,e=>{const n=fs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(jc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ue.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(fs.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Cne=Object.defineProperty,_ne=(t,e,n)=>e in t?Cne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nn=(t,e,n)=>_ne(t,typeof e!="symbol"?e+"":e,n);let Sne=class extends SF{constructor(e,n){super(e,n),this.core=e,this.logger=n,Nn(this,"expirations",new Map),Nn(this,"events",new us.EventEmitter),Nn(this,"name",IQ),Nn(this,"version",xQ),Nn(this,"cached",[]),Nn(this,"initialized",!1),Nn(this,"storagePrefix",di),Nn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Nn(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Nn(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Vr.created,{target:i,expiration:o})}),Nn(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Nn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Vr.deleted,{target:s,expiration:i})}}),Nn(this,"on",(r,s)=>{this.events.on(r,s)}),Nn(this,"once",(r,s)=>{this.events.once(r,s)}),Nn(this,"off",(r,s)=>{this.events.off(r,s)}),Nn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=wr(n,this.name)}get context(){return br(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lG(e);if(typeof e=="number")return dG(e);const{message:n}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Vr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ue.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Vr.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(jc.pulse,()=>this.checkExpirations()),this.events.on(Vr.created,e=>{const n=Vr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Vr.expired,e=>{const n=Vr.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Vr.deleted,e=>{const n=Vr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Ine=Object.defineProperty,xne=(t,e,n)=>e in t?Ine(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ht=(t,e,n)=>xne(t,typeof e!="symbol"?e+"":e,n);let Tne=class extends IF{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Ht(this,"name",TQ),Ht(this,"abortController"),Ht(this,"isDevEnv"),Ht(this,"verifyUrlV3",OQ),Ht(this,"storagePrefix",di),Ht(this,"version",T8),Ht(this,"publicKey"),Ht(this,"fetchPromise"),Ht(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ue.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ht(this,"register",async s=>{if(!Dl()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=_c(),l=this.startAbortTimer(ue.ONE_SECOND*5),d=await new Promise((f,h)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(p),h("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const p=u.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",g,{signal:this.abortController.signal});const y=C=>{if(C.data&&typeof C.data=="string")try{const N=JSON.parse(C.data);if(N.type==="verify_attestation"){if(zb(N.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(p),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(N.attestation===null?"":N.attestation)}}catch(N){this.logger.warn(N)}};u.body.appendChild(p),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(u){this.logger.warn(u)}return""}),Ht(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(zb(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Ht(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(ue.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ht(this,"getVerifyUrl",s=>{let i=s||Nd;return PQ.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Nd}`),i=Nd),i}),Ht(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ue.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Ht(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Ht(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ht(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ht(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ht(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Ht(this,"validateAttestation",(s,i)=>{const o=iJ(s,i.publicKey),a={hasExpired:ue.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=wr(n,this.name),this.abortController=new AbortController,this.isDevEnv=jE(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return br(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ue.toMiliseconds(e))}};var Nne=Object.defineProperty,One=(t,e,n)=>e in t?Nne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b_=(t,e,n)=>One(t,typeof e!="symbol"?e+"":e,n);let Pne=class extends xF{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,b_(this,"context",RQ),b_(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${$Q}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=wr(n,this.context)}};var Rne=Object.defineProperty,w_=Object.getOwnPropertySymbols,$ne=Object.prototype.hasOwnProperty,kne=Object.prototype.propertyIsEnumerable,xw=(t,e,n)=>e in t?Rne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rd=(t,e)=>{for(var n in e||(e={}))$ne.call(e,n)&&xw(t,n,e[n]);if(w_)for(var n of w_(e))kne.call(e,n)&&xw(t,n,e[n]);return t},Qt=(t,e,n)=>xw(t,typeof e!="symbol"?e+"":e,n);let Dne=class extends TF{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Qt(this,"context",DQ),Qt(this,"storagePrefix",di),Qt(this,"storageVersion",kQ),Qt(this,"events",new Map),Qt(this,"shouldPersist",!1),Qt(this,"init",async()=>{if(!jE())try{const s={eventId:eC(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:mN(this.core.relayer.protocol,this.core.relayer.version,ww)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Qt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=eC(),l=this.core.projectId||"",d=Date.now(),f=rd({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Qt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return rd(rd({},a),this.setMethods(a.eventId))}),Qt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Qt(this,"setEventListeners",()=>{this.core.heartbeat.on(jc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ue.fromMiliseconds(Date.now())-ue.fromMiliseconds(s.timestamp)>UQ&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Qt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Qt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Qt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Qt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Qt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,rd(rd({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Qt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Qt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${BQ}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ww}${i}`,{method:"POST",body:JSON.stringify(s)})}),Qt(this,"getAppDomain",()=>gN().url),this.logger=wr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var Une=Object.defineProperty,E_=Object.getOwnPropertySymbols,Bne=Object.prototype.hasOwnProperty,Lne=Object.prototype.propertyIsEnumerable,Tw=(t,e,n)=>e in t?Une(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v_=(t,e)=>{for(var n in e||(e={}))Bne.call(e,n)&&Tw(t,n,e[n]);if(E_)for(var n of E_(e))Lne.call(e,n)&&Tw(t,n,e[n]);return t},Et=(t,e,n)=>Tw(t,typeof e!="symbol"?e+"":e,n);let Mne=class q8 extends gF{constructor(e){var n;super(e),Et(this,"protocol",x8),Et(this,"version",T8),Et(this,"name",bw),Et(this,"relayUrl"),Et(this,"projectId"),Et(this,"customStoragePrefix"),Et(this,"events",new us.EventEmitter),Et(this,"logger"),Et(this,"heartbeat"),Et(this,"relayer"),Et(this,"crypto"),Et(this,"storage"),Et(this,"history"),Et(this,"expirer"),Et(this,"pairing"),Et(this,"verify"),Et(this,"echoClient"),Et(this,"linkModeSupportedApps"),Et(this,"eventClient"),Et(this,"initialized",!1),Et(this,"logChunkController"),Et(this,"on",(a,c)=>this.events.on(a,c)),Et(this,"once",(a,c)=>this.events.once(a,c)),Et(this,"off",(a,c)=>this.events.off(a,c)),Et(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Et(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:At.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||O8,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=c1({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:sQ.logger,name:bw}),{logger:i,chunkLoggerController:o}=$f({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=wr(i,this.name),this.heartbeat=new R7,this.crypto=new fte(this,this.logger,e==null?void 0:e.keychain),this.history=new Ane(this,this.logger),this.expirer=new Sne(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new fF(v_(v_({},iQ),e==null?void 0:e.storageOptions)),this.relayer=new Mte({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new wne(this,this.logger),this.verify=new Tne(this,this.logger,this.storage),this.echoClient=new Pne(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Dne(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new q8(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(wQ,r),n}get context(){return br(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(QC,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(QC)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&rQ.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Fne=Mne,z8="wc",W8=2,V8="client",nv=`${z8}@${W8}:${V8}:`,gy={name:V8,logger:"error"},A_="WALLETCONNECT_DEEPLINK_CHOICE",jne="proposal",C_="Proposal expired",Hne="session",su=ue.SEVEN_DAYS,qne="engine",pn={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ue.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ue.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1119}}},my={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},Ws={idle:"IDLE",active:"ACTIVE"},zne={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Wne="request",Vne=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Kne="wc",Gne="auth",Yne="authKeys",Zne="pairingTopics",Jne="requests",kg=`${Kne}@${1.5}:${Gne}:`,pp=`${kg}:PUB_KEY`;var Xne=Object.defineProperty,Qne=Object.defineProperties,ere=Object.getOwnPropertyDescriptors,__=Object.getOwnPropertySymbols,tre=Object.prototype.hasOwnProperty,nre=Object.prototype.propertyIsEnumerable,Nw=(t,e,n)=>e in t?Xne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e)=>{for(var n in e||(e={}))tre.call(e,n)&&Nw(t,n,e[n]);if(__)for(var n of __(e))nre.call(e,n)&&Nw(t,n,e[n]);return t},On=(t,e)=>Qne(t,ere(e)),oe=(t,e,n)=>Nw(t,typeof e!="symbol"?e+"":e,n);class rre extends RF{constructor(e){super(e),oe(this,"name",qne),oe(this,"events",new bE),oe(this,"initialized",!1),oe(this,"requestQueue",{state:Ws.idle,queue:[]}),oe(this,"sessionRequestQueue",{state:Ws.idle,queue:[]}),oe(this,"emittedSessionRequests",new EG({limit:500})),oe(this,"requestQueueDelay",ue.ONE_SECOND),oe(this,"expectedPairingMethodMap",new Map),oe(this,"recentlyDeletedMap",new Map),oe(this,"recentlyDeletedLimit",200),oe(this,"relayMessageCache",[]),oe(this,"pendingSessions",new Map),oe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(pn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay)))}),oe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=On(ft({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=TJ(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=r;let l=s,d,f=!1;try{if(l){const O=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=O.active}}catch(O){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),O}if(!l||!f){const{topic:O,uri:$}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});l=O,d=$}if(!l){const{message:O}=de("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(O)}const h=await this.client.core.crypto.generateKeyPair(),g=pn.wc_sessionPropose.req.ttl||ue.FIVE_MINUTES,p=Gt(g),y=On(ft(ft({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:N8}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Gs()}),C=dt("session_connect",y.id),{reject:N,resolve:E,done:A}=Ua(g,C_),_=({id:O})=>{O===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(C,{error:{message:C_,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(C,({error:O,session:$})=>{this.client.events.off("proposal_expire",_),O?N(O):$&&E($)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:A}}),oe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),oe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[hs.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(D){throw o.setError(Na.no_internet_connection),D}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(D){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Na.proposal_not_found),D}try{await this.isValidApprove(n)}catch(D){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Na.session_approve_namespace_validation_failure),D}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:p,requiredNamespaces:y,optionalNamespaces:C}=h;let N=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});N||(N=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:hs.session_approve_started,properties:{topic:g,trace:[hs.session_approve_started,hs.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),A=p.publicKey,_=await this.client.core.crypto.generateSharedKey(E,A),O=ft(ft(ft({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:E,metadata:this.client.metadata},expiry:Gt(su)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),$=At.relay;N.addTrace(hs.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:$,internal:{skipSubscribe:!0}})}catch(D){throw N.setError(Na.subscribe_session_topic_failure),D}N.addTrace(hs.subscribe_session_topic_success);const M=On(ft({},O),{topic:_,requiredNamespaces:y,optionalNamespaces:C,pairingTopic:g,acknowledged:!1,self:O.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:E,transportType:At.relay});await this.client.session.set(_,M),N.addTrace(hs.store_session);try{await this.sendApproveSession({sessionTopic:_,proposal:h,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:E},sessionSettleRequest:O,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),N.addTrace(hs.session_approve_publish_success)}catch(D){throw this.client.logger.error(D),this.client.session.delete(_,kt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),D}return this.client.core.eventClient.deleteEvent({eventId:N.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(_,Gt(su)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),oe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:pn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),oe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Ua(),c=Gs(),u=Qo().toString(),l=this.client.session.get(r).namespaces;return this.events.once(dt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:l}),a(d)}),{acknowledged:i}}),oe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Gs(),{done:i,resolve:o,reject:a}=Ua();return this.events.once(dt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Gt(su)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),oe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=pn.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===At.relay&&await this.confirmOnlineStateOrThrow();const c=Gs(),u=Qo().toString(),{done:l,resolve:d,reject:f}=Ua(o,"Request expired. Please try again.");this.events.once(dt("session_request",c),({error:y,result:C})=>{y?f(y):d(C)});const h="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:h,params:{request:On(ft({},s),{expiryTimestamp:Gt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await l();const p={request:On(ft({},s),{expiryTimestamp:Gt(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:h,params:p,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,p)}).catch(C=>f(C)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var C;if(!((C=a.sessionConfig)!=null&&C.disableDeepLink)){const N=await gG(this.client.core.storage,A_);await fG({id:c,topic:i,wcDeepLink:N})}y()}),l()]).then(y=>y[2])}),oe(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:(n==null?void 0:n.topic)||((s=(r=n==null?void 0:n.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[hs.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError(Na.session_request_response_validation_failure),d}i.addTrace(hs.session_request_response_validation_success);const{topic:o,response:a}=n,{id:c}=a,u=this.client.session.get(o);u.transportType===At.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{i.addTrace(hs.session_request_response_publish_started),Ys(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):Xr(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError(Na.session_request_response_publish_failure),d}}),oe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Gs(),i=Qo().toString(),{done:o,resolve:a,reject:c}=Ua();this.events.once(dt("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),oe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Qo().toString(),a=Gs();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),oe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:kt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=de("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),oe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>PJ(r,n)))),oe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),oe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?At.link_mode:At.relay;o===At.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:h,nbf:g,methods:p=[],expiry:y}=n,C=[...n.resources||[]],{topic:N,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:N,uri:E}});const A=await this.client.core.crypto.generateKeyPair(),_=fp(A);if(await Promise.all([this.client.auth.authKeys.set(pp,{responseTopic:_,publicKey:A}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:N})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${N}`),p.length>0){const{namespace:S}=lp(a[0]);let R=PY(S,"request",p);dp(C)&&(R=$Y(R,C.pop())),C.push(R)}const O=y&&y>pn.wc_sessionAuthenticate.req.ttl?y:pn.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:g,resources:C},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Gt(O)},M={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},D={requiredNamespaces:{},optionalNamespaces:M,relays:[{protocol:"irn"}],pairingTopic:N,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Gt(pn.wc_sessionPropose.req.ttl),id:Gs()},{done:q,resolve:j,reject:L}=Ua(O,"Request expired"),T=Gs(),P=dt("session_connect",D.id),m=dt("session_request",T),b=async({error:S,session:R})=>{this.events.off(m,I),S?L(S):R&&j({session:R})},I=async S=>{var R,F,z;if(await this.deletePendingAuthRequest(T,{message:"fulfilled",code:0}),S.error){const re=kt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===re.code?void 0:(this.events.off(P,b),L(S.error.message))}await this.deleteProposal(D.id),this.events.off(P,b);const{cacaos:Y,responder:G}=S.result,K=[],ee=[];for(const re of Y){await dC({cacao:re,projectId:this.client.core.projectId})||(this.client.logger.error(re,"Signature verification failed"),L(kt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:fe}=re,De=dp(fe.resources),qe=[rw(fe.iss)],Me=h0(fe.iss);if(De){const ut=fC(De),un=hC(De);K.push(...ut),qe.push(...un)}for(const ut of qe)ee.push(`${ut}:${Me}`)}const se=await this.client.core.crypto.generateSharedKey(A,G.publicKey);let he;K.length>0&&(he={topic:se,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:G,controller:G.publicKey,expiry:Gt(su),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:N,namespaces:MC([...new Set(K)],[...new Set(ee)]),transportType:o},await this.client.core.relayer.subscribe(se,{transportType:o}),await this.client.session.set(se,he),N&&await this.client.core.pairing.updateMetadata({topic:N,metadata:G.metadata}),he=this.client.session.get(se)),(R=this.client.metadata.redirect)!=null&&R.linkMode&&(F=G.metadata.redirect)!=null&&F.linkMode&&(z=G.metadata.redirect)!=null&&z.universal&&r&&(this.client.core.addLinkModeSupportedApp(G.metadata.redirect.universal),this.client.session.update(se,{transportType:At.link_mode})),j({auths:Y,session:he})};this.events.once(P,b),this.events.once(m,I);let x;try{if(i){const S=Ss("wc_sessionAuthenticate",$,T);this.client.core.history.set(N,S);const R=await this.client.core.crypto.encode("",S,{type:th,encoding:Mo});x=Bh(r,N,R)}else await Promise.all([this.sendRequest({topic:N,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:T}),this.sendRequest({topic:N,method:"wc_sessionPropose",params:D,expiry:pn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})])}catch(S){throw this.events.off(P,b),this.events.off(m,I),S}return await this.setProposal(D.id,D),await this.setAuthRequest(T,{request:On(ft({},$),{verifyContext:{}}),pairingTopic:N,transportType:o}),{uri:x??E,response:q}}),oe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Oa.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(td.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(td.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||At.relay;a===At.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=fp(c),d={type:Ki,receiverPublicKey:c,senderPublicKey:u},f=[],h=[];for(const y of s){if(!await dC({cacao:y,projectId:this.client.core.projectId})){i.setError(td.invalid_cacao);const _=kt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Oa.cacaos_verified);const{p:C}=y,N=dp(C.resources),E=[rw(C.iss)],A=h0(C.iss);if(N){const _=fC(N),O=hC(N);f.push(..._),E.push(...O)}for(const _ of E)h.push(`${_}:${A}`)}const g=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Oa.create_authenticated_session_topic);let p;if((f==null?void 0:f.length)>0){p={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Gt(su),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:MC([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(Oa.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(y){throw i.setError(td.subscribe_authenticated_session_topic_failure),y}i.addTrace(Oa.subscribe_authenticated_session_topic_success),await this.client.session.set(g,p),i.addTrace(Oa.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Oa.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(td.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:p}}),oe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===At.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=fp(o),u={type:Ki,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:pn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),oe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return kN(r,s)}),oe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),oe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),oe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,kt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(A_).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,kt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ws.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),oe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Na.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,kt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),oe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Ws.idle,this.client.events.emit("session_request_expire",{id:n}))}),oe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),oe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),oe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Gt(pn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),oe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=At.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),oe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Gt(pn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),oe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=n,h=Ss(s,i,c);let g;const p=!!l;try{const N=p?Mo:ur;g=await this.client.core.crypto.encode(r,h,{encoding:N})}catch(N){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),N}let y;if(Vne.includes(s)){const N=Jr(JSON.stringify(h)),E=Jr(g);y=await this.client.core.verify.register({id:E,decryptedId:N})}const C=ft(ft({},pn[s].req),f);if(C.attestation=y,o&&(C.ttl=o),a&&(C.id=a),this.client.core.history.set(r,h),p){const N=Bh(l,r,g);await global.Linking.openURL(N,this.client.name)}else C.tvf=On(ft({},d),{correlationId:h.id}),u?(C.internal=On(ft({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,g,C)):this.client.core.relayer.publish(r,g,C).catch(N=>this.client.logger.error(N));return h.id}),oe(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=Ss("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:ur}),a=Jr(JSON.stringify(i)),c=Jr(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:On(ft({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),oe(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=wf(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:ur}),l=Ss("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(r,l,{encoding:ur});this.client.core.history.set(r,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:On(ft({},a),{publishMethod:"wc_approveSession"})})}),oe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=wf(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Mo:ur;l=await this.client.core.crypto.encode(s,u,On(ft({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,h;try{f=await this.client.core.history.get(s,r);const g=f.request;try{h=this.getTVFParams(r,g.params,i)}catch(p){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${p==null?void 0:p.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),g}if(d){const g=Bh(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,p=pn[g].res;p.tvf=On(ft({},h),{correlationId:r}),o?(p.internal=On(ft({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,p)):this.client.core.relayer.publish(s,l,p).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),oe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=Pg(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?Mo:ur;l=await this.client.core.crypto.encode(s,u,On(ft({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=Bh(c,s,l);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,g=a||pn[h].res;this.client.core.relayer.publish(s,l,g)}await this.client.core.history.resolve(u)}),oe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;No(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{No(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),oe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),oe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),oe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ws.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ws.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ws.idle}),oe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),oe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),oe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=de("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),oe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),oe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(xi.proposal_listener_not_found)),this.isValidConnect(ft({},s.params));const l=a.expiryTimestamp||Gt(pn.wc_sessionPropose.req.ttl),d=ft({id:c,pairingTopic:r,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Jr(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u==null||u.addTrace(Ks.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:pn.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),oe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ys(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Xr(r)){await this.deleteProposal(i);const o=dt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),oe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(h.proposalId),p=On(ft(ft(ft({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:At.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(dt("session_connect",h.proposalId),{session:p}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),oe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ys(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(dt("session_approve",s),{})):Xr(r)&&(await this.client.session.delete(n,kt("USER_DISCONNECTED")),this.events.emit(dt("session_approve",s),{error:r.error}))}),oe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Ql.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:kt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ft({topic:n},s));try{Ql.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Ql.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),oe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),oe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=dt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ys(r)?this.events.emit(dt("session_update",s),{}):Xr(r)&&this.events.emit(dt("session_update",s),{error:r.error})}),oe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Gt(su)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),oe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=dt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ys(r)?this.events.emit(dt("session_extend",s),{}):Xr(r)&&this.events.emit(dt("session_extend",s),{error:r.error})}),oe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),oe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=dt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ys(r)?this.events.emit(dt("session_ping",s),{}):Xr(r)&&this.events.emit(dt("session_ping",s),{error:r.error})},500)}),oe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(Ut.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:kt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),oe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:d,params:f}=a;try{await this.isValidRequest(ft({topic:o},f));const h=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Jr(JSON.stringify(Ss("wc_sessionRequest",f,d))),encryptedId:u,metadata:h.peer.metadata,transportType:l}),p={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(p),l===At.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),oe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=dt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ys(r)?this.events.emit(dt("session_request",s),{result:r.result}):Xr(r)&&this.events.emit(dt("session_request",s),{error:r.error})}),oe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Ql.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ft({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Ql.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),oe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ys(r)?this.events.emit(dt("session_request",s),{result:r.result}):Xr(r)&&this.events.emit(dt("session_request",s),{error:r.error})}),oe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Jr(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),h={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:c}),c===At.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),h={type:Ki,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:h,rpcOpts:pn.wc_sessionAuthenticate.autoReject,appLink:f})}}),oe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),oe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ws.idle,this.processSessionRequestQueue()},ue.toMiliseconds(this.requestQueueDelay))}),oe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=dt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(dt("session_request",i.request.id),{error:r})})}),oe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ws.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),oe(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Ws.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),oe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ss("wc_sessionPropose",On(ft({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),oe(this,"isValidConnect",async n=>{if(!sr(n)){const{message:u}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Zt(r)||await this.isValidPairingTopic(r),!qJ(c)){const{message:u}=de("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(s&&!Zt(s)&&yf(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!Zt(i)&&yf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!Zt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Zt(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),oe(this,"validateNamespaces",(n,r)=>{const s=HJ(n,"connect()",r);if(s)throw new Error(s.message)}),oe(this,"isValidApprove",async n=>{if(!sr(n))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=ly(s,"approve()");if(u)throw new Error(u.message);const l=HC(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!qt(i,!0)){const{message:d}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!Zt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Zt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),oe(this,"isValidReject",async n=>{if(!sr(n)){const{message:i}=de("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!WJ(s)){const{message:i}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),oe(this,"isValidSessionSettleRequest",n=>{if(!sr(n)){const{message:u}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!b8(r)){const{message:u}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=UJ(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ly(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(No(o)){const{message:u}=de("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),oe(this,"isValidUpdate",async n=>{if(!sr(n)){const{message:c}=de("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=ly(s,"update()");if(o)throw new Error(o.message);const a=HC(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),oe(this,"isValidExtend",async n=>{if(!sr(n)){const{message:s}=de("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),oe(this,"isValidRequest",async n=>{if(!sr(n)){const{message:c}=de("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!jC(a,i)){const{message:c}=de("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!VJ(s)){const{message:c}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!YJ(a,i,s.method)){const{message:c}=de("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!QJ(o,my)){const{message:c}=de("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${my.min} and ${my.max}`);throw new Error(c)}}),oe(this,"isValidRespond",async n=>{var r;if(!sr(n)){const{message:a}=de("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!KJ(i)){const{message:a}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=de("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),oe(this,"isValidPing",async n=>{if(!sr(n)){const{message:s}=de("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),oe(this,"isValidEmit",async n=>{if(!sr(n)){const{message:a}=de("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!jC(o,i)){const{message:a}=de("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!GJ(s)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!ZJ(o,i,s.name)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),oe(this,"isValidDisconnect",async n=>{if(!sr(n)){const{message:s}=de("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),oe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!qt(s,!1))throw new Error("uri is required parameter");if(!qt(i,!1))throw new Error("domain is required parameter");if(!qt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>lp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=lp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),oe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Nd,validation:"UNKNOWN",origin:o.url||""}};try{if(a===At.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),oe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=de("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),oe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),oe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),oe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=de("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),oe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,u,l,d,f;return!n||r!==At.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n==null?void 0:n.redirect)==null?void 0:l.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),oe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),oe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=QA(n,"topic")||"",s=decodeURIComponent(QA(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:At.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),oe(this,"registerLinkModeListeners",async()=>{var n;if(jE()||Aa()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),oe(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),oe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),oe(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=zne[i];if(i==="sui_signTransaction")return[pY(r.transactionBytes)];if(i==="near_signTransaction")return[aC(r)];if(i==="near_signTransactions")return r.map(c=>aC(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[pX({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return El(r)?r.map(c=>cC(c)):[cC(r)];if(i==="cosmos_signDirect")return[mY(r)];if(i==="wallet_sendCalls")return yY(r);if(typeof r=="string")return[r];const a=r[o.key];if(El(a))return i==="solana_signAllTransactions"?a.map(c=>hY(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ut.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(pp)?this.client.auth.authKeys.get(pp):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===At.link_mode?Mo:ur});ev(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Jr(r)})):Rg(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Vr.expired,async e=>{const{topic:n,id:r}=bN(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,de("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,de("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(La.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(La.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!qt(e,!1)){const{message:n}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(No(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!qt(e,!1)){const{message:n}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(No(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=de("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=de("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(qt(e,!1)){const{message:n}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!zJ(e)){const{message:n}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(No(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=de("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class sre extends Wc{constructor(e,n){super(e,n,jne,nv),this.core=e,this.logger=n}}let ire=class extends Wc{constructor(e,n){super(e,n,Hne,nv),this.core=e,this.logger=n}};class ore extends Wc{constructor(e,n){super(e,n,Wne,nv,r=>r.id),this.core=e,this.logger=n}}class are extends Wc{constructor(e,n){super(e,n,Yne,kg,()=>pp),this.core=e,this.logger=n}}class cre extends Wc{constructor(e,n){super(e,n,Zne,kg),this.core=e,this.logger=n}}class ure extends Wc{constructor(e,n){super(e,n,Jne,kg,r=>r.id),this.core=e,this.logger=n}}var lre=Object.defineProperty,dre=(t,e,n)=>e in t?lre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yy=(t,e,n)=>dre(t,typeof e!="symbol"?e+"":e,n);class fre{constructor(e,n){this.core=e,this.logger=n,yy(this,"authKeys"),yy(this,"pairingTopics"),yy(this,"requests"),this.authKeys=new are(this.core,this.logger),this.pairingTopics=new cre(this.core,this.logger),this.requests=new ure(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var hre=Object.defineProperty,pre=(t,e,n)=>e in t?hre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xe=(t,e,n)=>pre(t,typeof e!="symbol"?e+"":e,n);let gre=class K8 extends PF{constructor(e){super(e),Xe(this,"protocol",z8),Xe(this,"version",W8),Xe(this,"name",gy.name),Xe(this,"metadata"),Xe(this,"core"),Xe(this,"logger"),Xe(this,"events",new us.EventEmitter),Xe(this,"engine"),Xe(this,"session"),Xe(this,"proposal"),Xe(this,"pendingRequest"),Xe(this,"auth"),Xe(this,"signConfig"),Xe(this,"on",(r,s)=>this.events.on(r,s)),Xe(this,"once",(r,s)=>this.events.once(r,s)),Xe(this,"off",(r,s)=>this.events.off(r,s)),Xe(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Xe(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Xe(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Xe(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Xe(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Xe(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||gy.name,this.metadata=oG(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=w8({logger:(e==null?void 0:e.logger)||gy.logger,name:this.name});this.logger=n,this.core=(e==null?void 0:e.core)||new Fne(e),this.session=new ire(this.core,this.logger),this.proposal=new sre(this.core,this.logger),this.pendingRequest=new ore(this.core,this.logger),this.engine=new rre(this),this.auth=new fre(this.core,this.logger)}static async init(e){const n=new K8(e);return await n.initialize(),n}get context(){return br(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const mre=gre,yre=":";function Pd(t){const[e,n]=t.split(yre);return{namespace:e,reference:n}}function bre(t,e){return ue.fromMiliseconds(Date.now()+ue.toMiliseconds(t))}function G8(t){return Date.now()>=ue.toMiliseconds(t)}function by(t=[],e=[]){return[...new Set([...t,...e])]}const Lh=BigInt(2**32-1),S_=BigInt(32);function Y8(t,e=!1){return e?{h:Number(t&Lh),l:Number(t>>S_&Lh)}:{h:Number(t>>S_&Lh)|0,l:Number(t&Lh)|0}}function Z8(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Y8(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const I_=(t,e,n)=>t>>>n,x_=(t,e,n)=>t<<32-n|e>>>n,$o=(t,e,n)=>t>>>n|e<<32-n,ko=(t,e,n)=>t<<32-n|e>>>n,wd=(t,e,n)=>t<<64-n|e>>>n-32,Ed=(t,e,n)=>t>>>n-32|e<<64-n,wre=(t,e)=>e,Ere=(t,e)=>t,vre=(t,e,n)=>t<<n|e>>>32-n,Are=(t,e,n)=>e<<n|t>>>32-n,Cre=(t,e,n)=>e<<n-32|t>>>64-n,_re=(t,e,n)=>t<<n-32|e>>>64-n;function Es(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const rv=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),sv=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Sre=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ire=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,xre=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Tre=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,iu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Dg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ba(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Bs(t,...e){if(!Dg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function J8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ba(t.outputLen),ba(t.blockLen)}function wa(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iv(t,e){Bs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ef(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ls(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function wy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Vs(t,e){return t<<32-e|t>>>e}const X8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Q8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Ti=X8?t=>t:t=>Q8(t);function Nre(t){for(let e=0;e<t.length;e++)t[e]=Q8(t[e]);return t}const Do=X8?t=>t:Nre,eO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ore=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ru(t){if(Bs(t),eO)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Ore[t[n]];return e}const Si={_0:48,_9:57,A:65,F:70,a:97,f:102};function T_(t){if(t>=Si._0&&t<=Si._9)return t-Si._0;if(t>=Si.A&&t<=Si.F)return t-(Si.A-10);if(t>=Si.a&&t<=Si.f)return t-(Si.a-10)}function w0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(eO)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=T_(t.charCodeAt(i)),a=T_(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function tO(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Gi(t){return typeof t=="string"&&(t=tO(t)),Bs(t),t}function Fo(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Bs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class Ug{}function rh(t){const e=r=>t().update(Gi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Pre(t){const e=(r,s)=>t(s).update(Gi(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function ov(t=32){if(iu&&typeof iu.getRandomValues=="function")return iu.getRandomValues(new Uint8Array(t));if(iu&&typeof iu.randomBytes=="function")return Uint8Array.from(iu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Rre=BigInt(0),sd=BigInt(1),$re=BigInt(2),kre=BigInt(7),Dre=BigInt(256),Ure=BigInt(113),nO=[],rO=[],sO=[];for(let t=0,e=sd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],nO.push(2*(5*r+n)),rO.push((t+1)*(t+2)/2%64);let s=Rre;for(let i=0;i<7;i++)e=(e<<sd^(e>>kre)*Ure)%Dre,e&$re&&(s^=sd<<(sd<<BigInt(i))-sd);sO.push(s)}const iO=Z8(sO,!0),Bre=iO[0],Lre=iO[1],N_=(t,e,n)=>n>32?Cre(t,e,n):vre(t,e,n),O_=(t,e,n)=>n>32?_re(t,e,n):Are(t,e,n);function Mre(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=N_(u,l,1)^n[a],f=O_(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=rO[o],c=N_(s,i,a),u=O_(s,i,a),l=nO[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Bre[r],t[1]^=Lre[r]}Ls(n)}class av extends Ug{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ba(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ef(this.state)}clone(){return this._cloneInto()}keccak(){Do(this.state32),Mre(this.state32,this.rounds),Do(this.state32),this.posOut=0,this.pos=0}update(e){wa(this),e=Gi(e),Bs(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){wa(this,!1),Bs(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ba(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(iv(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ls(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new av(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Fre=(t,e,n)=>rh(()=>new av(e,t,n));Fre(1,136,256/8);function jre(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function Hre(t,e,n){return t&e^~t&n}function qre(t,e,n){return t&e^t&n^e&n}class oO extends Ug{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=wy(this.buffer)}update(e){wa(this),e=Gi(e),Bs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=wy(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wa(this),iv(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ls(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;jre(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=wy(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const vo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Rn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),zre=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ao=new Uint32Array(64);class Wre extends oO{constructor(e=32){super(64,e,8,!1),this.A=vo[0]|0,this.B=vo[1]|0,this.C=vo[2]|0,this.D=vo[3]|0,this.E=vo[4]|0,this.F=vo[5]|0,this.G=vo[6]|0,this.H=vo[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ao[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ao[d-15],h=Ao[d-2],g=Vs(f,7)^Vs(f,18)^f>>>3,p=Vs(h,17)^Vs(h,19)^h>>>10;Ao[d]=p+Ao[d-7]+g+Ao[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Vs(a,6)^Vs(a,11)^Vs(a,25),h=l+f+Hre(a,c,u)+zre[d]+Ao[d]|0,g=(Vs(r,2)^Vs(r,13)^Vs(r,22))+qre(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Ls(Ao)}destroy(){this.set(0,0,0,0,0,0,0,0),Ls(this.buffer)}}const aO=Z8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Vre=aO[0],Kre=aO[1],Co=new Uint32Array(80),_o=new Uint32Array(80);class cv extends oO{constructor(e=64){super(128,e,16,!1),this.Ah=Rn[0]|0,this.Al=Rn[1]|0,this.Bh=Rn[2]|0,this.Bl=Rn[3]|0,this.Ch=Rn[4]|0,this.Cl=Rn[5]|0,this.Dh=Rn[6]|0,this.Dl=Rn[7]|0,this.Eh=Rn[8]|0,this.El=Rn[9]|0,this.Fh=Rn[10]|0,this.Fl=Rn[11]|0,this.Gh=Rn[12]|0,this.Gl=Rn[13]|0,this.Hh=Rn[14]|0,this.Hl=Rn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=y|0}process(e,n){for(let E=0;E<16;E++,n+=4)Co[E]=e.getUint32(n),_o[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const A=Co[E-15]|0,_=_o[E-15]|0,O=$o(A,_,1)^$o(A,_,8)^I_(A,_,7),$=ko(A,_,1)^ko(A,_,8)^x_(A,_,7),M=Co[E-2]|0,D=_o[E-2]|0,q=$o(M,D,19)^wd(M,D,61)^I_(M,D,6),j=ko(M,D,19)^Ed(M,D,61)^x_(M,D,6),L=Sre($,j,_o[E-7],_o[E-16]),T=Ire(L,O,q,Co[E-7],Co[E-16]);Co[E]=T|0,_o[E]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:y,Hh:C,Hl:N}=this;for(let E=0;E<80;E++){const A=$o(d,f,14)^$o(d,f,18)^wd(d,f,41),_=ko(d,f,14)^ko(d,f,18)^Ed(d,f,41),O=d&h^~d&p,$=f&g^~f&y,M=xre(N,_,$,Kre[E],_o[E]),D=Tre(M,C,A,O,Vre[E],Co[E]),q=M|0,j=$o(r,s,28)^wd(r,s,34)^wd(r,s,39),L=ko(r,s,28)^Ed(r,s,34)^Ed(r,s,39),T=r&i^r&a^i&a,P=s&o^s&c^o&c;C=p|0,N=y|0,p=h|0,y=g|0,h=d|0,g=f|0,{h:d,l:f}=Es(u|0,l|0,D|0,q|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const m=rv(q,L,P);r=sv(m,D,j,T),s=m|0}({h:r,l:s}=Es(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Es(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Es(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Es(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=Es(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=Es(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:y}=Es(this.Gh|0,this.Gl|0,p|0,y|0),{h:C,l:N}=Es(this.Hh|0,this.Hl|0,C|0,N|0),this.set(r,s,i,o,a,c,u,l,d,f,h,g,p,y,C,N)}roundClean(){Ls(Co,_o)}destroy(){Ls(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Gre extends cv{constructor(){super(48),this.Ah=Pn[0]|0,this.Al=Pn[1]|0,this.Bh=Pn[2]|0,this.Bl=Pn[3]|0,this.Ch=Pn[4]|0,this.Cl=Pn[5]|0,this.Dh=Pn[6]|0,this.Dl=Pn[7]|0,this.Eh=Pn[8]|0,this.El=Pn[9]|0,this.Fh=Pn[10]|0,this.Fl=Pn[11]|0,this.Gh=Pn[12]|0,this.Gl=Pn[13]|0,this.Hh=Pn[14]|0,this.Hl=Pn[15]|0}}const $n=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Yre extends cv{constructor(){super(32),this.Ah=$n[0]|0,this.Al=$n[1]|0,this.Bh=$n[2]|0,this.Bl=$n[3]|0,this.Ch=$n[4]|0,this.Cl=$n[5]|0,this.Dh=$n[6]|0,this.Dl=$n[7]|0,this.Eh=$n[8]|0,this.El=$n[9]|0,this.Fh=$n[10]|0,this.Fl=$n[11]|0,this.Gh=$n[12]|0,this.Gl=$n[13]|0,this.Hh=$n[14]|0,this.Hl=$n[15]|0}}const Zre=rh(()=>new Wre),Jre=rh(()=>new cv),Xre=rh(()=>new Gre);rh(()=>new Yre);const Qre=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Kt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ye=new Uint32Array(32);function So(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ye[2*t],u=ye[2*t+1],l=ye[2*e],d=ye[2*e+1],f=ye[2*n],h=ye[2*n+1],g=ye[2*r],p=ye[2*r+1],y=rv(c,l,o);u=sv(y,u,d,a),c=y|0,{Dh:p,Dl:g}={Dh:p^u,Dl:g^c},{Dh:p,Dl:g}={Dh:wre(p,g),Dl:Ere(p)},{h,l:f}=Es(h,f,p,g),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:$o(d,l,24),Bl:ko(d,l,24)},ye[2*t]=c,ye[2*t+1]=u,ye[2*e]=l,ye[2*e+1]=d,ye[2*n]=f,ye[2*n+1]=h,ye[2*r]=g,ye[2*r+1]=p}function Io(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ye[2*t],u=ye[2*t+1],l=ye[2*e],d=ye[2*e+1],f=ye[2*n],h=ye[2*n+1],g=ye[2*r],p=ye[2*r+1],y=rv(c,l,o);u=sv(y,u,d,a),c=y|0,{Dh:p,Dl:g}={Dh:p^u,Dl:g^c},{Dh:p,Dl:g}={Dh:$o(p,g,16),Dl:ko(p,g,16)},{h,l:f}=Es(h,f,p,g),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:wd(d,l,63),Bl:Ed(d,l,63)},ye[2*t]=c,ye[2*t+1]=u,ye[2*e]=l,ye[2*e+1]=d,ye[2*n]=f,ye[2*n+1]=h,ye[2*r]=g,ye[2*r+1]=p}function ese(t,e={},n,r,s){if(ba(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class tse extends Ug{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ba(e),ba(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Ef(this.buffer)}update(e){wa(this),e=Gi(e),Bs(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Do(s),this.compress(s,0,!1),Do(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));Do(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);Do(d);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){wa(this),iv(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ls(this.buffer.subarray(n)),Do(r),this.compress(r,0,!0),Do(r);const s=Ef(e);this.get().forEach((i,o)=>s[o]=Ti(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class nse extends tse{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Kt[0]|0,this.v0h=Kt[1]|0,this.v1l=Kt[2]|0,this.v1h=Kt[3]|0,this.v2l=Kt[4]|0,this.v2h=Kt[5]|0,this.v3l=Kt[6]|0,this.v3h=Kt[7]|0,this.v4l=Kt[8]|0,this.v4h=Kt[9]|0,this.v5l=Kt[10]|0,this.v5h=Kt[11]|0,this.v6l=Kt[12]|0,this.v6h=Kt[13]|0,this.v7l=Kt[14]|0,this.v7h=Kt[15]|0,ese(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Gi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Gi(i);const a=Ef(i);this.v4l^=Ti(a[0]),this.v4h^=Ti(a[1]),this.v5l^=Ti(a[2]),this.v5h^=Ti(a[3])}if(s!==void 0){s=Gi(s);const a=Ef(s);this.v6l^=Ti(a[0]),this.v6h^=Ti(a[1]),this.v7l^=Ti(a[2]),this.v7h^=Ti(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:h,v6h:g,v7l:p,v7h:y}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,g,p,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=g|0,this.v7l=p|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,u)=>ye[u]=c),ye.set(Kt,16);let{h:s,l:i}=Y8(BigInt(this.length));ye[24]=Kt[8]^i,ye[25]=Kt[9]^s,r&&(ye[28]=~ye[28],ye[29]=~ye[29]);let o=0;const a=Qre;for(let c=0;c<12;c++)So(0,4,8,12,e,n+2*a[o++]),Io(0,4,8,12,e,n+2*a[o++]),So(1,5,9,13,e,n+2*a[o++]),Io(1,5,9,13,e,n+2*a[o++]),So(2,6,10,14,e,n+2*a[o++]),Io(2,6,10,14,e,n+2*a[o++]),So(3,7,11,15,e,n+2*a[o++]),Io(3,7,11,15,e,n+2*a[o++]),So(0,5,10,15,e,n+2*a[o++]),Io(0,5,10,15,e,n+2*a[o++]),So(1,6,11,12,e,n+2*a[o++]),Io(1,6,11,12,e,n+2*a[o++]),So(2,7,8,13,e,n+2*a[o++]),Io(2,7,8,13,e,n+2*a[o++]),So(3,4,9,14,e,n+2*a[o++]),Io(3,4,9,14,e,n+2*a[o++]);this.v0l^=ye[0]^ye[16],this.v0h^=ye[1]^ye[17],this.v1l^=ye[2]^ye[18],this.v1h^=ye[3]^ye[19],this.v2l^=ye[4]^ye[20],this.v2h^=ye[5]^ye[21],this.v3l^=ye[6]^ye[22],this.v3h^=ye[7]^ye[23],this.v4l^=ye[8]^ye[24],this.v4h^=ye[9]^ye[25],this.v5l^=ye[10]^ye[26],this.v5h^=ye[11]^ye[27],this.v6l^=ye[12]^ye[28],this.v6h^=ye[13]^ye[29],this.v7l^=ye[14]^ye[30],this.v7h^=ye[15]^ye[31],Ls(ye)}destroy(){this.destroyed=!0,Ls(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Pre(t=>new nse(t));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function cO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ow(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Ey(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lr(t,...e){if(!cO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function P_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rse(t,e){lr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ra(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function vl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function sse(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const ise=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ose(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Pw(t){if(typeof t=="string")t=ose(t);else if(cO(t))t=Rw(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function ase(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function cse(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const use=(t,e)=>{function n(r,...s){if(lr(r),!ise)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?lr(u):lr(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&lr(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");lr(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,lr(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(lr(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function R_(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!dse(e))throw new Error("invalid output, must be aligned");return e}function $_(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function lse(t,e,n){Ow(n);const r=new Uint8Array(16),s=sse(r);return $_(s,0,BigInt(e),n),$_(s,8,BigInt(t),n),r}function dse(t){return t.byteOffset%4===0}function Rw(t){return Uint8Array.from(t)}const uO=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),fse=uO("expand 16-byte k"),hse=uO("expand 32-byte k"),pse=ra(fse),gse=ra(hse);function ot(t,e){return t<<e|t>>>32-e}function $w(t){return t.byteOffset%4===0}const Mh=64,mse=16,lO=2**32-1,k_=new Uint32Array;function yse(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array(Mh),l=ra(u),d=$w(s)&&$w(i),f=d?ra(s):k_,h=d?ra(i):k_;for(let g=0;g<c;o++){if(t(e,n,r,l,o,a),o>=lO)throw new Error("arx: counter overflow");const p=Math.min(Mh,c-g);if(d&&p===Mh){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let C=0,N;C<mse;C++)N=y+C,h[N]=f[N]^l[C];g+=Mh;continue}for(let y=0,C;y<p;y++)C=g+y,i[C]=s[C]^u[y];g+=p}}function bse(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=ase({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ey(s),Ey(o),Ow(i),Ow(n),(a,c,u,l,d=0)=>{lr(a),lr(c),lr(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),lr(l),Ey(d),d<0||d>=lO)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const h=[];let g=a.length,p,y;if(g===32)h.push(p=Rw(a)),y=gse;else if(g===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),y=pse,h.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);$w(c)||h.push(c=Rw(c));const C=ra(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,C,ra(c.subarray(0,16)),C),c=c.subarray(16)}const N=16-s;if(N!==c.length)throw new Error(`arx: nonce must be ${N} or 16 bytes`);if(N!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,h.push(c)}const E=ra(c);return yse(t,y,C,E,u,l,d,o),vl(...h),l}}const gn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class wse{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Pw(e),lr(e,32);const n=gn(e,0),r=gn(e,2),s=gn(e,4),i=gn(e,6),o=gn(e,8),a=gn(e,10),c=gn(e,12),u=gn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=gn(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],h=o[6],g=o[7],p=o[8],y=o[9],C=gn(e,n+0),N=gn(e,n+2),E=gn(e,n+4),A=gn(e,n+6),_=gn(e,n+8),O=gn(e,n+10),$=gn(e,n+12),M=gn(e,n+14);let D=i[0]+(C&8191),q=i[1]+((C>>>13|N<<3)&8191),j=i[2]+((N>>>10|E<<6)&8191),L=i[3]+((E>>>7|A<<9)&8191),T=i[4]+((A>>>4|_<<12)&8191),P=i[5]+(_>>>1&8191),m=i[6]+((_>>>14|O<<2)&8191),b=i[7]+((O>>>11|$<<5)&8191),I=i[8]+(($>>>8|M<<8)&8191),x=i[9]+(M>>>5|s),S=0,R=S+D*a+q*(5*y)+j*(5*p)+L*(5*g)+T*(5*h);S=R>>>13,R&=8191,R+=P*(5*f)+m*(5*d)+b*(5*l)+I*(5*u)+x*(5*c),S+=R>>>13,R&=8191;let F=S+D*c+q*a+j*(5*y)+L*(5*p)+T*(5*g);S=F>>>13,F&=8191,F+=P*(5*h)+m*(5*f)+b*(5*d)+I*(5*l)+x*(5*u),S+=F>>>13,F&=8191;let z=S+D*u+q*c+j*a+L*(5*y)+T*(5*p);S=z>>>13,z&=8191,z+=P*(5*g)+m*(5*h)+b*(5*f)+I*(5*d)+x*(5*l),S+=z>>>13,z&=8191;let Y=S+D*l+q*u+j*c+L*a+T*(5*y);S=Y>>>13,Y&=8191,Y+=P*(5*p)+m*(5*g)+b*(5*h)+I*(5*f)+x*(5*d),S+=Y>>>13,Y&=8191;let G=S+D*d+q*l+j*u+L*c+T*a;S=G>>>13,G&=8191,G+=P*(5*y)+m*(5*p)+b*(5*g)+I*(5*h)+x*(5*f),S+=G>>>13,G&=8191;let K=S+D*f+q*d+j*l+L*u+T*c;S=K>>>13,K&=8191,K+=P*a+m*(5*y)+b*(5*p)+I*(5*g)+x*(5*h),S+=K>>>13,K&=8191;let ee=S+D*h+q*f+j*d+L*l+T*u;S=ee>>>13,ee&=8191,ee+=P*c+m*a+b*(5*y)+I*(5*p)+x*(5*g),S+=ee>>>13,ee&=8191;let se=S+D*g+q*h+j*f+L*d+T*l;S=se>>>13,se&=8191,se+=P*u+m*c+b*a+I*(5*y)+x*(5*p),S+=se>>>13,se&=8191;let he=S+D*p+q*g+j*h+L*f+T*d;S=he>>>13,he&=8191,he+=P*l+m*u+b*c+I*a+x*(5*y),S+=he>>>13,he&=8191;let re=S+D*y+q*p+j*g+L*h+T*f;S=re>>>13,re&=8191,re+=P*d+m*l+b*u+I*c+x*a,S+=re>>>13,re&=8191,S=(S<<2)+S|0,S=S+R|0,R=S&8191,S=S>>>13,F+=S,i[0]=R,i[1]=F,i[2]=z,i[3]=Y,i[4]=G,i[5]=K,i[6]=ee,i[7]=se,i[8]=he,i[9]=re}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;vl(r)}update(e){P_(this),e=Pw(e),lr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){vl(this.h,this.r,this.buffer,this.pad)}digestInto(e){P_(this),rse(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Ese(t){const e=(r,s)=>t(s).update(Pw(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const vse=Ese(t=>new wse(t));function Ase(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],h=e[3],g=e[4],p=e[5],y=e[6],C=e[7],N=s,E=n[0],A=n[1],_=n[2],O=o,$=a,M=c,D=u,q=l,j=d,L=f,T=h,P=g,m=p,b=y,I=C,x=N,S=E,R=A,F=_;for(let Y=0;Y<i;Y+=2)O=O+q|0,x=ot(x^O,16),P=P+x|0,q=ot(q^P,12),O=O+q|0,x=ot(x^O,8),P=P+x|0,q=ot(q^P,7),$=$+j|0,S=ot(S^$,16),m=m+S|0,j=ot(j^m,12),$=$+j|0,S=ot(S^$,8),m=m+S|0,j=ot(j^m,7),M=M+L|0,R=ot(R^M,16),b=b+R|0,L=ot(L^b,12),M=M+L|0,R=ot(R^M,8),b=b+R|0,L=ot(L^b,7),D=D+T|0,F=ot(F^D,16),I=I+F|0,T=ot(T^I,12),D=D+T|0,F=ot(F^D,8),I=I+F|0,T=ot(T^I,7),O=O+j|0,F=ot(F^O,16),b=b+F|0,j=ot(j^b,12),O=O+j|0,F=ot(F^O,8),b=b+F|0,j=ot(j^b,7),$=$+L|0,x=ot(x^$,16),I=I+x|0,L=ot(L^I,12),$=$+L|0,x=ot(x^$,8),I=I+x|0,L=ot(L^I,7),M=M+T|0,S=ot(S^M,16),P=P+S|0,T=ot(T^P,12),M=M+T|0,S=ot(S^M,8),P=P+S|0,T=ot(T^P,7),D=D+q|0,R=ot(R^D,16),m=m+R|0,q=ot(q^m,12),D=D+q|0,R=ot(R^D,8),m=m+R|0,q=ot(q^m,7);let z=0;r[z++]=o+O|0,r[z++]=a+$|0,r[z++]=c+M|0,r[z++]=u+D|0,r[z++]=l+q|0,r[z++]=d+j|0,r[z++]=f+L|0,r[z++]=h+T|0,r[z++]=g+P|0,r[z++]=p+m|0,r[z++]=y+b|0,r[z++]=C+I|0,r[z++]=N+x|0,r[z++]=E+S|0,r[z++]=A+R|0,r[z++]=_+F|0}const Cse=bse(Ase,{counterRight:!1,counterLength:4,allowShortKeys:!1}),_se=new Uint8Array(16),D_=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(_se.subarray(n))},Sse=new Uint8Array(32);function U_(t,e,n,r,s){const i=t(e,n,Sse),o=vse.create(i);s&&D_(o,s),D_(o,r);const a=lse(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return vl(i,a),c}const Ise=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=R_(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=U_(t,e,n,a,r);return i.set(c,o),vl(c),i},decrypt(s,i){i=R_(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=U_(t,e,n,o,r);if(!cse(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),vl(c),i}});use({blockSize:64,nonceLength:12,tagLength:16},Ise(Cse));class dO extends Ug{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,J8(e);const r=Gi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ls(i)}update(e){return wa(this),this.iHash.update(e),this}digestInto(e){wa(this),Bs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fO=(t,e,n)=>new dO(t,e).update(n).digest();fO.create=(t,e)=>new dO(t,e);Uint8Array.from([0]);const uv=BigInt(0),kw=BigInt(1);function E0(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Ka(t,e,n=""){const r=Dg(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Fh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?uv:BigInt("0x"+t)}function Bg(t){return hO(Ru(t))}function v0(t){return Bs(t),hO(Ru(Uint8Array.from(t).reverse()))}function lv(t,e){return w0(t.toString(16).padStart(e*2,"0"))}function dv(t,e){return lv(t,e).reverse()}function Bn(t,e,n){let r;if(typeof e=="string")try{r=w0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Dg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const vy=t=>typeof t=="bigint"&&uv<=t;function xse(t,e,n){return vy(t)&&vy(e)&&vy(n)&&e<=t&&t<n}function Dw(t,e,n,r){if(!xse(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function pO(t){let e;for(e=0;t>uv;t>>=kw,e+=1);return e}const sh=t=>(kw<<BigInt(t))-kw;function Tse(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>n(o,i,...f),l=(f=r(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=u();const g=i.slice();h.push(g),f+=i.length}return Fo(...h)};return(f,h)=>{c(),l(f);let g;for(;!(g=h(d()));)l();return c(),g}}function Lg(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function B_(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const gr=BigInt(0),Gn=BigInt(1),Ga=BigInt(2),gO=BigInt(3),mO=BigInt(4),yO=BigInt(5),Nse=BigInt(7),bO=BigInt(8),Ose=BigInt(9),wO=BigInt(16);function Nr(t,e){const n=t%e;return n>=gr?n:e+n}function bs(t,e,n){let r=t;for(;e-- >gr;)r*=r,r%=n;return r}function L_(t,e){if(t===gr)throw new Error("invert: expected non-zero number");if(e<=gr)throw new Error("invert: expected positive modulus, got "+e);let n=Nr(t,e),r=e,s=gr,i=Gn;for(;n!==gr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Gn)throw new Error("invert: does not exist");return Nr(s,e)}function fv(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function EO(t,e){const n=(t.ORDER+Gn)/mO,r=t.pow(e,n);return fv(t,r,e),r}function Pse(t,e){const n=(t.ORDER-yO)/bO,r=t.mul(e,Ga),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ga),s),a=t.mul(i,t.sub(o,t.ONE));return fv(t,a,e),a}function Rse(t){const e=_a(t),n=vO(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+Nse)/wO;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,i),h=a.eql(a.sqr(l),c),g=a.eql(a.sqr(d),c);u=a.cmov(u,l,h),l=a.cmov(f,d,g);const p=a.eql(a.sqr(l),c),y=a.cmov(u,l,p);return fv(a,y,c),y}}function vO(t){if(t<gO)throw new Error("sqrt is not defined for small field");let e=t-Gn,n=0;for(;e%Ga===gr;)e/=Ga,n++;let r=Ga;const s=_a(t);for(;M_(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return EO;let i=s.pow(r,e);const o=(e+Gn)/Ga;return function(a,c){if(a.is0(c))return c;if(M_(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(h++,g=a.sqr(g),h===u)throw new Error("Cannot find square root");const p=Gn<<BigInt(u-h-1),y=a.pow(l,p);u=h,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function $se(t){return t%mO===gO?EO:t%bO===yO?Pse:t%wO===Ose?Rse(t):vO(t)}const kse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=kse.reduce((r,s)=>(r[s]="function",r),e);return Lg(t,n),t}function Use(t,e,n){if(n<gr)throw new Error("invalid exponent, negatives unsupported");if(n===gr)return t.ONE;if(n===Gn)return e;let r=t.ONE,s=e;for(;n>gr;)n&Gn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Gn;return r}function AO(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function M_(t,e){const n=(t.ORDER-Gn)/Ga,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function CO(t,e){e!==void 0&&ba(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _a(t,e,n=!1,r={}){if(t<=gr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=CO(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:sh(c),ZERO:gr,ONE:Gn,allowedLengths:a,create:f=>Nr(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return gr<=f&&f<t},is0:f=>f===gr,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&Gn)===Gn,neg:f=>Nr(-f,t),eql:(f,h)=>f===h,sqr:f=>Nr(f*f,t),add:(f,h)=>Nr(f+h,t),sub:(f,h)=>Nr(f-h,t),mul:(f,h)=>Nr(f*h,t),pow:(f,h)=>Use(d,f,h),div:(f,h)=>Nr(f*L_(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>L_(f,t),sqrt:i||(f=>(l||(l=$se(t)),l(d,f))),toBytes:f=>n?dv(f,u):lv(f,u),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const p=new Uint8Array(u);p.set(f,n?0:p.length-f.length),f=p}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=n?v0(f):Bg(f);if(o&&(g=Nr(g,t)),!h&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>AO(d,f),cmov:(f,h,g)=>g?h:f});return Object.freeze(d)}function _O(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function SO(t){const e=_O(t);return e+Math.ceil(e/2)}function Bse(t,e,n=!1){const r=t.length,s=_O(e),i=SO(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?v0(t):Bg(t),a=Nr(o,e-Gn)+Gn;return n?dv(a,s):lv(a,s)}const Al=BigInt(0),Ya=BigInt(1);function A0(t,e){const n=e.negate();return t?n:e}function Ay(t,e){const n=AO(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function IO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Cy(t,e){IO(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=sh(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function F_(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ya);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function Lse(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Mse(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const _y=new WeakMap,xO=new WeakMap;function Sy(t){return xO.get(t)||1}function j_(t){if(t!==Al)throw new Error("invalid wNAF")}class Fse{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>Al;)n&Ya&&(r=r.add(s)),s=s.double(),n>>=Ya;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=Cy(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Cy(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:h}=F_(r,a,o);r=c,l?i=i.add(A0(f,n[h])):s=s.add(A0(d,n[u]))}return j_(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=Cy(e,this.bits);for(let o=0;o<i.windows&&r!==Al;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=F_(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return j_(r),s}getPrecomputes(e,n,r){let s=_y.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),_y.set(n,s))),s}cached(e,n,r){const s=Sy(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Sy(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){IO(n,this.bits),xO.set(e,n),_y.delete(e)}hasCache(e){return Sy(e)!==1}}function jse(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Al||r>Al;)n&Ya&&(i=i.add(s)),r&Ya&&(o=o.add(s)),s=s.double(),n>>=Ya,r>>=Ya;return{p1:i,p2:o}}function Hse(t,e,n,r){Lse(n,t),Mse(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=pO(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=sh(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let p=0;p<i;p++){const y=r[p],C=Number(y>>BigInt(h)&u);l[C]=l[C].add(n[p])}let g=o;for(let p=l.length-1,y=o;p>0;p--)y=y.add(l[p]),g=g.add(y);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function H_(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Dse(e),e}else return _a(t,{isLE:n})}function qse(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Al))throw new Error(`CURVE.${a} must be positive bigint`)}const s=H_(e.p,n.Fp,r),i=H_(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),tO("HashToScalar-");const id=BigInt(0),ou=BigInt(1),jh=BigInt(2);function zse(t){return Lg(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Wse(t){const e=zse(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||ov,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?jh**BigInt(254):jh**BigInt(447),g=a?BigInt(8)*jh**BigInt(251)-ou:BigInt(4)*jh**BigInt(445)-ou,p=h+g+ou,y=L=>Nr(L,n),C=N(d);function N(L){return dv(y(L),l)}function E(L){const T=Bn("u coordinate",L,l);return a&&(T[31]&=127),y(v0(T))}function A(L){return v0(s(Bn("scalar",L,l)))}function _(L,T){const P=M(E(T),A(L));if(P===id)throw new Error("invalid private or public key received");return N(P)}function O(L){return _(L,C)}function $(L,T,P){const m=y(L*(T-P));return T=y(T-m),P=y(P+m),{x_2:T,x_3:P}}function M(L,T){Dw("u",L,id,n),Dw("scalar",T,h,p);const P=T,m=L;let b=ou,I=id,x=L,S=ou,R=id;for(let z=BigInt(u-1);z>=id;z--){const Y=P>>z&ou;R^=Y,{x_2:b,x_3:x}=$(R,b,x),{x_2:I,x_3:S}=$(R,I,S),R=Y;const G=b+I,K=y(G*G),ee=b-I,se=y(ee*ee),he=K-se,re=x+S,fe=x-S,De=y(fe*G),qe=y(re*ee),Me=De+qe,ut=De-qe;x=y(Me*Me),S=y(m*y(ut*ut)),b=y(K*se),I=y(he*(K+y(f*he)))}({x_2:b,x_3:x}=$(R,b,x)),{x_2:I,x_3:S}=$(R,I,S);const F=i(I);return y(b*F)}const D={secretKey:l,publicKey:l,seed:l},q=(L=c(l))=>(Bs(L,D.seed),L);function j(L){const T=q(L);return{secretKey:T,publicKey:O(T)}}return{keygen:j,getSharedSecret:(L,T)=>_(L,T),getPublicKey:L=>O(L),scalarMult:_,scalarMultBase:O,utils:{randomSecretKey:q,randomPrivateKey:q},GuBytes:C.slice(),lengths:D}}const Vse=BigInt(1),q_=BigInt(2),Kse=BigInt(3),Gse=BigInt(5);BigInt(8);const TO=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Yse={p:TO,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Zse(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=TO,o=t*t%i*t%i,a=bs(o,q_,i)*o%i,c=bs(a,Vse,i)*t%i,u=bs(c,Gse,i)*c%i,l=bs(u,e,i)*u%i,d=bs(l,n,i)*l%i,f=bs(d,r,i)*d%i,h=bs(f,s,i)*f%i,g=bs(h,s,i)*f%i,p=bs(g,e,i)*u%i;return{pow_p_5_8:bs(p,q_,i)*t%i,b2:o}}function Jse(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Xse=_a(Yse.p,{isLE:!0});(()=>{const t=Xse.ORDER;return Wse({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Zse(e);return Nr(bs(n,Kse,t)*r,t)},adjustScalarBytes:Jse})})();const z_=(t,e)=>(t+(t>=0?e:-e)/NO)/e;function Qse(t,e,n){const[[r,s],[i,o]]=e,a=z_(o*t,n),c=z_(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<Hi,f=l<Hi;d&&(u=-u),f&&(l=-l);const h=sh(Math.ceil(pO(n)/2))+$u;if(u<Hi||u>=h||l<Hi||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function Uw(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Iy(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return E0(n.lowS,"lowS"),E0(n.prehash,"prehash"),n.format!==void 0&&Uw(n.format),n}class eie extends Error{constructor(e=""){super(e)}}const Ui={Err:eie,_tlv:{encode:(t,e)=>{const{Err:n}=Ui;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Fh(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Fh(s.length/2|128):"";return Fh(t)+i+s+e},decode(t,e){const{Err:n}=Ui;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ui;if(t<Hi)throw new e("integer: negative integers are not allowed");let n=Fh(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ui;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Bg(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ui,s=Bn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Ui,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Hi=BigInt(0),$u=BigInt(1),NO=BigInt(2),Hh=BigInt(3),tie=BigInt(4);function Eu(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Bn("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function nie(t,e={}){const n=qse("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;Lg(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=PO(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(L,T,P){const{x:m,y:b}=T.toAffine(),I=r.toBytes(m);if(E0(P,"isCompressed"),P){l();const x=!r.isOdd(b);return Fo(OO(x),I)}else return Fo(Uint8Array.of(4),I,r.toBytes(b))}function f(L){Ka(L,void 0,"Point");const{publicKey:T,publicKeyUncompressed:P}=u,m=L.length,b=L[0],I=L.subarray(1);if(m===T&&(b===2||b===3)){const x=r.fromBytes(I);if(!r.isValid(x))throw new Error("bad point: is not on curve, wrong x");const S=p(x);let R;try{R=r.sqrt(S)}catch(z){const Y=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}l();const F=r.isOdd(R);return(b&1)===1!==F&&(R=r.neg(R)),{x,y:R}}else if(m===P&&b===4){const x=r.BYTES,S=r.fromBytes(I.subarray(0,x)),R=r.fromBytes(I.subarray(x,x*2));if(!y(S,R))throw new Error("bad point: is not on curve");return{x:S,y:R}}else throw new Error(`bad point: got length ${m}, expected compressed=${T} or uncompressed=${P}`)}const h=e.toBytes||d,g=e.fromBytes||f;function p(L){const T=r.sqr(L),P=r.mul(T,L);return r.add(r.add(P,r.mul(L,i.a)),i.b)}function y(L,T){const P=r.sqr(T),m=p(L);return r.eql(P,m)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const C=r.mul(r.pow(i.a,Hh),tie),N=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(C,N)))throw new Error("bad curve params: a or b");function E(L,T,P=!1){if(!r.isValid(T)||P&&r.is0(T))throw new Error(`bad point coordinate ${L}`);return T}function A(L){if(!(L instanceof D))throw new Error("ProjectivePoint expected")}function _(L){if(!c||!c.basises)throw new Error("no endo");return Qse(L,c.basises,s.ORDER)}const O=B_((L,T)=>{const{X:P,Y:m,Z:b}=L;if(r.eql(b,r.ONE))return{x:P,y:m};const I=L.is0();T==null&&(T=I?r.ONE:r.inv(b));const x=r.mul(P,T),S=r.mul(m,T),R=r.mul(b,T);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x,y:S}}),$=B_(L=>{if(L.is0()){if(e.allowInfinityPoint&&!r.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:T,y:P}=L.toAffine();if(!r.isValid(T)||!r.isValid(P))throw new Error("bad point: x or y not field elements");if(!y(T,P))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(L,T,P,m,b){return P=new D(r.mul(P.X,L),P.Y,P.Z),T=A0(m,T),P=A0(b,P),T.add(P)}class D{constructor(T,P,m){this.X=E("x",T),this.Y=E("y",P,!0),this.Z=E("z",m),Object.freeze(this)}static CURVE(){return i}static fromAffine(T){const{x:P,y:m}=T||{};if(!T||!r.isValid(P)||!r.isValid(m))throw new Error("invalid affine point");if(T instanceof D)throw new Error("projective point not allowed");return r.is0(P)&&r.is0(m)?D.ZERO:new D(P,m,r.ONE)}static fromBytes(T){const P=D.fromAffine(g(Ka(T,void 0,"point")));return P.assertValidity(),P}static fromHex(T){return D.fromBytes(Bn("pointHex",T))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(T=8,P=!0){return j.createCache(this,T),P||this.multiply(Hh),this}assertValidity(){$(this)}hasEvenY(){const{y:T}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(T)}equals(T){A(T);const{X:P,Y:m,Z:b}=this,{X:I,Y:x,Z:S}=T,R=r.eql(r.mul(P,S),r.mul(I,b)),F=r.eql(r.mul(m,S),r.mul(x,b));return R&&F}negate(){return new D(this.X,r.neg(this.Y),this.Z)}double(){const{a:T,b:P}=i,m=r.mul(P,Hh),{X:b,Y:I,Z:x}=this;let S=r.ZERO,R=r.ZERO,F=r.ZERO,z=r.mul(b,b),Y=r.mul(I,I),G=r.mul(x,x),K=r.mul(b,I);return K=r.add(K,K),F=r.mul(b,x),F=r.add(F,F),S=r.mul(T,F),R=r.mul(m,G),R=r.add(S,R),S=r.sub(Y,R),R=r.add(Y,R),R=r.mul(S,R),S=r.mul(K,S),F=r.mul(m,F),G=r.mul(T,G),K=r.sub(z,G),K=r.mul(T,K),K=r.add(K,F),F=r.add(z,z),z=r.add(F,z),z=r.add(z,G),z=r.mul(z,K),R=r.add(R,z),G=r.mul(I,x),G=r.add(G,G),z=r.mul(G,K),S=r.sub(S,z),F=r.mul(G,Y),F=r.add(F,F),F=r.add(F,F),new D(S,R,F)}add(T){A(T);const{X:P,Y:m,Z:b}=this,{X:I,Y:x,Z:S}=T;let R=r.ZERO,F=r.ZERO,z=r.ZERO;const Y=i.a,G=r.mul(i.b,Hh);let K=r.mul(P,I),ee=r.mul(m,x),se=r.mul(b,S),he=r.add(P,m),re=r.add(I,x);he=r.mul(he,re),re=r.add(K,ee),he=r.sub(he,re),re=r.add(P,b);let fe=r.add(I,S);return re=r.mul(re,fe),fe=r.add(K,se),re=r.sub(re,fe),fe=r.add(m,b),R=r.add(x,S),fe=r.mul(fe,R),R=r.add(ee,se),fe=r.sub(fe,R),z=r.mul(Y,re),R=r.mul(G,se),z=r.add(R,z),R=r.sub(ee,z),z=r.add(ee,z),F=r.mul(R,z),ee=r.add(K,K),ee=r.add(ee,K),se=r.mul(Y,se),re=r.mul(G,re),ee=r.add(ee,se),se=r.sub(K,se),se=r.mul(Y,se),re=r.add(re,se),K=r.mul(ee,re),F=r.add(F,K),K=r.mul(fe,re),R=r.mul(he,R),R=r.sub(R,K),K=r.mul(he,ee),z=r.mul(fe,z),z=r.add(z,K),new D(R,F,z)}subtract(T){return this.add(T.negate())}is0(){return this.equals(D.ZERO)}multiply(T){const{endo:P}=e;if(!s.isValidNot0(T))throw new Error("invalid scalar: out of range");let m,b;const I=x=>j.cached(this,x,S=>Ay(D,S));if(P){const{k1neg:x,k1:S,k2neg:R,k2:F}=_(T),{p:z,f:Y}=I(S),{p:G,f:K}=I(F);b=Y.add(K),m=M(P.beta,z,G,x,R)}else{const{p:x,f:S}=I(T);m=x,b=S}return Ay(D,[m,b])[0]}multiplyUnsafe(T){const{endo:P}=e,m=this;if(!s.isValid(T))throw new Error("invalid scalar: out of range");if(T===Hi||m.is0())return D.ZERO;if(T===$u)return m;if(j.hasCache(this))return this.multiply(T);if(P){const{k1neg:b,k1:I,k2neg:x,k2:S}=_(T),{p1:R,p2:F}=jse(D,m,I,S);return M(P.beta,R,F,b,x)}else return j.unsafe(m,T)}multiplyAndAddUnsafe(T,P,m){const b=this.multiplyUnsafe(P).add(T.multiplyUnsafe(m));return b.is0()?void 0:b}toAffine(T){return O(this,T)}isTorsionFree(){const{isTorsionFree:T}=e;return o===$u?!0:T?T(D,this):j.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:T}=e;return o===$u?this:T?T(D,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(T=!0){return E0(T,"isCompressed"),this.assertValidity(),h(D,this,T)}toHex(T=!0){return Ru(this.toBytes(T))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(T=!0){return this.toBytes(T)}_setWindowSize(T){this.precompute(T)}static normalizeZ(T){return Ay(D,T)}static msm(T,P){return Hse(D,s,T,P)}static fromPrivateKey(T){return D.BASE.multiply(Eu(s,T))}}D.BASE=new D(i.Gx,i.Gy,r.ONE),D.ZERO=new D(r.ZERO,r.ONE,r.ZERO),D.Fp=r,D.Fn=s;const q=s.BITS,j=new Fse(D,e.endo?Math.ceil(q/2):q);return D.BASE.precompute(8),D}function OO(t){return Uint8Array.of(t?2:3)}function PO(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function rie(t,e={}){const{Fn:n}=t,r=e.randomBytes||ov,s=Object.assign(PO(t.Fp,n),{seed:SO(n.ORDER)});function i(f){try{return!!Eu(n,f)}catch{return!1}}function o(f,h){const{publicKey:g,publicKeyUncompressed:p}=s;try{const y=f.length;return h===!0&&y!==g||h===!1&&y!==p?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return Bse(Ka(f,s.seed,"seed"),n.ORDER)}function c(f,h=!0){return t.BASE.multiply(Eu(n,f)).toBytes(h)}function u(f){const h=a(f);return{secretKey:h,publicKey:c(h)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:h,publicKey:g,publicKeyUncompressed:p}=s;if(n.allowedLengths||h===g)return;const y=Bn("key",f).length;return y===g||y===p}function d(f,h,g=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const p=Eu(n,f);return t.fromHex(h).multiply(p).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Eu(n,f),precompute(f=8,h=t.BASE){return h.precompute(f,!1)}},lengths:s})}function sie(t,e,n={}){J8(e),Lg(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||ov,s=n.hmac||((P,...m)=>fO(e,P,Fo(...m))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h}=rie(t,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function y(P){const m=a>>$u;return P>m}function C(P,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${P}: out of range 1..Point.Fn.ORDER`);return m}function N(P,m){Uw(m);const b=h.signature,I=m==="compact"?b:m==="recovered"?b+1:void 0;return Ka(P,I,`${m} signature`)}class E{constructor(m,b,I){this.r=C("r",m),this.s=C("s",b),I!=null&&(this.recovery=I),Object.freeze(this)}static fromBytes(m,b=p){N(m,b);let I;if(b==="der"){const{r:F,s:z}=Ui.toSig(Ka(m));return new E(F,z)}b==="recovered"&&(I=m[0],b="compact",m=m.subarray(1));const x=o.BYTES,S=m.subarray(0,x),R=m.subarray(x,x*2);return new E(o.fromBytes(S),o.fromBytes(R),I)}static fromHex(m,b){return this.fromBytes(w0(m),b)}addRecoveryBit(m){return new E(this.r,this.s,m)}recoverPublicKey(m){const b=i.ORDER,{r:I,s:x,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*NO<b&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=S===2||S===3?I+a:I;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const F=i.toBytes(R),z=t.fromBytes(Fo(OO((S&1)===0),F)),Y=o.inv(R),G=_(Bn("msgHash",m)),K=o.create(-G*Y),ee=o.create(x*Y),se=t.BASE.multiplyUnsafe(K).add(z.multiplyUnsafe(ee));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return y(this.s)}toBytes(m=p){if(Uw(m),m==="der")return w0(Ui.hexFromSig(this));const b=o.toBytes(this.r),I=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Fo(Uint8Array.of(this.recovery),b,I)}return Fo(b,I)}toHex(m){return Ru(this.toBytes(m))}assertValidity(){}static fromCompact(m){return E.fromBytes(Bn("sig",m),"compact")}static fromDER(m){return E.fromBytes(Bn("sig",m),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ru(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ru(this.toBytes("compact"))}}const A=n.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const m=Bg(P),b=P.length*8-c;return b>0?m>>BigInt(b):m},_=n.bits2int_modN||function(P){return o.create(A(P))},O=sh(c);function $(P){return Dw("num < 2^"+c,P,Hi,O),o.toBytes(P)}function M(P,m){return Ka(P,void 0,"message"),m?Ka(e(P),void 0,"prehashed message"):P}function D(P,m,b){if(["recovered","canonical"].some(ee=>ee in b))throw new Error("sign() legacy options not supported");const{lowS:I,prehash:x,extraEntropy:S}=Iy(b,g);P=M(P,x);const R=_(P),F=Eu(o,m),z=[$(F),$(R)];if(S!=null&&S!==!1){const ee=S===!0?r(h.secretKey):S;z.push(Bn("extraEntropy",ee))}const Y=Fo(...z),G=R;function K(ee){const se=A(ee);if(!o.isValidNot0(se))return;const he=o.inv(se),re=t.BASE.multiply(se).toAffine(),fe=o.create(re.x);if(fe===Hi)return;const De=o.create(he*o.create(G+fe*F));if(De===Hi)return;let qe=(re.x===fe?0:2)|Number(re.y&$u),Me=De;return I&&y(De)&&(Me=o.neg(De),qe^=1),new E(fe,Me,qe)}return{seed:Y,k2sig:K}}function q(P,m,b={}){P=Bn("message",P);const{seed:I,k2sig:x}=D(P,m,b);return Tse(e.outputLen,o.BYTES,s)(I,x)}function j(P){let m;const b=typeof P=="string"||Dg(P),I=!b&&P!==null&&typeof P=="object"&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!b&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(I)m=new E(P.r,P.s);else if(b){try{m=E.fromBytes(Bn("sig",P),"der")}catch(x){if(!(x instanceof Ui.Err))throw x}if(!m)try{m=E.fromBytes(Bn("sig",P),"compact")}catch{return!1}}return m||!1}function L(P,m,b,I={}){const{lowS:x,prehash:S,format:R}=Iy(I,g);if(b=Bn("publicKey",b),m=M(Bn("message",m),S),"strict"in I)throw new Error("options.strict was renamed to lowS");const F=R===void 0?j(P):E.fromBytes(Bn("sig",P),R);if(F===!1)return!1;try{const z=t.fromBytes(b);if(x&&F.hasHighS())return!1;const{r:Y,s:G}=F,K=_(m),ee=o.inv(G),se=o.create(K*ee),he=o.create(Y*ee),re=t.BASE.multiplyUnsafe(se).add(z.multiplyUnsafe(he));return re.is0()?!1:o.create(re.x)===Y}catch{return!1}}function T(P,m,b={}){const{prehash:I}=Iy(b,g);return m=M(m,I),E.fromBytes(P,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h,Point:t,sign:q,verify:L,recoverPublicKey:T,Signature:E,hash:e})}function iie(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=_a(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function oie(t){const{CURVE:e,curveOpts:n}=iie(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function aie(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,CO(n.Fn.ORDER,n.Fn.BITS))})}function cie(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=oie(t),i=nie(e,n),o=sie(i,r,s);return aie(t,o)}function Bw(t,e){const n=r=>cie({...t,hash:r});return{...n(e),create:n}}const RO={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$O={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},kO={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},uie=_a(RO.p),lie=_a($O.p),die=_a(kO.p);Bw({...RO,Fp:uie,lowS:!1},Zre);Bw({...$O,Fp:lie,lowS:!1},Xre),Bw({...kO,Fp:die,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Jre);function hv(t){return t.includes(":")}function vd(t){return hv(t)?t.split(":")[0]:t}const fie={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function W_(t,e){const{message:n,code:r}=fie[t];return{message:e?`${n} ${e}`:n,code:r}}function xy(t,e){return!!Array.isArray(t)}function Rd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function hie({logger:t,name:e}){const n=typeof t=="string"?$f({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}var Lw={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof dr<"u"&&dr,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof dr<"u"&&dr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(m){return m&&DataView.prototype.isPrototypeOf(m)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(m){return m&&l.indexOf(Object.prototype.toString.call(m))>-1};function f(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError('Invalid character in header field name: "'+m+'"');return m.toLowerCase()}function h(m){return typeof m!="string"&&(m=String(m)),m}function g(m){var b={next:function(){var I=m.shift();return{done:I===void 0,value:I}}};return c.iterable&&(b[Symbol.iterator]=function(){return b}),b}function p(m){this.map={},m instanceof p?m.forEach(function(b,I){this.append(I,b)},this):Array.isArray(m)?m.forEach(function(b){if(b.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(b){this.append(b,m[b])},this)}p.prototype.append=function(m,b){m=f(m),b=h(b);var I=this.map[m];this.map[m]=I?I+", "+b:b},p.prototype.delete=function(m){delete this.map[f(m)]},p.prototype.get=function(m){return m=f(m),this.has(m)?this.map[m]:null},p.prototype.has=function(m){return this.map.hasOwnProperty(f(m))},p.prototype.set=function(m,b){this.map[f(m)]=h(b)},p.prototype.forEach=function(m,b){for(var I in this.map)this.map.hasOwnProperty(I)&&m.call(b,this.map[I],I,this)},p.prototype.keys=function(){var m=[];return this.forEach(function(b,I){m.push(I)}),g(m)},p.prototype.values=function(){var m=[];return this.forEach(function(b){m.push(b)}),g(m)},p.prototype.entries=function(){var m=[];return this.forEach(function(b,I){m.push([I,b])}),g(m)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function y(m){if(!m._noBody){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}}function C(m){return new Promise(function(b,I){m.onload=function(){b(m.result)},m.onerror=function(){I(m.error)}})}function N(m){var b=new FileReader,I=C(b);return b.readAsArrayBuffer(m),I}function E(m){var b=new FileReader,I=C(b),x=/charset=([A-Za-z0-9_-]+)/.exec(m.type),S=x?x[1]:"utf-8";return b.readAsText(m,S),I}function A(m){for(var b=new Uint8Array(m),I=new Array(b.length),x=0;x<b.length;x++)I[x]=String.fromCharCode(b[x]);return I.join("")}function _(m){if(m.slice)return m.slice(0);var b=new Uint8Array(m.byteLength);return b.set(new Uint8Array(m)),b.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:c.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:c.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():c.arrayBuffer&&c.blob&&u(m)?(this._bodyArrayBuffer=_(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||d(m))?this._bodyArrayBuffer=_(m):this._bodyText=m=Object.prototype.toString.call(m):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var m=y(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=y(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(N);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var m=y(this);if(m)return m;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function M(m){var b=m.toUpperCase();return $.indexOf(b)>-1?b:m}function D(m,b){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var I=b.body;if(m instanceof D){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,b.headers||(this.headers=new p(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!I&&m._bodyInit!=null&&(I=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new p(b.headers)),this.method=M(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||function(){if("AbortController"in a){var R=new AbortController;return R.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&I)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(I),(this.method==="GET"||this.method==="HEAD")&&(b.cache==="no-store"||b.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function q(m){var b=new FormData;return m.trim().split("&").forEach(function(I){if(I){var x=I.split("="),S=x.shift().replace(/\+/g," "),R=x.join("=").replace(/\+/g," ");b.append(decodeURIComponent(S),decodeURIComponent(R))}}),b}function j(m){var b=new p,I=m.replace(/\r?\n[\t ]+/g," ");return I.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var S=x.split(":"),R=S.shift().trim();if(R){var F=S.join(":").trim();try{b.append(R,F)}catch(z){console.warn("Response "+z.message)}}}),b}O.call(D.prototype);function L(m,b){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText===void 0?"":""+b.statusText,this.headers=new p(b.headers),this.url=b.url||"",this._initBody(m)}O.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},L.error=function(){var m=new L(null,{status:200,statusText:""});return m.ok=!1,m.status=0,m.type="error",m};var T=[301,302,303,307,308];L.redirect=function(m,b){if(T.indexOf(b)===-1)throw new RangeError("Invalid status code");return new L(null,{status:b,headers:{location:m}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(b,I){this.message=b,this.name=I;var x=Error(b);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function P(m,b){return new Promise(function(I,x){var S=new D(m,b);if(S.signal&&S.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function F(){R.abort()}R.onload=function(){var G={statusText:R.statusText,headers:j(R.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&(R.status<200||R.status>599)?G.status=200:G.status=R.status,G.url="responseURL"in R?R.responseURL:G.headers.get("X-Request-URL");var K="response"in R?R.response:R.responseText;setTimeout(function(){I(new L(K,G))},0)},R.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},R.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},R.onabort=function(){setTimeout(function(){x(new o.DOMException("Aborted","AbortError"))},0)};function z(G){try{return G===""&&a.location.href?a.location.href:G}catch{return G}}if(R.open(S.method,z(S.url),!0),S.credentials==="include"?R.withCredentials=!0:S.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&(c.blob?R.responseType="blob":c.arrayBuffer&&(R.responseType="arraybuffer")),b&&typeof b.headers=="object"&&!(b.headers instanceof p||a.Headers&&b.headers instanceof a.Headers)){var Y=[];Object.getOwnPropertyNames(b.headers).forEach(function(G){Y.push(f(G)),R.setRequestHeader(G,h(b.headers[G]))}),S.headers.forEach(function(G,K){Y.indexOf(K)===-1&&R.setRequestHeader(K,G)})}else S.headers.forEach(function(G,K){R.setRequestHeader(K,G)});S.signal&&(S.signal.addEventListener("abort",F),R.onreadystatechange=function(){R.readyState===4&&S.signal.removeEventListener("abort",F)}),R.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return P.polyfill=!0,a.fetch||(a.fetch=P,a.Headers=p,a.Request=D,a.Response=L),o.Headers=p,o.Request=D,o.Response=L,o.fetch=P,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Lw,Lw.exports);var pie=Lw.exports;const V_=Oc(pie);var gie=Object.defineProperty,mie=Object.defineProperties,yie=Object.getOwnPropertyDescriptors,K_=Object.getOwnPropertySymbols,bie=Object.prototype.hasOwnProperty,wie=Object.prototype.propertyIsEnumerable,G_=(t,e,n)=>e in t?gie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y_=(t,e)=>{for(var n in e||(e={}))bie.call(e,n)&&G_(t,n,e[n]);if(K_)for(var n of K_(e))wie.call(e,n)&&G_(t,n,e[n]);return t},Z_=(t,e)=>mie(t,yie(e));const Eie={Accept:"application/json","Content-Type":"application/json"},vie="POST",J_={headers:Eie,method:vie},X_=10;let DO=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new us.EventEmitter,this.isAvailable=!1,this.registering=!1,!GC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Ji(e),r=await(await V_(this.url,Z_(Y_({},J_),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!GC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Ji({id:1,jsonrpc:"2.0",method:"test",params:[]});await V_(e,Z_(Y_({},J_),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?hc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Pg(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return A8(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>X_&&this.events.setMaxListeners(X_)}};function pv(t){return t==null||typeof t!="object"&&typeof t!="function"}function UO(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function BO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Aie="[object RegExp]",LO="[object String]",MO="[object Number]",FO="[object Boolean]",jO="[object Arguments]",Cie="[object Symbol]",_ie="[object Date]",Sie="[object Map]",Iie="[object Set]",xie="[object Array]",Tie="[object ArrayBuffer]",Nie="[object Object]",Oie="[object DataView]",Pie="[object Uint8Array]",Rie="[object Uint8ClampedArray]",$ie="[object Uint16Array]",kie="[object Uint32Array]",Die="[object Int8Array]",Uie="[object Int16Array]",Bie="[object Int32Array]",Lie="[object Float32Array]",Mie="[object Float64Array]";function gv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fie(t,e){return vu(t,void 0,t,new Map,e)}function vu(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(pv(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vu(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,vu(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(vu(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(gv(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=vu(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Ma(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Ma(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Ma(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Ma(o,t,n,r,s),o}if(typeof t=="object"&&jie(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Ma(o,t,n,r,s),o}return t}function Ma(t,e,n=t,r,s){const i=[...Object.keys(e),...UO(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=vu(e[a],a,n,r,s))}}function jie(t){switch(BO(t)){case jO:case xie:case Tie:case Oie:case FO:case _ie:case Lie:case Mie:case Die:case Uie:case Bie:case Sie:case MO:case Nie:case Aie:case Iie:case LO:case Cie:case Pie:case Rie:case $ie:case kie:return!0;default:return!1}}function Hie(t,e){return Fie(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case MO:case LO:case FO:{const o=new t.constructor(t==null?void 0:t.valueOf());return Ma(o,t),o}case jO:{const o={};return Ma(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Q_(t){return Hie(t)}function e6(t){return t!==null&&typeof t=="object"&&BO(t)==="[object Arguments]"}function t6(t){return typeof t=="object"&&t!==null}function qie(){}function zie(t){return gv(t)}function Wie(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Vie(t){if(pv(t))return t;if(Array.isArray(t)||gv(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Kie(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Mw(s,o,r,new Map)}return s}function Mw(t,e,n,r){if(pv(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Vie(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...UO(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(e6(a)&&(a={...a}),e6(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Q_(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];l[h]=c[h]}c=l}else c=[];const u=n(c,a,o,t,e,r);u!=null?t[o]=u:Array.isArray(a)||t6(c)&&t6(a)?t[o]=Mw(c,a,n,r):c==null&&Wie(a)?t[o]=Mw({},a,n,r):c==null&&zie(a)?t[o]=Q_(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Gie(t,...e){return Kie(t,...e,qie)}const n6="error",Yie="wss://relay.walletconnect.org",Zie="wc",HO="universal_provider",qh=`${Zie}@2:${HO}:`,qO="https://rpc.walletconnect.org/v1/",zO="generic",Jie=`${qO}bundler`,ku="call_status",Xie=86400,mv={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Qie=Object.defineProperty,eoe=Object.defineProperties,toe=Object.getOwnPropertyDescriptors,r6=Object.getOwnPropertySymbols,noe=Object.prototype.hasOwnProperty,roe=Object.prototype.propertyIsEnumerable,s6=(t,e,n)=>e in t?Qie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zh=(t,e)=>{for(var n in e||(e={}))noe.call(e,n)&&s6(t,n,e[n]);if(r6)for(var n of r6(e))roe.call(e,n)&&s6(t,n,e[n]);return t},soe=(t,e)=>eoe(t,toe(e));function WO(t,e,n){var r;const s=Pd(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${qO}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ioe(t){return t.includes(":")?t.split(":")[1]:t}function VO(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ooe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function i6(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function Wh(t={},e={}){const n=i6(o6(t)),r=i6(o6(e));return Gie(n,r)}function o6(t){var e,n,r,s,i;const o={};if(!Rd(t))return o;for(const[a,c]of Object.entries(t)){const u=hv(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=vd(a);o[h]=soe(zh(zh({},o[h]),c),{chains:by(u,(e=o[h])==null?void 0:e.chains),methods:by(l,(n=o[h])==null?void 0:n.methods),events:by(d,(r=o[h])==null?void 0:r.events)}),(Rd(f)||Rd(((s=o[h])==null?void 0:s.rpcMap)||{}))&&(o[h].rpcMap=zh(zh({},f),(i=o[h])==null?void 0:i.rpcMap))}return o}function a6(t){return t.includes(":")?t.split(":")[2]:t}function c6(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=hv(n)?[n]:r.chains?r.chains:VO(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Ty(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function aoe(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const KO={},Du=t=>KO[t],Ny=(t,e)=>{KO[t]=e};var coe=Object.defineProperty,u6=Object.getOwnPropertySymbols,uoe=Object.prototype.hasOwnProperty,loe=Object.prototype.propertyIsEnumerable,l6=(t,e,n)=>e in t?coe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d6=(t,e)=>{for(var n in e||(e={}))uoe.call(e,n)&&l6(t,n,e[n]);if(u6)for(var n of u6(e))loe.call(e,n)&&l6(t,n,e[n]);return t};const f6="eip155",doe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],foe=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Oy=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,h6=t=>Object.keys(t).filter(e=>doe.includes(e)).reduce((e,n)=>(e[n]=hoe(t[n]),e),{}),hoe=t=>typeof t=="string"&&aoe(t)?JSON.parse(t):t,poe=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Rd(s)&&!Rd(r))return;const o=h6(r);for(const a of n){const c=foe(a);if(!c)continue;i[Oy(c)]=o;const u=s==null?void 0:s[`${f6}:${c}`];if(u){const l=u==null?void 0:u[`${f6}:${c}:${e}`];i[Oy(c)]=d6(d6({},i[Oy(c)]),h6(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var goe=Object.defineProperty,moe=(t,e,n)=>e in t?goe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yoe=(t,e,n)=>moe(t,e+"",n);let Py;class yv{constructor(e){yoe(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Py||(Py=new yv(e)),Py}}var boe=Object.defineProperty,woe=Object.defineProperties,Eoe=Object.getOwnPropertyDescriptors,p6=Object.getOwnPropertySymbols,voe=Object.prototype.hasOwnProperty,Aoe=Object.prototype.propertyIsEnumerable,g6=(t,e,n)=>e in t?boe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Coe=(t,e)=>{for(var n in e||(e={}))voe.call(e,n)&&g6(t,n,e[n]);if(p6)for(var n of p6(e))Aoe.call(e,n)&&g6(t,n,e[n]);return t},_oe=(t,e)=>woe(t,Eoe(e));async function Soe(t,e){const n=Pd(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(r.map(d=>Ioe(n.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>(d==null?void 0:d.status)==="0x1"),c=i.every(d=>(d==null?void 0:d.status)==="0x0"),u=i.some(d=>(d==null?void 0:d.status)==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:l}}async function Ioe(t,e,n){return await n(parseInt(t)).request(Ss("eth_getTransactionReceipt",[e]))}async function xoe({sendCalls:t,storage:e}){const n=await e.getItem(ku);await e.setItem(ku,_oe(Coe({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:bre(Xie)}}))}async function Toe({resultId:t,storage:e}){const n=await e.getItem(ku);if(n){delete n[t],await e.setItem(ku,n);for(const r in n)G8(n[r].expiry)&&delete n[r];await e.setItem(ku,n)}}async function Noe({resultId:t,storage:e}){const n=await e.getItem(ku),r=n==null?void 0:n[t];if(r&&!G8(r.expiry))return r;await Toe({resultId:t,storage:e})}var Ooe=Object.defineProperty,Poe=Object.defineProperties,Roe=Object.getOwnPropertyDescriptors,m6=Object.getOwnPropertySymbols,$oe=Object.prototype.hasOwnProperty,koe=Object.prototype.propertyIsEnumerable,Fw=(t,e,n)=>e in t?Ooe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ry=(t,e)=>{for(var n in e||(e={}))$oe.call(e,n)&&Fw(t,n,e[n]);if(m6)for(var n of m6(e))koe.call(e,n)&&Fw(t,n,e[n]);return t},$y=(t,e)=>Poe(t,Roe(e)),Pa=(t,e,n)=>Fw(t,typeof e!="symbol"?e+"":e,n);class Doe{constructor(e){Pa(this,"name","eip155"),Pa(this,"client"),Pa(this,"chainId"),Pa(this,"namespace"),Pa(this,"httpProviders"),Pa(this,"events"),Pa(this,"storage"),this.namespace=e.namespace,this.events=Du("events"),this.client=Du("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=yv.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(mv.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||WO(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tv(new DO(r,Du("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ioe(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=$y(Ry({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l==null?void 0:l[d];if(f)return f;let h;try{h=poe(u,a,c)}catch(p){console.warn("Failed to extract capabilities from session",p)}if(h)return h;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:$y(Ry({},u.sessionProperties||{}),{capabilities:$y(Ry({},l||{}),{[d]:g})})})}catch(p){console.warn("Failed to update session with capabilities",p)}return g}async getCallStatus(e){var n,r,s;const i=this.client.session.get(e.topic),o=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(o){const u=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await Noe({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await Soe(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ss("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${Jie}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,s;const i=await this.client.request(e),o=(n=e.request.params)==null?void 0:n[0],a=i==null?void 0:i.id,c=(i==null?void 0:i.capabilities)||{},u=(r=c==null?void 0:c.caip345)==null?void 0:r.caip2,l=(s=c==null?void 0:c.caip345)==null?void 0:s.transactionHashes;return!a||!u||!(l!=null&&l.length)||await xoe({sendCalls:{request:o,result:i},storage:this.storage}),i}}var Uoe=Object.defineProperty,Boe=(t,e,n)=>e in t?Uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,au=(t,e,n)=>Boe(t,typeof e!="symbol"?e+"":e,n);class Loe{constructor(e){au(this,"name",zO),au(this,"client"),au(this,"httpProviders"),au(this,"events"),au(this,"namespace"),au(this,"chainId"),this.namespace=e.namespace,this.events=Du("events"),this.client=Du("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit(mv.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Pd(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{var i,o;const a=Pd(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];r[a.reference]=this.createHttpProvider(s,c)}),r}getHttpProvider(e){const n=Pd(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||WO(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tv(new DO(r,Du("disableProviderPing")))}}var Moe=Object.defineProperty,Foe=Object.defineProperties,joe=Object.getOwnPropertyDescriptors,y6=Object.getOwnPropertySymbols,Hoe=Object.prototype.hasOwnProperty,qoe=Object.prototype.propertyIsEnumerable,jw=(t,e,n)=>e in t?Moe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,od=(t,e)=>{for(var n in e||(e={}))Hoe.call(e,n)&&jw(t,n,e[n]);if(y6)for(var n of y6(e))qoe.call(e,n)&&jw(t,n,e[n]);return t},Vh=(t,e)=>Foe(t,joe(e)),qr=(t,e,n)=>jw(t,typeof e!="symbol"?e+"":e,n);let zoe=class GO{constructor(e){qr(this,"client"),qr(this,"namespaces"),qr(this,"optionalNamespaces"),qr(this,"sessionProperties"),qr(this,"scopedProperties"),qr(this,"events",new bE),qr(this,"rpcProviders",{}),qr(this,"session"),qr(this,"providerOpts"),qr(this,"logger"),qr(this,"uri"),qr(this,"disableProviderPing",!1);var n,r;this.providerOpts=e,this.logger=hie({logger:(n=e.logger)!=null?n:n6,name:(r=this.providerOpts.name)!=null?r:HO}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new GO(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:od({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,wf(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:W_("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=c6(this.session.namespaces);this.namespaces=Wh(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=c6(s.namespaces);return this.namespaces=Wh(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!xy(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await mre.init({core:this.providerOpts.core,logger:this.providerOpts.logger||n6,relayUrl:this.providerOpts.relayUrl||Yie,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>vd(n)))];Ny("client",this.client),Ny("events",this.events),Ny("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=ooe(n,this.session);if((r==null?void 0:r.length)===0)return;const s=VO(r),i=Wh(this.namespaces,this.optionalNamespaces),o=Vh(od({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Doe({namespace:o});break;default:this.rpcProviders[n]=new Loe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&xy(o)&&this.events.emit("accountsChanged",o.map(a6))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=vd(o),u=Ty(o)!==Ty(a)?`${c}:${Ty(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Vh(od({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Vh(od({},W_("USER_DISCONNECTED")),{data:e.topic})))}),this.on(mv.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(Vh(od({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[zO]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Wh(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>vd(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=vd(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(a6);if(!xy(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${qh}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${qh}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${qh}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(qh)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}};const b6=2147483648,Woe={convertEVMChainIdToCoinType(t){if(t>=b6)throw new Error("Invalid chainId");return(b6|t)>>>0}},zr=pt({suggestions:[],loading:!1}),Voe={state:zr,subscribe(t){return Mt(zr,()=>t(zr))},subscribeKey(t,e){return Ft(zr,t,e)},async resolveName(t){var e,n;try{return await Ne.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Ne.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{zr.loading=!0,zr.suggestions=[];const e=await Ne.getEnsNameSuggestions(t);return zr.suggestions=e.suggestions||[],zr.suggestions}catch(e){const n=$d.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{zr.loading=!1}},async getNamesForAddress(t){try{if(!B.state.activeCaipNetwork)return[];const n=ie.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ne.reverseLookupEnsName({address:t});return ie.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=$d.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){var s;const e=B.state.activeCaipNetwork,n=(s=B.getAccountData(e==null?void 0:e.chainNamespace))==null?void 0:s.address,r=ae.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");zr.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ve.pushTransactionStack({onCancel(){ve.replace("RegisterAccountName")}});const o=await le.signMessage(i);zr.loading=!1;const a=e.id;if(!a)throw new Error("Network not found");const c=Woe.convertEVMChainIdToCoinType(Number(a));await Ne.registerEnsName({coinType:c,address:n,signature:o,message:i}),B.setAccountProp("profileName",t,e.chainNamespace),ie.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),ve.replace("RegisterAccountNameSuccess")}catch(i){const o=$d.parseEnsApiError(i,`Error registering name ${t}`);throw ve.replace("RegisterAccountName"),new Error(o)}finally{zr.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},$d=Ar(Voe),Koe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},sa={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return Koe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=r[o];switch(l.chains.push(u),u){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":l.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":l.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await $d.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.code=="number",r=n&&e.code===sa.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=n&&e.code===sa.RPC_ERROR_CODE.USER_REJECTED;return r||s}return!1}catch{return!1}},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=sa.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{var c,u,l,d,f;try{const h=((l=(u=(c=t.session)==null?void 0:c.namespaces)==null?void 0:u[e])==null?void 0:l.accounts)||[],g=(f=(d=t.rpcProviders)==null?void 0:d[e])==null?void 0:f.getDefaultChain(),p=a.map(y=>{const C=h.find(A=>A.includes(`${e}:${g}:${y}`));if(!C)return;const{chainId:N,chainNamespace:E}=Jt.parseCaipAddress(C);return{address:y,chainId:N,chainNamespace:E}}).filter(y=>y!==void 0);p.length>0&&s(p)}catch(h){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,h)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Jt.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}},Goe=[J.CONNECTOR_ID.AUTH,J.CONNECTOR_ID.WALLET_CONNECT];class Yoe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>B.getCaipNetworks(n),this.getConnectorId=n=>ae.getConnectorId(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:J.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:J.CONNECTOR_ID.AUTH,type:"AUTH",name:J.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>n.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){B.setAccountProp("status",e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(n){throw sa.isUserRejectedRequestError(n)?new ES(n):n}}async switchNetwork(e){var i;const{caipNetwork:n}=e,r=wt.getProviderId(n.chainNamespace),s=wt.getProvider(n.chainNamespace);if(!s)throw new Error("Provider not found");if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(r==="AUTH"){const o=(i=ae.getAuthConnector())==null?void 0:i.provider;if(!o)throw new Error("Auth provider not found");const a=Ln(n.chainNamespace);await o.switchNetwork({chainId:n.caipNetworkId});const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ge.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ge.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ge.getAccount(e[0]),a=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&((s=this.getConnectorId(J.CHAIN.EVM))==null?void 0:s.toLowerCase())===n.toLowerCase()&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:u}=ge.getAccount(c);return{address:u}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){var n;this.removeProviderListeners(e),this.deleteConnection(e),((n=this.getConnectorId(J.CHAIN.EVM))==null?void 0:n.toLowerCase())===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),((o=this.getConnectorId(J.CHAIN.EVM))==null?void 0:o.toLowerCase())===n.toLowerCase()&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Goe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n;const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r==null?void 0:r.address,chainId:(n=e.caipNetwork)==null?void 0:n.id,connector:e.connector})}}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(u=>u.connectorId.toLowerCase()===n.toLowerCase());if(!o)return null;const a=s.find(u=>u.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(u=>u.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}}let Ra=null;const Or={getSIWX(){return X.state.siwx},async initializeIfEnabled(t=B.getActiveCaipAddress()){var i,o,a;const e=X.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(B.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=X.state.remoteFeatures)!=null&&i.emailCapture){const u=(o=B.getAccountData(n))==null?void 0:o.user;await Ke.open({view:"DataCapture",data:{email:(u==null?void 0:u.email)??void 0}});return}if(Ra&&await Ra,(await e.getSessions(`${n}:${r}`,s)).length)return;await Ke.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Le.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(c)}),await((a=le._getClient())==null?void 0:a.disconnect().catch(console.error)),ve.reset("Connect"),St.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=B.getActiveCaipAddress()){if(!X.state.siwx||!t)return!0;const{chainNamespace:n,chainId:r,address:s}=Jt.parseCaipAddress(t),i=`${n}:${r}`;return(await Or.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=X.state.siwx,e=ge.getPlainAddress(B.getActiveCaipAddress()),n=pd(),r=le._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ae.getConnectorId(n.chainNamespace)===J.CONNECTOR_ID.AUTH&&ve.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),B.setLastConnectedSIWECaipNetwork(n),Ke.close(),Le.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){(!Ke.state.open||ve.state.view==="ApproveTransaction")&&await Ke.open({view:"SIWXSignMessage"}),St.showError("Error signing message"),Le.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(s)}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=B.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ge.getPlainAddress(B.getActiveCaipAddress())||""));s&&s.length>0?await B.switchActiveNetwork(r):await le.disconnect()}else await le.disconnect()}else Ke.close();Ke.close(),Le.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=B.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ge.getPlainAddress(B.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=X.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=B.getActiveCaipAddress();n=ge.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=B.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ve.state.view==="ApproveTransaction",r=ve.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var d;const i=Or.getSIWX(),o=pd();if(!i||!s.includes(J.CHAIN.EVM)||(d=X.state.remoteFeatures)!=null&&d.emailCapture){const f=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:f.address,chainId:f.chainId,accounts:f.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:n,siwxMessage:u,preferredAccountType:r});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await Or.addEmbeddedWalletSession(u,l.message,l.signature),B.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,n){if(Ra)return Ra;const r=Or.getSIWX();return r?(Ra=r.addSession({data:t,message:e,signature:n}).finally(()=>{Ra=null}),Ra):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var u,l,d;const r=Or.getSIWX(),s=pd(),i=new Set(e.map(f=>f.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((u=pd())==null?void 0:u.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(f=>f!==o.chainId)]});St.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(l=a.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"};if(B.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),(d=a==null?void 0:a.auths)!=null&&d.length){const f=a.auths.map(h=>{const g=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||o.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:g,signature:h.s.s,cacao:h}});try{await r.setSessions(f),s&&B.setLastConnectedSIWECaipNetwork(s),Le.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Or.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Le.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Or.getSIWXEventProperties(h)}),await t.disconnect().catch(console.error),h}finally{St.hide()}}return!0},getSIWXEventProperties(t){var n;const e=B.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((n=B.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||"",isSmartAccount:Ln(e)===It.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?ge.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};class Zoe{constructor({provider:e,namespace:n}){this.id=J.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=B.getCaipNetworks.bind(B),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=X.state.universalProviderConfigOverride,s=sa.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Or.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Joe})}}const Joe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],xo={getGasPriceInEther(t,e){const n=e*t;return Number(n)/1e18},getGasPriceInUSD(t,e,n){const r=xo.getGasPriceInEther(e,n);return Dt.bigNumber(t).times(r).toNumber()},getPriceImpact({sourceTokenAmount:t,sourceTokenPriceInUSD:e,toTokenPriceInUSD:n,toTokenAmount:r}){const s=Dt.bigNumber(t).times(e),i=Dt.bigNumber(r).times(n);return s.minus(i).div(s).times(100).toNumber()},getMaxSlippage(t,e){const n=Dt.bigNumber(t).div(100);return Dt.multiply(e,n).toNumber()},getProviderFee(t,e=.0085){return Dt.bigNumber(t).times(e).toString()},isInsufficientNetworkTokenForGas(t,e){const n=e||"0";return Dt.bigNumber(t).eq(0)?!0:Dt.bigNumber(Dt.bigNumber(n)).gt(t)},isInsufficientSourceTokenForSwap(t,e,n){var i,o;const r=(o=(i=n==null?void 0:n.find(a=>a.address===e))==null?void 0:i.quantity)==null?void 0:o.numeric;return Dt.bigNumber(r||"0").lt(t)}},ps=pt({message:"",variant:"info",open:!1}),Xoe={state:ps,subscribeKey(t,e){return Ft(ps,t,e)},open(t,e){const{debug:n}=X.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(ps.message=s,ps.variant=e,ps.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},warn(t,e,n){ps.open=!0,ps.message=t,ps.variant="warning",e&&console.warn(e,n)},close(){ps.open=!1,ps.message="",ps.variant="info"}},yn=Ar(Xoe),w6=15e4,Qoe=6,kn={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,switchingTokens:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:Ve.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0},V=pt({...kn}),gp={state:V,subscribe(t){return Mt(V,()=>t(V))},subscribeKey(t,e){return Ft(V,t,e)},getParams(){var c,u,l,d,f,h,g,p,y;const t=B.state.activeChain,e=((c=B.getAccountData(t))==null?void 0:c.caipAddress)??B.state.activeCaipAddress,n=ge.getPlainAddress(e),r=uf(),s=ae.getConnectorId(B.state.activeChain);if(!n)throw new Error("No address found to swap the tokens from.");const i=!((u=V.toToken)!=null&&u.address)||!((l=V.toToken)!=null&&l.decimals),o=!((d=V.sourceToken)!=null&&d.address)||!((f=V.sourceToken)!=null&&f.decimals)||!Dt.bigNumber(V.sourceTokenAmount).gt(0),a=!V.sourceTokenAmount;return{networkAddress:r,fromAddress:n,fromCaipAddress:e,sourceTokenAddress:(h=V.sourceToken)==null?void 0:h.address,toTokenAddress:(g=V.toToken)==null?void 0:g.address,toTokenAmount:V.toTokenAmount,toTokenDecimals:(p=V.toToken)==null?void 0:p.decimals,sourceTokenAmount:V.sourceTokenAmount,sourceTokenDecimals:(y=V.sourceToken)==null?void 0:y.decimals,invalidToToken:i,invalidSourceToken:o,invalidSourceTokenAmount:a,availableToSwap:e&&!i&&!o&&!a,isAuthConnector:s===J.CONNECTOR_ID.AUTH}},async setSourceToken(t){if(!t){V.sourceToken=t,V.sourceTokenAmount="",V.sourceTokenPriceInUSD=0;return}V.sourceToken=t,await $e.setTokenPrice(t.address,"sourceToken")},setSourceTokenAmount(t){V.sourceTokenAmount=t},async setToToken(t){if(!t){V.toToken=t,V.toTokenAmount="",V.toTokenPriceInUSD=0;return}V.toToken=t,await $e.setTokenPrice(t.address,"toToken")},setToTokenAmount(t){V.toTokenAmount=t?Dt.toFixed(t,Qoe):""},async setTokenPrice(t,e){let n=V.tokensPriceMap[t]||0;n||(V.loadingPrices=!0,n=await $e.getAddressPrice(t)),e==="sourceToken"?V.sourceTokenPriceInUSD=n:e==="toToken"&&(V.toTokenPriceInUSD=n),V.loadingPrices&&(V.loadingPrices=!1),$e.getParams().availableToSwap&&!V.switchingTokens&&$e.swapTokens()},async switchTokens(){if(!(V.initializing||!V.initialized||V.switchingTokens)){V.switchingTokens=!0;try{const t=V.toToken?{...V.toToken}:void 0,e=V.sourceToken?{...V.sourceToken}:void 0,n=t&&V.toTokenAmount===""?"1":V.toTokenAmount;$e.setSourceTokenAmount(n),$e.setToTokenAmount(""),await $e.setSourceToken(t),await $e.setToToken(e),V.switchingTokens=!1,$e.swapTokens()}catch(t){throw V.switchingTokens=!1,t}}},resetState(){V.myTokensWithBalance=kn.myTokensWithBalance,V.tokensPriceMap=kn.tokensPriceMap,V.initialized=kn.initialized,V.initializing=kn.initializing,V.switchingTokens=kn.switchingTokens,V.sourceToken=kn.sourceToken,V.sourceTokenAmount=kn.sourceTokenAmount,V.sourceTokenPriceInUSD=kn.sourceTokenPriceInUSD,V.toToken=kn.toToken,V.toTokenAmount=kn.toTokenAmount,V.toTokenPriceInUSD=kn.toTokenPriceInUSD,V.networkPrice=kn.networkPrice,V.networkTokenSymbol=kn.networkTokenSymbol,V.networkBalanceInUSD=kn.networkBalanceInUSD,V.inputError=kn.inputError},resetValues(){var n;const{networkAddress:t}=$e.getParams(),e=(n=V.tokens)==null?void 0:n.find(r=>r.address===t);$e.setSourceToken(e),$e.setToToken(void 0)},getApprovalLoadingState(){return V.loadingApprovalTransaction},clearError(){V.transactionError=void 0},async initializeState(){if(!V.initializing){if(V.initializing=!0,!V.initialized)try{await $e.fetchTokens(),V.initialized=!0}catch{V.initialized=!1,St.showError("Failed to initialize swap"),ve.goBack()}V.initializing=!1}},async fetchTokens(){var n;const{networkAddress:t}=$e.getParams();await $e.getNetworkTokenPrice(),await $e.getMyTokensWithBalance();const e=(n=V.myTokensWithBalance)==null?void 0:n.find(r=>r.address===t);e&&(V.networkTokenSymbol=e.symbol,$e.setSourceToken(e),$e.setSourceTokenAmount("0"))},async getTokenList(){var e,n;const t=(e=B.state.activeCaipNetwork)==null?void 0:e.caipNetworkId;if(!(V.caipNetworkId===t&&V.tokens))try{V.tokensLoading=!0;const r=await hu.getTokenList(t);V.tokens=r,V.caipNetworkId=t,V.popularTokens=r.sort((c,u)=>c.symbol<u.symbol?-1:c.symbol>u.symbol?1:0);const i=(t&&((n=Ve.SUGGESTED_TOKENS_BY_CHAIN)==null?void 0:n[t])||[]).map(c=>r.find(u=>u.symbol===c)).filter(c=>!!c),a=(Ve.SWAP_SUGGESTED_TOKENS||[]).map(c=>r.find(u=>u.symbol===c)).filter(c=>!!c).filter(c=>!i.some(u=>u.address===c.address));V.suggestedTokens=[...i,...a]}catch{V.tokens=[],V.popularTokens=[],V.suggestedTokens=[]}finally{V.tokensLoading=!1}},async getAddressPrice(t){var c,u;const e=V.tokensPriceMap[t];if(e)return e;const n=await Ne.fetchTokenPrice({addresses:[t]}),r=(n==null?void 0:n.fungibles)||[],s=[...V.tokens||[],...V.myTokensWithBalance||[]],i=(c=s==null?void 0:s.find(l=>l.address===t))==null?void 0:c.symbol,o=((u=r.find(l=>l.symbol.toLowerCase()===(i==null?void 0:i.toLowerCase())))==null?void 0:u.price)||0,a=parseFloat(o.toString());return V.tokensPriceMap[t]=a,a},async getNetworkTokenPrice(){var s;const{networkAddress:t}=$e.getParams(),n=(s=(await Ne.fetchTokenPrice({addresses:[t]}).catch(()=>(St.showError("Failed to fetch network token price"),{fungibles:[]}))).fungibles)==null?void 0:s[0],r=(n==null?void 0:n.price.toString())||"0";V.tokensPriceMap[t]=parseFloat(r),V.networkTokenSymbol=(n==null?void 0:n.symbol)||"",V.networkPrice=r},async getMyTokensWithBalance(t){const e=await hg.getMyTokensWithBalance(t),n=hu.mapBalancesToSwapTokens(e);n&&(await $e.getInitialGasPrice(),$e.setBalances(n))},setBalances(t){const{networkAddress:e}=$e.getParams(),n=B.state.activeCaipNetwork;if(!n)return;const r=t.find(s=>s.address===e);t.forEach(s=>{V.tokensPriceMap[s.address]=s.price||0}),V.myTokensWithBalance=t.filter(s=>s.address.startsWith(n.caipNetworkId)),V.networkBalanceInUSD=r?Dt.multiply(r.quantity.numeric,r.price).toString():"0"},async getInitialGasPrice(){var e,n;const t=await hu.fetchGasPrice();if(!t)return{gasPrice:null,gasPriceInUSD:null};switch((n=(e=B.state)==null?void 0:e.activeCaipNetwork)==null?void 0:n.chainNamespace){case J.CHAIN.SOLANA:return V.gasFee=t.standard??"0",V.gasPriceInUSD=Dt.multiply(t.standard,V.networkPrice).div(1e9).toNumber(),{gasPrice:BigInt(V.gasFee),gasPriceInUSD:Number(V.gasPriceInUSD)};case J.CHAIN.EVM:default:const r=t.standard??"0",s=BigInt(r),i=BigInt(w6),o=xo.getGasPriceInUSD(V.networkPrice,i,s);return V.gasFee=r,V.gasPriceInUSD=o,{gasPrice:s,gasPriceInUSD:o}}},async swapTokens(){var i,o,a;const t=(i=B.getAccountData())==null?void 0:i.address,e=V.sourceToken,n=V.toToken,r=Dt.bigNumber(V.sourceTokenAmount).gt(0);if(r||$e.setToTokenAmount(""),!n||!e||V.loadingPrices||!r||!t)return;V.loadingQuote=!0;const s=Dt.bigNumber(V.sourceTokenAmount).times(10**e.decimals).round(0);try{const c=await Ne.fetchSwapQuote({userAddress:t,from:e.address,to:n.address,gasPrice:V.gasFee,amount:s.toString()});V.loadingQuote=!1;const u=(a=(o=c==null?void 0:c.quotes)==null?void 0:o[0])==null?void 0:a.toAmount;if(!u){yn.open({displayMessage:"Incorrect amount",debugMessage:"Please enter a valid amount"},"error");return}const l=Dt.bigNumber(u).div(10**n.decimals).toString();$e.setToTokenAmount(l),$e.hasInsufficientToken(V.sourceTokenAmount,e.address)?V.inputError="Insufficient balance":(V.inputError=void 0,$e.setTransactionDetails())}catch(c){const u=await hu.handleSwapError(c);V.loadingQuote=!1,V.inputError=u||"Insufficient balance"}},async getTransaction(){const{fromCaipAddress:t,availableToSwap:e}=$e.getParams(),n=V.sourceToken,r=V.toToken;if(!(!t||!e||!n||!r||V.loadingQuote))try{V.loadingBuildTransaction=!0;const s=await hu.fetchSwapAllowance({userAddress:t,tokenAddress:n.address,sourceTokenAmount:V.sourceTokenAmount,sourceTokenDecimals:n.decimals});let i;return s?i=await $e.createSwapTransaction():i=await $e.createAllowanceTransaction(),V.loadingBuildTransaction=!1,V.fetchError=!1,i}catch{ve.goBack(),St.showError("Failed to check allowance"),V.loadingBuildTransaction=!1,V.approvalTransaction=void 0,V.swapTransaction=void 0,V.fetchError=!0;return}},async createAllowanceTransaction(){const{fromCaipAddress:t,sourceTokenAddress:e,toTokenAddress:n}=$e.getParams();if(!(!t||!n)){if(!e)throw new Error("createAllowanceTransaction - No source token address found.");try{const r=await Ne.generateApproveCalldata({from:e,to:n,userAddress:t}),s=ge.getPlainAddress(r.tx.from);if(!s)throw new Error("SwapController:createAllowanceTransaction - address is required");const i={data:r.tx.data,to:s,gasPrice:BigInt(r.tx.eip155.gasPrice),value:BigInt(r.tx.value),toAmount:V.toTokenAmount};return V.swapTransaction=void 0,V.approvalTransaction={data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount},{data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount}}catch{ve.goBack(),St.showError("Failed to create approval transaction"),V.approvalTransaction=void 0,V.swapTransaction=void 0,V.fetchError=!0;return}}},async createSwapTransaction(){var o;const{networkAddress:t,fromCaipAddress:e,sourceTokenAmount:n}=$e.getParams(),r=V.sourceToken,s=V.toToken;if(!e||!n||!r||!s)return;const i=(o=le.parseUnits(n,r.decimals))==null?void 0:o.toString();try{const a=await Ne.generateSwapCalldata({userAddress:e,from:r.address,to:s.address,amount:i,disableEstimate:!0}),c=r.address===t,u=BigInt(a.tx.eip155.gas),l=BigInt(a.tx.eip155.gasPrice),d=ge.getPlainAddress(a.tx.to);if(!d)throw new Error("SwapController:createSwapTransaction - address is required");const f={data:a.tx.data,to:d,gas:u,gasPrice:l,value:BigInt(c?i??"0":"0"),toAmount:V.toTokenAmount};return V.gasPriceInUSD=xo.getGasPriceInUSD(V.networkPrice,u,l),V.approvalTransaction=void 0,V.swapTransaction=f,f}catch{ve.goBack(),St.showError("Failed to create transaction"),V.approvalTransaction=void 0,V.swapTransaction=void 0,V.fetchError=!0;return}},onEmbeddedWalletApprovalSuccess(){St.showLoading("Approve limit increase in your wallet"),ve.replace("SwapPreview")},async sendTransactionForApproval(t){var s,i,o;const{fromAddress:e,isAuthConnector:n}=$e.getParams();V.loadingApprovalTransaction=!0,n?ve.pushTransactionStack({onSuccess:$e.onEmbeddedWalletApprovalSuccess}):St.showLoading("Approve limit increase in your wallet");try{await le.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:J.CHAIN.EVM}),await $e.swapTokens(),await $e.getTransaction(),V.approvalTransaction=void 0,V.loadingApprovalTransaction=!1}catch(a){const c=a;V.transactionError=c==null?void 0:c.displayMessage,V.loadingApprovalTransaction=!1,St.showError((c==null?void 0:c.displayMessage)||"Transaction error"),Le.sendEvent({type:"track",event:"SWAP_APPROVAL_ERROR",properties:{message:(c==null?void 0:c.displayMessage)||(c==null?void 0:c.message)||"Unknown",network:((s=B.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||"",swapFromToken:((i=$e.state.sourceToken)==null?void 0:i.symbol)||"",swapToToken:((o=$e.state.toToken)==null?void 0:o.symbol)||"",swapFromAmount:$e.state.sourceTokenAmount||"",swapToAmount:$e.state.toTokenAmount||"",isSmartAccount:Ln(J.CHAIN.EVM)===It.ACCOUNT_TYPES.SMART_ACCOUNT}})}},async sendTransactionForSwap(t){var o,a,c,u,l,d,f,h,g,p,y,C;if(!t)return;const{fromAddress:e,toTokenAmount:n,isAuthConnector:r}=$e.getParams();V.loadingTransaction=!0;const s=`Swapping ${(o=V.sourceToken)==null?void 0:o.symbol} to ${Dt.formatNumberToLocalString(n,3)} ${(a=V.toToken)==null?void 0:a.symbol}`,i=`Swapped ${(c=V.sourceToken)==null?void 0:c.symbol} to ${Dt.formatNumberToLocalString(n,3)} ${(u=V.toToken)==null?void 0:u.symbol}`;r?ve.pushTransactionStack({onSuccess(){ve.replace("Account"),St.showLoading(s),gp.resetState()}}):St.showLoading("Confirm transaction in your wallet");try{const N=[(l=V.sourceToken)==null?void 0:l.address,(d=V.toToken)==null?void 0:d.address].join(","),E=await le.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:J.CHAIN.EVM});return V.loadingTransaction=!1,St.showSuccess(i),Le.sendEvent({type:"track",event:"SWAP_SUCCESS",properties:{network:((f=B.state.activeCaipNetwork)==null?void 0:f.caipNetworkId)||"",swapFromToken:((h=$e.state.sourceToken)==null?void 0:h.symbol)||"",swapToToken:((g=$e.state.toToken)==null?void 0:g.symbol)||"",swapFromAmount:$e.state.sourceTokenAmount||"",swapToAmount:$e.state.toTokenAmount||"",isSmartAccount:Ln(J.CHAIN.EVM)===It.ACCOUNT_TYPES.SMART_ACCOUNT}}),gp.resetState(),r||ve.replace("Account"),gp.getMyTokensWithBalance(N),E}catch(N){const E=N;V.transactionError=E==null?void 0:E.displayMessage,V.loadingTransaction=!1,St.showError((E==null?void 0:E.displayMessage)||"Transaction error"),Le.sendEvent({type:"track",event:"SWAP_ERROR",properties:{message:(E==null?void 0:E.displayMessage)||(E==null?void 0:E.message)||"Unknown",network:((p=B.state.activeCaipNetwork)==null?void 0:p.caipNetworkId)||"",swapFromToken:((y=$e.state.sourceToken)==null?void 0:y.symbol)||"",swapToToken:((C=$e.state.toToken)==null?void 0:C.symbol)||"",swapFromAmount:$e.state.sourceTokenAmount||"",swapToAmount:$e.state.toTokenAmount||"",isSmartAccount:Ln(J.CHAIN.EVM)===It.ACCOUNT_TYPES.SMART_ACCOUNT}});return}},hasInsufficientToken(t,e){return xo.isInsufficientSourceTokenForSwap(t,e,V.myTokensWithBalance)},setTransactionDetails(){const{toTokenAddress:t,toTokenDecimals:e}=$e.getParams();!t||!e||(V.gasPriceInUSD=xo.getGasPriceInUSD(V.networkPrice,BigInt(V.gasFee),BigInt(w6)),V.priceImpact=xo.getPriceImpact({sourceTokenAmount:V.sourceTokenAmount,sourceTokenPriceInUSD:V.sourceTokenPriceInUSD,toTokenPriceInUSD:V.toTokenPriceInUSD,toTokenAmount:V.toTokenAmount}),V.maxSlippage=xo.getMaxSlippage(V.slippage,V.toTokenAmount),V.providerFee=xo.getProviderFee(V.sourceTokenAmount))}},$e=Ar(gp),gs=pt({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),eae={state:gs,subscribe(t){return Mt(gs,()=>t(gs))},subscribeKey(t,e){return Ft(gs,t,e)},showTooltip({message:t,triggerRect:e,variant:n}){gs.open=!0,gs.message=t,gs.triggerRect=e,gs.variant=n},hide(){gs.open=!1,gs.message="",gs.triggerRect={width:0,height:0,top:0,left:0}}},hde=Ar(eae),ad=pt({isLegalCheckboxChecked:!1}),pde={state:ad,subscribe(t){return Mt(ad,()=>t(ad))},subscribeKey(t,e){return Ft(ad,t,e)},setIsLegalCheckboxChecked(t){ad.isLegalCheckboxChecked=t}},tae={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class nae extends Error{}function rae(){const{sdkType:t,sdkVersion:e,projectId:n}=X.getSnapshot(),r=new URL("https://rpc.walletconnect.org/v1/json-rpc");return r.searchParams.set("projectId",n),r.searchParams.set("st",t),r.searchParams.set("sv",e),r.searchParams.set("source","fund-wallet"),r.toString()}async function bv(t,e){const n=rae(),{projectId:r}=X.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:r}},o=await(await fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new nae(o.error.message);return o}async function sae(t){return(await bv("reown_getExchanges",t)).result}async function iae(t){return(await bv("reown_getExchangePayUrl",t)).result}async function oae(t){return(await bv("reown_getExchangeBuyStatus",t)).result}function E6(t,e){const{chainNamespace:n,chainId:r}=Jt.parseCaipNetworkId(t),s=tae[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const aae={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},cae={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},YO={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},uae={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},lae={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},dae={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},fae={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},hae={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},pae={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},gae={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},mae={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},yae={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},bae={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},wae={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Eae={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},vae={ethereumETH:aae,baseETH:cae,baseUSDC:YO,baseSepoliaETH:lae,ethereumUSDC:dae,arbitrumUSDC:fae,polygonUSDC:hae,solanaUSDC:pae,ethereumUSDT:gae,optimismUSDT:mae,arbitrumUSDT:yae,polygonUSDT:bae,solanaUSDT:wae,solanaSOL:Eae};function Aae(t){return Object.values(vae).filter(e=>e.network===t)}const Cae=0,ZO={paymentAsset:null,amount:null,tokenAmount:0,priceLoading:!1,error:null,exchanges:[],isLoading:!1,currentPayment:void 0,isPaymentInProgress:!1,paymentId:"",assets:[]},Pe=pt(ZO),$a={state:Pe,subscribe(t){return Mt(Pe,()=>t(Pe))},subscribeKey(t,e){return Ft(Pe,t,e)},resetState(){Object.assign(Pe,{...ZO})},async getAssetsForNetwork(t){const e=Aae(t),n=await $a.getAssetsImageAndPrice(e),r=e.map(s=>{var a,c,u,l;const i=s.asset==="native"?uf():`${s.network}:${s.asset}`,o=n.find(d=>{var f,h,g;return((g=(h=(f=d.fungibles)==null?void 0:f[0])==null?void 0:h.address)==null?void 0:g.toLowerCase())===i.toLowerCase()});return{...s,price:((c=(a=o==null?void 0:o.fungibles)==null?void 0:a[0])==null?void 0:c.price)||1,metadata:{...s.metadata,iconUrl:(l=(u=o==null?void 0:o.fungibles)==null?void 0:u[0])==null?void 0:l.iconUrl}}});return Pe.assets=r,r},async getAssetsImageAndPrice(t){const e=t.map(r=>r.asset==="native"?uf():`${r.network}:${r.asset}`);return await Promise.all(e.map(r=>Ne.fetchTokenPrice({addresses:[r]})))},getTokenAmount(){var n;if(!((n=Pe==null?void 0:Pe.paymentAsset)!=null&&n.price))throw new Error("Cannot get token price");const t=Dt.bigNumber(Pe.amount??0).round(8),e=Dt.bigNumber(Pe.paymentAsset.price).round(8);return t.div(e).round(8).toNumber()},setAmount(t){var e;Pe.amount=t,(e=Pe.paymentAsset)!=null&&e.price&&(Pe.tokenAmount=$a.getTokenAmount())},setPaymentAsset(t){Pe.paymentAsset=t},isPayWithExchangeEnabled(){var t;return(t=X.state.remoteFeatures)==null?void 0:t.payWithExchange},isPayWithExchangeSupported(){return $a.isPayWithExchangeEnabled()&&B.state.activeCaipNetwork&&Ve.PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES.includes(B.state.activeCaipNetwork.chainNamespace)},async fetchExchanges(){var t;try{const e=$a.isPayWithExchangeSupported();if(!Pe.paymentAsset||!e){Pe.exchanges=[],Pe.isLoading=!1;return}Pe.isLoading=!0;const n=await sae({page:Cae,asset:E6(Pe.paymentAsset.network,Pe.paymentAsset.asset),amount:((t=Pe.amount)==null?void 0:t.toString())??"0"});Pe.exchanges=n.exchanges.slice(0,2)}catch{throw St.showError("Unable to get exchanges"),new Error("Unable to get exchanges")}finally{Pe.isLoading=!1}},async getPayUrl(t,e){try{const n=Number(e.amount),r=await iae({exchangeId:t,asset:E6(e.network,e.asset),amount:n.toString(),recipient:`${e.network}:${e.recipient}`});return Le.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{exchange:{id:t},configuration:{network:e.network,asset:e.asset,recipient:e.recipient,amount:n},currentPayment:{type:"exchange",exchangeId:t},source:"fund-from-exchange",headless:!1}}),r}catch(n){throw n instanceof Error&&n.message.includes("is not supported")?new Error("Asset not supported"):new Error(n.message)}},async handlePayWithExchange(t){var e;try{const n=(e=B.getAccountData())==null?void 0:e.address;if(!n)throw new Error("No account connected");if(!Pe.paymentAsset)throw new Error("No payment asset selected");const r=ge.returnOpenHref("","popupWindow","scrollbar=yes,width=480,height=720");if(!r)throw new Error("Could not create popup window");Pe.isPaymentInProgress=!0,Pe.paymentId=crypto.randomUUID(),Pe.currentPayment={type:"exchange",exchangeId:t};const{network:s,asset:i}=Pe.paymentAsset,o={network:s,asset:i,amount:Pe.tokenAmount,recipient:n},a=await $a.getPayUrl(t,o);if(!a){try{r.close()}catch(c){console.error("Unable to close popup window",c)}throw new Error("Unable to initiate payment")}Pe.currentPayment.sessionId=a.sessionId,Pe.currentPayment.status="IN_PROGRESS",Pe.currentPayment.exchangeId=t,r.location.href=a.url}catch{Pe.error="Unable to initiate payment",St.showError(Pe.error)}},async waitUntilComplete({exchangeId:t,sessionId:e,paymentId:n,retries:r=20}){const s=await $a.getBuyStatus(t,e,n);if(s.status==="SUCCESS"||s.status==="FAILED")return s;if(r===0)throw new Error("Unable to get deposit status");return await new Promise(i=>{setTimeout(i,5e3)}),$a.waitUntilComplete({exchangeId:t,sessionId:e,paymentId:n,retries:r-1})},async getBuyStatus(t,e,n){var r,s,i,o,a;try{if(!Pe.currentPayment)throw new Error("No current payment");const c=await oae({sessionId:e,exchangeId:t});if(Pe.currentPayment.status=c.status,c.status==="SUCCESS"||c.status==="FAILED"){const u=(r=B.getAccountData())==null?void 0:r.address;Pe.currentPayment.result=c.txHash,Pe.isPaymentInProgress=!1,Le.sendEvent({type:"track",event:c.status==="SUCCESS"?"PAY_SUCCESS":"PAY_ERROR",properties:{message:c.status==="FAILED"?ge.parseError(Pe.error):void 0,source:"fund-from-exchange",paymentId:n,configuration:{network:((s=Pe.paymentAsset)==null?void 0:s.network)||"",asset:((i=Pe.paymentAsset)==null?void 0:i.asset)||"",recipient:u||"",amount:Pe.amount??0},currentPayment:{type:"exchange",exchangeId:(o=Pe.currentPayment)==null?void 0:o.exchangeId,sessionId:(a=Pe.currentPayment)==null?void 0:a.sessionId,result:c.txHash}}})}return c}catch{return{status:"UNKNOWN",txHash:""}}},reset(){Pe.currentPayment=void 0,Pe.isPaymentInProgress=!1,Pe.paymentId="",Pe.paymentAsset=null,Pe.amount=0,Pe.tokenAmount=0,Pe.priceLoading=!1,Pe.error=null,Pe.exchanges=[],Pe.isLoading=!1}},gde={isUnsupportedChainView(){return ve.state.view==="UnsupportedChain"||ve.state.view==="SwitchNetwork"&&ve.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){Ke.shake();return}if(await Or.isSIWXCloseDisabled()){Ke.shake();return}(ve.state.view==="DataCapture"||ve.state.view==="DataCaptureOtpConfirm")&&le.disconnect(),Ke.close()}},gt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:J.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},_ae={ConnectorExplorerIds:{[J.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[J.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[J.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[J.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[J.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[gt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[gt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[gt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[gt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[gt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[gt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[gt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[gt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[gt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[gt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[gt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[gt.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700"},ConnectorImageIds:{[J.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[J.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[J.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[J.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[J.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[J.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[J.CONNECTOR_ID.INJECTED]:"Browser Wallet",[J.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[J.CONNECTOR_ID.COINBASE]:"Coinbase",[J.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[J.CONNECTOR_ID.LEDGER]:"Ledger",[J.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[J.CONNECTOR_ID.INJECTED]:"INJECTED",[J.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[J.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[J.CONNECTOR_ID.AUTH]:"AUTH",[gt.CONNECTOR_TYPE_AUTH]:"AUTH"}},Tc={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${gt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=B.state.activeChain;return J.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ae.getConnectorId(e)===J.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return J.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?J.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(r=>r!==t):[]},getConnectorStorageInfo(t,e){const r=ie.getConnections()[e]??[];return{hasDisconnected:ie.isConnectorDisconnected(t,e),hasConnected:r.some(s=>Tc.isLowerCaseMatch(s.connectorId,t))}}},Sae={extractVersion(t){var r;if(!t||typeof t!="string")return null;const e=/(?:[~^>=<]+\s*)?(?<version>\d+(?:\.\d+){0,2})(?:-[a-zA-Z]+\.\d+)?/u,n=t.match(e);return((r=n==null?void 0:n.groups)==null?void 0:r.version)||null},checkSDKVersion(t){this.extractVersion(t)},isValidVersion(t){return typeof t=="string"&&/^\d+\.\d+\.\d+$/u.test(t)},isOlder(t,e){const n=this.extractVersion(t),r=this.extractVersion(e);if(!n||!r)return!1;function s(a){const c=a.split(".").map(Number);for(;c.length<3;)c.push(0);return c}const i=s(n),o=s(r);for(let a=0;a<Math.max(i.length,o.length);a+=1){const c=i[a]||0,u=o[a]||0;if(c<u)return!0;if(c>u)return!1}return!1}},Iae=new AbortController,Dn={EmbeddedWalletAbortController:Iae,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${ld()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${X.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system’s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},JO={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:YO.asset,84532:uae.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(JO.TOKEN_ADDRESSES_BY_SYMBOL).find(([n,r])=>Object.values(r).includes(t))??[];return e}},xae={createLogger(t,e="error"){const n=c1({level:e}),{logger:r}=$f({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Tae="rpc.walletconnect.org";function v6(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const ky=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],pu={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Tae}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:J.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${J.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return ky.includes(e)?v6(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var f,h,g,p,y,C,N;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(g=(h=(f=t.rpcUrls)==null?void 0:f.default)==null?void 0:h.http)==null?void 0:g[0],a=this.getDefaultRpcUrl(t,i,n),c=((C=(y=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:y.http)==null?void 0:C[0])||o,u=((N=r==null?void 0:r[i])==null?void 0:N.map(E=>E.url))||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:_ae.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>pu.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(hd(a.url,a.config))}),ky.includes(t.caipNetworkId)&&r.push(hd(v6(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(hd(a))}),Nb(r)},extendWagmiTransports(t,e,n){if(ky.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Nb([n,hd(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:J.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ie.getActiveCaipNetworkId(),n=B.getAllRequestedCaipNetworks(),r=Array.from(((c=B.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(u=>u.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}};class kd{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var d;const{metadata:c,sdkVersion:u,sdkType:l}=X.getSnapshot();return kd.instance||(kd.instance=new kk({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((d=X.state.remoteFeatures)!=null&&d.emailCapture),metadata:c,sdkVersion:u,sdkType:l})),kd.instance}}var A6={};const Nae={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof A6<"u"?A6.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},Ad={filterOutDuplicatesByRDNS(t){const e=X.state.enableEIP6963?ae.state.connectors:[],n=ie.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ge.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=ae.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ie.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ae.state,{featuredWalletIds:n}=X.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const u=n.indexOf(o.id),l=n.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=X.state.features)==null?void 0:c.connectMethodsOrder),r=e||ae.state.connectors;if(n)return n;const{injected:s,announced:i}=Dy.getConnectorsByType(r,Te.state.recommended,Te.state.featured),o=s.filter(Dy.showConnector),a=i.filter(Dy.showConnector);return o.length||a.length?["wallet","email","social"]:Nae.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Te.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Te.state.excludedWallets.some(r=>Tc.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},Dy={getConnectorsByType(t,e,n){const{customWallets:r}=X.state,s=ie.getRecentWallets(),i=Ad.filterOutDuplicateWallets(e),o=Ad.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Te.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Te.state.excludedWallets.some(i=>Tc.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ge.isMobile()||ge.isMobile()&&!e&&!le.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(B.state.chains.values()).some(n=>ae.getConnectorId(n.namespace)===J.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=X.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const d=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(p=>p.isEnabled),f=new Set(d.map(p=>p.type)),h=c.filter(p=>f.has(p)).map(p=>({type:p,isEnabled:!0})),g=d.filter(({type:p})=>!h.some(({type:C})=>C===p));return Array.from(new Set([...h,...g].map(({type:p})=>p)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,n)=>e.explorerWallet&&n.explorerWallet?(e.explorerWallet.order??0)-(n.explorerWallet.order??0):e.explorerWallet?-1:n.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ge.isMobile())return{accounts:[],chainId:void 0};if(t.id===J.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=ie.getRecentWallets(),n=ae.state.connectors.map(o=>{var a;return(a=o.info)==null?void 0:a.rdns}).filter(Boolean),r=e.map(o=>o.rdns).filter(Boolean),s=n.concat(r);if(s.includes("io.metamask.mobile")&&ge.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o==null?void 0:o.rdns)))},hasWalletConnector(t){return ae.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=B.state.activeChain;return e&&t.chains?t.chains.some(n=>{const r=n.split(":")[0];return e===r}):!0},getFilteredRecentWallets(){return ie.getRecentWallets().filter(n=>!Ad.isExcluded(n)).filter(n=>!this.hasWalletConnector(n)).filter(n=>this.isWalletCompatibleWithCurrentChain(n))},getCappedRecommendedWallets(t){const{connectors:e}=ae.state,{customWallets:n,featuredWalletIds:r}=X.state,s=e.find(N=>N.id==="walletConnect"),i=e.filter(N=>N.type==="INJECTED"||N.type==="ANNOUNCED"||N.type==="MULTI_CHAIN");if(!s&&!i.length&&!(n!=null&&n.length))return[];const o=Ob.isEmailEnabled(),a=Ob.isSocialsEnabled(),c=i.filter(N=>N.name!=="Browser Wallet"),u=(r==null?void 0:r.length)||0,l=(n==null?void 0:n.length)||0,d=c.length||0,f=o?1:0,h=a?1:0,g=u+l+d+f+h,y=Math.max(0,4-g);return y<=0?[]:Ad.filterOutDuplicateWallets(t).slice(0,y)}},mde={interpolate(t,e,n){if(t.length!==2||e.length!==2)throw new Error("inputRange and outputRange must be an array of length 2");const r=t[0]||0,s=t[1]||0,i=e[0]||0,o=e[1]||0;return n<r?i:n>s?o:(o-i)/(s-r)*(n-r)+i}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mp=globalThis,wv=mp.ShadowRoot&&(mp.ShadyCSS===void 0||mp.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ev=Symbol(),C6=new WeakMap;let XO=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Ev)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(wv&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=C6.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&C6.set(n,e))}return e}toString(){return this.cssText}};const vs=t=>new XO(typeof t=="string"?t:t+"",void 0,Ev),jo=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new XO(n,t,Ev)},Oae=(t,e)=>{if(wv)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=mp.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},_6=wv?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return vs(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Pae,defineProperty:Rae,getOwnPropertyDescriptor:$ae,getOwnPropertyNames:kae,getOwnPropertySymbols:Dae,getPrototypeOf:Uae}=Object,ia=globalThis,S6=ia.trustedTypes,Bae=S6?S6.emptyScript:"",Uy=ia.reactiveElementPolyfillSupport,Dd=(t,e)=>t,Hw={toAttribute(t,e){switch(e){case Boolean:t=t?Bae:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},QO=(t,e)=>!Pae(t,e),I6={attribute:!0,type:String,converter:Hw,reflect:!1,useDefault:!1,hasChanged:QO};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ia.litPropertyMetadata??(ia.litPropertyMetadata=new WeakMap);let gu=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=I6){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Rae(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=$ae(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??I6}static _$Ei(){if(this.hasOwnProperty(Dd("elementProperties")))return;const e=Uae(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Dd("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Dd("properties"))){const n=this.properties,r=[...kae(n),...Dae(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(_6(s))}else e!==void 0&&n.push(_6(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Oae(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Hw).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Hw;this._$Em=s;const u=c.fromAttribute(n,a.type);this[s]=u??((o=this._$Ej)==null?void 0:o.get(s))??u,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??QO)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};gu.elementStyles=[],gu.shadowRootOptions={mode:"open"},gu[Dd("elementProperties")]=new Map,gu[Dd("finalized")]=new Map,Uy==null||Uy({ReactiveElement:gu}),(ia.reactiveElementVersions??(ia.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ud=globalThis,C0=Ud.trustedTypes,x6=C0?C0.createPolicy("lit-html",{createHTML:t=>t}):void 0,eP="$lit$",Ho=`lit$${Math.random().toFixed(9).slice(2)}$`,tP="?"+Ho,Lae=`<${tP}>`,Nc=document,vf=()=>Nc.createComment(""),Af=t=>t===null||typeof t!="object"&&typeof t!="function",vv=Array.isArray,Mae=t=>vv(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",By=`[ 	
\f\r]`,cd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T6=/-->/g,N6=/>/g,ka=RegExp(`>|${By}(?:([^\\s"'>=/]+)(${By}*=${By}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),O6=/'/g,P6=/"/g,nP=/^(?:script|style|textarea|title)$/i,rP=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),wde=rP(1),Ede=rP(2),Cl=Symbol.for("lit-noChange"),on=Symbol.for("lit-nothing"),R6=new WeakMap,Za=Nc.createTreeWalker(Nc,129);function sP(t,e){if(!vv(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return x6!==void 0?x6.createHTML(e):e}const Fae=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=cd;for(let a=0;a<n;a++){const c=t[a];let u,l,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===cd?l[1]==="!--"?o=T6:l[1]!==void 0?o=N6:l[2]!==void 0?(nP.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=ka):l[3]!==void 0&&(o=ka):o===ka?l[0]===">"?(o=s??cd,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?ka:l[3]==='"'?P6:O6):o===P6||o===O6?o=ka:o===T6||o===N6?o=cd:(o=ka,s=void 0);const h=o===ka&&t[a+1].startsWith("/>")?" ":"";i+=o===cd?c+Lae:d>=0?(r.push(u),c.slice(0,d)+eP+c.slice(d)+Ho+h):c+Ho+(d===-2?a:h)}return[sP(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Cf{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=Fae(e,n);if(this.el=Cf.createElement(u,r),Za.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Za.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(eP)){const f=l[o++],h=s.getAttribute(d).split(Ho),g=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:g[2],strings:h,ctor:g[1]==="."?Hae:g[1]==="?"?qae:g[1]==="@"?zae:Mg}),s.removeAttribute(d)}else d.startsWith(Ho)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(nP.test(s.tagName)){const d=s.textContent.split(Ho),f=d.length-1;if(f>0){s.textContent=C0?C0.emptyScript:"";for(let h=0;h<f;h++)s.append(d[h],vf()),Za.nextNode(),c.push({type:2,index:++i});s.append(d[f],vf())}}}else if(s.nodeType===8)if(s.data===tP)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ho,d+1))!==-1;)c.push({type:7,index:i}),d+=Ho.length-1}i++}}static createElement(e,n){const r=Nc.createElement("template");return r.innerHTML=e,r}}function _l(t,e,n=t,r){var o,a;if(e===Cl)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Af(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=_l(t,s._$AS(t,e.values),s,r)),e}class jae{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Nc).importNode(n,!0);Za.currentNode=s;let i=Za.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new ih(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new Wae(i,this,e)),this._$AV.push(u),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Za.nextNode(),o++)}return Za.currentNode=Nc,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class ih{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=on,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=_l(this,e,n),Af(e)?e===on||e==null||e===""?(this._$AH!==on&&this._$AR(),this._$AH=on):e!==this._$AH&&e!==Cl&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Mae(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==on&&Af(this._$AH)?this._$AA.nextSibling.data=e:this.T(Nc.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Cf.createElement(sP(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new jae(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=R6.get(e.strings);return n===void 0&&R6.set(e.strings,n=new Cf(e)),n}k(e){vv(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new ih(this.O(vf()),this.O(vf()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Mg{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=on,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=on}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=_l(this,e,n,0),o=!Af(e)||e!==this._$AH&&e!==Cl,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=_l(this,a[r+c],n,c),u===Cl&&(u=this._$AH[c]),o||(o=!Af(u)||u!==this._$AH[c]),u===on?e=on:e!==on&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===on?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Hae extends Mg{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===on?void 0:e}}class qae extends Mg{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==on)}}class zae extends Mg{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=_l(this,e,n,0)??on)===Cl)return;const r=this._$AH,s=e===on&&r!==on||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==on&&(r===on||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Wae{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){_l(this,e)}}const Ly=Ud.litHtmlPolyfillSupport;Ly==null||Ly(Cf,ih),(Ud.litHtmlVersions??(Ud.litHtmlVersions=[])).push("3.3.1");const Vae=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new ih(e.insertBefore(vf(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cc=globalThis;class yp extends gu{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Vae(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Cl}}var G6;yp._$litElement$=!0,yp.finalized=!0,(G6=cc.litElementHydrateSupport)==null||G6.call(cc,{LitElement:yp});const My=cc.litElementPolyfillSupport;My==null||My({LitElement:yp});(cc.litElementVersions??(cc.litElementVersions=[])).push("4.2.1");const Kae={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},_0={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},Gae={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},Yae={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},Zae={regular:"KHTeka",mono:"KHTekaMono"},Jae={regular:"400",medium:"500"},Xae={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},Qae={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},ece={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},tce={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},qw={colors:Kae,fontFamily:Zae,fontWeight:Jae,textSize:Xae,typography:Qae,tokens:{core:_0.core,theme:_0.dark},borderRadius:Gae,spacing:Yae,durations:tce,easings:ece},$6="--apkt",Ri={createCSSVariables(t){const e={},n={};function r(i,o,a=""){for(const[c,u]of Object.entries(i)){const l=a?`${a}-${c}`:c;u&&typeof u=="object"&&Object.keys(u).length?(o[c]={},r(u,o[c],l)):typeof u=="string"&&(o[c]=`${$6}-${l}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return r(t,e),s(e,n),{cssVariables:e,cssVariablesVarPrefix:n}},assignCSSVariables(t,e){const n={};function r(s,i,o){for(const[a,c]of Object.entries(s)){const u=o?`${o}-${a}`:a,l=i[a];c&&typeof c=="object"?r(c,l,u):typeof l=="string"&&(n[`${$6}-${u}`]=l)}}return r(t,e),n},createRootStyles(t,e){const n={...qw,tokens:{...qw.tokens,theme:t==="light"?_0.light:_0.dark}},{cssVariables:r}=Ri.createCSSVariables(n),s=Ri.assignCSSVariables(r,n),i=Ri.generateW3MVariables(e),o=Ri.generateW3MOverrides(e),a=Ri.generateScaledVariables(e),c=Ri.generateBaseVariables(s),u={...s,...c,...i,...o,...a},l=Ri.applyColorMixToVariables(e,u),d={...u,...l};return`:root {${Object.entries(d).map(([h,g])=>`${h}:${g.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e={};return e["--w3m-font-family"]=t["--w3m-font-family"]||"KHTeka",e["--w3m-accent"]=t["--w3m-accent"]||"#0988F0",e["--w3m-color-mix"]=t["--w3m-color-mix"]||"#000",e["--w3m-color-mix-strength"]=`${t["--w3m-color-mix-strength"]||0}%`,e["--w3m-font-size-master"]=t["--w3m-font-size-master"]||"10px",e["--w3m-border-radius-master"]=t["--w3m-border-radius-master"]||"4px",e},generateW3MOverrides(t){if(!t)return{};const e={};if(t["--w3m-accent"]){const n=t["--w3m-accent"];e["--apkt-tokens-core-iconAccentPrimary"]=n,e["--apkt-tokens-core-borderAccentPrimary"]=n,e["--apkt-tokens-core-textAccentPrimary"]=n,e["--apkt-tokens-core-backgroundAccentPrimary"]=n}return t["--w3m-font-family"]&&(e["--apkt-fontFamily-regular"]=t["--w3m-font-family"]),t["--w3m-z-index"]&&(e["--apkt-tokens-core-zIndex"]=`${t["--w3m-z-index"]}`),e},generateScaledVariables(t){if(!t)return{};const e={};if(t["--w3m-font-size-master"]){const n=parseFloat(t["--w3m-font-size-master"].replace("px",""));e["--apkt-textSize-h1"]=`${Number(n)*5}px`,e["--apkt-textSize-h2"]=`${Number(n)*4.4}px`,e["--apkt-textSize-h3"]=`${Number(n)*3.8}px`,e["--apkt-textSize-h4"]=`${Number(n)*3.2}px`,e["--apkt-textSize-h5"]=`${Number(n)*2.6}px`,e["--apkt-textSize-h6"]=`${Number(n)*2}px`,e["--apkt-textSize-large"]=`${Number(n)*1.6}px`,e["--apkt-textSize-medium"]=`${Number(n)*1.4}px`,e["--apkt-textSize-small"]=`${Number(n)*1.2}px`}if(t["--w3m-border-radius-master"]){const n=parseFloat(t["--w3m-border-radius-master"].replace("px",""));e["--apkt-borderRadius-1"]=`${Number(n)}px`,e["--apkt-borderRadius-2"]=`${Number(n)*2}px`,e["--apkt-borderRadius-3"]=`${Number(n)*3}px`,e["--apkt-borderRadius-4"]=`${Number(n)*4}px`,e["--apkt-borderRadius-5"]=`${Number(n)*5}px`,e["--apkt-borderRadius-6"]=`${Number(n)*6}px`,e["--apkt-borderRadius-8"]=`${Number(n)*8}px`,e["--apkt-borderRadius-16"]=`${Number(n)*16}px`,e["--apkt-borderRadius-20"]=`${Number(n)*20}px`,e["--apkt-borderRadius-32"]=`${Number(n)*32}px`,e["--apkt-borderRadius-64"]=`${Number(n)*64}px`,e["--apkt-borderRadius-128"]=`${Number(n)*128}px`}return e},generateColorMixCSS(t,e){if(!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return"";const n=t["--w3m-color-mix"],r=t["--w3m-color-mix-strength"];if(!r||r===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=(e==null?void 0:e[o])||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${n} ${r}%, ${a});`:`${o}: color-mix(in srgb, ${n} ${r}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},n=t["--apkt-tokens-theme-backgroundPrimary"];n&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=t["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),e},applyColorMixToVariables(t,e){const n={};if(e!=null&&e["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e!=null&&e["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)"),!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return n;const r=t["--w3m-color-mix"],s=t["--w3m-color-mix-strength"];if(!s||s===0)return n;const i=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon")||o.includes("-tokens-theme-overlay"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return i.length===0||i.forEach(o=>{const a=(e==null?void 0:e[o])||"";o.endsWith("-base")||(o==="--apkt-tokens-theme-backgroundPrimary"||o==="--apkt-tokens-core-backgroundAccentPrimary"?n[o]=`color-mix(in srgb, ${r} ${s}%, var(${o}-base))`:a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?n[o]=`color-mix(in srgb, ${r} ${s}%, ${a})`:n[o]=`color-mix(in srgb, ${r} ${s}%, var(${o}-base, ${a}))`)}),n}},{cssVariablesVarPrefix:nce}=Ri.createCSSVariables(qw);function vde(t,...e){return jo(t,...e.map(n=>vs(typeof n=="function"?n(nce):n)))}let Fa,Ja,ni,Pr,S0;const Ni={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function I0(t,e="dark"){Fa&&document.head.removeChild(Fa),Fa=document.createElement("style"),Fa.textContent=Ri.createRootStyles(e,t),document.head.appendChild(Fa)}function Ade(t,e="dark"){if(S0=t,Ja=document.createElement("style"),ni=document.createElement("style"),Pr=document.createElement("style"),Ja.textContent=Uu(t).core.cssText,ni.textContent=Uu(t).dark.cssText,Pr.textContent=Uu(t).light.cssText,document.head.appendChild(Ja),document.head.appendChild(ni),document.head.appendChild(Pr),I0(t,e),zw(e),!(t!=null&&t["--w3m-font-family"]))for(const[n,r]of Object.entries(Ni)){const s=document.createElement("link");s.rel="preload",s.href=r,s.as="font",s.type=n.includes("woff2")?"font/woff2":"font/woff",s.crossOrigin="anonymous",document.head.appendChild(s)}zw(e)}function zw(t="dark"){ni&&Pr&&Fa&&(t==="light"?(I0(S0,t),ni.removeAttribute("media"),Pr.media="enabled"):(I0(S0,t),Pr.removeAttribute("media"),ni.media="enabled"))}function rce(t){var e,n,r;if(S0=t,Ja&&ni&&Pr&&(Ja.textContent=Uu(t).core.cssText,ni.textContent=Uu(t).dark.cssText,Pr.textContent=Uu(t).light.cssText,t!=null&&t["--w3m-font-family"])){const s=t["--w3m-font-family"];Ja.textContent=(e=Ja.textContent)==null?void 0:e.replace("font-family: KHTeka",`font-family: ${s}`),ni.textContent=(n=ni.textContent)==null?void 0:n.replace("font-family: KHTeka",`font-family: ${s}`),Pr.textContent=(r=Pr.textContent)==null?void 0:r.replace("font-family: KHTeka",`font-family: ${s}`)}if(Fa){const s=(Pr==null?void 0:Pr.media)==="enabled"?"light":"dark";I0(t,s)}}function Uu(t){const e=!!(t!=null&&t["--w3m-font-family"]);return{core:jo`
      ${e?jo``:jo`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${vs(Ni["KHTeka-400-woff2"])}) format('woff2'),
                url(${vs(Ni["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${vs(Ni["KHTeka-300-woff2"])}) format('woff2'),
                url(${vs(Ni["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${vs(Ni["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${vs(Ni["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${vs(Ni["KHTeka-400-woff2"])}) format('woff2'),
                url(${vs(Ni["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:jo`
      :root {
      }
    `,light:jo`
      :root {
      }
    `}}const Cde=jo`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,_de=jo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Kh=".",k6={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--apkt-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--apkt-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},formatCurrency(t=0,e={}){const n=Number(t);return isNaN(n)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2,...e}).format(n)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:n,truncate:r}){return t.length<=e+n?t:r==="end"?`${t.substring(0,e)}...`:r==="start"?`...${t.substring(t.length-n)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(n))}`},generateAvatarColors(t){const n=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(n),s=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(s==null?void 0:s.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let u=0;u<5;u+=1){const l=this.tintColor(r,.15*u);c.push(`rgb(${l[0]}, ${l[1]}, ${l[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),n=e>>16&255,r=e>>8&255,s=e&255;return[n,r,s]},tintColor(t,e){const[n,r,s]=t,i=Math.round(n+(255-n)*e),o=Math.round(r+(255-r)*e),a=Math.round(s+(255-s)*e);return[i,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){var e;return t||(typeof window<"u"&&window.matchMedia&&typeof window.matchMedia=="function"?(e=window.matchMedia("(prefers-color-scheme: dark)"))!=null&&e.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,n){return t.toString().length>=e?Number(t).toFixed(n):t},cssDurationToNumber(t){return t.endsWith("s")?Number(t.replace("s",""))*1e3:t.endsWith("ms")?Number(t.replace("ms","")):0},maskInput({value:t,decimals:e,integers:n}){if(t=t.replace(",","."),t===Kh)return`0${Kh}`;const[r="",s]=t.split(Kh).map(l=>l.replace(/[^0-9]/gu,"")),i=n?r.substring(0,n):r,o=i.length===2?String(Number(i)):i,a=typeof e=="number"?s==null?void 0:s.substring(0,e):s,c=typeof e!="number"||e>0;return(typeof a=="string"&&c?[o,a].join(Kh):o)??""},capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}},sce=3,Gh=.1,ice=["receive","deposit","borrow","claim"],oce=["withdraw","repay","burn"],D6={getTransactionGroupTitle(t,e){const n=Nv.getYear(),r=Nv.getMonthNameByIndex(e);return t===n?r:`${r} ${t}`},getTransactionImages(t){const[e]=t;return(t==null?void 0:t.length)>1?t.map(r=>this.getTransactionImage(r)):[this.getTransactionImage(e)]},getTransactionImage(t){return{type:D6.getTransactionTransferTokenType(t),url:D6.getTransactionImageURL(t)}},getTransactionImageURL(t){var s,i,o,a,c;let e;const n=!!(t!=null&&t.nft_info),r=!!(t!=null&&t.fungible_info);return t&&n?e=(o=(i=(s=t==null?void 0:t.nft_info)==null?void 0:s.content)==null?void 0:i.preview)==null?void 0:o.url:t&&r&&(e=(c=(a=t==null?void 0:t.fungible_info)==null?void 0:a.icon)==null?void 0:c.url),e},getTransactionTransferTokenType(t){if(t!=null&&t.fungible_info)return"FUNGIBLE";if(t!=null&&t.nft_info)return"NFT"},getTransactionDescriptions(t,e){var f;const n=(f=t==null?void 0:t.metadata)==null?void 0:f.operationType,r=e||(t==null?void 0:t.transfers),s=(r==null?void 0:r.length)>0,i=(r==null?void 0:r.length)>1,o=s&&(r==null?void 0:r.every(h=>!!(h!=null&&h.fungible_info))),[a,c]=r;let u=this.getTransferDescription(a),l=this.getTransferDescription(c);if(!s)return(n==="send"||n==="receive")&&o?(u=k6.getTruncateString({string:t==null?void 0:t.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),l=k6.getTruncateString({string:t==null?void 0:t.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[u,l]):[t.metadata.status];if(i)return r.map(h=>this.getTransferDescription(h));let d="";return ice.includes(n)?d="+":oce.includes(n)&&(d="-"),u=d.concat(u),[u]},getTransferDescription(t){var n;let e="";return t&&(t!=null&&t.nft_info?e=((n=t==null?void 0:t.nft_info)==null?void 0:n.name)||"-":t!=null&&t.fungible_info&&(e=this.getFungibleTransferDescription(t)||"-")),e},getFungibleTransferDescription(t){var r;return t?[this.getQuantityFixedValue(t==null?void 0:t.quantity.numeric),(r=t==null?void 0:t.fungible_info)==null?void 0:r.symbol].join(" ").trim():null},mergeTransfers(t){if((t==null?void 0:t.length)<=1)return t;const n=this.filterGasFeeTransfers(t).reduce((s,i)=>{var c;const o=(c=i==null?void 0:i.fungible_info)==null?void 0:c.name,a=s.find(({fungible_info:u,direction:l})=>o&&o===(u==null?void 0:u.name)&&l===i.direction);if(a){const u=Number(a.quantity.numeric)+Number(i.quantity.numeric);a.quantity.numeric=u.toString(),a.value=(a.value||0)+(i.value||0)}else s.push(i);return s},[]);let r=n;return n.length>2&&(r=n.sort((s,i)=>(i.value||0)-(s.value||0)).slice(0,2)),r=r.sort((s,i)=>s.direction==="out"&&i.direction==="in"?-1:s.direction==="in"&&i.direction==="out"?1:0),r},filterGasFeeTransfers(t){const e=t.reduce((r,s)=>{var o;const i=(o=s==null?void 0:s.fungible_info)==null?void 0:o.name;return i&&(r[i]||(r[i]=[]),r[i].push(s)),r},{}),n=[];return Object.values(e).forEach(r=>{if(r.length===1){const s=r[0];s&&n.push(s)}else{const s=r.filter(o=>o.direction==="in"),i=r.filter(o=>o.direction==="out");if(s.length===1&&i.length===1){const o=s[0],a=i[0];let c=!1;if(o&&a){const u=Number(o.quantity.numeric),l=Number(a.quantity.numeric);l<u*Gh?(n.push(o),c=!0):u<l*Gh&&(n.push(a),c=!0)}c||n.push(...r)}else{const o=this.filterGasFeesFromTokenGroup(r);n.push(...o)}}}),t.forEach(r=>{var s;(s=r==null?void 0:r.fungible_info)!=null&&s.name||n.push(r)}),n},filterGasFeesFromTokenGroup(t){if(t.length<=1)return t;const e=t.map(a=>Number(a.quantity.numeric)),n=Math.max(...e),r=Math.min(...e),s=.01;if(r<n*s)return t.filter(c=>Number(c.quantity.numeric)>=n*s);const i=t.filter(a=>a.direction==="in"),o=t.filter(a=>a.direction==="out");if(i.length===1&&o.length===1){const a=i[0],c=o[0];if(a&&c){const u=Number(a.quantity.numeric),l=Number(c.quantity.numeric);if(l<u*Gh)return[a];if(u<l*Gh)return[c]}}return t},getQuantityFixedValue(t){return t?parseFloat(t).toFixed(sce):null}};function ace(t,e){const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(s){customElements.get(t)||customElements.define(t,s)}}}function cce(t,e){return customElements.get(t)||customElements.define(t,e),e}function Sde(t){return function(n){return typeof n=="function"?cce(t,n):ace(t,n)}}const Yh={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};class uce extends Yoe{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new Zoe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:r.map(c=>ge.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var o,a,c,u,l;if(!(e.caipNetwork&&Ve.BALANCE_SUPPORTED_CHAINS.includes((o=e.caipNetwork)==null?void 0:o.chainNamespace))||(a=e.caipNetwork)!=null&&a.testnet)return{balance:"0.00",symbol:((c=e.caipNetwork)==null?void 0:c.nativeCurrency.symbol)||""};const r=B.getAccountData();if(r!=null&&r.balanceLoading&&e.chainId===((u=B.state.activeCaipNetwork)==null?void 0:u.id))return{balance:(r==null?void 0:r.balance)||"0.00",symbol:(r==null?void 0:r.balanceSymbol)||""};const i=(await B.fetchTokenBalance()).find(d=>{var f,h;return d.chainId===`${(f=e.caipNetwork)==null?void 0:f.chainNamespace}:${e.chainId}`&&d.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=B.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===J.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:kl.encode(new TextEncoder().encode(r)),pubkey:s}},(a=B.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=B.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,u;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===J.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:ss(n.id)}]}))}catch(l){if(l.code===Yh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Yh.ERROR_INVALID_CHAIN_ID||l.code===Yh.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===Yh.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=r.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:ss(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const lce=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],Zh={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Ve.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Ve.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Ve.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ve.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ve.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ve.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ve.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?Ve.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},dce={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Zh[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Zh[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Zh[t].processApi(e)},processFallbackFeature(t,e){return Zh[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Te.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Ve.DEFAULT_REMOTE_FEATURES:Ve.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of lce){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ve.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;yn.open({debugMessage:Dn.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class fce{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=B.getCaipNetworks(n))==null?void 0:s.find(l=>l.id===r);if(a)return a;const c=(i=B.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=B.getRequestedCaipNetworks(n).filter(l=>l.chainNamespace===n))==null?void 0:o[0])}return B.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>B.getCaipNetworks(n),this.getActiveChainNamespace=()=>B.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{B.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>B.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return B.state.activeChain===n||!n?B.state.activeCaipAddress:(s=(r=B.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{Ne.setClientId(n)},this.getProvider=n=>wt.getProvider(n),this.getProviderType=n=>wt.getProviderId(n),this.getPreferredAccountType=n=>Ln(n),this.setCaipAddress=(n,r,s=!1)=>{B.setAccountProp("caipAddress",n,r,s),B.setAccountProp("address",ge.getPlainAddress(n),r,s)},this.setBalance=(n,r,s)=>{B.setAccountProp("balance",n,s),B.setAccountProp("balanceSymbol",r,s)},this.setProfileName=(n,r)=>{B.setAccountProp("profileName",n,r)},this.setProfileImage=(n,r)=>{B.setAccountProp("profileImage",n,r)},this.setUser=(n,r)=>{B.setAccountProp("user",n,r)},this.resetAccount=n=>{B.resetAccount(n)},this.setCaipNetwork=n=>{B.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{B.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{B.setAccountProp("status",n,r),ae.isConnected()?ie.setConnectionStatus("connected"):ie.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r;return(r=B.getAccountData(n))==null?void 0:r.address},this.setConnectors=n=>{const r=[...ae.state.allConnectors,...n];ae.setConnectors(r)},this.setConnections=(n,r)=>{ie.setConnections(n,r),le.setConnections(n,r)},this.fetchIdentity=n=>Ne.fetchIdentity(n),this.getReownName=n=>$d.getNamesForAddress(n),this.getConnectors=()=>ae.getConnectors(),this.getConnectorImage=n=>gT.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?e0.getConnectionsData(n).connections:(yn.open(J.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?e0.getConnectionsData(n).recentConnections:(yn.open(J.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){yn.open(J.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await le.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){yn.open(J.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ie.deleteAddressFromConnection(n),le.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=wt.getProviderId(r),i=n?{...n,type:s}:void 0;B.setAccountProp("connectedWalletInfo",i,r)},this.getIsConnectedState=()=>!!B.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{var o;const i=((o=B.getAccountData(s))==null?void 0:o.addressLabels)||{};B.setAccountProp("addressLabels",{...i,[n]:r},s)},this.removeAddressLabel=(n,r)=>{var i;const s=((i=B.getAccountData(r))==null?void 0:i.addressLabels)||{};B.setAccountProp("addressLabels",{...s,[n]:void 0},r)},this.getAddress=n=>{var s;const r=n||B.state.activeChain;return(s=B.getAccountData(r))==null?void 0:s.address},this.resetNetwork=n=>{B.resetNetwork(n)},this.addConnector=n=>{ae.addConnector(n)},this.resetWcConnection=()=>{le.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{B.setAccountProp("addressExplorerUrl",n,r)},this.setSmartAccountDeployed=(n,r)=>{B.setAccountProp("smartAccountDeployed",n,r)},this.setPreferredAccountType=(n,r)=>{B.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{X.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e),Sae.checkSDKVersion(e.sdkVersion)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s,i,o;if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),X.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await dce.fetchRemoteFeatures(e),X.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&kb.setOnrampProviders(this.remoteFeatures.onramp),((n=X.state.remoteFeatures)!=null&&n.email||Array.isArray((r=X.state.remoteFeatures)==null?void 0:r.socials)&&((s=X.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins(),(i=X.state.features)!=null&&i.reownAuthentication||(o=X.state.remoteFeatures)!=null&&o.reownAuthentication){const{ReownAuthentication:a}=await mn(async()=>{const{ReownAuthentication:u}=await import("./features-DwHMp9cj.js");return{ReownAuthentication:u}},__vite__mapDeps([0,1,2])),c=X.state.siwx;c instanceof a||(c&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),X.setSIWX(new a))}}async openSend(e){var i;const n=e.namespace||B.state.activeChain,r=this.getCaipAddress(n),s=(i=this.getCaipNetwork(n))==null?void 0:i.id;if(!r)throw new Error("openSend: caipAddress not found");if((s==null?void 0:s.toString())!==e.chainId.toString()){const o=B.getCaipNetworkById(e.chainId,n);if(!o)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(o,{throwOnFailure:!0})}try{const o=JO.getTokenSymbolByAddress(e.assetAddress);o&&await Te.fetchTokenImages([o])}catch{}return await Ke.open({view:"WalletSend",data:{send:e}}),new Promise((o,a)=>{const c=Ge.subscribeKey("hash",d=>{d&&(l(),o({hash:d}))}),u=Ke.subscribe(d=>{d.open||(l(),a(new Error("Modal closed")))}),l=this.createCleanupHandler([c,u])})}toModalOptions(){function e(r){return(r==null?void 0:r.view)==="Swap"}function n(r){return(r==null?void 0:r.view)==="WalletSend"}return{isSwap:e,isSend:n}}async checkAllowedOrigins(){try{const e=await Te.fetchAllowedOrigins();if(!ge.isClient())return;const n=window.location.origin;sa.isOriginAllowed(n,e,J.DEFAULT_ALLOWED_ANCESTORS)||yn.open(Dn.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":yn.open(Dn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;yn.open({displayMessage:Dn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Dn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(n=>{try{n()}catch{}})}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Le.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){yT.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&ir.setThemeMode(e.themeMode),e.themeVariables&&ir.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");B.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const n=this.getDefaultNetwork();n&&B.setActiveCaipNetwork(n)}initializeConnectionController(e){le.initialize(e.adapters??[]),le.setWcBasic(e.basic??!1)}initializeConnectorController(){ae.initialize(this.chainNamespaces)}initializeProjectSettings(e){X.setProjectId(e.projectId),X.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;X.setDebug(e.debug!==!1),X.setEnableWalletGuide(e.enableWalletGuide!==!1),X.setEnableWallets(e.enableWallets!==!1),X.setEIP6963Enabled(e.enableEIP6963!==!1),X.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),X.setEnableReconnect(e.enableReconnect!==!1),X.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),X.setCoinbasePreference(e.coinbasePreference),X.setEnableAuthLogger(e.enableAuthLogger!==!1),X.setCustomRpcUrls(e.customRpcUrls),X.setEnableEmbedded(e.enableEmbedded),X.setAllWallets(e.allWallets),X.setIncludeWalletIds(e.includeWalletIds),X.setExcludeWalletIds(e.excludeWalletIds),X.setFeaturedWalletIds(e.featuredWalletIds),X.setTokens(e.tokens),X.setTermsConditionsUrl(e.termsConditionsUrl),X.setPrivacyPolicyUrl(e.privacyPolicyUrl),X.setCustomWallets(e.customWallets),X.setFeatures(e.features),X.setAllowUnsupportedChain(e.allowUnsupportedChain),X.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),X.setPreferUniversalLinks(e.experimental_preferUniversalLinks),X.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),X.setMetadata(e.metadata),X.setDisableAppend(e.disableAppend),X.setEnableEmbedded(e.enableEmbedded),X.setSIWX(e.siwx),this.features=X.state.features??{},!e.projectId){yn.open(Dn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===J.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");X.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ge.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=pu.getUnsupportedNetwork(`${n}:${e}`);B.setActiveCaipNetwork(r)}}getDefaultNetwork(){return pu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return pu.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return pu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?pu.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=B.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!X.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var u;const e=B.state.activeChain,n=this.getAdapter(e),r=(u=this.getCaipNetwork(e))==null?void 0:u.id,s=le.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),ie.setConnectedNamespaces([...B.state.chains.keys()]),await this.syncWalletConnectAccount(),await Or.initializeIfEnabled()},connectExternal:async e=>{const n=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,n),n?{address:n.address}:void 0},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=B.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),ie.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{var u;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||B.state.activeChain,o=ae.getConnectorId(i),a=n===J.CONNECTOR_ID.AUTH||o===J.CONNECTOR_ID.AUTH,c=n===J.CONNECTOR_ID.WALLET_CONNECT||o===J.CONNECTOR_ID.WALLET_CONNECT;try{const l=Array.from(B.state.chains.keys());let d=r?[r]:l;(c||a)&&(d=l);const f=d.map(async p=>{const y=ae.getConnectorId(p),C=n||y,N=await this.disconnectConnector(p,C);N&&(a&&ie.deleteConnectedSocialProvider(),N.connections.forEach(E=>{ie.addDisconnectedConnectorId(E.connectorId,p)})),s&&this.onDisconnectNamespace({chainNamespace:p,closeModal:!1})}),h=await Promise.allSettled(f);Ge.resetSend(),le.resetWcConnection(),(u=Or.getSIWX())!=null&&u.signOutOnDisconnect&&await Or.clearSessions(),ae.setFilterByNamespace(void 0),le.syncStorageConnections();const g=h.filter(p=>p.status==="rejected");if(g.length>0)throw new Error(g.map(p=>p.reason.message).join(", "));Le.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(l){throw new Error(`Failed to disconnect chains: ${l.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=B.state.activeChain,r=this.getAdapter(B.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=this.getAddress(n);if(!s)throw new Error("signMessage: address not found");const i=await(r==null?void 0:r.signMessage({message:e,address:s,provider:wt.getProvider(n)}));return(i==null?void 0:i.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(Ve.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=wt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===J.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=wt.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var s;const e=B.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const n=this.getAddress(e);if(!n)throw new Error("getEnsAvatar: address not found");await this.syncIdentity({address:n,chainId:Number((s=this.getCaipNetwork())==null?void 0:s.id),chainNamespace:e});const r=B.getAccountData();return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>await sa.resolveReownName(e),writeContract:async e=>{const n=B.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=wt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(B.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(B.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(B.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(B.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(B.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getAddress(e),r=this.getCaipNetwork(e);!r||!n||this.updateNativeBalance(n,r==null?void 0:r.id,e)}},le.setClient(this.connectionControllerClient)}async onConnectExternal(e){var u,l,d,f,h,g,p,y;const n=B.state.activeChain,r=e.chain||n,s=this.getAdapter(r);let i=!0;if(e.type===gt.CONNECTOR_TYPE_AUTH&&J.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(E=>ae.getConnectorId(E)===J.CONNECTOR_ID.AUTH)&&e.chain!==n&&(i=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const C=this.getCaipNetworks().find(N=>N.chainNamespace===e.chain);C&&i&&this.setCaipNetwork(C)}if(!r)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(r),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:((u=e.caipNetwork)==null?void 0:u.id)||(o==null?void 0:o.id),rpcUrl:((h=(f=(d=(l=e.caipNetwork)==null?void 0:l.rpcUrls)==null?void 0:d.default)==null?void 0:f.http)==null?void 0:h[0])||((y=(p=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:p.http)==null?void 0:y[0])});if(c)return ie.addConnectedNamespace(r),this.syncProvider({...c,chainNamespace:r}),this.setStatus("connected",r),this.syncConnectedWalletInfo(r),ie.removeDisconnectedConnectorId(e.id,r),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,n){var a;const r=e.type===gt.CONNECTOR_TYPE_AUTH,s=Tc.getOtherAuthNamespaces((a=n==null?void 0:n.connectedCaipNetwork)==null?void 0:a.chainNamespace),i=B.state.activeCaipNetwork,o=this.getAdapter(i==null?void 0:i.chainNamespace);r&&(await Promise.all(s.map(async c=>{var u,l,d;try{const f=wt.getProvider(c),h=this.getCaipNetwork(c),g=this.getAdapter(c);await(g==null?void 0:g.connect({...e,provider:f,socialUri:void 0,chainId:h==null?void 0:h.id,rpcUrl:(d=(l=(u=h==null?void 0:h.rpcUrls)==null?void 0:u.default)==null?void 0:l.http)==null?void 0:d[0]}))&&(ie.addConnectedNamespace(c),ie.removeDisconnectedConnectorId(e.id,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c))}catch(f){yn.warn(Dn.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Dn.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(c,f instanceof Error?f.message:void 0),Dn.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await(o==null?void 0:o.switchNetwork({caipNetwork:i})))}getApprovedCaipNetworksData(){var n,r,s,i,o;if(wt.getProviderId(B.state.activeChain)===gt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=wt.getProviderId(n);if(e.chainNamespace===B.state.activeChain){const i=this.getAdapter(n);await(i==null?void 0:i.switchNetwork({caipNetwork:e}))}else if(this.setCaipNetwork(e),s===gt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(n);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Jt.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i,o;const s=e==null?void 0:e.find(a=>a.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:(o=this.caipNetworks)==null?void 0:o.filter(({chainNamespace:a})=>a===r)}),n[r]=s):n[r]=new uce({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const n=this.getAdapter(e);if(!n)throw new Error("adapter not found");await n.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=ie.getConnectionStatus();X.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ie.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var u,l;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=B.state.activeChain===e,c=(l=(u=B.state.chains.get(e))==null?void 0:u.accountState)==null?void 0:l.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(le.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=this.getAddress(e),i=B.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var l,d;this.handlePreviousConnectorConnection(o);const a=B.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o==null?void 0:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=(d=(l=B.getNetworkData(e))==null?void 0:l.caipNetwork)==null?void 0:d.id,u=i||c;a&&u?this.syncAccount({address:s,chainId:u,chainNamespace:e}):!a&&u?(this.syncAccountInfo(s,u,e),this.syncBalance({address:s,chainId:u,chainNamespace:e})):this.syncAccountInfo(s,i,e),ie.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){var c;const n=e==null?void 0:e.chain,r=e==null?void 0:e.id,s=ae.getConnectorId(n),i=(c=X.state.remoteFeatures)==null?void 0:c.multiWallet,a=n&&r&&s&&s!==r&&!i;try{a&&await le.disconnect({id:s,namespace:n})}catch(u){console.warn("Error disconnecting previous connector",u)}}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>le.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||ie.deleteRecentWallet();const n=ie.getRecentWallet();Le.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ge.isMobile()?"mobile":"qrcode",name:(n==null?void 0:n.name)||"Unknown",reconnect:!0,view:ve.state.view,walletRank:n==null?void 0:n.order}})}async syncNamespaceConnection(e){try{e===J.CHAIN.EVM&&ge.isSafeApp()&&ae.setConnectorId(J.CONNECTOR_ID.SAFE,e);const n=ae.getConnectorId(e);switch(this.setStatus("connecting",e),n){case J.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case J.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};B.resetAccount(n),B.resetNetwork(n),ie.removeConnectedNamespace(n);const s=Array.from(B.state.chains.keys());(n?[n]:s).forEach(o=>ie.addDisconnectedConnectorId(ae.getConnectorId(o)||"",o)),ae.removeConnectorId(n),wt.resetChain(n),this.setUser(null,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(null,n),r!==!1&&Ke.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getAdapter(e),r=this.getCaipAddress(e),s=this.getCaipNetwork(e);return n==null?void 0:n.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))}async syncAdapterConnection(e){var a,c,u,l;const n=this.getAdapter(e),r=this.getCaipNetwork(e),s=ae.getConnectorId(e),o=ae.getConnectors(e).find(d=>d.id===s);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(r!=null&&r.id))throw new Error("CaipNetwork not found");const d=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:(u=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:u[0]}));d?(this.syncProvider({...d,chainNamespace:e}),await this.syncAccount({...d,chainNamespace:e}),this.setStatus("connected",e),Le.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:d.address,properties:{method:"browser",name:((l=o.info)==null?void 0:l.name)||o.name||"Unknown",reconnect:!0,view:ve.state.view,walletRank:void 0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var d,f,h,g,p;const o=this.getAdapter(i);if(!o)return;const a=((g=(h=(f=(d=this.universalProvider)==null?void 0:d.session)==null?void 0:f.namespaces)==null?void 0:h[i])==null?void 0:g.accounts)||[],c=(p=B.state.activeCaipNetwork)==null?void 0:p.id,u=a.find(y=>{const{chainId:C}=Jt.parseCaipAddress(y);return C===(c==null?void 0:c.toString())})||a[0];if(u){const y=Jt.validateCaipAddress(u),{chainId:C,address:N}=Jt.parseCaipAddress(y);if(wt.setProviderId(i,gt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&B.state.activeCaipNetwork&&o.namespace!==J.CHAIN.EVM){const E=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:B.state.activeCaipNetwork});wt.setProvider(i,E)}else wt.setProvider(i,this.universalProvider);ae.setConnectorId(J.CONNECTOR_ID.WALLET_CONNECT,i),ie.addConnectedNamespace(i),await this.syncAccount({address:N,chainId:C,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);const l=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(i),B.setApprovedCaipNetworksData(i,{approvedCaipNetworkIds:l.approvedCaipNetworkIds,supportsAllNetworks:l.supportsAllNetworks})});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){wt.setProviderId(s,e),wt.setProvider(s,n),ae.setConnectorId(r,s)}async syncAccount(e){var d,f;const n=e.chainNamespace===B.state.activeChain,r=B.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ie.getActiveNetworkProps(),c=(r==null?void 0:r.id)||a,u=((d=B.state.activeCaipNetwork)==null?void 0:d.name)===J.UNSUPPORTED_NETWORK_NAME,l=B.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let h=this.getCaipNetworks().find(C=>C.id.toString()===c.toString()),g=this.getCaipNetworks().find(C=>C.chainNamespace===o);if(!l&&!h&&!g){const C=this.getApprovedCaipNetworkIds()||[],N=C.find(A=>{var _;return((_=Jt.parseCaipNetworkId(A))==null?void 0:_.chainId)===c.toString()}),E=C.find(A=>{var _;return((_=Jt.parseCaipNetworkId(A))==null?void 0:_.chainNamespace)===o});h=this.getCaipNetworks().find(A=>A.caipNetworkId===N),g=this.getCaipNetworks().find(A=>A.caipNetworkId===E||"deprecatedCaipNetworkId"in A&&A.deprecatedCaipNetworkId===E)}const p=h||g;(p==null?void 0:p.chainNamespace)===B.state.activeChain?X.state.enableNetworkSwitch&&!X.state.allowUnsupportedChain&&((f=B.state.activeCaipNetwork)==null?void 0:f.name)===J.UNSUPPORTED_NETWORK_NAME?B.showUnsupportedChainUI():this.setCaipNetwork(p):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o);const y=this.getAddress(o);Tc.isLowerCaseMatch(s,y)||this.syncAccountInfo(s,p==null?void 0:p.id,o),n?await this.syncBalance({address:s,chainId:p==null?void 0:p.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=ae.getConnectorId(e),r=wt.getProviderId(e);if(r===gt.CONNECTOR_TYPE_ANNOUNCED||r===gt.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,f;const c=a.id===n,u=((d=a.info)==null?void 0:d.rdns)===n,l=(f=a.connectors)==null?void 0:f.some(h=>{var g;return h.id===n||((g=h.info)==null?void 0:g.rdns)===n});return c||u||!!l});if(o){const{info:a,name:c,imageUrl:u}=o,l=u||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:l,...a},e)}}}else if(r===gt.CONNECTOR_TYPE_WALLET_CONNECT){const i=wt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===J.CONNECTOR_ID.COINBASE_SDK||n===J.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(u=>u.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!mS.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=B.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,u,l,d,f;const e=xae.createLogger((h,...g)=>{h&&this.handleAlertError(h),console.error(...g)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};X.setManualWCControl(!!((f=this.options)!=null&&f.manualWCControl)),this.universalProvider=this.options.universalProvider??await zoe.init(n),X.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{sa.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{le.setUri(n)},onConnect:n=>{const{address:r}=ge.getAccount(n[0]);le.finalizeWcConnection(r)},onDisconnect:()=>{B.state.noAdapters&&this.resetAccount(e),le.resetWcConnection()},onChainChanged:n=>{const r=B.state.activeChain,s=r&&ae.state.activeConnectorIds[r]===J.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(B.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=B.state.activeChain,s=r&&ae.state.activeConnectorIds[r]===J.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(B.state.noAdapters||s)){const i=n==null?void 0:n[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ge.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Le.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=B.getAllApprovedCaipNetworkIds(),n=B.getAllRequestedCaipNetworks();return ge.sortRequestedNetworks(e,n).filter(s=>B.isCaipNetworkDisabled(s))}handleAlertError(e){const n=Object.entries(Dn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Dn.ALERT_ERRORS[o];a&&(yn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s,i;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:(i=this.caipNetworks)==null?void 0:i.filter(({chainNamespace:o})=>o===n)}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&le.setUri(e.uri);const{isSwap:n,isSend:r}=this.toModalOptions();return n(e)?Ke.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?this.openSend(e.arguments):Ke.open(e)}async close(){await this.injectModalUi(),Ke.close()}setLoading(e,n){Ke.setLoading(e,n)}async disconnect(e){await le.disconnect({namespace:e})}getSIWX(){return X.state.siwx}getError(){return""}getChainId(){var e;return(e=B.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e,{throwOnFailure:n=!1}={}){const r=this.getCaipNetworks().find(s=>s.id===e.id);if(!r){yn.open(Dn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await B.switchActiveNetwork(r,{throwOnFailure:n})}getWalletProvider(){return B.state.activeChain?wt.state.providers[B.state.activeChain]:null}getWalletProviderType(){return wt.getProviderId(B.state.activeChain)}subscribeProviders(e){return wt.subscribeProviders(e)}getThemeMode(){return ir.state.themeMode}getThemeVariables(){return ir.state.themeVariables}setThemeMode(e){ir.setThemeMode(e),zw(ir.state.themeMode)}setTermsConditionsUrl(e){X.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){X.setPrivacyPolicyUrl(e)}setThemeVariables(e){ir.setThemeVariables(e),rce(ir.state.themeVariables)}subscribeTheme(e){return ir.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?le.subscribe(e):(yn.open(J.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var r,s;if(e)return(s=(r=B.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.connectedWalletInfo;const n=B.getAccountData();return n==null?void 0:n.connectedWalletInfo}getAccount(e){const n=e||B.state.activeChain,r=ae.getAuthConnector(n),s=B.getAccountData(n),i=ie.getConnectedConnectorId(B.state.activeChain),o=le.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>ge.createAccount(n,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ge.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===J.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ie.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Ln(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?B.subscribeChainProp("accountState",r,n):B.subscribe(r),ae.subscribe(r)}subscribeNetwork(e){return B.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?B.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo),n):B.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){B.subscribeChainProp("accountState",n=>e(n==null?void 0:n.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){B.subscribeKey("activeCaipNetwork",e)}getState(){return xs.state}getRemoteFeatures(){return X.state.remoteFeatures}subscribeState(e){return xs.subscribe(e)}subscribeRemoteFeatures(e){return X.subscribeKey("remoteFeatures",e)}showErrorMessage(e){St.showError(e)}showSuccessMessage(e){St.showSuccess(e)}getEvent(){return{...Le.state}}subscribeEvents(e){return Le.subscribe(e)}replace(e){ve.replace(e)}redirect(e){ve.push(e)}popTransactionStack(e){ve.popTransactionStack(e)}isOpen(){return Ke.state.open}isTransactionStackEmpty(){return ve.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){X.setFeatures(e)}updateRemoteFeatures(e){X.setRemoteFeatures(e)}updateOptions(e){const r={...X.state||{},...e};X.setOptions(r)}setConnectMethodsOrder(e){X.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){X.setWalletFeaturesOrder(e)}setCollapseWallets(e){X.setCollapseWallets(e)}setSocialsOrder(e){X.setSocialsOrder(e)}getConnectMethodsOrder(){return Ad.getConnectOrderMethod(X.state.features,ae.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||B.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&B.removeNetwork(e,n)}}let U6=!1;class Ide extends fce{async onAuthProviderConnected(e){const n=Tc.userChainIdToChainNamespace(e==null?void 0:e.chainId);if(e.message&&e.signature&&e.siwxMessage&&await Or.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===J.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=X.state.defaultAccountTypes[n],i=Ln(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:u,...l}=e,d=B.getAccountData(n);this.setUser({...(d==null?void 0:d.user)||{},...l},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:n})]),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Rr.checkIfRequestExists(n)?Rr.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(It.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(It.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Rr.checkIfRequestIsSafe(r),i=this.getAddress(),o=B.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=B.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");ae.getConnectorId(n)===J.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=B.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=ir.getSnapshot();await e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Fd(n.themeVariables,n.themeMode)})}async syncAuthConnector(e,n){var l,d,f,h,g,p,y,C,N;const r=J.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===B.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername(),c=((l=B.getAccountData(n))==null?void 0:l.user)||{};this.setUser({...c,username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected();if(n&&r&&s)if(u&&((d=this.connectionControllerClient)!=null&&d.connectExternal)){await e.init(),await this.syncAuthConnectorTheme(e),await((g=this.connectionControllerClient)==null?void 0:g.connectExternal({id:J.CONNECTOR_ID.AUTH,info:{name:J.CONNECTOR_ID.AUTH},type:gt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=(f=B.getNetworkData(n))==null?void 0:f.caipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n);const E=ie.getConnectedSocialProvider();E?Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:E,reconnect:!0}}):Le.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:((N=(C=(y=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:y.peer)==null?void 0:C.metadata)==null?void 0:N.name)||"Unknown",reconnect:!0,view:ve.state.view,walletRank:void 0}})}else ae.getConnectorId(n)===J.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),ie.removeConnectedNamespace(n));this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ge.isTelegram())return;const r=ie.getTelegramSocialProvider();if(!r||!ge.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;r&&B.setAccountProp("socialProvider",r,e),await((n=this.authProvider)==null?void 0:n.init());const o=ae.getAuthConnector();r&&o&&(this.setLoading(!0,e),await le.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),ie.setConnectedSocialProvider(r),ie.removeTelegramSocialProvider(),Le.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var u,l,d,f;if(!J.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(u=this.remoteFeatures)==null?void 0:u.email,s=Array.isArray((l=this.remoteFeatures)==null?void 0:l.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Tc.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=kd.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(f=this.getCaipNetwork(a))==null?void 0:f.caipNetworkId,abortController:Dn.EmbeddedWalletAbortController,onTimeout:h=>{h==="iframe_load_failed"?yn.open(Dn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):h==="iframe_request_timeout"?yn.open(Dn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):h==="unverified_domain"&&yn.open(Dn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:h=>pd(h),getCaipNetworks:h=>B.getCaipNetworks(h)}),xs.subscribeOpen(h=>{var g;!h&&this.isTransactionStackEmpty()&&((g=this.authProvider)==null||g.rejectRpcRequests())}));const c=e===B.state.activeChain&&X.state.enableReconnect;X.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Te.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a,c;if(!e)return;const n=B.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&((o=B.getAccountData(r))!=null&&o.caipAddress)){const u=this.getAdapter(r);await(u==null?void 0:u.switchNetwork({caipNetwork:e})),this.setCaipNetwork(e)}else{const l=wt.getProviderId(n)===gt.CONNECTOR_TYPE_AUTH,d=wt.getProviderId(r),f=d===gt.CONNECTOR_TYPE_AUTH,h=J.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&d===void 0||f)&&h)try{if(B.state.activeChain=e.chainNamespace,s){const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e}))}else await((c=(a=this.connectionControllerClient)==null?void 0:a.connectExternal)==null?void 0:c.call(a,{id:J.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:gt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e}))}else if(d===gt.CONNECTOR_TYPE_WALLET_CONNECT){if(!B.state.noAdapters){const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),xs.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=ae.getConnectorId(r)===J.CONNECTOR_ID.AUTH;try{const{name:c,avatar:u}=await this.fetchIdentity({address:e});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(u,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=wt.getProviderId(e);if(n===gt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ie.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ge.isClient()&&!U6)try{const e={...Ve.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ge.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!X.state.disableAppend&&!X.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}U6=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ge.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(mn(()=>import("./embedded-wallet-DtGpeodY.js"),__vite__mapDeps([3,4,2,1,5]))),n.email&&r.push(mn(()=>import("./email-B-ZDtt0J.js"),__vite__mapDeps([6,7,4,2,1,5]))),n.socials&&r.push(mn(()=>import("./socials-Cu1hm5Qw.js"),__vite__mapDeps([8,4,2,1,5]))),n.swaps&&n.swaps.length>0&&r.push(mn(()=>import("./swaps-BzHGhrPM.js"),__vite__mapDeps([9,4,2,1,5,10]))),e.send&&r.push(mn(()=>import("./send-B2hIX8Jw.js"),__vite__mapDeps([11,4,2,1,5,12,10]))),e.receive&&r.push(mn(()=>import("./receive-BdK3_01G.js"),__vite__mapDeps([13,4,2,1,5]))),n.onramp&&n.onramp.length>0&&r.push(mn(()=>import("./onramp-BIwrk1Vk.js"),__vite__mapDeps([14,4,2,1,5]))),n.payWithExchange&&r.push(mn(()=>import("./pay-with-exchange-DhRRsG4t.js"),__vite__mapDeps([15,4,2,1,5,12]))),n.activity&&r.push(mn(()=>import("./transactions-BXItoehe.js"),__vite__mapDeps([16,4,2,1,5]))),(e.pay||n.payments)&&r.push(mn(()=>import("./index-DEU1iuCO.js"),__vite__mapDeps([17,4,2,1,5,18]))),n.emailCapture&&r.push(mn(()=>import("./data-capture-DYKvC3UO.js"),__vite__mapDeps([19,4,2,1,5,7,0]))),await Promise.all([...r,mn(()=>import("./index-COWLB7hO.js").then(i=>i.i),__vite__mapDeps([4,2,1,5])),mn(()=>import("./w3m-modal-BzvtsJ5F.js"),__vite__mapDeps([20,4,2,1,5,18]))])}}const xde="1.8.9";var Fg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hce={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},qo,Jw,Y6,pce=(Y6=class{constructor(){Ze(this,qo,hce);Ze(this,Jw,!1)}setTimeoutProvider(t){Ue(this,qo,t)}setTimeout(t,e){return Q(this,qo).setTimeout(t,e)}clearTimeout(t){Q(this,qo).clearTimeout(t)}setInterval(t,e){return Q(this,qo).setInterval(t,e)}clearInterval(t){Q(this,qo).clearInterval(t)}},qo=new WeakMap,Jw=new WeakMap,Y6),Ww=new pce;function gce(t){setTimeout(t,0)}var jg=typeof window>"u"||"Deno"in globalThis;function As(){}function mce(t,e){return typeof t=="function"?t(e):t}function yce(t){return typeof t=="number"&&t>=0&&t!==1/0}function bce(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Vw(t,e){return typeof t=="function"?t(e):t}function wce(t,e){return typeof t=="function"?t(e):t}function B6(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Av(o,e.options))return!1}else if(!Sf(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function L6(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(_f(e.options.mutationKey)!==_f(i))return!1}else if(!Sf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Av(t,e){return((e==null?void 0:e.queryKeyHashFn)||_f)(t)}function _f(t){return JSON.stringify(t,(e,n)=>Kw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Sf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Sf(t[n],e[n])):!1}var Ece=Object.prototype.hasOwnProperty;function iP(t,e){if(t===e)return t;const n=M6(t)&&M6(e);if(!n&&!(Kw(t)&&Kw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const l=n?u:i[u],d=t[l],f=e[l];if(d===f){a[l]=d,(n?u<s:Ece.call(t,l))&&c++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){a[l]=f;continue}const h=iP(d,f);a[l]=h,h===d&&c++}return s===o&&c===s?t:a}function M6(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Kw(t){if(!F6(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!F6(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function F6(t){return Object.prototype.toString.call(t)==="[object Object]"}function vce(t){return new Promise(e=>{Ww.setTimeout(e,t)})}function Ace(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?iP(t,e):e}function Cce(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _ce(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Cv=Symbol();function oP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Xa,zo,Bu,Z6,Sce=(Z6=class extends Fg{constructor(){super();Ze(this,Xa);Ze(this,zo);Ze(this,Bu);Ue(this,Bu,e=>{if(!jg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,zo)||this.setEventListener(Q(this,Bu))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,zo))==null||e.call(this),Ue(this,zo,void 0))}setEventListener(e){var n;Ue(this,Bu,e),(n=Q(this,zo))==null||n.call(this),Ue(this,zo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,Xa)!==e&&(Ue(this,Xa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,Xa)=="boolean"?Q(this,Xa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xa=new WeakMap,zo=new WeakMap,Bu=new WeakMap,Z6),aP=new Sce;function Ice(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var xce=gce;function Tce(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=xce;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Hn=Tce(),Lu,Wo,Mu,J6,Nce=(J6=class extends Fg{constructor(){super();Ze(this,Lu,!0);Ze(this,Wo);Ze(this,Mu);Ue(this,Mu,e=>{if(!jg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Wo)||this.setEventListener(Q(this,Mu))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Wo))==null||e.call(this),Ue(this,Wo,void 0))}setEventListener(e){var n;Ue(this,Mu,e),(n=Q(this,Wo))==null||n.call(this),Ue(this,Wo,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Lu)!==e&&(Ue(this,Lu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Lu)}},Lu=new WeakMap,Wo=new WeakMap,Mu=new WeakMap,J6),x0=new Nce;function Oce(t){return Math.min(1e3*2**t,3e4)}function cP(t){return(t??"online")==="online"?x0.isOnline():!0}var Gw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function uP(t){let e=!1,n=0,r;const s=Ice(),i=()=>s.status!=="pending",o=p=>{var y;if(!i()){const C=new Gw(p);f(C),(y=t.onCancel)==null||y.call(t,C)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>aP.isFocused()&&(t.networkMode==="always"||x0.isOnline())&&t.canRun(),l=()=>cP(t.networkMode)&&t.canRun(),d=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},h=()=>new Promise(p=>{var y;r=C=>{(i()||u())&&p(C)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),g=()=>{if(i())return;let p;const y=n===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(C){p=Promise.reject(C)}Promise.resolve(p).then(d).catch(C=>{var O;if(i())return;const N=t.retry??(jg?0:3),E=t.retryDelay??Oce,A=typeof E=="function"?E(n,C):E,_=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,C);if(e||!_){f(C);return}n++,(O=t.onFail)==null||O.call(t,n,C),vce(A).then(()=>u()?void 0:h()).then(()=>{e?f(C):g()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?g():h().then(g),s)}}var Qa,X6,lP=(X6=class{constructor(){Ze(this,Qa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yce(this.gcTime)&&Ue(this,Qa,Ww.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(jg?1/0:5*60*1e3))}clearGcTimeout(){Q(this,Qa)&&(Ww.clearTimeout(Q(this,Qa)),Ue(this,Qa,void 0))}},Qa=new WeakMap,X6),ec,Fu,Zr,tc,nn,xf,nc,Cs,Oi,Q6,Pce=(Q6=class extends lP{constructor(e){super();Ze(this,Cs);Ze(this,ec);Ze(this,Fu);Ze(this,Zr);Ze(this,tc);Ze(this,nn);Ze(this,xf);Ze(this,nc);Ue(this,nc,!1),Ue(this,xf,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ue(this,tc,e.client),Ue(this,Zr,Q(this,tc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ue(this,ec,j6(this.options)),this.state=e.state??Q(this,ec),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Q(this,nn))==null?void 0:e.promise}setOptions(e){if(this.options={...Q(this,xf),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=j6(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Ue(this,ec,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Zr).remove(this)}setData(e,n){const r=Ace(this.state.data,e,this.options);return Cn(this,Cs,Oi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Cn(this,Cs,Oi).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=Q(this,nn))==null?void 0:r.promise;return(s=Q(this,nn))==null||s.cancel(e),n?n.then(As).catch(As):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,ec))}isActive(){return this.observers.some(e=>wce(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Vw(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!bce(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Q(this,nn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Q(this,nn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Q(this,Zr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Q(this,nn)&&(Q(this,nc)?Q(this,nn).cancel({revert:!0}):Q(this,nn).cancelRetry()),this.scheduleGc()),Q(this,Zr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Cn(this,Cs,Oi).call(this,{type:"invalidate"})}async fetch(e,n){var c,u,l,d,f,h,g,p,y,C,N,E;if(this.state.fetchStatus!=="idle"&&((c=Q(this,nn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Q(this,nn))return Q(this,nn).continueRetry(),Q(this,nn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const A=this.observers.find(_=>_.options.queryFn);A&&this.setOptions(A.options)}const r=new AbortController,s=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Ue(this,nc,!0),r.signal)})},i=()=>{const A=oP(this.options,n),O=(()=>{const $={client:Q(this,tc),queryKey:this.queryKey,meta:this.meta};return s($),$})();return Ue(this,nc,!1),this.options.persister?this.options.persister(A,O,this):A(O)},a=(()=>{const A={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Q(this,tc),state:this.state,fetchFn:i};return s(A),A})();(u=this.options.behavior)==null||u.onFetch(a,this),Ue(this,Fu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=a.fetchOptions)==null?void 0:l.meta))&&Cn(this,Cs,Oi).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),Ue(this,nn,uP({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:A=>{A instanceof Gw&&A.revert&&this.setState({...Q(this,Fu),fetchStatus:"idle"}),r.abort()},onFail:(A,_)=>{Cn(this,Cs,Oi).call(this,{type:"failed",failureCount:A,error:_})},onPause:()=>{Cn(this,Cs,Oi).call(this,{type:"pause"})},onContinue:()=>{Cn(this,Cs,Oi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const A=await Q(this,nn).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(h=(f=Q(this,Zr).config).onSuccess)==null||h.call(f,A,this),(p=(g=Q(this,Zr).config).onSettled)==null||p.call(g,A,this.state.error,this),A}catch(A){if(A instanceof Gw){if(A.silent)return Q(this,nn).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw Cn(this,Cs,Oi).call(this,{type:"error",error:A}),(C=(y=Q(this,Zr).config).onError)==null||C.call(y,A,this),(E=(N=Q(this,Zr).config).onSettled)==null||E.call(N,this.state.data,A,this),A}finally{this.scheduleGc()}}},ec=new WeakMap,Fu=new WeakMap,Zr=new WeakMap,tc=new WeakMap,nn=new WeakMap,xf=new WeakMap,nc=new WeakMap,Cs=new WeakSet,Oi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Rce(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ue(this,Fu,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Hn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Q(this,Zr).notify({query:this,type:"updated",action:e})})},Q6);function Rce(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function j6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function H6(t){return{onFetch:(e,n)=>{var l,d,f,h,g;const r=e.options,s=(f=(d=(l=e.fetchOptions)==null?void 0:l.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const y=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},C=oP(e.options,e.fetchOptions),N=async(E,A,_)=>{if(p)return Promise.reject();if(A==null&&E.pages.length)return Promise.resolve(E);const $=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return y(j),j})(),M=await C($),{maxPages:D}=e.options,q=_?_ce:Cce;return{pages:q(E.pages,M,D),pageParams:q(E.pageParams,A,D)}};if(s&&i.length){const E=s==="backward",A=E?$ce:q6,_={pages:i,pageParams:o},O=A(r,_);a=await N(_,O,E)}else{const E=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:q6(r,a);if(c>0&&A==null)break;a=await N(a,A),c++}while(c<E)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function q6(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function $ce(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tf,Zs,Fn,rc,Js,To,eS,kce=(eS=class extends lP{constructor(e){super();Ze(this,Js);Ze(this,Tf);Ze(this,Zs);Ze(this,Fn);Ze(this,rc);Ue(this,Tf,e.client),this.mutationId=e.mutationId,Ue(this,Fn,e.mutationCache),Ue(this,Zs,[]),this.state=e.state||Dce(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Q(this,Zs).includes(e)||(Q(this,Zs).push(e),this.clearGcTimeout(),Q(this,Fn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ue(this,Zs,Q(this,Zs).filter(n=>n!==e)),this.scheduleGc(),Q(this,Fn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Q(this,Zs).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Fn).remove(this))}continue(){var e;return((e=Q(this,rc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,u,l,d,f,h,g,p,y,C,N,E,A,_,O,$,M,D;const n=()=>{Cn(this,Js,To).call(this,{type:"continue"})},r={client:Q(this,Tf),meta:this.options.meta,mutationKey:this.options.mutationKey};Ue(this,rc,uP({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(q,j)=>{Cn(this,Js,To).call(this,{type:"failed",failureCount:q,error:j})},onPause:()=>{Cn(this,Js,To).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Fn).canRun(this)}));const s=this.state.status==="pending",i=!Q(this,rc).canStart();try{if(s)n();else{Cn(this,Js,To).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=Q(this,Fn).config).onMutate)==null?void 0:a.call(o,e,this,r));const j=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,r));j!==this.state.context&&Cn(this,Js,To).call(this,{type:"pending",context:j,variables:e,isPaused:i})}const q=await Q(this,rc).start();return await((d=(l=Q(this,Fn).config).onSuccess)==null?void 0:d.call(l,q,e,this.state.context,this,r)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,q,e,this.state.context,r)),await((p=(g=Q(this,Fn).config).onSettled)==null?void 0:p.call(g,q,null,this.state.variables,this.state.context,this,r)),await((C=(y=this.options).onSettled)==null?void 0:C.call(y,q,null,e,this.state.context,r)),Cn(this,Js,To).call(this,{type:"success",data:q}),q}catch(q){try{throw await((E=(N=Q(this,Fn).config).onError)==null?void 0:E.call(N,q,e,this.state.context,this,r)),await((_=(A=this.options).onError)==null?void 0:_.call(A,q,e,this.state.context,r)),await(($=(O=Q(this,Fn).config).onSettled)==null?void 0:$.call(O,void 0,q,this.state.variables,this.state.context,this,r)),await((D=(M=this.options).onSettled)==null?void 0:D.call(M,void 0,q,e,this.state.context,r)),q}finally{Cn(this,Js,To).call(this,{type:"error",error:q})}}finally{Q(this,Fn).runNext(this)}}},Tf=new WeakMap,Zs=new WeakMap,Fn=new WeakMap,rc=new WeakMap,Js=new WeakSet,To=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Hn.batch(()=>{Q(this,Zs).forEach(r=>{r.onMutationUpdate(e)}),Q(this,Fn).notify({mutation:this,type:"updated",action:e})})},eS);function Dce(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bi,_s,Nf,tS,Uce=(tS=class extends Fg{constructor(e={}){super();Ze(this,Bi);Ze(this,_s);Ze(this,Nf);this.config=e,Ue(this,Bi,new Set),Ue(this,_s,new Map),Ue(this,Nf,0)}build(e,n,r){const s=new kce({client:e,mutationCache:this,mutationId:++uh(this,Nf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,Bi).add(e);const n=Jh(e);if(typeof n=="string"){const r=Q(this,_s).get(n);r?r.push(e):Q(this,_s).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,Bi).delete(e)){const n=Jh(e);if(typeof n=="string"){const r=Q(this,_s).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,_s).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Jh(e);if(typeof n=="string"){const r=Q(this,_s).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Jh(e);if(typeof n=="string"){const s=(r=Q(this,_s).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Hn.batch(()=>{Q(this,Bi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,Bi).clear(),Q(this,_s).clear()})}getAll(){return Array.from(Q(this,Bi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L6(n,r))}findAll(e={}){return this.getAll().filter(n=>L6(e,n))}notify(e){Hn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Hn.batch(()=>Promise.all(e.map(n=>n.continue().catch(As))))}},Bi=new WeakMap,_s=new WeakMap,Nf=new WeakMap,tS);function Jh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Xs,nS,Bce=(nS=class extends Fg{constructor(e={}){super();Ze(this,Xs);this.config=e,Ue(this,Xs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Av(s,n);let o=this.get(i);return o||(o=new Pce({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Xs).has(e.queryHash)||(Q(this,Xs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Xs).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Xs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Hn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Xs).get(e)}getAll(){return[...Q(this,Xs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>B6(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>B6(e,r)):n}notify(e){Hn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Hn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Hn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xs=new WeakMap,nS),$t,Vo,Ko,ju,Hu,Go,qu,zu,rS,Tde=(rS=class{constructor(t={}){Ze(this,$t);Ze(this,Vo);Ze(this,Ko);Ze(this,ju);Ze(this,Hu);Ze(this,Go);Ze(this,qu);Ze(this,zu);Ue(this,$t,t.queryCache||new Bce),Ue(this,Vo,t.mutationCache||new Uce),Ue(this,Ko,t.defaultOptions||{}),Ue(this,ju,new Map),Ue(this,Hu,new Map),Ue(this,Go,0)}mount(){uh(this,Go)._++,Q(this,Go)===1&&(Ue(this,qu,aP.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,$t).onFocus())})),Ue(this,zu,x0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,$t).onOnline())})))}unmount(){var t,e;uh(this,Go)._--,Q(this,Go)===0&&((t=Q(this,qu))==null||t.call(this),Ue(this,qu,void 0),(e=Q(this,zu))==null||e.call(this),Ue(this,zu,void 0))}isFetching(t){return Q(this,$t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Vo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,$t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,$t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Vw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,$t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,$t).get(r.queryHash),i=s==null?void 0:s.state.data,o=mce(e,i);if(o!==void 0)return Q(this,$t).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Hn.batch(()=>Q(this,$t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,$t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,$t);Hn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,$t);return Hn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Hn.batch(()=>Q(this,$t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(As).catch(As)}invalidateQueries(t,e={}){return Hn.batch(()=>(Q(this,$t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Hn.batch(()=>Q(this,$t).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(As)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(As)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,$t).build(this,e);return n.isStaleByTime(Vw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(As).catch(As)}fetchInfiniteQuery(t){return t.behavior=H6(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(As).catch(As)}ensureInfiniteQueryData(t){return t.behavior=H6(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return x0.isOnline()?Q(this,Vo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,$t)}getMutationCache(){return Q(this,Vo)}getDefaultOptions(){return Q(this,Ko)}setDefaultOptions(t){Ue(this,Ko,t)}setQueryDefaults(t,e){Q(this,ju).set(_f(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,ju).values()],n={};return e.forEach(r=>{Sf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,Hu).set(_f(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Hu).values()],n={};return e.forEach(r=>{Sf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Ko).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Av(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Ko).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,$t).clear(),Q(this,Vo).clear()}},$t=new WeakMap,Vo=new WeakMap,Ko=new WeakMap,ju=new WeakMap,Hu=new WeakMap,Go=new WeakMap,qu=new WeakMap,zu=new WeakMap,rS),Lce=oa.createContext(void 0),Nde=({client:t,children:e})=>(oa.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),CP.jsx(Lce.Provider,{value:t,children:e}));function ts(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const bp="2.22.1",Mce=()=>`@wagmi/core@${bp}`;var dP=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},T0,fP;class Ms extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Mce()}constructor(e,n={}){var i;super(),T0.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Ms?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Ms&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return dP(this,T0,"m",fP).call(this,this,e)}}T0=new WeakSet,fP=function t(e,n){return n!=null&&n(e)?e:e.cause?dP(this,T0,"m",t).call(this,e.cause,n):e};class N0 extends Ms{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Fce extends Ms{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class jce extends Ms{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Hce extends Ms{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class qce extends Ms{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class zce extends Ms{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Ode(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Fce;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:i.withCapabilities?o.accounts.map(c=>typeof c=="object"?c.address:c):o.accounts,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:i.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function Hg(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new zce({connector:l});const[d,f]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);r={accounts:d,chainId:f,connector:l}}else r=t.state.connections.get(t.state.current);if(!r)throw new jce;const s=e.chainId??r.chainId,i=await r.connector.getChainId();if(n&&i!==s)throw new qce({connectionChainId:s,connectorChainId:i});const o=r.connector;if(o.getClient)return o.getClient({chainId:s});const a=wn(e.account??r.accounts[0]);if(a&&(a.address=Zo(a.address)),e.account&&!r.accounts.some(l=>l.toLowerCase()===a.address.toLowerCase()))throw new Hce({address:a.address,connector:o});const c=t.chains.find(l=>l.id===s),u=await r.connector.getProvider({chainId:s});return og({account:a,chain:c,name:"Connector Client",transport:l=>dT(u)({...l,retryCount:0})})}async function Pde(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function hP(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(K5[t])}async function Rde(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Hg(t,{account:e.account,assertChainId:!1,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ts(o,Z0,"estimateGas")({...s,account:i})}function pP(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Wce(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ts(o,tT,"multicall")({allowFailure:n,contracts:s,...i})}function Vce(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ts(s,os,"readContract")(r)}async function Kce(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[f,h]of o.entries()){const g=h.chainId??t.state.chainId;c[g]||(c[g]=[]),(a=c[g])==null||a.push({contract:h,index:f})}const u=()=>Object.entries(c).map(([f,h])=>Wce(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(f,10),contracts:h.map(({contract:g})=>g)})),l=(await Promise.all(u())).flat(),d=Object.values(c).flatMap(f=>f.map(({index:h})=>h));return l.reduce((f,h,g)=>(f&&(f[d[g]]=h),f),[])}catch(c){if(c instanceof q0)throw c;const u=()=>o.map(l=>Vce(t,{...l,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(u())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(u())}}async function $de(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await z6(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(f){if(f.name==="ContractFunctionExecutionError"){const h=await z6(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),g=v1(Os(h.symbol,{dir:"right"}));return{...h,symbol:g}}throw f}const c=t.getClient({chainId:i}),l=await ts(c,gx,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(f=>f.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Uc(l,hP(a)),symbol:d.nativeCurrency.symbol,value:l}}async function z6(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,u,l]=await Kce(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Uc(c??"0",hP(o??u));return{decimals:u,formatted:d,symbol:l,value:c}}function If(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!If(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!If(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Xh=[];function Gce(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||If(Xh,e)?Xh:(Xh=e,e)}async function kde(t,e){const{account:n,chainId:r,...s}=e,i=n??pP(t).address,o=t.getClient({chainId:r});return ts(o,Y0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Fy=!1;async function Yce(t,e={}){var u,l;if(Fy)return[];Fy=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((u=e.connectors)!=null&&u.length)for(const d of e.connectors){let f;typeof d=="function"?f=t._internal.connectors.setup(d):f=d,n.push(f)}else n.push(...t.connectors);let r;try{r=await((l=t.storage)==null?void 0:l.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,f)=>(s[d.id]??10)-(s[f.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const f=await d.getProvider().catch(()=>{});if(!f||c.some(p=>p===f)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(p=>{const y=new Map(o?p.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...p,current:o?p.current:d.uid,connections:y}}),a.push({accounts:g.accounts,chainId:g.chainId,connector:d}),c.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Fy=!1,a}async function Dde(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Hg(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await ts(o,XI,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Ude(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Hg(t,{account:n,connector:r}),ts(i,EM,"signMessage")({...s,...n?{account:n}:{}})}class cu extends Ms{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Zce extends Ms{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function Bde(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Zce({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new N0;return t.setState(a=>({...a,chainId:r})),i}async function Lde(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ts(i,cT,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const c=ts(i,ug,"getTransaction"),{from:u,...l}=await c({hash:a.transactionHash}),f=await ts(i,Ol,"call")({...l,account:u,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=f!=null&&f.data?v1(`0x${f.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}function Mde(t,e){const{onChange:n}=e;return t.subscribe(()=>pP(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return If(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Fde(t,e){const{onChange:n}=e;return t.subscribe(()=>Gce(t),n,{equalityFn:If})}function jde(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Hde(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const u=t.getClient({chainId:c});return s=ts(u,uT,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function qde(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Hg(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await ts(o,Zp,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function zde(t){return t}_v.type="injected";function _v(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...Jce[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:_v.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l,withCapabilities:d}={}){var g,p,y,C,N,E;const f=await this.getProvider();if(!f)throw new cu;let h=[];if(l)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(C=(y=(p=(g=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:p[0])==null?void 0:y.value)==null?void 0:C.map(_=>Zo(_)),h.length>0&&(h=await this.getAccounts())}catch(A){const _=A;if(_.code===bn.code)throw new bn(_);if(_.code===Wi.code)throw _}try{!(h!=null&&h.length)&&!l&&(h=(await f.request({method:"eth_requestAccounts"})).map(O=>Zo(O))),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a));let A=await this.getChainId();if(u&&A!==u){const _=await this.switchChain({chainId:u}).catch(O=>{if(O.code===bn.code)throw O;return{id:A}});A=(_==null?void 0:_.id)??A}return e&&await((N=c.storage)==null?void 0:N.removeItem(`${this.id}.disconnected`)),t.target||await((E=c.storage)==null?void 0:E.setItem("injected.connected",!0)),{accounts:d?h.map(_=>({address:_,capabilities:{}})):h,chainId:A}}catch(A){const _=A;throw _.code===bn.code?new bn(_):_.code===Wi.code?new Wi(_):_}},async disconnect(){var l,d;const u=await this.getProvider();if(!u)throw new cu;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await iE(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((l=c.storage)==null?void 0:l.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new cu;return(await u.request({method:"eth_accounts"})).map(d=>Zo(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new cu;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=r();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=wp(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,l;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!t.target&&!await((l=c.storage)==null?void 0:l.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),p=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(C=>window.addEventListener("ethereum#initialized",()=>C(g()),{once:!0}))]:[],new Promise(C=>setTimeout(()=>C(g()),p))]))return!0}throw new cu}return!!(await gl(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){var g,p,y,C;const d=await this.getProvider();if(!d)throw new cu;const f=c.chains.find(N=>N.id===l);if(!f)throw new pa(new N0);const h=new Promise(N=>{const E=A=>{"chainId"in A&&A.chainId===l&&(c.emitter.off("change",E),N())};c.emitter.on("change",E)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ie(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),h]),f}catch(N){const E=N;if(E.code===4902||((p=(g=E==null?void 0:E.data)==null?void 0:g.originalError)==null?void 0:p.code)===4902)try{const{default:A,..._}=f.blockExplorers??{};let O;u!=null&&u.blockExplorerUrls?O=u.blockExplorerUrls:A&&(O=[A.url,...Object.values(_).map(D=>D.url)]);let $;(y=u==null?void 0:u.rpcUrls)!=null&&y.length?$=u.rpcUrls:$=[((C=f.rpcUrls.default)==null?void 0:C.http[0])??""];const M={blockExplorerUrls:O,chainId:Ie(l),chainName:(u==null?void 0:u.chainName)??f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??f.nativeCurrency,rpcUrls:$};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[M]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new bn(new Error("User rejected switch after adding network."))}),h]),f}catch(A){throw new bn(A)}throw E.code===bn.code?new bn(E):new pa(E)}},async onAccountsChanged(u){var l;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((l=c.storage)==null?void 0:l.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(d=>Zo(d))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:d});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const Jce={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:wp(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return wp(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:wp(t,"isPhantom")}}};function wp(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Xce(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Qce(){const t=new Set;let e=[];const n=()=>Xce(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const eue=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let u=o;if(a){const l=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());u=f=>{const h=o(f);if(!l(d,h)){const g=d;a(d=h,g)}},c!=null&&c.fireImmediately&&a(d,d)}return s(u)},t(e,n,r)},tue=eue;function nue(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Yw=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Yw(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Yw(r)(n)}}}},rue=(t,e)=>(n,r,s)=>{let i={storage:nue(()=>localStorage),partialize:p=>p,version:0,merge:(p,y)=>({...y,...p}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,s);const l=()=>{const p=i.partialize({...r()});return u.setItem(i.name,{state:p,version:i.version})},d=s.setState;s.setState=(p,y)=>{d(p,y),l()};const f=t((...p)=>{n(...p),l()},r,s);s.getInitialState=()=>f;let h;const g=()=>{var p,y;if(!u)return;o=!1,a.forEach(N=>{var E;return N((E=r())!=null?E:f)});const C=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(p=r())!=null?p:f))||void 0;return Yw(u.getItem.bind(u))(i.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==i.version){if(i.migrate)return[!0,i.migrate(N.state,N.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var E;const[A,_]=N;if(h=i.merge(_,(E=r())!=null?E:f),n(h,!0),A)return l()}).then(()=>{C==null||C(h,void 0),h=r(),o=!0,c.forEach(N=>N(h))}).catch(N=>{C==null||C(void 0,N)})};return s.persist={setOptions:p=>{i={...i,...p},p.storage&&(u=p.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||g(),h||f},sue=rue,W6=t=>{let e;const n=new Set,r=(u,l)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=l??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,a);return a},jy=t=>t?W6(t):W6;class iue{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new mP})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function oue(t){return new iue(t)}function aue(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function V6(t,e){return t.slice(0,e).join(".")||"."}function K6(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function cue(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=K6(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=K6(s,c);if(l!==0)return r?e.call(this,a,c,V6(i,l)):`[ref=${V6(i,l)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function uue(t,e,n,r){return JSON.stringify(t,cue((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function lue(t){const{deserialize:e=aue,key:n="wagmi",serialize:r=uue,storage:s=gP}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const gP={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function due(){const t=typeof window<"u"&&window.localStorage?window.localStorage:gP;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Zw=256;let Qh=Zw,ep;function fue(t=11){if(!ep||Qh+t>Zw*2){ep="",Qh=0;for(let e=0;e<Zw;e++)ep+=(256+Math.random()*256|0).toString(16).substring(1)}return ep.substring(Qh,Qh+++t)}function Wde(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=lue({storage:due()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Qce():void 0,a=jy(()=>i.chains),c=jy(()=>{const _=[],O=new Set;for(const $ of i.connectors??[]){const M=u($);if(_.push(M),!s&&M.rdns){const D=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const q of D)O.add(q)}}if(!s&&o){const $=o.getProviders();for(const M of $)O.has(M.info.rdns)||_.push(u(l(M)))}return _});function u(_){var M;const O=oue(fue()),$={..._({emitter:O,chains:a.getState(),storage:n,transports:i.transports}),emitter:O,uid:O.uid};return O.on("connect",E),(M=$.setup)==null||M.call($),$}function l(_){const{info:O}=_,$=_.provider;return _v({target:{...O,id:O.rdns,provider:$}})}const d=new Map;function f(_={}){const O=_.chainId??y.getState().chainId,$=a.getState().find(D=>D.id===O);if(_.chainId&&!$)throw new N0;{const D=d.get(y.getState().chainId);if(D&&!$)return D;if(!$)throw new N0}{const D=d.get(O);if(D)return D}let M;if(i.client)M=i.client({chain:$});else{const D=$.id,q=a.getState().map(T=>T.id),j={},L=Object.entries(i);for(const[T,P]of L)if(!(T==="chains"||T==="client"||T==="connectors"||T==="transports"))if(typeof P=="object")if(D in P)j[T]=P[D];else{if(q.some(b=>b in P))continue;j[T]=P}else j[T]=P;M=og({...j,chain:$,batch:j.batch??{multicall:!0},transport:T=>i.transports[D]({...T,connectors:c})})}return d.set(O,M),M}function h(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const p="0.0.0-canary-";bp.startsWith(p)?g=Number.parseInt(bp.replace(p,""),10):g=Number.parseInt(bp.split(".")[0]??"0",10);const y=jy(tue(n?sue(h,{migrate(_,O){if(O===g)return _;const $=h(),M=C(_,$.chainId);return{...$,chainId:M}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([O,$])=>{const{id:M,name:D,type:q,uid:j}=$.connector;return[O,{...$,connector:{id:M,name:D,type:q,uid:j}}]})},chainId:_.chainId,current:_.current}},merge(_,O){typeof _=="object"&&_&&"status"in _&&delete _.status;const $=C(_,O.chainId);return{...O,..._,chainId:$}},skipHydration:s,storage:n,version:g}):h));y.setState(h());function C(_,O){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some($=>$.id===_.chainId)?_.chainId:O}r&&y.subscribe(({connections:_,current:O})=>{var $;return O?($=_.get(O))==null?void 0:$.chainId:void 0},_=>{if(a.getState().some($=>$.id===_))return y.setState($=>({...$,chainId:_??$.chainId}))}),o==null||o.subscribe(_=>{const O=new Set,$=new Set;for(const D of c.getState())if(O.add(D.id),D.rdns){const q=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const j of q)$.add(j)}const M=[];for(const D of _){if($.has(D.info.rdns))continue;const q=u(l(D));O.has(q.id)||M.push(q)}n&&!y.persist.hasHydrated()||c.setState(D=>[...D,...M],!0)});function N(_){y.setState(O=>{const $=O.connections.get(_.uid);return $?{...O,connections:new Map(O.connections).set(_.uid,{accounts:_.accounts??$.accounts,chainId:_.chainId??$.chainId,connector:$.connector})}:O})}function E(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(O=>{const $=c.getState().find(M=>M.uid===_.uid);return $?($.emitter.listenerCount("connect")&&$.emitter.off("connect",N),$.emitter.listenerCount("change")||$.emitter.on("change",N),$.emitter.listenerCount("disconnect")||$.emitter.on("disconnect",A),{...O,connections:new Map(O.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:$}),current:_.uid,status:"connected"}):O})}function A(_){y.setState(O=>{const $=O.connections.get(_.uid);if($){const D=$.connector;D.emitter.listenerCount("change")&&$.connector.emitter.off("change",N),D.emitter.listenerCount("disconnect")&&$.connector.emitter.off("disconnect",A),D.emitter.listenerCount("connect")||$.connector.emitter.on("connect",E)}if(O.connections.delete(_.uid),O.connections.size===0)return{...O,connections:new Map,current:null,status:"disconnected"};const M=O.connections.values().next().value;return{...O,connections:new Map(O.connections),current:M.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:f,get state(){return y.getState()},setState(_){let O;typeof _=="function"?O=_(y.getState()):O=_;const $=h();typeof O!="object"&&(O=$),Object.keys($).some(D=>!(D in O))&&(O=$),y.setState(O,!0)},subscribe(_,O,$){return y.subscribe(_,O,$?{...$,fireImmediately:$.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const _=y.getState(),O=_.connections;let $=_.current;for(const[,M]of O){const D=M.connector;D.isAuthorized&&await D.isAuthorized()||(O.delete(D.uid),$===D.uid&&($=null))}y.setState(M=>({...M,connections:O,current:$}))},store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const O=typeof _=="function"?_(a.getState()):_;if(O.length!==0)return a.setState(O,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:l,setup:u,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:N,connect:E,disconnect:A}}}}function hue(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const u of s??[])if(u.rdns){const l=Array.isArray(u.rdns)?u.rdns:[u.rdns];for(const d of l)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const u of a){if(i.has(u.info.rdns))continue;const l=t._internal.connectors.providerDetailToConnector(u),d=t._internal.connectors.setup(l);o.push(d)}return[...s,...o]})),r?Yce(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function pue(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=hue(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=oa.useRef(!0);return oa.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const gue=oa.createContext(void 0);function Vde(t){const{children:e,config:n}=t,r={value:n};return oa.createElement(pue,t,oa.createElement(gue.Provider,r,e))}export{$d as $,gT as A,J as B,N0 as C,Ve as D,$a as E,kk as F,yn as G,pde as H,Nae as I,ie as J,Dn as K,Jt as L,Ke as M,wt as N,X as O,cu as P,uR as Q,ve as R,pa as S,ir as T,k6 as U,pt as V,It as W,Ft as X,Mt as Y,Fd as Z,mn as _,Sde as a,rx as a$,vue as a0,kb as a1,Qr as a2,$e as a3,Dt as a4,Eue as a5,mde as a6,Ge as a7,hg as a8,Cc as a9,ig as aA,wn as aB,IU as aC,lle as aD,G0 as aE,D1 as aF,li as aG,eE as aH,Lt as aI,Qi as aJ,Pl as aK,og as aL,g9 as aM,wM as aN,hd as aO,yr as aP,ns as aQ,OT as aR,J7 as aS,X7 as aT,X2 as aU,mc as aV,ss as aW,Que as aX,ea as aY,Ur as aZ,Os as a_,Li as aa,gde as ab,Te as ac,Ade as ad,Or as ae,Lr as af,oE as ag,Ix as ah,is as ai,si as aj,hi as ak,an as al,m9 as am,FL as an,Oe as ao,yb as ap,os as aq,l1 as ar,ne as as,Bf as at,qn as au,N1 as av,eI as aw,Up as ax,q0 as ay,Dr as az,jo as b,Vde as b$,da as b0,Tt as b1,$2 as b2,o9 as b3,v1 as b4,xl as b5,fd as b6,rs as b7,Lc as b8,fR as b9,sa as bA,Yoe as bB,pP as bC,Wde as bD,Hde as bE,Fde as bF,Mde as bG,_ae as bH,Ude as bI,kde as bJ,Dde as bK,Lde as bL,qde as bM,Rde as bN,jL as bO,Uc as bP,jde as bQ,Yce as bR,Gce as bS,Ode as bT,Bde as bU,ES as bV,$de as bW,Pde as bX,Zoe as bY,Uf as bZ,Tde as b_,CP as ba,Ld as bb,PP as bc,NP as bd,wue as be,Md as bf,QO as bg,Hw as bh,on as bi,Ede as bj,Cl as bk,sp as bl,D6 as bm,Nv as bn,hde as bo,Dy as bp,e0 as bq,Tc as br,Ad as bs,pu as bt,KM as bu,Ide as bv,xde as bw,kd as bx,pd as by,mS as bz,vde as c,Nde as c0,Ne as c1,zde as d,_de as e,bn as f,Zo as g,_v as h,yp as i,B as j,St as k,Ln as l,ge as m,Ie as n,Rr as o,ae as p,le as q,Cde as r,_e as s,xe as t,us as u,nce as v,iE as w,wde as x,Le as y,gt as z};
